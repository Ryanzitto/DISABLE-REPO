function YU(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function ic(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var GI={exports:{}},Q0={},VI={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh=Symbol.for("react.element"),QU=Symbol.for("react.portal"),qU=Symbol.for("react.fragment"),ZU=Symbol.for("react.strict_mode"),ez=Symbol.for("react.profiler"),tz=Symbol.for("react.provider"),nz=Symbol.for("react.context"),iz=Symbol.for("react.forward_ref"),rz=Symbol.for("react.suspense"),sz=Symbol.for("react.memo"),oz=Symbol.for("react.lazy"),qT=Symbol.iterator;function az(n){return n===null||typeof n!="object"?null:(n=qT&&n[qT]||n["@@iterator"],typeof n=="function"?n:null)}var WI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$I=Object.assign,jI={};function af(n,e,t){this.props=n,this.context=e,this.refs=jI,this.updater=t||WI}af.prototype.isReactComponent={};af.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};af.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function XI(){}XI.prototype=af.prototype;function US(n,e,t){this.props=n,this.context=e,this.refs=jI,this.updater=t||WI}var zS=US.prototype=new XI;zS.constructor=US;$I(zS,af.prototype);zS.isPureReactComponent=!0;var ZT=Array.isArray,JI=Object.prototype.hasOwnProperty,HS={current:null},KI={key:!0,ref:!0,__self:!0,__source:!0};function YI(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)JI.call(e,i)&&!KI.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Lh,type:n,key:s,ref:o,props:r,_owner:HS.current}}function lz(n,e){return{$$typeof:Lh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function GS(n){return typeof n=="object"&&n!==null&&n.$$typeof===Lh}function cz(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var eC=/\/+/g;function vx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?cz(""+n.key):e.toString(36)}function Tg(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Lh:case QU:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+vx(o,0):i,ZT(r)?(t="",n!=null&&(t=n.replace(eC,"$&/")+"/"),Tg(r,e,t,"",function(c){return c})):r!=null&&(GS(r)&&(r=lz(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(eC,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",ZT(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+vx(s,a);o+=Tg(s,e,t,l,r)}else if(l=az(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+vx(s,a++),o+=Tg(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function om(n,e,t){if(n==null)return n;var i=[],r=0;return Tg(n,i,"","",function(s){return e.call(t,s,r++)}),i}function uz(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ki={current:null},Cg={transition:null},fz={ReactCurrentDispatcher:ki,ReactCurrentBatchConfig:Cg,ReactCurrentOwner:HS};Pt.Children={map:om,forEach:function(n,e,t){om(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return om(n,function(){e++}),e},toArray:function(n){return om(n,function(e){return e})||[]},only:function(n){if(!GS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Pt.Component=af;Pt.Fragment=qU;Pt.Profiler=ez;Pt.PureComponent=US;Pt.StrictMode=ZU;Pt.Suspense=rz;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fz;Pt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=$I({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=HS.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)JI.call(e,l)&&!KI.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Lh,type:n.type,key:r,ref:s,props:i,_owner:o}};Pt.createContext=function(n){return n={$$typeof:nz,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:tz,_context:n},n.Consumer=n};Pt.createElement=YI;Pt.createFactory=function(n){var e=YI.bind(null,n);return e.type=n,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(n){return{$$typeof:iz,render:n}};Pt.isValidElement=GS;Pt.lazy=function(n){return{$$typeof:oz,_payload:{_status:-1,_result:n},_init:uz}};Pt.memo=function(n,e){return{$$typeof:sz,type:n,compare:e===void 0?null:e}};Pt.startTransition=function(n){var e=Cg.transition;Cg.transition={};try{n()}finally{Cg.transition=e}};Pt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pt.useCallback=function(n,e){return ki.current.useCallback(n,e)};Pt.useContext=function(n){return ki.current.useContext(n)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(n){return ki.current.useDeferredValue(n)};Pt.useEffect=function(n,e){return ki.current.useEffect(n,e)};Pt.useId=function(){return ki.current.useId()};Pt.useImperativeHandle=function(n,e,t){return ki.current.useImperativeHandle(n,e,t)};Pt.useInsertionEffect=function(n,e){return ki.current.useInsertionEffect(n,e)};Pt.useLayoutEffect=function(n,e){return ki.current.useLayoutEffect(n,e)};Pt.useMemo=function(n,e){return ki.current.useMemo(n,e)};Pt.useReducer=function(n,e,t){return ki.current.useReducer(n,e,t)};Pt.useRef=function(n){return ki.current.useRef(n)};Pt.useState=function(n){return ki.current.useState(n)};Pt.useSyncExternalStore=function(n,e,t){return ki.current.useSyncExternalStore(n,e,t)};Pt.useTransition=function(){return ki.current.useTransition()};Pt.version="18.2.0";VI.exports=Pt;var I=VI.exports;const K=ic(I),dz=YU({__proto__:null,default:K},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hz=I,pz=Symbol.for("react.element"),mz=Symbol.for("react.fragment"),gz=Object.prototype.hasOwnProperty,vz=hz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yz={key:!0,ref:!0,__self:!0,__source:!0};function QI(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)gz.call(e,i)&&!yz.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:pz,type:n,key:s,ref:o,props:r,_owner:vz.current}}Q0.Fragment=mz;Q0.jsx=QI;Q0.jsxs=QI;GI.exports=Q0;var he=GI.exports,g1={},qI={exports:{}},Sr={},ZI={exports:{}},eB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,W){var G=O.length;O.push(W);e:for(;0<G;){var H=G-1>>>1,Y=O[H];if(0<r(Y,W))O[H]=W,O[G]=Y,G=H;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],G=O.pop();if(G!==W){O[0]=G;e:for(var H=0,Y=O.length,me=Y>>>1;H<me;){var ce=2*(H+1)-1,Ae=O[ce],Se=ce+1,Re=O[Se];if(0>r(Ae,G))Se<Y&&0>r(Re,Ae)?(O[H]=Re,O[Se]=G,H=Se):(O[H]=Ae,O[ce]=G,H=ce);else if(Se<Y&&0>r(Re,G))O[H]=Re,O[Se]=G,H=Se;else break e}}return W}function r(O,W){var G=O.sortIndex-W.sortIndex;return G!==0?G:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=O)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function w(O){if(x=!1,S(O),!g)if(t(l)!==null)g=!0,Q(T);else{var W=t(c);W!==null&&ee(w,W.startTime-O)}}function T(O,W){g=!1,x&&(x=!1,v(D),D=-1),m=!0;var G=p;try{for(S(W),d=t(l);d!==null&&(!(d.expirationTime>W)||O&&!N());){var H=d.callback;if(typeof H=="function"){d.callback=null,p=d.priorityLevel;var Y=H(d.expirationTime<=W);W=n.unstable_now(),typeof Y=="function"?d.callback=Y:d===t(l)&&i(l),S(W)}else i(l);d=t(l)}if(d!==null)var me=!0;else{var ce=t(c);ce!==null&&ee(w,ce.startTime-W),me=!1}return me}finally{d=null,p=G,m=!1}}var C=!1,R=null,D=-1,P=5,B=-1;function N(){return!(n.unstable_now()-B<P)}function j(){if(R!==null){var O=n.unstable_now();B=O;var W=!0;try{W=R(!0,O)}finally{W?z():(C=!1,R=null)}}else C=!1}var z;if(typeof A=="function")z=function(){A(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,J=$.port2;$.port1.onmessage=j,z=function(){J.postMessage(null)}}else z=function(){_(j,0)};function Q(O){R=O,C||(C=!0,z())}function ee(O,W){D=_(function(){O(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,Q(T))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var G=p;p=W;try{return O()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=p;p=O;try{return W()}finally{p=G}},n.unstable_scheduleCallback=function(O,W,G){var H=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?H+G:H):G=H,O){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=G+Y,O={id:u++,callback:W,priorityLevel:O,startTime:G,expirationTime:Y,sortIndex:-1},G>H?(O.sortIndex=G,e(c,O),t(l)===null&&O===t(c)&&(x?(v(D),D=-1):x=!0,ee(w,G-H))):(O.sortIndex=Y,e(l,O),g||m||(g=!0,Q(T))),O},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(O){var W=p;return function(){var G=p;p=W;try{return O.apply(this,arguments)}finally{p=G}}}})(eB);ZI.exports=eB;var xz=ZI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tB=I,xr=xz;function Me(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nB=new Set,Yd={};function rc(n,e){Uu(n,e),Uu(n+"Capture",e)}function Uu(n,e){for(Yd[n]=e,n=0;n<e.length;n++)nB.add(e[n])}var Io=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v1=Object.prototype.hasOwnProperty,_z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tC={},nC={};function Az(n){return v1.call(nC,n)?!0:v1.call(tC,n)?!1:_z.test(n)?nC[n]=!0:(tC[n]=!0,!1)}function Sz(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Ez(n,e,t,i){if(e===null||typeof e>"u"||Sz(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ui(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ui[n]=new Ui(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ui[e]=new Ui(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ui[n]=new Ui(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ui[n]=new Ui(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ui[n]=new Ui(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ui[n]=new Ui(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ui[n]=new Ui(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ui[n]=new Ui(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ui[n]=new Ui(n,5,!1,n.toLowerCase(),null,!1,!1)});var VS=/[\-:]([a-z])/g;function WS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(VS,WS);ui[e]=new Ui(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(VS,WS);ui[e]=new Ui(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(VS,WS);ui[e]=new Ui(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ui[n]=new Ui(n,1,!1,n.toLowerCase(),null,!1,!1)});ui.xlinkHref=new Ui("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ui[n]=new Ui(n,1,!1,n.toLowerCase(),null,!0,!0)});function $S(n,e,t,i){var r=ui.hasOwnProperty(e)?ui[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ez(e,t,r,i)&&(t=null),i||r===null?Az(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Go=tB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,am=Symbol.for("react.element"),su=Symbol.for("react.portal"),ou=Symbol.for("react.fragment"),jS=Symbol.for("react.strict_mode"),y1=Symbol.for("react.profiler"),iB=Symbol.for("react.provider"),rB=Symbol.for("react.context"),XS=Symbol.for("react.forward_ref"),x1=Symbol.for("react.suspense"),_1=Symbol.for("react.suspense_list"),JS=Symbol.for("react.memo"),da=Symbol.for("react.lazy"),sB=Symbol.for("react.offscreen"),iC=Symbol.iterator;function jf(n){return n===null||typeof n!="object"?null:(n=iC&&n[iC]||n["@@iterator"],typeof n=="function"?n:null)}var yn=Object.assign,yx;function yd(n){if(yx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);yx=e&&e[1]||""}return`
`+yx+n}var xx=!1;function _x(n,e){if(!n||xx)return"";xx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{xx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?yd(n):""}function wz(n){switch(n.tag){case 5:return yd(n.type);case 16:return yd("Lazy");case 13:return yd("Suspense");case 19:return yd("SuspenseList");case 0:case 2:case 15:return n=_x(n.type,!1),n;case 11:return n=_x(n.type.render,!1),n;case 1:return n=_x(n.type,!0),n;default:return""}}function A1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ou:return"Fragment";case su:return"Portal";case y1:return"Profiler";case jS:return"StrictMode";case x1:return"Suspense";case _1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case rB:return(n.displayName||"Context")+".Consumer";case iB:return(n._context.displayName||"Context")+".Provider";case XS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case JS:return e=n.displayName||null,e!==null?e:A1(n.type)||"Memo";case da:e=n._payload,n=n._init;try{return A1(n(e))}catch{}}return null}function Mz(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A1(e);case 8:return e===jS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Oa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function oB(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Tz(n){var e=oB(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function lm(n){n._valueTracker||(n._valueTracker=Tz(n))}function aB(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=oB(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Kg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function S1(n,e){var t=e.checked;return yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function rC(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Oa(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lB(n,e){e=e.checked,e!=null&&$S(n,"checked",e,!1)}function E1(n,e){lB(n,e);var t=Oa(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?w1(n,e.type,t):e.hasOwnProperty("defaultValue")&&w1(n,e.type,Oa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function sC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function w1(n,e,t){(e!=="number"||Kg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var xd=Array.isArray;function Tu(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Oa(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function M1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Me(91));return yn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function oC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Me(92));if(xd(t)){if(1<t.length)throw Error(Me(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Oa(t)}}function cB(n,e){var t=Oa(e.value),i=Oa(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function aC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function uB(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function T1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?uB(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var cm,fB=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(cm=cm||document.createElement("div"),cm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Qd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Td={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cz=["Webkit","ms","Moz","O"];Object.keys(Td).forEach(function(n){Cz.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Td[e]=Td[n]})});function dB(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Td.hasOwnProperty(n)&&Td[n]?(""+e).trim():e+"px"}function hB(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=dB(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var bz=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function C1(n,e){if(e){if(bz[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Me(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Me(62))}}function b1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var R1=null;function KS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var P1=null,Cu=null,bu=null;function lC(n){if(n=Nh(n)){if(typeof P1!="function")throw Error(Me(280));var e=n.stateNode;e&&(e=nv(e),P1(n.stateNode,n.type,e))}}function pB(n){Cu?bu?bu.push(n):bu=[n]:Cu=n}function mB(){if(Cu){var n=Cu,e=bu;if(bu=Cu=null,lC(n),e)for(n=0;n<e.length;n++)lC(e[n])}}function gB(n,e){return n(e)}function vB(){}var Ax=!1;function yB(n,e,t){if(Ax)return n(e,t);Ax=!0;try{return gB(n,e,t)}finally{Ax=!1,(Cu!==null||bu!==null)&&(vB(),mB())}}function qd(n,e){var t=n.stateNode;if(t===null)return null;var i=nv(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Me(231,e,typeof t));return t}var I1=!1;if(Io)try{var Xf={};Object.defineProperty(Xf,"passive",{get:function(){I1=!0}}),window.addEventListener("test",Xf,Xf),window.removeEventListener("test",Xf,Xf)}catch{I1=!1}function Rz(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Cd=!1,Yg=null,Qg=!1,B1=null,Pz={onError:function(n){Cd=!0,Yg=n}};function Iz(n,e,t,i,r,s,o,a,l){Cd=!1,Yg=null,Rz.apply(Pz,arguments)}function Bz(n,e,t,i,r,s,o,a,l){if(Iz.apply(this,arguments),Cd){if(Cd){var c=Yg;Cd=!1,Yg=null}else throw Error(Me(198));Qg||(Qg=!0,B1=c)}}function sc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function xB(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function cC(n){if(sc(n)!==n)throw Error(Me(188))}function Dz(n){var e=n.alternate;if(!e){if(e=sc(n),e===null)throw Error(Me(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return cC(r),n;if(s===i)return cC(r),e;s=s.sibling}throw Error(Me(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Me(189))}}if(t.alternate!==i)throw Error(Me(190))}if(t.tag!==3)throw Error(Me(188));return t.stateNode.current===t?n:e}function _B(n){return n=Dz(n),n!==null?AB(n):null}function AB(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=AB(n);if(e!==null)return e;n=n.sibling}return null}var SB=xr.unstable_scheduleCallback,uC=xr.unstable_cancelCallback,Lz=xr.unstable_shouldYield,Oz=xr.unstable_requestPaint,Dn=xr.unstable_now,Fz=xr.unstable_getCurrentPriorityLevel,YS=xr.unstable_ImmediatePriority,EB=xr.unstable_UserBlockingPriority,qg=xr.unstable_NormalPriority,Nz=xr.unstable_LowPriority,wB=xr.unstable_IdlePriority,q0=null,Gs=null;function kz(n){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(q0,n,void 0,(n.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:Hz,Uz=Math.log,zz=Math.LN2;function Hz(n){return n>>>=0,n===0?32:31-(Uz(n)/zz|0)|0}var um=64,fm=4194304;function _d(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Zg(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=_d(a):(s&=o,s!==0&&(i=_d(s)))}else o=t&~r,o!==0?i=_d(o):s!==0&&(i=_d(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-gs(e),r=1<<t,i|=n[t],e&=~r;return i}function Gz(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vz(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-gs(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=Gz(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function D1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function MB(){var n=um;return um<<=1,!(um&4194240)&&(um=64),n}function Sx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Oh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-gs(e),n[e]=t}function Wz(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-gs(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function QS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-gs(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Ht=0;function TB(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var CB,qS,bB,RB,PB,L1=!1,dm=[],Sa=null,Ea=null,wa=null,Zd=new Map,eh=new Map,va=[],$z="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fC(n,e){switch(n){case"focusin":case"focusout":Sa=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":Zd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":eh.delete(e.pointerId)}}function Jf(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Nh(e),e!==null&&qS(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function jz(n,e,t,i,r){switch(e){case"focusin":return Sa=Jf(Sa,n,e,t,i,r),!0;case"dragenter":return Ea=Jf(Ea,n,e,t,i,r),!0;case"mouseover":return wa=Jf(wa,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Zd.set(s,Jf(Zd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,eh.set(s,Jf(eh.get(s)||null,n,e,t,i,r)),!0}return!1}function IB(n){var e=Tl(n.target);if(e!==null){var t=sc(e);if(t!==null){if(e=t.tag,e===13){if(e=xB(t),e!==null){n.blockedOn=e,PB(n.priority,function(){bB(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function bg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=O1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);R1=i,t.target.dispatchEvent(i),R1=null}else return e=Nh(t),e!==null&&qS(e),n.blockedOn=t,!1;e.shift()}return!0}function dC(n,e,t){bg(n)&&t.delete(e)}function Xz(){L1=!1,Sa!==null&&bg(Sa)&&(Sa=null),Ea!==null&&bg(Ea)&&(Ea=null),wa!==null&&bg(wa)&&(wa=null),Zd.forEach(dC),eh.forEach(dC)}function Kf(n,e){n.blockedOn===e&&(n.blockedOn=null,L1||(L1=!0,xr.unstable_scheduleCallback(xr.unstable_NormalPriority,Xz)))}function th(n){function e(r){return Kf(r,n)}if(0<dm.length){Kf(dm[0],n);for(var t=1;t<dm.length;t++){var i=dm[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Sa!==null&&Kf(Sa,n),Ea!==null&&Kf(Ea,n),wa!==null&&Kf(wa,n),Zd.forEach(e),eh.forEach(e),t=0;t<va.length;t++)i=va[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<va.length&&(t=va[0],t.blockedOn===null);)IB(t),t.blockedOn===null&&va.shift()}var Ru=Go.ReactCurrentBatchConfig,e0=!0;function Jz(n,e,t,i){var r=Ht,s=Ru.transition;Ru.transition=null;try{Ht=1,ZS(n,e,t,i)}finally{Ht=r,Ru.transition=s}}function Kz(n,e,t,i){var r=Ht,s=Ru.transition;Ru.transition=null;try{Ht=4,ZS(n,e,t,i)}finally{Ht=r,Ru.transition=s}}function ZS(n,e,t,i){if(e0){var r=O1(n,e,t,i);if(r===null)Bx(n,e,i,t0,t),fC(n,i);else if(jz(r,n,e,t,i))i.stopPropagation();else if(fC(n,i),e&4&&-1<$z.indexOf(n)){for(;r!==null;){var s=Nh(r);if(s!==null&&CB(s),s=O1(n,e,t,i),s===null&&Bx(n,e,i,t0,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Bx(n,e,i,null,t)}}var t0=null;function O1(n,e,t,i){if(t0=null,n=KS(i),n=Tl(n),n!==null)if(e=sc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=xB(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return t0=n,null}function BB(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fz()){case YS:return 1;case EB:return 4;case qg:case Nz:return 16;case wB:return 536870912;default:return 16}default:return 16}}var xa=null,eE=null,Rg=null;function DB(){if(Rg)return Rg;var n,e=eE,t=e.length,i,r="value"in xa?xa.value:xa.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Rg=r.slice(n,1<i?1-i:void 0)}function Pg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function hm(){return!0}function hC(){return!1}function Er(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hm:hC,this.isPropagationStopped=hC,this}return yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=hm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=hm)},persist:function(){},isPersistent:hm}),e}var lf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tE=Er(lf),Fh=yn({},lf,{view:0,detail:0}),Yz=Er(Fh),Ex,wx,Yf,Z0=yn({},Fh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Yf&&(Yf&&n.type==="mousemove"?(Ex=n.screenX-Yf.screenX,wx=n.screenY-Yf.screenY):wx=Ex=0,Yf=n),Ex)},movementY:function(n){return"movementY"in n?n.movementY:wx}}),pC=Er(Z0),Qz=yn({},Z0,{dataTransfer:0}),qz=Er(Qz),Zz=yn({},Fh,{relatedTarget:0}),Mx=Er(Zz),eH=yn({},lf,{animationName:0,elapsedTime:0,pseudoElement:0}),tH=Er(eH),nH=yn({},lf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),iH=Er(nH),rH=yn({},lf,{data:0}),mC=Er(rH),sH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lH(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=aH[n])?!!e[n]:!1}function nE(){return lH}var cH=yn({},Fh,{key:function(n){if(n.key){var e=sH[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Pg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?oH[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nE,charCode:function(n){return n.type==="keypress"?Pg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),uH=Er(cH),fH=yn({},Z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gC=Er(fH),dH=yn({},Fh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nE}),hH=Er(dH),pH=yn({},lf,{propertyName:0,elapsedTime:0,pseudoElement:0}),mH=Er(pH),gH=yn({},Z0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),vH=Er(gH),yH=[9,13,27,32],iE=Io&&"CompositionEvent"in window,bd=null;Io&&"documentMode"in document&&(bd=document.documentMode);var xH=Io&&"TextEvent"in window&&!bd,LB=Io&&(!iE||bd&&8<bd&&11>=bd),vC=String.fromCharCode(32),yC=!1;function OB(n,e){switch(n){case"keyup":return yH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FB(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var au=!1;function _H(n,e){switch(n){case"compositionend":return FB(e);case"keypress":return e.which!==32?null:(yC=!0,vC);case"textInput":return n=e.data,n===vC&&yC?null:n;default:return null}}function AH(n,e){if(au)return n==="compositionend"||!iE&&OB(n,e)?(n=DB(),Rg=eE=xa=null,au=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LB&&e.locale!=="ko"?null:e.data;default:return null}}var SH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!SH[n.type]:e==="textarea"}function NB(n,e,t,i){pB(i),e=n0(e,"onChange"),0<e.length&&(t=new tE("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Rd=null,nh=null;function EH(n){JB(n,0)}function ev(n){var e=uu(n);if(aB(e))return n}function wH(n,e){if(n==="change")return e}var kB=!1;if(Io){var Tx;if(Io){var Cx="oninput"in document;if(!Cx){var _C=document.createElement("div");_C.setAttribute("oninput","return;"),Cx=typeof _C.oninput=="function"}Tx=Cx}else Tx=!1;kB=Tx&&(!document.documentMode||9<document.documentMode)}function AC(){Rd&&(Rd.detachEvent("onpropertychange",UB),nh=Rd=null)}function UB(n){if(n.propertyName==="value"&&ev(nh)){var e=[];NB(e,nh,n,KS(n)),yB(EH,e)}}function MH(n,e,t){n==="focusin"?(AC(),Rd=e,nh=t,Rd.attachEvent("onpropertychange",UB)):n==="focusout"&&AC()}function TH(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ev(nh)}function CH(n,e){if(n==="click")return ev(e)}function bH(n,e){if(n==="input"||n==="change")return ev(e)}function RH(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var _s=typeof Object.is=="function"?Object.is:RH;function ih(n,e){if(_s(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!v1.call(e,r)||!_s(n[r],e[r]))return!1}return!0}function SC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function EC(n,e){var t=SC(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=SC(t)}}function zB(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?zB(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function HB(){for(var n=window,e=Kg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Kg(n.document)}return e}function rE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function PH(n){var e=HB(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&zB(t.ownerDocument.documentElement,t)){if(i!==null&&rE(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=EC(t,s);var o=EC(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var IH=Io&&"documentMode"in document&&11>=document.documentMode,lu=null,F1=null,Pd=null,N1=!1;function wC(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;N1||lu==null||lu!==Kg(i)||(i=lu,"selectionStart"in i&&rE(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Pd&&ih(Pd,i)||(Pd=i,i=n0(F1,"onSelect"),0<i.length&&(e=new tE("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=lu)))}function pm(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var cu={animationend:pm("Animation","AnimationEnd"),animationiteration:pm("Animation","AnimationIteration"),animationstart:pm("Animation","AnimationStart"),transitionend:pm("Transition","TransitionEnd")},bx={},GB={};Io&&(GB=document.createElement("div").style,"AnimationEvent"in window||(delete cu.animationend.animation,delete cu.animationiteration.animation,delete cu.animationstart.animation),"TransitionEvent"in window||delete cu.transitionend.transition);function tv(n){if(bx[n])return bx[n];if(!cu[n])return n;var e=cu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in GB)return bx[n]=e[t];return n}var VB=tv("animationend"),WB=tv("animationiteration"),$B=tv("animationstart"),jB=tv("transitionend"),XB=new Map,MC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $a(n,e){XB.set(n,e),rc(e,[n])}for(var Rx=0;Rx<MC.length;Rx++){var Px=MC[Rx],BH=Px.toLowerCase(),DH=Px[0].toUpperCase()+Px.slice(1);$a(BH,"on"+DH)}$a(VB,"onAnimationEnd");$a(WB,"onAnimationIteration");$a($B,"onAnimationStart");$a("dblclick","onDoubleClick");$a("focusin","onFocus");$a("focusout","onBlur");$a(jB,"onTransitionEnd");Uu("onMouseEnter",["mouseout","mouseover"]);Uu("onMouseLeave",["mouseout","mouseover"]);Uu("onPointerEnter",["pointerout","pointerover"]);Uu("onPointerLeave",["pointerout","pointerover"]);rc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rc("onBeforeInput",["compositionend","keypress","textInput","paste"]);rc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ad));function TC(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,Bz(i,e,void 0,n),n.currentTarget=null}function JB(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;TC(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;TC(r,a,c),s=l}}}if(Qg)throw n=B1,Qg=!1,B1=null,n}function en(n,e){var t=e[G1];t===void 0&&(t=e[G1]=new Set);var i=n+"__bubble";t.has(i)||(KB(e,n,2,!1),t.add(i))}function Ix(n,e,t){var i=0;e&&(i|=4),KB(t,n,i,e)}var mm="_reactListening"+Math.random().toString(36).slice(2);function rh(n){if(!n[mm]){n[mm]=!0,nB.forEach(function(t){t!=="selectionchange"&&(LH.has(t)||Ix(t,!1,n),Ix(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[mm]||(e[mm]=!0,Ix("selectionchange",!1,e))}}function KB(n,e,t,i){switch(BB(e)){case 1:var r=Jz;break;case 4:r=Kz;break;default:r=ZS}t=r.bind(null,e,t,n),r=void 0,!I1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Bx(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Tl(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}yB(function(){var c=s,u=KS(t),d=[];e:{var p=XB.get(n);if(p!==void 0){var m=tE,g=n;switch(n){case"keypress":if(Pg(t)===0)break e;case"keydown":case"keyup":m=uH;break;case"focusin":g="focus",m=Mx;break;case"focusout":g="blur",m=Mx;break;case"beforeblur":case"afterblur":m=Mx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=pC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=qz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=hH;break;case VB:case WB:case $B:m=tH;break;case jB:m=mH;break;case"scroll":m=Yz;break;case"wheel":m=vH;break;case"copy":case"cut":case"paste":m=iH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=gC}var x=(e&4)!==0,_=!x&&n==="scroll",v=x?p!==null?p+"Capture":null:p;x=[];for(var A=c,S;A!==null;){S=A;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,v!==null&&(w=qd(A,v),w!=null&&x.push(sh(A,w,S)))),_)break;A=A.return}0<x.length&&(p=new m(p,g,null,t,u),d.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==R1&&(g=t.relatedTarget||t.fromElement)&&(Tl(g)||g[Bo]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=c,g=g?Tl(g):null,g!==null&&(_=sc(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(x=pC,w="onMouseLeave",v="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(x=gC,w="onPointerLeave",v="onPointerEnter",A="pointer"),_=m==null?p:uu(m),S=g==null?p:uu(g),p=new x(w,A+"leave",m,t,u),p.target=_,p.relatedTarget=S,w=null,Tl(u)===c&&(x=new x(v,A+"enter",g,t,u),x.target=S,x.relatedTarget=_,w=x),_=w,m&&g)t:{for(x=m,v=g,A=0,S=x;S;S=bc(S))A++;for(S=0,w=v;w;w=bc(w))S++;for(;0<A-S;)x=bc(x),A--;for(;0<S-A;)v=bc(v),S--;for(;A--;){if(x===v||v!==null&&x===v.alternate)break t;x=bc(x),v=bc(v)}x=null}else x=null;m!==null&&CC(d,p,m,x,!1),g!==null&&_!==null&&CC(d,_,g,x,!0)}}e:{if(p=c?uu(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var T=wH;else if(xC(p))if(kB)T=bH;else{T=TH;var C=MH}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=CH);if(T&&(T=T(n,c))){NB(d,T,t,u);break e}C&&C(n,p,c),n==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&w1(p,"number",p.value)}switch(C=c?uu(c):window,n){case"focusin":(xC(C)||C.contentEditable==="true")&&(lu=C,F1=c,Pd=null);break;case"focusout":Pd=F1=lu=null;break;case"mousedown":N1=!0;break;case"contextmenu":case"mouseup":case"dragend":N1=!1,wC(d,t,u);break;case"selectionchange":if(IH)break;case"keydown":case"keyup":wC(d,t,u)}var R;if(iE)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else au?OB(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(LB&&t.locale!=="ko"&&(au||D!=="onCompositionStart"?D==="onCompositionEnd"&&au&&(R=DB()):(xa=u,eE="value"in xa?xa.value:xa.textContent,au=!0)),C=n0(c,D),0<C.length&&(D=new mC(D,n,null,t,u),d.push({event:D,listeners:C}),R?D.data=R:(R=FB(t),R!==null&&(D.data=R)))),(R=xH?_H(n,t):AH(n,t))&&(c=n0(c,"onBeforeInput"),0<c.length&&(u=new mC("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=R))}JB(d,e)})}function sh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function n0(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=qd(n,t),s!=null&&i.unshift(sh(n,s,r)),s=qd(n,e),s!=null&&i.push(sh(n,s,r))),n=n.return}return i}function bc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function CC(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=qd(t,s),l!=null&&o.unshift(sh(t,l,a))):r||(l=qd(t,s),l!=null&&o.push(sh(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var OH=/\r\n?/g,FH=/\u0000|\uFFFD/g;function bC(n){return(typeof n=="string"?n:""+n).replace(OH,`
`).replace(FH,"")}function gm(n,e,t){if(e=bC(e),bC(n)!==e&&t)throw Error(Me(425))}function i0(){}var k1=null,U1=null;function z1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var H1=typeof setTimeout=="function"?setTimeout:void 0,NH=typeof clearTimeout=="function"?clearTimeout:void 0,RC=typeof Promise=="function"?Promise:void 0,kH=typeof queueMicrotask=="function"?queueMicrotask:typeof RC<"u"?function(n){return RC.resolve(null).then(n).catch(UH)}:H1;function UH(n){setTimeout(function(){throw n})}function Dx(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),th(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);th(e)}function Ma(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function PC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var cf=Math.random().toString(36).slice(2),Us="__reactFiber$"+cf,oh="__reactProps$"+cf,Bo="__reactContainer$"+cf,G1="__reactEvents$"+cf,zH="__reactListeners$"+cf,HH="__reactHandles$"+cf;function Tl(n){var e=n[Us];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Bo]||t[Us]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=PC(n);n!==null;){if(t=n[Us])return t;n=PC(n)}return e}n=t,t=n.parentNode}return null}function Nh(n){return n=n[Us]||n[Bo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function uu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Me(33))}function nv(n){return n[oh]||null}var V1=[],fu=-1;function ja(n){return{current:n}}function rn(n){0>fu||(n.current=V1[fu],V1[fu]=null,fu--)}function Qt(n,e){fu++,V1[fu]=n.current,n.current=e}var Fa={},Mi=ja(Fa),Zi=ja(!1),Vl=Fa;function zu(n,e){var t=n.type.contextTypes;if(!t)return Fa;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function er(n){return n=n.childContextTypes,n!=null}function r0(){rn(Zi),rn(Mi)}function IC(n,e,t){if(Mi.current!==Fa)throw Error(Me(168));Qt(Mi,e),Qt(Zi,t)}function YB(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Me(108,Mz(n)||"Unknown",r));return yn({},t,i)}function s0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Fa,Vl=Mi.current,Qt(Mi,n),Qt(Zi,Zi.current),!0}function BC(n,e,t){var i=n.stateNode;if(!i)throw Error(Me(169));t?(n=YB(n,e,Vl),i.__reactInternalMemoizedMergedChildContext=n,rn(Zi),rn(Mi),Qt(Mi,n)):rn(Zi),Qt(Zi,t)}var vo=null,iv=!1,Lx=!1;function QB(n){vo===null?vo=[n]:vo.push(n)}function GH(n){iv=!0,QB(n)}function Xa(){if(!Lx&&vo!==null){Lx=!0;var n=0,e=Ht;try{var t=vo;for(Ht=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}vo=null,iv=!1}catch(r){throw vo!==null&&(vo=vo.slice(n+1)),SB(YS,Xa),r}finally{Ht=e,Lx=!1}}return null}var du=[],hu=0,o0=null,a0=0,Nr=[],kr=0,Wl=null,So=1,Eo="";function xl(n,e){du[hu++]=a0,du[hu++]=o0,o0=n,a0=e}function qB(n,e,t){Nr[kr++]=So,Nr[kr++]=Eo,Nr[kr++]=Wl,Wl=n;var i=So;n=Eo;var r=32-gs(i)-1;i&=~(1<<r),t+=1;var s=32-gs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,So=1<<32-gs(e)+r|t<<r|i,Eo=s+n}else So=1<<s|t<<r|i,Eo=n}function sE(n){n.return!==null&&(xl(n,1),qB(n,1,0))}function oE(n){for(;n===o0;)o0=du[--hu],du[hu]=null,a0=du[--hu],du[hu]=null;for(;n===Wl;)Wl=Nr[--kr],Nr[kr]=null,Eo=Nr[--kr],Nr[kr]=null,So=Nr[--kr],Nr[kr]=null}var mr=null,hr=null,on=!1,fs=null;function ZB(n,e){var t=Gr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function DC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,mr=n,hr=Ma(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,mr=n,hr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Wl!==null?{id:So,overflow:Eo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Gr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,mr=n,hr=null,!0):!1;default:return!1}}function W1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function $1(n){if(on){var e=hr;if(e){var t=e;if(!DC(n,e)){if(W1(n))throw Error(Me(418));e=Ma(t.nextSibling);var i=mr;e&&DC(n,e)?ZB(i,t):(n.flags=n.flags&-4097|2,on=!1,mr=n)}}else{if(W1(n))throw Error(Me(418));n.flags=n.flags&-4097|2,on=!1,mr=n}}}function LC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mr=n}function vm(n){if(n!==mr)return!1;if(!on)return LC(n),on=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!z1(n.type,n.memoizedProps)),e&&(e=hr)){if(W1(n))throw eD(),Error(Me(418));for(;e;)ZB(n,e),e=Ma(e.nextSibling)}if(LC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Me(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){hr=Ma(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}hr=null}}else hr=mr?Ma(n.stateNode.nextSibling):null;return!0}function eD(){for(var n=hr;n;)n=Ma(n.nextSibling)}function Hu(){hr=mr=null,on=!1}function aE(n){fs===null?fs=[n]:fs.push(n)}var VH=Go.ReactCurrentBatchConfig;function ls(n,e){if(n&&n.defaultProps){e=yn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var l0=ja(null),c0=null,pu=null,lE=null;function cE(){lE=pu=c0=null}function uE(n){var e=l0.current;rn(l0),n._currentValue=e}function j1(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Pu(n,e){c0=n,lE=pu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Qi=!0),n.firstContext=null)}function $r(n){var e=n._currentValue;if(lE!==n)if(n={context:n,memoizedValue:e,next:null},pu===null){if(c0===null)throw Error(Me(308));pu=n,c0.dependencies={lanes:0,firstContext:n}}else pu=pu.next=n;return e}var Cl=null;function fE(n){Cl===null?Cl=[n]:Cl.push(n)}function tD(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,fE(e)):(t.next=r.next,r.next=t),e.interleaved=t,Do(n,i)}function Do(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ha=!1;function dE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nD(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function To(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ta(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Lt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Do(n,t)}return r=i.interleaved,r===null?(e.next=e,fE(i)):(e.next=r.next,r.next=e),i.interleaved=e,Do(n,t)}function Ig(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,QS(n,t)}}function OC(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function u0(n,e,t,i){var r=n.updateQueue;ha=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,x=a;switch(p=e,m=t,x.tag){case 1:if(g=x.payload,typeof g=="function"){d=g.call(m,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,p=typeof g=="function"?g.call(m,d,p):g,p==null)break e;d=yn({},d,p);break e;case 2:ha=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);jl|=o,n.lanes=o,n.memoizedState=d}}function FC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Me(191,r));r.call(i)}}}var iD=new tB.Component().refs;function X1(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:yn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var rv={isMounted:function(n){return(n=n._reactInternals)?sc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Fi(),r=ba(n),s=To(i,r);s.payload=e,t!=null&&(s.callback=t),e=Ta(n,s,r),e!==null&&(vs(e,n,r,i),Ig(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Fi(),r=ba(n),s=To(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ta(n,s,r),e!==null&&(vs(e,n,r,i),Ig(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Fi(),i=ba(n),r=To(t,i);r.tag=2,e!=null&&(r.callback=e),e=Ta(n,r,i),e!==null&&(vs(e,n,i,t),Ig(e,n,i))}};function NC(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ih(t,i)||!ih(r,s):!0}function rD(n,e,t){var i=!1,r=Fa,s=e.contextType;return typeof s=="object"&&s!==null?s=$r(s):(r=er(e)?Vl:Mi.current,i=e.contextTypes,s=(i=i!=null)?zu(n,r):Fa),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rv,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function kC(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&rv.enqueueReplaceState(e,e.state,null)}function J1(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=iD,dE(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=$r(s):(s=er(e)?Vl:Mi.current,r.context=zu(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(X1(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&rv.enqueueReplaceState(r,r.state,null),u0(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Qf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Me(309));var i=t.stateNode}if(!i)throw Error(Me(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===iD&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Me(284));if(!t._owner)throw Error(Me(290,n))}return n}function ym(n,e){throw n=Object.prototype.toString.call(e),Error(Me(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function UC(n){var e=n._init;return e(n._payload)}function sD(n){function e(v,A){if(n){var S=v.deletions;S===null?(v.deletions=[A],v.flags|=16):S.push(A)}}function t(v,A){if(!n)return null;for(;A!==null;)e(v,A),A=A.sibling;return null}function i(v,A){for(v=new Map;A!==null;)A.key!==null?v.set(A.key,A):v.set(A.index,A),A=A.sibling;return v}function r(v,A){return v=Ra(v,A),v.index=0,v.sibling=null,v}function s(v,A,S){return v.index=S,n?(S=v.alternate,S!==null?(S=S.index,S<A?(v.flags|=2,A):S):(v.flags|=2,A)):(v.flags|=1048576,A)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,A,S,w){return A===null||A.tag!==6?(A=Hx(S,v.mode,w),A.return=v,A):(A=r(A,S),A.return=v,A)}function l(v,A,S,w){var T=S.type;return T===ou?u(v,A,S.props.children,w,S.key):A!==null&&(A.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===da&&UC(T)===A.type)?(w=r(A,S.props),w.ref=Qf(v,A,S),w.return=v,w):(w=Ng(S.type,S.key,S.props,null,v.mode,w),w.ref=Qf(v,A,S),w.return=v,w)}function c(v,A,S,w){return A===null||A.tag!==4||A.stateNode.containerInfo!==S.containerInfo||A.stateNode.implementation!==S.implementation?(A=Gx(S,v.mode,w),A.return=v,A):(A=r(A,S.children||[]),A.return=v,A)}function u(v,A,S,w,T){return A===null||A.tag!==7?(A=Fl(S,v.mode,w,T),A.return=v,A):(A=r(A,S),A.return=v,A)}function d(v,A,S){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Hx(""+A,v.mode,S),A.return=v,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case am:return S=Ng(A.type,A.key,A.props,null,v.mode,S),S.ref=Qf(v,null,A),S.return=v,S;case su:return A=Gx(A,v.mode,S),A.return=v,A;case da:var w=A._init;return d(v,w(A._payload),S)}if(xd(A)||jf(A))return A=Fl(A,v.mode,S,null),A.return=v,A;ym(v,A)}return null}function p(v,A,S,w){var T=A!==null?A.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:a(v,A,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case am:return S.key===T?l(v,A,S,w):null;case su:return S.key===T?c(v,A,S,w):null;case da:return T=S._init,p(v,A,T(S._payload),w)}if(xd(S)||jf(S))return T!==null?null:u(v,A,S,w,null);ym(v,S)}return null}function m(v,A,S,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(S)||null,a(A,v,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case am:return v=v.get(w.key===null?S:w.key)||null,l(A,v,w,T);case su:return v=v.get(w.key===null?S:w.key)||null,c(A,v,w,T);case da:var C=w._init;return m(v,A,S,C(w._payload),T)}if(xd(w)||jf(w))return v=v.get(S)||null,u(A,v,w,T,null);ym(A,w)}return null}function g(v,A,S,w){for(var T=null,C=null,R=A,D=A=0,P=null;R!==null&&D<S.length;D++){R.index>D?(P=R,R=null):P=R.sibling;var B=p(v,R,S[D],w);if(B===null){R===null&&(R=P);break}n&&R&&B.alternate===null&&e(v,R),A=s(B,A,D),C===null?T=B:C.sibling=B,C=B,R=P}if(D===S.length)return t(v,R),on&&xl(v,D),T;if(R===null){for(;D<S.length;D++)R=d(v,S[D],w),R!==null&&(A=s(R,A,D),C===null?T=R:C.sibling=R,C=R);return on&&xl(v,D),T}for(R=i(v,R);D<S.length;D++)P=m(R,v,D,S[D],w),P!==null&&(n&&P.alternate!==null&&R.delete(P.key===null?D:P.key),A=s(P,A,D),C===null?T=P:C.sibling=P,C=P);return n&&R.forEach(function(N){return e(v,N)}),on&&xl(v,D),T}function x(v,A,S,w){var T=jf(S);if(typeof T!="function")throw Error(Me(150));if(S=T.call(S),S==null)throw Error(Me(151));for(var C=T=null,R=A,D=A=0,P=null,B=S.next();R!==null&&!B.done;D++,B=S.next()){R.index>D?(P=R,R=null):P=R.sibling;var N=p(v,R,B.value,w);if(N===null){R===null&&(R=P);break}n&&R&&N.alternate===null&&e(v,R),A=s(N,A,D),C===null?T=N:C.sibling=N,C=N,R=P}if(B.done)return t(v,R),on&&xl(v,D),T;if(R===null){for(;!B.done;D++,B=S.next())B=d(v,B.value,w),B!==null&&(A=s(B,A,D),C===null?T=B:C.sibling=B,C=B);return on&&xl(v,D),T}for(R=i(v,R);!B.done;D++,B=S.next())B=m(R,v,D,B.value,w),B!==null&&(n&&B.alternate!==null&&R.delete(B.key===null?D:B.key),A=s(B,A,D),C===null?T=B:C.sibling=B,C=B);return n&&R.forEach(function(j){return e(v,j)}),on&&xl(v,D),T}function _(v,A,S,w){if(typeof S=="object"&&S!==null&&S.type===ou&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case am:e:{for(var T=S.key,C=A;C!==null;){if(C.key===T){if(T=S.type,T===ou){if(C.tag===7){t(v,C.sibling),A=r(C,S.props.children),A.return=v,v=A;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===da&&UC(T)===C.type){t(v,C.sibling),A=r(C,S.props),A.ref=Qf(v,C,S),A.return=v,v=A;break e}t(v,C);break}else e(v,C);C=C.sibling}S.type===ou?(A=Fl(S.props.children,v.mode,w,S.key),A.return=v,v=A):(w=Ng(S.type,S.key,S.props,null,v.mode,w),w.ref=Qf(v,A,S),w.return=v,v=w)}return o(v);case su:e:{for(C=S.key;A!==null;){if(A.key===C)if(A.tag===4&&A.stateNode.containerInfo===S.containerInfo&&A.stateNode.implementation===S.implementation){t(v,A.sibling),A=r(A,S.children||[]),A.return=v,v=A;break e}else{t(v,A);break}else e(v,A);A=A.sibling}A=Gx(S,v.mode,w),A.return=v,v=A}return o(v);case da:return C=S._init,_(v,A,C(S._payload),w)}if(xd(S))return g(v,A,S,w);if(jf(S))return x(v,A,S,w);ym(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,A!==null&&A.tag===6?(t(v,A.sibling),A=r(A,S),A.return=v,v=A):(t(v,A),A=Hx(S,v.mode,w),A.return=v,v=A),o(v)):t(v,A)}return _}var Gu=sD(!0),oD=sD(!1),kh={},Vs=ja(kh),ah=ja(kh),lh=ja(kh);function bl(n){if(n===kh)throw Error(Me(174));return n}function hE(n,e){switch(Qt(lh,e),Qt(ah,n),Qt(Vs,kh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:T1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=T1(e,n)}rn(Vs),Qt(Vs,e)}function Vu(){rn(Vs),rn(ah),rn(lh)}function aD(n){bl(lh.current);var e=bl(Vs.current),t=T1(e,n.type);e!==t&&(Qt(ah,n),Qt(Vs,t))}function pE(n){ah.current===n&&(rn(Vs),rn(ah))}var fn=ja(0);function f0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ox=[];function mE(){for(var n=0;n<Ox.length;n++)Ox[n]._workInProgressVersionPrimary=null;Ox.length=0}var Bg=Go.ReactCurrentDispatcher,Fx=Go.ReactCurrentBatchConfig,$l=0,vn=null,Xn=null,ii=null,d0=!1,Id=!1,ch=0,WH=0;function xi(){throw Error(Me(321))}function gE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!_s(n[t],e[t]))return!1;return!0}function vE(n,e,t,i,r,s){if($l=s,vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bg.current=n===null||n.memoizedState===null?JH:KH,n=t(i,r),Id){s=0;do{if(Id=!1,ch=0,25<=s)throw Error(Me(301));s+=1,ii=Xn=null,e.updateQueue=null,Bg.current=YH,n=t(i,r)}while(Id)}if(Bg.current=h0,e=Xn!==null&&Xn.next!==null,$l=0,ii=Xn=vn=null,d0=!1,e)throw Error(Me(300));return n}function yE(){var n=ch!==0;return ch=0,n}function Ns(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?vn.memoizedState=ii=n:ii=ii.next=n,ii}function jr(){if(Xn===null){var n=vn.alternate;n=n!==null?n.memoizedState:null}else n=Xn.next;var e=ii===null?vn.memoizedState:ii.next;if(e!==null)ii=e,Xn=n;else{if(n===null)throw Error(Me(310));Xn=n,n={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},ii===null?vn.memoizedState=ii=n:ii=ii.next=n}return ii}function uh(n,e){return typeof e=="function"?e(n):e}function Nx(n){var e=jr(),t=e.queue;if(t===null)throw Error(Me(311));t.lastRenderedReducer=n;var i=Xn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if(($l&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,vn.lanes|=u,jl|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,_s(i,e.memoizedState)||(Qi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,vn.lanes|=s,jl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function kx(n){var e=jr(),t=e.queue;if(t===null)throw Error(Me(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);_s(s,e.memoizedState)||(Qi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function lD(){}function cD(n,e){var t=vn,i=jr(),r=e(),s=!_s(i.memoizedState,r);if(s&&(i.memoizedState=r,Qi=!0),i=i.queue,xE(dD.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||ii!==null&&ii.memoizedState.tag&1){if(t.flags|=2048,fh(9,fD.bind(null,t,i,r,e),void 0,null),si===null)throw Error(Me(349));$l&30||uD(t,e,r)}return r}function uD(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function fD(n,e,t,i){e.value=t,e.getSnapshot=i,hD(e)&&pD(n)}function dD(n,e,t){return t(function(){hD(e)&&pD(n)})}function hD(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!_s(n,t)}catch{return!0}}function pD(n){var e=Do(n,1);e!==null&&vs(e,n,1,-1)}function zC(n){var e=Ns();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uh,lastRenderedState:n},e.queue=n,n=n.dispatch=XH.bind(null,vn,n),[e.memoizedState,n]}function fh(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function mD(){return jr().memoizedState}function Dg(n,e,t,i){var r=Ns();vn.flags|=n,r.memoizedState=fh(1|e,t,void 0,i===void 0?null:i)}function sv(n,e,t,i){var r=jr();i=i===void 0?null:i;var s=void 0;if(Xn!==null){var o=Xn.memoizedState;if(s=o.destroy,i!==null&&gE(i,o.deps)){r.memoizedState=fh(e,t,s,i);return}}vn.flags|=n,r.memoizedState=fh(1|e,t,s,i)}function HC(n,e){return Dg(8390656,8,n,e)}function xE(n,e){return sv(2048,8,n,e)}function gD(n,e){return sv(4,2,n,e)}function vD(n,e){return sv(4,4,n,e)}function yD(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function xD(n,e,t){return t=t!=null?t.concat([n]):null,sv(4,4,yD.bind(null,e,n),t)}function _E(){}function _D(n,e){var t=jr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&gE(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function AD(n,e){var t=jr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&gE(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function SD(n,e,t){return $l&21?(_s(t,e)||(t=MB(),vn.lanes|=t,jl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Qi=!0),n.memoizedState=t)}function $H(n,e){var t=Ht;Ht=t!==0&&4>t?t:4,n(!0);var i=Fx.transition;Fx.transition={};try{n(!1),e()}finally{Ht=t,Fx.transition=i}}function ED(){return jr().memoizedState}function jH(n,e,t){var i=ba(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},wD(n))MD(e,t);else if(t=tD(n,e,t,i),t!==null){var r=Fi();vs(t,n,i,r),TD(t,e,i)}}function XH(n,e,t){var i=ba(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(wD(n))MD(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,_s(a,o)){var l=e.interleaved;l===null?(r.next=r,fE(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=tD(n,e,r,i),t!==null&&(r=Fi(),vs(t,n,i,r),TD(t,e,i))}}function wD(n){var e=n.alternate;return n===vn||e!==null&&e===vn}function MD(n,e){Id=d0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function TD(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,QS(n,t)}}var h0={readContext:$r,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},JH={readContext:$r,useCallback:function(n,e){return Ns().memoizedState=[n,e===void 0?null:e],n},useContext:$r,useEffect:HC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Dg(4194308,4,yD.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Dg(4194308,4,n,e)},useInsertionEffect:function(n,e){return Dg(4,2,n,e)},useMemo:function(n,e){var t=Ns();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ns();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=jH.bind(null,vn,n),[i.memoizedState,n]},useRef:function(n){var e=Ns();return n={current:n},e.memoizedState=n},useState:zC,useDebugValue:_E,useDeferredValue:function(n){return Ns().memoizedState=n},useTransition:function(){var n=zC(!1),e=n[0];return n=$H.bind(null,n[1]),Ns().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=vn,r=Ns();if(on){if(t===void 0)throw Error(Me(407));t=t()}else{if(t=e(),si===null)throw Error(Me(349));$l&30||uD(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,HC(dD.bind(null,i,s,n),[n]),i.flags|=2048,fh(9,fD.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ns(),e=si.identifierPrefix;if(on){var t=Eo,i=So;t=(i&~(1<<32-gs(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=ch++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=WH++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},KH={readContext:$r,useCallback:_D,useContext:$r,useEffect:xE,useImperativeHandle:xD,useInsertionEffect:gD,useLayoutEffect:vD,useMemo:AD,useReducer:Nx,useRef:mD,useState:function(){return Nx(uh)},useDebugValue:_E,useDeferredValue:function(n){var e=jr();return SD(e,Xn.memoizedState,n)},useTransition:function(){var n=Nx(uh)[0],e=jr().memoizedState;return[n,e]},useMutableSource:lD,useSyncExternalStore:cD,useId:ED,unstable_isNewReconciler:!1},YH={readContext:$r,useCallback:_D,useContext:$r,useEffect:xE,useImperativeHandle:xD,useInsertionEffect:gD,useLayoutEffect:vD,useMemo:AD,useReducer:kx,useRef:mD,useState:function(){return kx(uh)},useDebugValue:_E,useDeferredValue:function(n){var e=jr();return Xn===null?e.memoizedState=n:SD(e,Xn.memoizedState,n)},useTransition:function(){var n=kx(uh)[0],e=jr().memoizedState;return[n,e]},useMutableSource:lD,useSyncExternalStore:cD,useId:ED,unstable_isNewReconciler:!1};function Wu(n,e){try{var t="",i=e;do t+=wz(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Ux(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function K1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var QH=typeof WeakMap=="function"?WeakMap:Map;function CD(n,e,t){t=To(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){m0||(m0=!0,sA=i),K1(n,e)},t}function bD(n,e,t){t=To(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){K1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){K1(n,e),typeof i!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function GC(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new QH;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=fG.bind(null,n,e,t),e.then(n,n))}function VC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function WC(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=To(-1,1),e.tag=2,Ta(t,e,1))),t.lanes|=1),n)}var qH=Go.ReactCurrentOwner,Qi=!1;function Di(n,e,t,i){e.child=n===null?oD(e,null,t,i):Gu(e,n.child,t,i)}function $C(n,e,t,i,r){t=t.render;var s=e.ref;return Pu(e,r),i=vE(n,e,t,i,s,r),t=yE(),n!==null&&!Qi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Lo(n,e,r)):(on&&t&&sE(e),e.flags|=1,Di(n,e,i,r),e.child)}function jC(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!bE(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,RD(n,e,s,i,r)):(n=Ng(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ih,t(o,i)&&n.ref===e.ref)return Lo(n,e,r)}return e.flags|=1,n=Ra(s,i),n.ref=e.ref,n.return=e,e.child=n}function RD(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(ih(s,i)&&n.ref===e.ref)if(Qi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Qi=!0);else return e.lanes=n.lanes,Lo(n,e,r)}return Y1(n,e,t,i,r)}function PD(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(gu,fr),fr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Qt(gu,fr),fr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Qt(gu,fr),fr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Qt(gu,fr),fr|=i;return Di(n,e,r,t),e.child}function ID(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Y1(n,e,t,i,r){var s=er(t)?Vl:Mi.current;return s=zu(e,s),Pu(e,r),t=vE(n,e,t,i,s,r),i=yE(),n!==null&&!Qi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Lo(n,e,r)):(on&&i&&sE(e),e.flags|=1,Di(n,e,t,r),e.child)}function XC(n,e,t,i,r){if(er(t)){var s=!0;s0(e)}else s=!1;if(Pu(e,r),e.stateNode===null)Lg(n,e),rD(e,t,i),J1(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=$r(c):(c=er(t)?Vl:Mi.current,c=zu(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&kC(e,o,i,c),ha=!1;var p=e.memoizedState;o.state=p,u0(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Zi.current||ha?(typeof u=="function"&&(X1(e,t,u,i),l=e.memoizedState),(a=ha||NC(e,t,a,i,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,nD(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:ls(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=$r(l):(l=er(t)?Vl:Mi.current,l=zu(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&kC(e,o,i,l),ha=!1,p=e.memoizedState,o.state=p,u0(e,i,o,r);var g=e.memoizedState;a!==d||p!==g||Zi.current||ha?(typeof m=="function"&&(X1(e,t,m,i),g=e.memoizedState),(c=ha||NC(e,t,c,i,p,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return Q1(n,e,t,i,s,r)}function Q1(n,e,t,i,r,s){ID(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&BC(e,t,!1),Lo(n,e,s);i=e.stateNode,qH.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Gu(e,n.child,null,s),e.child=Gu(e,null,a,s)):Di(n,e,a,s),e.memoizedState=i.state,r&&BC(e,t,!0),e.child}function BD(n){var e=n.stateNode;e.pendingContext?IC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&IC(n,e.context,!1),hE(n,e.containerInfo)}function JC(n,e,t,i,r){return Hu(),aE(r),e.flags|=256,Di(n,e,t,i),e.child}var q1={dehydrated:null,treeContext:null,retryLane:0};function Z1(n){return{baseLanes:n,cachePool:null,transitions:null}}function DD(n,e,t){var i=e.pendingProps,r=fn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Qt(fn,r&1),n===null)return $1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=lv(o,i,0,null),n=Fl(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Z1(t),e.memoizedState=q1,n):AE(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return ZH(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ra(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Ra(a,s):(s=Fl(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Z1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=q1,i}return s=n.child,n=s.sibling,i=Ra(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function AE(n,e){return e=lv({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function xm(n,e,t,i){return i!==null&&aE(i),Gu(e,n.child,null,t),n=AE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function ZH(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Ux(Error(Me(422))),xm(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=lv({mode:"visible",children:i.children},r,0,null),s=Fl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Gu(e,n.child,null,o),e.child.memoizedState=Z1(o),e.memoizedState=q1,s);if(!(e.mode&1))return xm(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Me(419)),i=Ux(s,i,void 0),xm(n,e,o,i)}if(a=(o&n.childLanes)!==0,Qi||a){if(i=si,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Do(n,r),vs(i,n,r,-1))}return CE(),i=Ux(Error(Me(421))),xm(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=dG.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,hr=Ma(r.nextSibling),mr=e,on=!0,fs=null,n!==null&&(Nr[kr++]=So,Nr[kr++]=Eo,Nr[kr++]=Wl,So=n.id,Eo=n.overflow,Wl=e),e=AE(e,i.children),e.flags|=4096,e)}function KC(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),j1(n.return,e,t)}function zx(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function LD(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Di(n,e,i.children,t),i=fn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&KC(n,t,e);else if(n.tag===19)KC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Qt(fn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&f0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),zx(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&f0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}zx(e,!0,t,null,s);break;case"together":zx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Lo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),jl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Me(153));if(e.child!==null){for(n=e.child,t=Ra(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ra(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function eG(n,e,t){switch(e.tag){case 3:BD(e),Hu();break;case 5:aD(e);break;case 1:er(e.type)&&s0(e);break;case 4:hE(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Qt(l0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Qt(fn,fn.current&1),e.flags|=128,null):t&e.child.childLanes?DD(n,e,t):(Qt(fn,fn.current&1),n=Lo(n,e,t),n!==null?n.sibling:null);Qt(fn,fn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return LD(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Qt(fn,fn.current),i)break;return null;case 22:case 23:return e.lanes=0,PD(n,e,t)}return Lo(n,e,t)}var OD,eA,FD,ND;OD=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};eA=function(){};FD=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,bl(Vs.current);var s=null;switch(t){case"input":r=S1(n,r),i=S1(n,i),s=[];break;case"select":r=yn({},r,{value:void 0}),i=yn({},i,{value:void 0}),s=[];break;case"textarea":r=M1(n,r),i=M1(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=i0)}C1(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Yd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Yd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&en("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ND=function(n,e,t,i){t!==i&&(e.flags|=4)};function qf(n,e){if(!on)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function _i(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function tG(n,e,t){var i=e.pendingProps;switch(oE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _i(e),null;case 1:return er(e.type)&&r0(),_i(e),null;case 3:return i=e.stateNode,Vu(),rn(Zi),rn(Mi),mE(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(vm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fs!==null&&(lA(fs),fs=null))),eA(n,e),_i(e),null;case 5:pE(e);var r=bl(lh.current);if(t=e.type,n!==null&&e.stateNode!=null)FD(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Me(166));return _i(e),null}if(n=bl(Vs.current),vm(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Us]=e,i[oh]=s,n=(e.mode&1)!==0,t){case"dialog":en("cancel",i),en("close",i);break;case"iframe":case"object":case"embed":en("load",i);break;case"video":case"audio":for(r=0;r<Ad.length;r++)en(Ad[r],i);break;case"source":en("error",i);break;case"img":case"image":case"link":en("error",i),en("load",i);break;case"details":en("toggle",i);break;case"input":rC(i,s),en("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},en("invalid",i);break;case"textarea":oC(i,s),en("invalid",i)}C1(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&gm(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gm(i.textContent,a,n),r=["children",""+a]):Yd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&en("scroll",i)}switch(t){case"input":lm(i),sC(i,s,!0);break;case"textarea":lm(i),aC(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=i0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=uB(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Us]=e,n[oh]=i,OD(n,e,!1,!1),e.stateNode=n;e:{switch(o=b1(t,i),t){case"dialog":en("cancel",n),en("close",n),r=i;break;case"iframe":case"object":case"embed":en("load",n),r=i;break;case"video":case"audio":for(r=0;r<Ad.length;r++)en(Ad[r],n);r=i;break;case"source":en("error",n),r=i;break;case"img":case"image":case"link":en("error",n),en("load",n),r=i;break;case"details":en("toggle",n),r=i;break;case"input":rC(n,i),r=S1(n,i),en("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=yn({},i,{value:void 0}),en("invalid",n);break;case"textarea":oC(n,i),r=M1(n,i),en("invalid",n);break;default:r=i}C1(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?hB(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&fB(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Qd(n,l):typeof l=="number"&&Qd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&en("scroll",n):l!=null&&$S(n,s,l,o))}switch(t){case"input":lm(n),sC(n,i,!1);break;case"textarea":lm(n),aC(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Oa(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Tu(n,!!i.multiple,s,!1):i.defaultValue!=null&&Tu(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=i0)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _i(e),null;case 6:if(n&&e.stateNode!=null)ND(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Me(166));if(t=bl(lh.current),bl(Vs.current),vm(e)){if(i=e.stateNode,t=e.memoizedProps,i[Us]=e,(s=i.nodeValue!==t)&&(n=mr,n!==null))switch(n.tag){case 3:gm(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gm(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Us]=e,e.stateNode=i}return _i(e),null;case 13:if(rn(fn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(on&&hr!==null&&e.mode&1&&!(e.flags&128))eD(),Hu(),e.flags|=98560,s=!1;else if(s=vm(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Me(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Me(317));s[Us]=e}else Hu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_i(e),s=!1}else fs!==null&&(lA(fs),fs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||fn.current&1?Yn===0&&(Yn=3):CE())),e.updateQueue!==null&&(e.flags|=4),_i(e),null);case 4:return Vu(),eA(n,e),n===null&&rh(e.stateNode.containerInfo),_i(e),null;case 10:return uE(e.type._context),_i(e),null;case 17:return er(e.type)&&r0(),_i(e),null;case 19:if(rn(fn),s=e.memoizedState,s===null)return _i(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)qf(s,!1);else{if(Yn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=f0(n),o!==null){for(e.flags|=128,qf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Qt(fn,fn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Dn()>$u&&(e.flags|=128,i=!0,qf(s,!1),e.lanes=4194304)}else{if(!i)if(n=f0(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),qf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!on)return _i(e),null}else 2*Dn()-s.renderingStartTime>$u&&t!==1073741824&&(e.flags|=128,i=!0,qf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dn(),e.sibling=null,t=fn.current,Qt(fn,i?t&1|2:t&1),e):(_i(e),null);case 22:case 23:return TE(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?fr&1073741824&&(_i(e),e.subtreeFlags&6&&(e.flags|=8192)):_i(e),null;case 24:return null;case 25:return null}throw Error(Me(156,e.tag))}function nG(n,e){switch(oE(e),e.tag){case 1:return er(e.type)&&r0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Vu(),rn(Zi),rn(Mi),mE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return pE(e),null;case 13:if(rn(fn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Me(340));Hu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return rn(fn),null;case 4:return Vu(),null;case 10:return uE(e.type._context),null;case 22:case 23:return TE(),null;case 24:return null;default:return null}}var _m=!1,Ei=!1,iG=typeof WeakSet=="function"?WeakSet:Set,We=null;function mu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){wn(n,e,i)}else t.current=null}function tA(n,e,t){try{t()}catch(i){wn(n,e,i)}}var YC=!1;function rG(n,e){if(k1=e0,n=HB(),rE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=n,p=null;t:for(;;){for(var m;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++u===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(U1={focusedElem:n,selectionRange:t},e0=!1,We=e;We!==null;)if(e=We,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,We=n;else for(;We!==null;){e=We;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,_=g.memoizedState,v=e.stateNode,A=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:ls(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Me(163))}}catch(w){wn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,We=n;break}We=e.return}return g=YC,YC=!1,g}function Bd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&tA(e,t,s)}r=r.next}while(r!==i)}}function ov(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function nA(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function kD(n){var e=n.alternate;e!==null&&(n.alternate=null,kD(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Us],delete e[oh],delete e[G1],delete e[zH],delete e[HH])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function UD(n){return n.tag===5||n.tag===3||n.tag===4}function QC(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||UD(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function iA(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=i0));else if(i!==4&&(n=n.child,n!==null))for(iA(n,e,t),n=n.sibling;n!==null;)iA(n,e,t),n=n.sibling}function rA(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(rA(n,e,t),n=n.sibling;n!==null;)rA(n,e,t),n=n.sibling}var li=null,us=!1;function na(n,e,t){for(t=t.child;t!==null;)zD(n,e,t),t=t.sibling}function zD(n,e,t){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(q0,t)}catch{}switch(t.tag){case 5:Ei||mu(t,e);case 6:var i=li,r=us;li=null,na(n,e,t),li=i,us=r,li!==null&&(us?(n=li,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):li.removeChild(t.stateNode));break;case 18:li!==null&&(us?(n=li,t=t.stateNode,n.nodeType===8?Dx(n.parentNode,t):n.nodeType===1&&Dx(n,t),th(n)):Dx(li,t.stateNode));break;case 4:i=li,r=us,li=t.stateNode.containerInfo,us=!0,na(n,e,t),li=i,us=r;break;case 0:case 11:case 14:case 15:if(!Ei&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tA(t,e,o),r=r.next}while(r!==i)}na(n,e,t);break;case 1:if(!Ei&&(mu(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){wn(t,e,a)}na(n,e,t);break;case 21:na(n,e,t);break;case 22:t.mode&1?(Ei=(i=Ei)||t.memoizedState!==null,na(n,e,t),Ei=i):na(n,e,t);break;default:na(n,e,t)}}function qC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new iG),e.forEach(function(i){var r=hG.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function is(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:li=a.stateNode,us=!1;break e;case 3:li=a.stateNode.containerInfo,us=!0;break e;case 4:li=a.stateNode.containerInfo,us=!0;break e}a=a.return}if(li===null)throw Error(Me(160));zD(s,o,r),li=null,us=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){wn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HD(e,n),e=e.sibling}function HD(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(is(e,n),Os(n),i&4){try{Bd(3,n,n.return),ov(3,n)}catch(x){wn(n,n.return,x)}try{Bd(5,n,n.return)}catch(x){wn(n,n.return,x)}}break;case 1:is(e,n),Os(n),i&512&&t!==null&&mu(t,t.return);break;case 5:if(is(e,n),Os(n),i&512&&t!==null&&mu(t,t.return),n.flags&32){var r=n.stateNode;try{Qd(r,"")}catch(x){wn(n,n.return,x)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&lB(r,s),b1(a,o);var c=b1(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?hB(r,d):u==="dangerouslySetInnerHTML"?fB(r,d):u==="children"?Qd(r,d):$S(r,u,d,c)}switch(a){case"input":E1(r,s);break;case"textarea":cB(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Tu(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Tu(r,!!s.multiple,s.defaultValue,!0):Tu(r,!!s.multiple,s.multiple?[]:"",!1))}r[oh]=s}catch(x){wn(n,n.return,x)}}break;case 6:if(is(e,n),Os(n),i&4){if(n.stateNode===null)throw Error(Me(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(x){wn(n,n.return,x)}}break;case 3:if(is(e,n),Os(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{th(e.containerInfo)}catch(x){wn(n,n.return,x)}break;case 4:is(e,n),Os(n);break;case 13:is(e,n),Os(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(wE=Dn())),i&4&&qC(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Ei=(c=Ei)||u,is(e,n),Ei=c):is(e,n),Os(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(We=n,u=n.child;u!==null;){for(d=We=u;We!==null;){switch(p=We,m=p.child,p.tag){case 0:case 11:case 14:case 15:Bd(4,p,p.return);break;case 1:mu(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){wn(i,t,x)}}break;case 5:mu(p,p.return);break;case 22:if(p.memoizedState!==null){eb(d);continue}}m!==null?(m.return=p,We=m):eb(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=dB("display",o))}catch(x){wn(n,n.return,x)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){wn(n,n.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:is(e,n),Os(n),i&4&&qC(n);break;case 21:break;default:is(e,n),Os(n)}}function Os(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(UD(t)){var i=t;break e}t=t.return}throw Error(Me(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Qd(r,""),i.flags&=-33);var s=QC(n);rA(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=QC(n);iA(n,a,o);break;default:throw Error(Me(161))}}catch(l){wn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function sG(n,e,t){We=n,GD(n)}function GD(n,e,t){for(var i=(n.mode&1)!==0;We!==null;){var r=We,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||_m;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ei;a=_m;var c=Ei;if(_m=o,(Ei=l)&&!c)for(We=r;We!==null;)o=We,l=o.child,o.tag===22&&o.memoizedState!==null?tb(r):l!==null?(l.return=o,We=l):tb(r);for(;s!==null;)We=s,GD(s),s=s.sibling;We=r,_m=a,Ei=c}ZC(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,We=s):ZC(n)}}function ZC(n){for(;We!==null;){var e=We;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ei||ov(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ei)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ls(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&FC(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}FC(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&th(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Me(163))}Ei||e.flags&512&&nA(e)}catch(p){wn(e,e.return,p)}}if(e===n){We=null;break}if(t=e.sibling,t!==null){t.return=e.return,We=t;break}We=e.return}}function eb(n){for(;We!==null;){var e=We;if(e===n){We=null;break}var t=e.sibling;if(t!==null){t.return=e.return,We=t;break}We=e.return}}function tb(n){for(;We!==null;){var e=We;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{ov(4,e)}catch(l){wn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){wn(e,r,l)}}var s=e.return;try{nA(e)}catch(l){wn(e,s,l)}break;case 5:var o=e.return;try{nA(e)}catch(l){wn(e,o,l)}}}catch(l){wn(e,e.return,l)}if(e===n){We=null;break}var a=e.sibling;if(a!==null){a.return=e.return,We=a;break}We=e.return}}var oG=Math.ceil,p0=Go.ReactCurrentDispatcher,SE=Go.ReactCurrentOwner,Wr=Go.ReactCurrentBatchConfig,Lt=0,si=null,Un=null,ci=0,fr=0,gu=ja(0),Yn=0,dh=null,jl=0,av=0,EE=0,Dd=null,Xi=null,wE=0,$u=1/0,go=null,m0=!1,sA=null,Ca=null,Am=!1,_a=null,g0=0,Ld=0,oA=null,Og=-1,Fg=0;function Fi(){return Lt&6?Dn():Og!==-1?Og:Og=Dn()}function ba(n){return n.mode&1?Lt&2&&ci!==0?ci&-ci:VH.transition!==null?(Fg===0&&(Fg=MB()),Fg):(n=Ht,n!==0||(n=window.event,n=n===void 0?16:BB(n.type)),n):1}function vs(n,e,t,i){if(50<Ld)throw Ld=0,oA=null,Error(Me(185));Oh(n,t,i),(!(Lt&2)||n!==si)&&(n===si&&(!(Lt&2)&&(av|=t),Yn===4&&ya(n,ci)),tr(n,i),t===1&&Lt===0&&!(e.mode&1)&&($u=Dn()+500,iv&&Xa()))}function tr(n,e){var t=n.callbackNode;Vz(n,e);var i=Zg(n,n===si?ci:0);if(i===0)t!==null&&uC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&uC(t),e===1)n.tag===0?GH(nb.bind(null,n)):QB(nb.bind(null,n)),kH(function(){!(Lt&6)&&Xa()}),t=null;else{switch(TB(i)){case 1:t=YS;break;case 4:t=EB;break;case 16:t=qg;break;case 536870912:t=wB;break;default:t=qg}t=YD(t,VD.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function VD(n,e){if(Og=-1,Fg=0,Lt&6)throw Error(Me(327));var t=n.callbackNode;if(Iu()&&n.callbackNode!==t)return null;var i=Zg(n,n===si?ci:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=v0(n,i);else{e=i;var r=Lt;Lt|=2;var s=$D();(si!==n||ci!==e)&&(go=null,$u=Dn()+500,Ol(n,e));do try{cG();break}catch(a){WD(n,a)}while(1);cE(),p0.current=s,Lt=r,Un!==null?e=0:(si=null,ci=0,e=Yn)}if(e!==0){if(e===2&&(r=D1(n),r!==0&&(i=r,e=aA(n,r))),e===1)throw t=dh,Ol(n,0),ya(n,i),tr(n,Dn()),t;if(e===6)ya(n,i);else{if(r=n.current.alternate,!(i&30)&&!aG(r)&&(e=v0(n,i),e===2&&(s=D1(n),s!==0&&(i=s,e=aA(n,s))),e===1))throw t=dh,Ol(n,0),ya(n,i),tr(n,Dn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Me(345));case 2:_l(n,Xi,go);break;case 3:if(ya(n,i),(i&130023424)===i&&(e=wE+500-Dn(),10<e)){if(Zg(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Fi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=H1(_l.bind(null,n,Xi,go),e);break}_l(n,Xi,go);break;case 4:if(ya(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-gs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Dn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*oG(i/1960))-i,10<i){n.timeoutHandle=H1(_l.bind(null,n,Xi,go),i);break}_l(n,Xi,go);break;case 5:_l(n,Xi,go);break;default:throw Error(Me(329))}}}return tr(n,Dn()),n.callbackNode===t?VD.bind(null,n):null}function aA(n,e){var t=Dd;return n.current.memoizedState.isDehydrated&&(Ol(n,e).flags|=256),n=v0(n,e),n!==2&&(e=Xi,Xi=t,e!==null&&lA(e)),n}function lA(n){Xi===null?Xi=n:Xi.push.apply(Xi,n)}function aG(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!_s(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ya(n,e){for(e&=~EE,e&=~av,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-gs(e),i=1<<t;n[t]=-1,e&=~i}}function nb(n){if(Lt&6)throw Error(Me(327));Iu();var e=Zg(n,0);if(!(e&1))return tr(n,Dn()),null;var t=v0(n,e);if(n.tag!==0&&t===2){var i=D1(n);i!==0&&(e=i,t=aA(n,i))}if(t===1)throw t=dh,Ol(n,0),ya(n,e),tr(n,Dn()),t;if(t===6)throw Error(Me(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,_l(n,Xi,go),tr(n,Dn()),null}function ME(n,e){var t=Lt;Lt|=1;try{return n(e)}finally{Lt=t,Lt===0&&($u=Dn()+500,iv&&Xa())}}function Xl(n){_a!==null&&_a.tag===0&&!(Lt&6)&&Iu();var e=Lt;Lt|=1;var t=Wr.transition,i=Ht;try{if(Wr.transition=null,Ht=1,n)return n()}finally{Ht=i,Wr.transition=t,Lt=e,!(Lt&6)&&Xa()}}function TE(){fr=gu.current,rn(gu)}function Ol(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,NH(t)),Un!==null)for(t=Un.return;t!==null;){var i=t;switch(oE(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&r0();break;case 3:Vu(),rn(Zi),rn(Mi),mE();break;case 5:pE(i);break;case 4:Vu();break;case 13:rn(fn);break;case 19:rn(fn);break;case 10:uE(i.type._context);break;case 22:case 23:TE()}t=t.return}if(si=n,Un=n=Ra(n.current,null),ci=fr=e,Yn=0,dh=null,EE=av=jl=0,Xi=Dd=null,Cl!==null){for(e=0;e<Cl.length;e++)if(t=Cl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Cl=null}return n}function WD(n,e){do{var t=Un;try{if(cE(),Bg.current=h0,d0){for(var i=vn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}d0=!1}if($l=0,ii=Xn=vn=null,Id=!1,ch=0,SE.current=null,t===null||t.return===null){Yn=1,dh=e,Un=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=ci,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=VC(o);if(m!==null){m.flags&=-257,WC(m,o,a,s,e),m.mode&1&&GC(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var x=new Set;x.add(l),e.updateQueue=x}else g.add(l);break e}else{if(!(e&1)){GC(s,c,e),CE();break e}l=Error(Me(426))}}else if(on&&a.mode&1){var _=VC(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),WC(_,o,a,s,e),aE(Wu(l,a));break e}}s=l=Wu(l,a),Yn!==4&&(Yn=2),Dd===null?Dd=[s]:Dd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=CD(s,l,e);OC(s,v);break e;case 1:a=l;var A=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ca===null||!Ca.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=bD(s,a,e);OC(s,w);break e}}s=s.return}while(s!==null)}XD(t)}catch(T){e=T,Un===t&&t!==null&&(Un=t=t.return);continue}break}while(1)}function $D(){var n=p0.current;return p0.current=h0,n===null?h0:n}function CE(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),si===null||!(jl&268435455)&&!(av&268435455)||ya(si,ci)}function v0(n,e){var t=Lt;Lt|=2;var i=$D();(si!==n||ci!==e)&&(go=null,Ol(n,e));do try{lG();break}catch(r){WD(n,r)}while(1);if(cE(),Lt=t,p0.current=i,Un!==null)throw Error(Me(261));return si=null,ci=0,Yn}function lG(){for(;Un!==null;)jD(Un)}function cG(){for(;Un!==null&&!Lz();)jD(Un)}function jD(n){var e=KD(n.alternate,n,fr);n.memoizedProps=n.pendingProps,e===null?XD(n):Un=e,SE.current=null}function XD(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=nG(t,e),t!==null){t.flags&=32767,Un=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Yn=6,Un=null;return}}else if(t=tG(t,e,fr),t!==null){Un=t;return}if(e=e.sibling,e!==null){Un=e;return}Un=e=n}while(e!==null);Yn===0&&(Yn=5)}function _l(n,e,t){var i=Ht,r=Wr.transition;try{Wr.transition=null,Ht=1,uG(n,e,t,i)}finally{Wr.transition=r,Ht=i}return null}function uG(n,e,t,i){do Iu();while(_a!==null);if(Lt&6)throw Error(Me(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Me(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Wz(n,s),n===si&&(Un=si=null,ci=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Am||(Am=!0,YD(qg,function(){return Iu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Wr.transition,Wr.transition=null;var o=Ht;Ht=1;var a=Lt;Lt|=4,SE.current=null,rG(n,t),HD(t,n),PH(U1),e0=!!k1,U1=k1=null,n.current=t,sG(t),Oz(),Lt=a,Ht=o,Wr.transition=s}else n.current=t;if(Am&&(Am=!1,_a=n,g0=r),s=n.pendingLanes,s===0&&(Ca=null),kz(t.stateNode),tr(n,Dn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(m0)throw m0=!1,n=sA,sA=null,n;return g0&1&&n.tag!==0&&Iu(),s=n.pendingLanes,s&1?n===oA?Ld++:(Ld=0,oA=n):Ld=0,Xa(),null}function Iu(){if(_a!==null){var n=TB(g0),e=Wr.transition,t=Ht;try{if(Wr.transition=null,Ht=16>n?16:n,_a===null)var i=!1;else{if(n=_a,_a=null,g0=0,Lt&6)throw Error(Me(331));var r=Lt;for(Lt|=4,We=n.current;We!==null;){var s=We,o=s.child;if(We.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(We=c;We!==null;){var u=We;switch(u.tag){case 0:case 11:case 15:Bd(8,u,s)}var d=u.child;if(d!==null)d.return=u,We=d;else for(;We!==null;){u=We;var p=u.sibling,m=u.return;if(kD(u),u===c){We=null;break}if(p!==null){p.return=m,We=p;break}We=m}}}var g=s.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}We=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,We=o;else e:for(;We!==null;){if(s=We,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bd(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,We=v;break e}We=s.return}}var A=n.current;for(We=A;We!==null;){o=We;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,We=S;else e:for(o=A;We!==null;){if(a=We,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ov(9,a)}}catch(T){wn(a,a.return,T)}if(a===o){We=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,We=w;break e}We=a.return}}if(Lt=r,Xa(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(q0,n)}catch{}i=!0}return i}finally{Ht=t,Wr.transition=e}}return!1}function ib(n,e,t){e=Wu(t,e),e=CD(n,e,1),n=Ta(n,e,1),e=Fi(),n!==null&&(Oh(n,1,e),tr(n,e))}function wn(n,e,t){if(n.tag===3)ib(n,n,t);else for(;e!==null;){if(e.tag===3){ib(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ca===null||!Ca.has(i))){n=Wu(t,n),n=bD(e,n,1),e=Ta(e,n,1),n=Fi(),e!==null&&(Oh(e,1,n),tr(e,n));break}}e=e.return}}function fG(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Fi(),n.pingedLanes|=n.suspendedLanes&t,si===n&&(ci&t)===t&&(Yn===4||Yn===3&&(ci&130023424)===ci&&500>Dn()-wE?Ol(n,0):EE|=t),tr(n,e)}function JD(n,e){e===0&&(n.mode&1?(e=fm,fm<<=1,!(fm&130023424)&&(fm=4194304)):e=1);var t=Fi();n=Do(n,e),n!==null&&(Oh(n,e,t),tr(n,t))}function dG(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),JD(n,t)}function hG(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Me(314))}i!==null&&i.delete(e),JD(n,t)}var KD;KD=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Zi.current)Qi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Qi=!1,eG(n,e,t);Qi=!!(n.flags&131072)}else Qi=!1,on&&e.flags&1048576&&qB(e,a0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Lg(n,e),n=e.pendingProps;var r=zu(e,Mi.current);Pu(e,t),r=vE(null,e,i,n,r,t);var s=yE();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,er(i)?(s=!0,s0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,dE(e),r.updater=rv,e.stateNode=r,r._reactInternals=e,J1(e,i,n,t),e=Q1(null,e,i,!0,s,t)):(e.tag=0,on&&s&&sE(e),Di(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Lg(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=mG(i),n=ls(i,n),r){case 0:e=Y1(null,e,i,n,t);break e;case 1:e=XC(null,e,i,n,t);break e;case 11:e=$C(null,e,i,n,t);break e;case 14:e=jC(null,e,i,ls(i.type,n),t);break e}throw Error(Me(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ls(i,r),Y1(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ls(i,r),XC(n,e,i,r,t);case 3:e:{if(BD(e),n===null)throw Error(Me(387));i=e.pendingProps,s=e.memoizedState,r=s.element,nD(n,e),u0(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Wu(Error(Me(423)),e),e=JC(n,e,i,t,r);break e}else if(i!==r){r=Wu(Error(Me(424)),e),e=JC(n,e,i,t,r);break e}else for(hr=Ma(e.stateNode.containerInfo.firstChild),mr=e,on=!0,fs=null,t=oD(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Hu(),i===r){e=Lo(n,e,t);break e}Di(n,e,i,t)}e=e.child}return e;case 5:return aD(e),n===null&&$1(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,z1(i,r)?o=null:s!==null&&z1(i,s)&&(e.flags|=32),ID(n,e),Di(n,e,o,t),e.child;case 6:return n===null&&$1(e),null;case 13:return DD(n,e,t);case 4:return hE(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Gu(e,null,i,t):Di(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ls(i,r),$C(n,e,i,r,t);case 7:return Di(n,e,e.pendingProps,t),e.child;case 8:return Di(n,e,e.pendingProps.children,t),e.child;case 12:return Di(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Qt(l0,i._currentValue),i._currentValue=o,s!==null)if(_s(s.value,o)){if(s.children===r.children&&!Zi.current){e=Lo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=To(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),j1(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Me(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),j1(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Di(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Pu(e,t),r=$r(r),i=i(r),e.flags|=1,Di(n,e,i,t),e.child;case 14:return i=e.type,r=ls(i,e.pendingProps),r=ls(i.type,r),jC(n,e,i,r,t);case 15:return RD(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ls(i,r),Lg(n,e),e.tag=1,er(i)?(n=!0,s0(e)):n=!1,Pu(e,t),rD(e,i,r),J1(e,i,r,t),Q1(null,e,i,!0,n,t);case 19:return LD(n,e,t);case 22:return PD(n,e,t)}throw Error(Me(156,e.tag))};function YD(n,e){return SB(n,e)}function pG(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(n,e,t,i){return new pG(n,e,t,i)}function bE(n){return n=n.prototype,!(!n||!n.isReactComponent)}function mG(n){if(typeof n=="function")return bE(n)?1:0;if(n!=null){if(n=n.$$typeof,n===XS)return 11;if(n===JS)return 14}return 2}function Ra(n,e){var t=n.alternate;return t===null?(t=Gr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ng(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")bE(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ou:return Fl(t.children,r,s,e);case jS:o=8,r|=8;break;case y1:return n=Gr(12,t,e,r|2),n.elementType=y1,n.lanes=s,n;case x1:return n=Gr(13,t,e,r),n.elementType=x1,n.lanes=s,n;case _1:return n=Gr(19,t,e,r),n.elementType=_1,n.lanes=s,n;case sB:return lv(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case iB:o=10;break e;case rB:o=9;break e;case XS:o=11;break e;case JS:o=14;break e;case da:o=16,i=null;break e}throw Error(Me(130,n==null?n:typeof n,""))}return e=Gr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Fl(n,e,t,i){return n=Gr(7,n,i,e),n.lanes=t,n}function lv(n,e,t,i){return n=Gr(22,n,i,e),n.elementType=sB,n.lanes=t,n.stateNode={isHidden:!1},n}function Hx(n,e,t){return n=Gr(6,n,null,e),n.lanes=t,n}function Gx(n,e,t){return e=Gr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function gG(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sx(0),this.expirationTimes=Sx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function RE(n,e,t,i,r,s,o,a,l){return n=new gG(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},dE(s),n}function vG(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:su,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function QD(n){if(!n)return Fa;n=n._reactInternals;e:{if(sc(n)!==n||n.tag!==1)throw Error(Me(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(er(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Me(171))}if(n.tag===1){var t=n.type;if(er(t))return YB(n,t,e)}return e}function qD(n,e,t,i,r,s,o,a,l){return n=RE(t,i,!0,n,r,s,o,a,l),n.context=QD(null),t=n.current,i=Fi(),r=ba(t),s=To(i,r),s.callback=e??null,Ta(t,s,r),n.current.lanes=r,Oh(n,r,i),tr(n,i),n}function cv(n,e,t,i){var r=e.current,s=Fi(),o=ba(r);return t=QD(t),e.context===null?e.context=t:e.pendingContext=t,e=To(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ta(r,e,o),n!==null&&(vs(n,r,o,s),Ig(n,r,o)),o}function y0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function rb(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function PE(n,e){rb(n,e),(n=n.alternate)&&rb(n,e)}function yG(){return null}var ZD=typeof reportError=="function"?reportError:function(n){console.error(n)};function IE(n){this._internalRoot=n}uv.prototype.render=IE.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Me(409));cv(n,e,null,null)};uv.prototype.unmount=IE.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Xl(function(){cv(null,n,null,null)}),e[Bo]=null}};function uv(n){this._internalRoot=n}uv.prototype.unstable_scheduleHydration=function(n){if(n){var e=RB();n={blockedOn:null,target:n,priority:e};for(var t=0;t<va.length&&e!==0&&e<va[t].priority;t++);va.splice(t,0,n),t===0&&IB(n)}};function BE(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function fv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function sb(){}function xG(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=y0(o);s.call(c)}}var o=qD(e,i,n,0,null,!1,!1,"",sb);return n._reactRootContainer=o,n[Bo]=o.current,rh(n.nodeType===8?n.parentNode:n),Xl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=y0(l);a.call(c)}}var l=RE(n,0,!1,null,null,!1,!1,"",sb);return n._reactRootContainer=l,n[Bo]=l.current,rh(n.nodeType===8?n.parentNode:n),Xl(function(){cv(e,l,t,i)}),l}function dv(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=y0(o);a.call(l)}}cv(e,o,n,r)}else o=xG(t,e,n,r,i);return y0(o)}CB=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=_d(e.pendingLanes);t!==0&&(QS(e,t|1),tr(e,Dn()),!(Lt&6)&&($u=Dn()+500,Xa()))}break;case 13:Xl(function(){var i=Do(n,1);if(i!==null){var r=Fi();vs(i,n,1,r)}}),PE(n,1)}};qS=function(n){if(n.tag===13){var e=Do(n,134217728);if(e!==null){var t=Fi();vs(e,n,134217728,t)}PE(n,134217728)}};bB=function(n){if(n.tag===13){var e=ba(n),t=Do(n,e);if(t!==null){var i=Fi();vs(t,n,e,i)}PE(n,e)}};RB=function(){return Ht};PB=function(n,e){var t=Ht;try{return Ht=n,e()}finally{Ht=t}};P1=function(n,e,t){switch(e){case"input":if(E1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=nv(i);if(!r)throw Error(Me(90));aB(i),E1(i,r)}}}break;case"textarea":cB(n,t);break;case"select":e=t.value,e!=null&&Tu(n,!!t.multiple,e,!1)}};gB=ME;vB=Xl;var _G={usingClientEntryPoint:!1,Events:[Nh,uu,nv,pB,mB,ME]},Zf={findFiberByHostInstance:Tl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},AG={bundleType:Zf.bundleType,version:Zf.version,rendererPackageName:Zf.rendererPackageName,rendererConfig:Zf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Go.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_B(n),n===null?null:n.stateNode},findFiberByHostInstance:Zf.findFiberByHostInstance||yG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sm.isDisabled&&Sm.supportsFiber)try{q0=Sm.inject(AG),Gs=Sm}catch{}}Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_G;Sr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!BE(e))throw Error(Me(200));return vG(n,e,null,t)};Sr.createRoot=function(n,e){if(!BE(n))throw Error(Me(299));var t=!1,i="",r=ZD;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=RE(n,1,!1,null,null,t,!1,i,r),n[Bo]=e.current,rh(n.nodeType===8?n.parentNode:n),new IE(e)};Sr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Me(188)):(n=Object.keys(n).join(","),Error(Me(268,n)));return n=_B(e),n=n===null?null:n.stateNode,n};Sr.flushSync=function(n){return Xl(n)};Sr.hydrate=function(n,e,t){if(!fv(e))throw Error(Me(200));return dv(null,n,e,!0,t)};Sr.hydrateRoot=function(n,e,t){if(!BE(n))throw Error(Me(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=ZD;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=qD(e,null,n,1,t??null,r,!1,s,o),n[Bo]=e.current,rh(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new uv(e)};Sr.render=function(n,e,t){if(!fv(e))throw Error(Me(200));return dv(null,n,e,!1,t)};Sr.unmountComponentAtNode=function(n){if(!fv(n))throw Error(Me(40));return n._reactRootContainer?(Xl(function(){dv(null,null,n,!1,function(){n._reactRootContainer=null,n[Bo]=null})}),!0):!1};Sr.unstable_batchedUpdates=ME;Sr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!fv(t))throw Error(Me(200));if(n==null||n._reactInternals===void 0)throw Error(Me(38));return dv(n,e,t,!1,i)};Sr.version="18.2.0-next-9e3b772b8-20220608";function eL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eL)}catch(n){console.error(n)}}eL(),qI.exports=Sr;var Uh=qI.exports;const tL=ic(Uh);var ob=Uh;g1.createRoot=ob.createRoot,g1.hydrateRoot=ob.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const zh="155",SG={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},EG={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},nL=0,cA=1,iL=2,wG=3,rL=0,hv=1,Od=2,cs=3,Js=0,Ni=1,hs=2,MG=2,Co=0,Nl=1,uA=2,fA=3,dA=4,sL=5,wl=100,oL=101,aL=102,hA=103,pA=104,lL=200,cL=201,uL=202,fL=203,DE=204,LE=205,dL=206,hL=207,pL=208,mL=209,gL=210,vL=0,yL=1,xL=2,x0=3,_L=4,AL=5,SL=6,EL=7,Hh=0,wL=1,ML=2,Ws=0,TL=1,CL=2,bL=3,OE=4,RL=5,pv=300,Oo=301,Na=302,ju=303,hh=304,uf=306,Ks=1e3,Jn=1001,Xu=1002,Mn=1003,ph=1004,TG=1004,Bu=1005,CG=1005,dn=1006,mv=1007,bG=1007,Ys=1008,RG=1008,$s=1009,PL=1010,IL=1011,gv=1012,FE=1013,wo=1014,zs=1015,Ju=1016,NE=1017,kE=1018,Pa=1020,BL=1021,Ki=1023,DL=1024,LL=1025,Ia=1026,Jl=1027,OL=1028,UE=1029,FL=1030,zE=1031,HE=1033,kg=33776,Ug=33777,zg=33778,Hg=33779,mA=35840,gA=35841,vA=35842,yA=35843,NL=36196,xA=37492,_A=37496,AA=37808,SA=37809,EA=37810,wA=37811,MA=37812,TA=37813,CA=37814,bA=37815,RA=37816,PA=37817,IA=37818,BA=37819,DA=37820,LA=37821,Gg=36492,kL=36283,OA=36284,FA=36285,NA=36286,UL=2200,zL=2201,HL=2202,Ku=2300,Kl=2301,Vg=2302,Rl=2400,Pl=2401,mh=2402,vv=2500,GE=2501,GL=0,VE=1,_0=2,WE=3e3,Ba=3001,VL=3200,WL=3201,Ja=0,$L=1,Da="",yt="srgb",As="srgb-linear",$E="display-p3",PG=0,Wg=7680,IG=7681,BG=7682,DG=7683,LG=34055,OG=34056,FG=5386,NG=512,kG=513,UG=514,zG=515,HG=516,GG=517,VG=518,jL=519,XL=512,JL=513,KL=514,YL=515,QL=516,qL=517,ZL=518,eO=519,gh=35044,WG=35048,$G=35040,jG=35045,XG=35049,JG=35041,KG=35046,YG=35050,QG=35042,qG="100",kA="300 es",A0=1035,Hs=2e3,vh=2001;class Vo{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Ai=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ab=1234567;const kl=Math.PI/180,Yu=180/Math.PI;function gr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ai[n&255]+Ai[n>>8&255]+Ai[n>>16&255]+Ai[n>>24&255]+"-"+Ai[e&255]+Ai[e>>8&255]+"-"+Ai[e>>16&15|64]+Ai[e>>24&255]+"-"+Ai[t&63|128]+Ai[t>>8&255]+"-"+Ai[t>>16&255]+Ai[t>>24&255]+Ai[i&255]+Ai[i>>8&255]+Ai[i>>16&255]+Ai[i>>24&255]).toLowerCase()}function Tn(n,e,t){return Math.max(e,Math.min(t,n))}function jE(n,e){return(n%e+e)%e}function ZG(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function e4(n,e,t){return n!==e?(t-n)/(e-n):0}function Fd(n,e,t){return(1-t)*n+t*e}function t4(n,e,t,i){return Fd(n,e,1-Math.exp(-t*i))}function n4(n,e=1){return e-Math.abs(jE(n,e*2)-e)}function i4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function r4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function s4(n,e){return n+Math.floor(Math.random()*(e-n+1))}function o4(n,e){return n+Math.random()*(e-n)}function a4(n){return n*(.5-Math.random())}function l4(n){n!==void 0&&(ab=n);let e=ab+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function c4(n){return n*kl}function u4(n){return n*Yu}function UA(n){return(n&n-1)===0&&n!==0}function tO(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function S0(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function f4(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),g=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*d,l*p,a*c);break;case"YZY":n.set(l*p,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*p,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Yi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function At(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const zr={DEG2RAD:kl,RAD2DEG:Yu,generateUUID:gr,clamp:Tn,euclideanModulo:jE,mapLinear:ZG,inverseLerp:e4,lerp:Fd,damp:t4,pingpong:n4,smoothstep:i4,smootherstep:r4,randInt:s4,randFloat:o4,randFloatSpread:a4,seededRandom:l4,degToRad:c4,radToDeg:u4,isPowerOfTwo:UA,ceilPowerOfTwo:tO,floorPowerOfTwo:S0,setQuaternionFromProperEuler:f4,normalize:At,denormalize:Yi};class ve{constructor(e=0,t=0){ve.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Tn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _t{constructor(e,t,i,r,s,o,a,l,c){_t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],p=i[2],m=i[5],g=i[8],x=r[0],_=r[3],v=r[6],A=r[1],S=r[4],w=r[7],T=r[2],C=r[5],R=r[8];return s[0]=o*x+a*A+l*T,s[3]=o*_+a*S+l*C,s[6]=o*v+a*w+l*R,s[1]=c*x+u*A+d*T,s[4]=c*_+u*S+d*C,s[7]=c*v+u*w+d*R,s[2]=p*x+m*A+g*T,s[5]=p*_+m*S+g*C,s[8]=p*v+m*w+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,p=a*l-u*s,m=c*s-o*l,g=t*d+i*p+r*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/g;return e[0]=d*x,e[1]=(r*c-u*i)*x,e[2]=(a*i-r*o)*x,e[3]=p*x,e[4]=(u*t-r*l)*x,e[5]=(r*s-a*t)*x,e[6]=m*x,e[7]=(i*l-c*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Vx.makeScale(e,t)),this}rotate(e){return this.premultiply(Vx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Vx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Vx=new _t;function nO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const d4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function vu(n,e){return new d4[n](e)}function yh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const lb={};function Nd(n){n in lb||(lb[n]=!0,console.warn(n))}function Du(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Wx(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const h4=new _t().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),p4=new _t().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function m4(n){return n.convertSRGBToLinear().applyMatrix3(p4)}function g4(n){return n.applyMatrix3(h4).convertLinearToSRGB()}const v4={[As]:n=>n,[yt]:n=>n.convertSRGBToLinear(),[$E]:m4},y4={[As]:n=>n,[yt]:n=>n.convertLinearToSRGB(),[$E]:g4},Lr={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return As},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=v4[e],r=y4[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Rc;class XE{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Rc===void 0&&(Rc=yh("canvas")),Rc.width=e.width,Rc.height=e.height;const i=Rc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Rc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=yh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Du(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Du(t[i]/255)*255):t[i]=Du(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let x4=0;class Il{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:x4++}),this.uuid=gr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push($x(r[o].image)):s.push($x(r[o]))}else s=$x(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function $x(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?XE.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _4=0;class qt extends Vo{constructor(e=qt.DEFAULT_IMAGE,t=qt.DEFAULT_MAPPING,i=Jn,r=Jn,s=dn,o=Ys,a=Ki,l=$s,c=qt.DEFAULT_ANISOTROPY,u=Da){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_4++}),this.uuid=gr(),this.name="",this.source=new Il(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ve(0,0),this.repeat=new ve(1,1),this.center=new ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(Nd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Ba?yt:Da),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==pv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ks:e.x=e.x-Math.floor(e.x);break;case Jn:e.x=e.x<0?0:1;break;case Xu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ks:e.y=e.y-Math.floor(e.y);break;case Jn:e.y=e.y<0?0:1;break;case Xu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Nd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===yt?Ba:WE}set encoding(e){Nd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ba?yt:Da}}qt.DEFAULT_IMAGE=null;qt.DEFAULT_MAPPING=pv;qt.DEFAULT_ANISOTROPY=1;class Dt{constructor(e=0,t=0,i=0,r=1){Dt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],p=l[1],m=l[5],g=l[9],x=l[2],_=l[6],v=l[10];if(Math.abs(u-p)<.01&&Math.abs(d-x)<.01&&Math.abs(g-_)<.01){if(Math.abs(u+p)<.1&&Math.abs(d+x)<.1&&Math.abs(g+_)<.1&&Math.abs(c+m+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,w=(m+1)/2,T=(v+1)/2,C=(u+p)/4,R=(d+x)/4,D=(g+_)/4;return S>w&&S>T?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=C/i,s=R/i):w>T?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=C/r,s=D/r):T<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(T),i=R/s,r=D/s),this.set(i,r,s,t),this}let A=Math.sqrt((_-g)*(_-g)+(d-x)*(d-x)+(p-u)*(p-u));return Math.abs(A)<.001&&(A=1),this.x=(_-g)/A,this.y=(d-x)/A,this.z=(p-u)/A,this.w=Math.acos((c+m+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class iO extends Vo{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Dt(0,0,e,t),this.scissorTest=!1,this.viewport=new Dt(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(Nd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Ba?yt:Da),this.texture=new qt(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:dn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Il(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class _r extends iO{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class yv extends qt{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Mn,this.minFilter=Mn,this.wrapR=Jn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class A4 extends _r{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new yv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class JE extends qt{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Mn,this.minFilter=Mn,this.wrapR=Jn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class S4 extends _r{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new JE(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class E4 extends _r{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class zn{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const p=s[o+0],m=s[o+1],g=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=g,e[t+3]=x;return}if(d!==x||l!==p||c!==m||u!==g){let _=1-a;const v=l*p+c*m+u*g+d*x,A=v>=0?1:-1,S=1-v*v;if(S>Number.EPSILON){const T=Math.sqrt(S),C=Math.atan2(T,v*A);_=Math.sin(_*C)/T,a=Math.sin(a*C)/T}const w=a*A;if(l=l*_+p*w,c=c*_+m*w,u=u*_+g*w,d=d*_+x*w,_===1-a){const T=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=T,c*=T,u*=T,d*=T}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+u*d+l*m-c*p,e[t+1]=l*g+u*p+c*d-a*m,e[t+2]=c*g+u*m+a*p-l*d,e[t+3]=u*g-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),p=l(i/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=p*u*d+c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d-p*m*g;break;case"YXZ":this._x=p*u*d+c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d+p*m*g;break;case"ZXY":this._x=p*u*d-c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d-p*m*g;break;case"ZYX":this._x=p*u*d-c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d+p*m*g;break;case"YZX":this._x=p*u*d+c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d-p*m*g;break;case"XZY":this._x=p*u*d-c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],p=i+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Tn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class k{constructor(e=0,t=0,i=0){k.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(cb.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(cb.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,d=l*r+s*i-o*t,p=-s*t-o*i-a*r;return this.x=c*l+p*-s+u*-a-d*-o,this.y=u*l+p*-o+d*-s-c*-a,this.z=d*l+p*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return jx.copy(this).projectOnVector(e),this.sub(jx)}reflect(e){return this.sub(jx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Tn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const jx=new k,cb=new zn;class Es{constructor(e=new k(1/0,1/0,1/0),t=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(lo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(lo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=lo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Pc.copy(e.boundingBox),Pc.applyMatrix4(e.matrixWorld),this.union(Pc);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)lo.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(lo)}else r.boundingBox===null&&r.computeBoundingBox(),Pc.copy(r.boundingBox),Pc.applyMatrix4(e.matrixWorld),this.union(Pc)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,lo),lo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ed),Em.subVectors(this.max,ed),Ic.subVectors(e.a,ed),Bc.subVectors(e.b,ed),Dc.subVectors(e.c,ed),ia.subVectors(Bc,Ic),ra.subVectors(Dc,Bc),ll.subVectors(Ic,Dc);let t=[0,-ia.z,ia.y,0,-ra.z,ra.y,0,-ll.z,ll.y,ia.z,0,-ia.x,ra.z,0,-ra.x,ll.z,0,-ll.x,-ia.y,ia.x,0,-ra.y,ra.x,0,-ll.y,ll.x,0];return!Xx(t,Ic,Bc,Dc,Em)||(t=[1,0,0,0,1,0,0,0,1],!Xx(t,Ic,Bc,Dc,Em))?!1:(wm.crossVectors(ia,ra),t=[wm.x,wm.y,wm.z],Xx(t,Ic,Bc,Dc,Em))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,lo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(lo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ao[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ao[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ao[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ao[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ao[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ao[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ao[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ao[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ao),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ao=[new k,new k,new k,new k,new k,new k,new k,new k],lo=new k,Pc=new Es,Ic=new k,Bc=new k,Dc=new k,ia=new k,ra=new k,ll=new k,ed=new k,Em=new k,wm=new k,cl=new k;function Xx(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){cl.fromArray(n,s);const a=r.x*Math.abs(cl.x)+r.y*Math.abs(cl.y)+r.z*Math.abs(cl.z),l=e.dot(cl),c=t.dot(cl),u=i.dot(cl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const w4=new Es,td=new k,Jx=new k;class Kr{constructor(e=new k,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):w4.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;td.subVectors(e,this.center);const t=td.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(td,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Jx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(td.copy(e.center).add(Jx)),this.expandByPoint(td.copy(e.center).sub(Jx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const co=new k,Kx=new k,Mm=new k,sa=new k,Yx=new k,Tm=new k,Qx=new k;class ff{constructor(e=new k,t=new k(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,co)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=co.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(co.copy(this.origin).addScaledVector(this.direction,t),co.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Kx.copy(e).add(t).multiplyScalar(.5),Mm.copy(t).sub(e).normalize(),sa.copy(this.origin).sub(Kx);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Mm),a=sa.dot(this.direction),l=-sa.dot(Mm),c=sa.lengthSq(),u=Math.abs(1-o*o);let d,p,m,g;if(u>0)if(d=o*l-a,p=o*a-l,g=s*u,d>=0)if(p>=-g)if(p<=g){const x=1/u;d*=x,p*=x,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+c}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-g?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c):p<=g?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(Kx).addScaledVector(Mm,p),m}intersectSphere(e,t){co.subVectors(e.center,this.origin);const i=co.dot(this.direction),r=co.dot(co)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,co)!==null}intersectTriangle(e,t,i,r,s){Yx.subVectors(t,e),Tm.subVectors(i,e),Qx.crossVectors(Yx,Tm);let o=this.direction.dot(Qx),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;sa.subVectors(this.origin,e);const l=a*this.direction.dot(Tm.crossVectors(sa,Tm));if(l<0)return null;const c=a*this.direction.dot(Yx.cross(sa));if(c<0||l+c>o)return null;const u=-a*sa.dot(Qx);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ue{constructor(e,t,i,r,s,o,a,l,c,u,d,p,m,g,x,_){Ue.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,d,p,m,g,x,_)}set(e,t,i,r,s,o,a,l,c,u,d,p,m,g,x,_){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=p,v[3]=m,v[7]=g,v[11]=x,v[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ue().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Lc.setFromMatrixColumn(e,0).length(),s=1/Lc.setFromMatrixColumn(e,1).length(),o=1/Lc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*d,g=a*u,x=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=m+g*c,t[5]=p-x*c,t[9]=-a*l,t[2]=x-p*c,t[6]=g+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*d,g=c*u,x=c*d;t[0]=p+x*a,t[4]=g*a-m,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=m*a-g,t[6]=x+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*d,g=c*u,x=c*d;t[0]=p-x*a,t[4]=-o*d,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*u,t[9]=x-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*d,g=a*u,x=a*d;t[0]=l*u,t[4]=g*c-m,t[8]=p*c+x,t[1]=l*d,t[5]=x*c+p,t[9]=m*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,g=a*l,x=a*c;t[0]=l*u,t[4]=x-p*d,t[8]=g*d+m,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*d+g,t[10]=p-x*d}else if(e.order==="XZY"){const p=o*l,m=o*c,g=a*l,x=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=p*d+x,t[5]=o*u,t[9]=m*d-g,t[2]=g*d-m,t[6]=a*u,t[10]=x*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(M4,e,T4)}lookAt(e,t,i){const r=this.elements;return cr.subVectors(e,t),cr.lengthSq()===0&&(cr.z=1),cr.normalize(),oa.crossVectors(i,cr),oa.lengthSq()===0&&(Math.abs(i.z)===1?cr.x+=1e-4:cr.z+=1e-4,cr.normalize(),oa.crossVectors(i,cr)),oa.normalize(),Cm.crossVectors(cr,oa),r[0]=oa.x,r[4]=Cm.x,r[8]=cr.x,r[1]=oa.y,r[5]=Cm.y,r[9]=cr.y,r[2]=oa.z,r[6]=Cm.z,r[10]=cr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],p=i[9],m=i[13],g=i[2],x=i[6],_=i[10],v=i[14],A=i[3],S=i[7],w=i[11],T=i[15],C=r[0],R=r[4],D=r[8],P=r[12],B=r[1],N=r[5],j=r[9],z=r[13],$=r[2],J=r[6],Q=r[10],ee=r[14],O=r[3],W=r[7],G=r[11],H=r[15];return s[0]=o*C+a*B+l*$+c*O,s[4]=o*R+a*N+l*J+c*W,s[8]=o*D+a*j+l*Q+c*G,s[12]=o*P+a*z+l*ee+c*H,s[1]=u*C+d*B+p*$+m*O,s[5]=u*R+d*N+p*J+m*W,s[9]=u*D+d*j+p*Q+m*G,s[13]=u*P+d*z+p*ee+m*H,s[2]=g*C+x*B+_*$+v*O,s[6]=g*R+x*N+_*J+v*W,s[10]=g*D+x*j+_*Q+v*G,s[14]=g*P+x*z+_*ee+v*H,s[3]=A*C+S*B+w*$+T*O,s[7]=A*R+S*N+w*J+T*W,s[11]=A*D+S*j+w*Q+T*G,s[15]=A*P+S*z+w*ee+T*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],p=e[10],m=e[14],g=e[3],x=e[7],_=e[11],v=e[15];return g*(+s*l*d-r*c*d-s*a*p+i*c*p+r*a*m-i*l*m)+x*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*u-s*l*u)+_*(+t*c*d-t*a*m-s*o*d+i*o*m+s*a*u-i*c*u)+v*(-r*a*u-t*l*d+t*a*p+r*o*d-i*o*p+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],m=e[11],g=e[12],x=e[13],_=e[14],v=e[15],A=d*_*c-x*p*c+x*l*m-a*_*m-d*l*v+a*p*v,S=g*p*c-u*_*c-g*l*m+o*_*m+u*l*v-o*p*v,w=u*x*c-g*d*c+g*a*m-o*x*m-u*a*v+o*d*v,T=g*d*l-u*x*l-g*a*p+o*x*p+u*a*_-o*d*_,C=t*A+i*S+r*w+s*T;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/C;return e[0]=A*R,e[1]=(x*p*s-d*_*s-x*r*m+i*_*m+d*r*v-i*p*v)*R,e[2]=(a*_*s-x*l*s+x*r*c-i*_*c-a*r*v+i*l*v)*R,e[3]=(d*l*s-a*p*s-d*r*c+i*p*c+a*r*m-i*l*m)*R,e[4]=S*R,e[5]=(u*_*s-g*p*s+g*r*m-t*_*m-u*r*v+t*p*v)*R,e[6]=(g*l*s-o*_*s-g*r*c+t*_*c+o*r*v-t*l*v)*R,e[7]=(o*p*s-u*l*s+u*r*c-t*p*c-o*r*m+t*l*m)*R,e[8]=w*R,e[9]=(g*d*s-u*x*s-g*i*m+t*x*m+u*i*v-t*d*v)*R,e[10]=(o*x*s-g*a*s+g*i*c-t*x*c-o*i*v+t*a*v)*R,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*m-t*a*m)*R,e[12]=T*R,e[13]=(u*x*r-g*d*r+g*i*p-t*x*p-u*i*_+t*d*_)*R,e[14]=(g*a*r-o*x*r-g*i*l+t*x*l+o*i*_-t*a*_)*R,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*p+t*a*p)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,p=s*c,m=s*u,g=s*d,x=o*u,_=o*d,v=a*d,A=l*c,S=l*u,w=l*d,T=i.x,C=i.y,R=i.z;return r[0]=(1-(x+v))*T,r[1]=(m+w)*T,r[2]=(g-S)*T,r[3]=0,r[4]=(m-w)*C,r[5]=(1-(p+v))*C,r[6]=(_+A)*C,r[7]=0,r[8]=(g+S)*R,r[9]=(_-A)*R,r[10]=(1-(p+x))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Lc.set(r[0],r[1],r[2]).length();const o=Lc.set(r[4],r[5],r[6]).length(),a=Lc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],rs.copy(this);const c=1/s,u=1/o,d=1/a;return rs.elements[0]*=c,rs.elements[1]*=c,rs.elements[2]*=c,rs.elements[4]*=u,rs.elements[5]*=u,rs.elements[6]*=u,rs.elements[8]*=d,rs.elements[9]*=d,rs.elements[10]*=d,t.setFromRotationMatrix(rs),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Hs){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),p=(i+r)/(i-r);let m,g;if(a===Hs)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===vh)m=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Hs){const l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(o-s),p=(t+e)*c,m=(i+r)*u;let g,x;if(a===Hs)g=(o+s)*d,x=-2*d;else if(a===vh)g=s*d,x=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Lc=new k,rs=new Ue,M4=new k(0,0,0),T4=new k(1,1,1),oa=new k,Cm=new k,cr=new k,ub=new Ue,fb=new zn;class ps{constructor(e=0,t=0,i=0,r=ps.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],d=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Tn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Tn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Tn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Tn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Tn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Tn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return ub.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ub,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return fb.setFromEuler(this),this.setFromQuaternion(fb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ps.DEFAULT_ORDER="XYZ";class Ul{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let C4=0;const db=new k,Oc=new zn,uo=new Ue,bm=new k,nd=new k,b4=new k,R4=new zn,hb=new k(1,0,0),pb=new k(0,1,0),mb=new k(0,0,1),P4={type:"added"},gb={type:"removed"};class bt extends Vo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:C4++}),this.uuid=gr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bt.DEFAULT_UP.clone();const e=new k,t=new ps,i=new zn,r=new k(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ue},normalMatrix:{value:new _t}}),this.matrix=new Ue,this.matrixWorld=new Ue,this.matrixAutoUpdate=bt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ul,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Oc.setFromAxisAngle(e,t),this.quaternion.multiply(Oc),this}rotateOnWorldAxis(e,t){return Oc.setFromAxisAngle(e,t),this.quaternion.premultiply(Oc),this}rotateX(e){return this.rotateOnAxis(hb,e)}rotateY(e){return this.rotateOnAxis(pb,e)}rotateZ(e){return this.rotateOnAxis(mb,e)}translateOnAxis(e,t){return db.copy(e).applyQuaternion(this.quaternion),this.position.add(db.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(hb,e)}translateY(e){return this.translateOnAxis(pb,e)}translateZ(e){return this.translateOnAxis(mb,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(uo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?bm.copy(e):bm.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),nd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?uo.lookAt(nd,bm,this.up):uo.lookAt(bm,nd,this.up),this.quaternion.setFromRotationMatrix(uo),r&&(uo.extractRotation(r.matrixWorld),Oc.setFromRotationMatrix(uo),this.quaternion.premultiply(Oc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(P4)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(gb)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(gb)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),uo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),uo.multiply(e.parent.matrixWorld)),e.applyMatrix4(uo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nd,e,b4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nd,R4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),g.length>0&&(i.nodes=g)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}bt.DEFAULT_UP=new k(0,1,0);bt.DEFAULT_MATRIX_AUTO_UPDATE=!0;bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ss=new k,fo=new k,qx=new k,ho=new k,Fc=new k,Nc=new k,vb=new k,Zx=new k,e_=new k,t_=new k;let Rm=!1;class Ji{constructor(e=new k,t=new k,i=new k){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ss.subVectors(e,t),r.cross(ss);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ss.subVectors(r,t),fo.subVectors(i,t),qx.subVectors(e,t);const o=ss.dot(ss),a=ss.dot(fo),l=ss.dot(qx),c=fo.dot(fo),u=fo.dot(qx),d=o*c-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,m=(c*l-a*u)*p,g=(o*u-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ho),ho.x>=0&&ho.y>=0&&ho.x+ho.y<=1}static getUV(e,t,i,r,s,o,a,l){return Rm===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Rm=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,ho),l.setScalar(0),l.addScaledVector(s,ho.x),l.addScaledVector(o,ho.y),l.addScaledVector(a,ho.z),l}static isFrontFacing(e,t,i,r){return ss.subVectors(i,t),fo.subVectors(e,t),ss.cross(fo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ss.subVectors(this.c,this.b),fo.subVectors(this.a,this.b),ss.cross(fo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ji.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ji.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Rm===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Rm=!0),Ji.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return Ji.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Ji.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ji.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Fc.subVectors(r,i),Nc.subVectors(s,i),Zx.subVectors(e,i);const l=Fc.dot(Zx),c=Nc.dot(Zx);if(l<=0&&c<=0)return t.copy(i);e_.subVectors(e,r);const u=Fc.dot(e_),d=Nc.dot(e_);if(u>=0&&d<=u)return t.copy(r);const p=l*d-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Fc,o);t_.subVectors(e,s);const m=Fc.dot(t_),g=Nc.dot(t_);if(g>=0&&m<=g)return t.copy(s);const x=m*c-l*g;if(x<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(i).addScaledVector(Nc,a);const _=u*g-m*d;if(_<=0&&d-u>=0&&m-g>=0)return vb.subVectors(s,r),a=(d-u)/(d-u+(m-g)),t.copy(r).addScaledVector(vb,a);const v=1/(_+x+p);return o=x*v,a=p*v,t.copy(i).addScaledVector(Fc,o).addScaledVector(Nc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let I4=0;class Vn extends Vo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:I4++}),this.uuid=gr(),this.name="",this.type="Material",this.blending=Nl,this.side=Js,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=DE,this.blendDst=LE,this.blendEquation=wl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=x0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=jL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wg,this.stencilZFail=Wg,this.stencilZPass=Wg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Nl&&(i.blending=this.blending),this.side!==Js&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const rO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},os={h:0,s:0,l:0},Pm={h:0,s:0,l:0};function n_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let be=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=yt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Lr.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Lr.workingColorSpace){return this.r=e,this.g=t,this.b=i,Lr.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Lr.workingColorSpace){if(e=jE(e,1),t=Tn(t,0,1),i=Tn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=n_(o,s,e+1/3),this.g=n_(o,s,e),this.b=n_(o,s,e-1/3)}return Lr.toWorkingColorSpace(this,r),this}setStyle(e,t=yt){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=yt){const i=rO[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Du(e.r),this.g=Du(e.g),this.b=Du(e.b),this}copyLinearToSRGB(e){return this.r=Wx(e.r),this.g=Wx(e.g),this.b=Wx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=yt){return Lr.fromWorkingColorSpace(Si.copy(this),e),Math.round(Tn(Si.r*255,0,255))*65536+Math.round(Tn(Si.g*255,0,255))*256+Math.round(Tn(Si.b*255,0,255))}getHexString(e=yt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Lr.workingColorSpace){Lr.fromWorkingColorSpace(Si.copy(this),t);const i=Si.r,r=Si.g,s=Si.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Lr.workingColorSpace){return Lr.fromWorkingColorSpace(Si.copy(this),t),e.r=Si.r,e.g=Si.g,e.b=Si.b,e}getStyle(e=yt){Lr.fromWorkingColorSpace(Si.copy(this),e);const t=Si.r,i=Si.g,r=Si.b;return e!==yt?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(os),os.h+=e,os.s+=t,os.l+=i,this.setHSL(os.h,os.s,os.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(os),e.getHSL(Pm);const i=Fd(os.h,Pm.h,t),r=Fd(os.s,Pm.s,t),s=Fd(os.l,Pm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Si=new be;be.NAMES=rO;class pr extends Vn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const xo=B4();function B4(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Wi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Tn(n,-65504,65504),xo.floatView[0]=n;const e=xo.uint32View[0],t=e>>23&511;return xo.baseTable[t]+((e&8388607)>>xo.shiftTable[t])}function Sd(n){const e=n>>10;return xo.uint32View[0]=xo.mantissaTable[xo.offsetTable[e]+(n&1023)]+xo.exponentTable[e],xo.floatView[0]}const D4={toHalfFloat:Wi,fromHalfFloat:Sd},Nn=new k,Im=new ve;class kt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=gh,this.updateRange={offset:0,count:-1},this.gpuType=zs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Im.fromBufferAttribute(this,t),Im.applyMatrix3(e),this.setXY(t,Im.x,Im.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.applyMatrix3(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.applyMatrix4(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.applyNormalMatrix(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.transformDirection(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Yi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=At(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Yi(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Yi(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Yi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Yi(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array),s=At(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==gh&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class L4 extends kt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class O4 extends kt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class F4 extends kt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class N4 extends kt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class xv extends kt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class k4 extends kt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class KE extends kt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class U4 extends kt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Sd(this.array[e*this.itemSize]);return this.normalized&&(t=Yi(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=Wi(t),this}getY(e){let t=Sd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Yi(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=Wi(t),this}getZ(e){let t=Sd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Yi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=Wi(t),this}getW(e){let t=Sd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Yi(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=Wi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array)),this.array[e+0]=Wi(t),this.array[e+1]=Wi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array)),this.array[e+0]=Wi(t),this.array[e+1]=Wi(i),this.array[e+2]=Wi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array),s=At(s,this.array)),this.array[e+0]=Wi(t),this.array[e+1]=Wi(i),this.array[e+2]=Wi(r),this.array[e+3]=Wi(s),this}}class He extends kt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class z4 extends kt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let H4=0;const Br=new Ue,i_=new bt,kc=new k,ur=new Es,id=new Es,ni=new k;class dt extends Vo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:H4++}),this.uuid=gr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nO(e)?KE:xv)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new _t().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Br.makeRotationFromQuaternion(e),this.applyMatrix4(Br),this}rotateX(e){return Br.makeRotationX(e),this.applyMatrix4(Br),this}rotateY(e){return Br.makeRotationY(e),this.applyMatrix4(Br),this}rotateZ(e){return Br.makeRotationZ(e),this.applyMatrix4(Br),this}translate(e,t,i){return Br.makeTranslation(e,t,i),this.applyMatrix4(Br),this}scale(e,t,i){return Br.makeScale(e,t,i),this.applyMatrix4(Br),this}lookAt(e){return i_.lookAt(e),i_.updateMatrix(),this.applyMatrix4(i_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kc).negate(),this.translate(kc.x,kc.y,kc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new He(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Es);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ur.setFromBufferAttribute(s),this.morphTargetsRelative?(ni.addVectors(this.boundingBox.min,ur.min),this.boundingBox.expandByPoint(ni),ni.addVectors(this.boundingBox.max,ur.max),this.boundingBox.expandByPoint(ni)):(this.boundingBox.expandByPoint(ur.min),this.boundingBox.expandByPoint(ur.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Kr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new k,1/0);return}if(e){const i=this.boundingSphere.center;if(ur.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];id.setFromBufferAttribute(a),this.morphTargetsRelative?(ni.addVectors(ur.min,id.min),ur.expandByPoint(ni),ni.addVectors(ur.max,id.max),ur.expandByPoint(ni)):(ur.expandByPoint(id.min),ur.expandByPoint(id.max))}ur.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ni.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ni));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ni.fromBufferAttribute(a,c),l&&(kc.fromBufferAttribute(e,c),ni.add(kc)),r=Math.max(r,i.distanceToSquared(ni))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new kt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let B=0;B<a;B++)c[B]=new k,u[B]=new k;const d=new k,p=new k,m=new k,g=new ve,x=new ve,_=new ve,v=new k,A=new k;function S(B,N,j){d.fromArray(r,B*3),p.fromArray(r,N*3),m.fromArray(r,j*3),g.fromArray(o,B*2),x.fromArray(o,N*2),_.fromArray(o,j*2),p.sub(d),m.sub(d),x.sub(g),_.sub(g);const z=1/(x.x*_.y-_.x*x.y);isFinite(z)&&(v.copy(p).multiplyScalar(_.y).addScaledVector(m,-x.y).multiplyScalar(z),A.copy(m).multiplyScalar(x.x).addScaledVector(p,-_.x).multiplyScalar(z),c[B].add(v),c[N].add(v),c[j].add(v),u[B].add(A),u[N].add(A),u[j].add(A))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let B=0,N=w.length;B<N;++B){const j=w[B],z=j.start,$=j.count;for(let J=z,Q=z+$;J<Q;J+=3)S(i[J+0],i[J+1],i[J+2])}const T=new k,C=new k,R=new k,D=new k;function P(B){R.fromArray(s,B*3),D.copy(R);const N=c[B];T.copy(N),T.sub(R.multiplyScalar(R.dot(N))).normalize(),C.crossVectors(D,N);const z=C.dot(u[B])<0?-1:1;l[B*4]=T.x,l[B*4+1]=T.y,l[B*4+2]=T.z,l[B*4+3]=z}for(let B=0,N=w.length;B<N;++B){const j=w[B],z=j.start,$=j.count;for(let J=z,Q=z+$;J<Q;J+=3)P(i[J+0]),P(i[J+1]),P(i[J+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new kt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new k,s=new k,o=new k,a=new k,l=new k,c=new k,u=new k,d=new k;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),x=e.getX(p+1),_=e.getX(p+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,_),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,_),a.add(u),l.add(u),c.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(p+0,u.x,u.y,u.z),i.setXYZ(p+1,u.x,u.y,u.z),i.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ni.fromBufferAttribute(e,t),ni.normalize(),e.setXYZ(t,ni.x,ni.y,ni.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,p=new c.constructor(l.length*u);let m=0,g=0;for(let x=0,_=l.length;x<_;x++){a.isInterleavedBufferAttribute?m=l[x]*a.data.stride+a.offset:m=l[x]*u;for(let v=0;v<u;v++)p[g++]=c[m++]}return new kt(p,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new dt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const p=c[u],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d];u.push(m.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let p=0,m=d.length;p<m;p++)u.push(d[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const yb=new Ue,ul=new ff,Bm=new Kr,xb=new k,Uc=new k,zc=new k,Hc=new k,r_=new k,Dm=new k,Lm=new ve,Om=new ve,Fm=new ve,_b=new k,Ab=new k,Sb=new k,Nm=new k,km=new k;class Hn extends bt{constructor(e=new dt,t=new pr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Dm.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(r_.fromBufferAttribute(d,e),o?Dm.addScaledVector(r_,u):Dm.addScaledVector(r_.sub(t),u))}t.add(Dm)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Bm.copy(i.boundingSphere),Bm.applyMatrix4(s),ul.copy(e.ray).recast(e.near),!(Bm.containsPoint(ul.origin)===!1&&(ul.intersectSphere(Bm,xb)===null||ul.origin.distanceToSquared(xb)>(e.far-e.near)**2))&&(yb.copy(s).invert(),ul.copy(e.ray).applyMatrix4(yb),!(i.boundingBox!==null&&ul.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ul)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,x=p.length;g<x;g++){const _=p[g],v=o[_.materialIndex],A=Math.max(_.start,m.start),S=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let w=A,T=S;w<T;w+=3){const C=a.getX(w),R=a.getX(w+1),D=a.getX(w+2);r=Um(this,v,e,i,c,u,d,C,R,D),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const g=Math.max(0,m.start),x=Math.min(a.count,m.start+m.count);for(let _=g,v=x;_<v;_+=3){const A=a.getX(_),S=a.getX(_+1),w=a.getX(_+2);r=Um(this,o,e,i,c,u,d,A,S,w),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,x=p.length;g<x;g++){const _=p[g],v=o[_.materialIndex],A=Math.max(_.start,m.start),S=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let w=A,T=S;w<T;w+=3){const C=w,R=w+1,D=w+2;r=Um(this,v,e,i,c,u,d,C,R,D),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const g=Math.max(0,m.start),x=Math.min(l.count,m.start+m.count);for(let _=g,v=x;_<v;_+=3){const A=_,S=_+1,w=_+2;r=Um(this,o,e,i,c,u,d,A,S,w),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function G4(n,e,t,i,r,s,o,a){let l;if(e.side===Ni?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Js,a),l===null)return null;km.copy(a),km.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(km);return c<t.near||c>t.far?null:{distance:c,point:km.clone(),object:n}}function Um(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Uc),n.getVertexPosition(l,zc),n.getVertexPosition(c,Hc);const u=G4(n,e,t,i,Uc,zc,Hc,Nm);if(u){r&&(Lm.fromBufferAttribute(r,a),Om.fromBufferAttribute(r,l),Fm.fromBufferAttribute(r,c),u.uv=Ji.getInterpolation(Nm,Uc,zc,Hc,Lm,Om,Fm,new ve)),s&&(Lm.fromBufferAttribute(s,a),Om.fromBufferAttribute(s,l),Fm.fromBufferAttribute(s,c),u.uv1=Ji.getInterpolation(Nm,Uc,zc,Hc,Lm,Om,Fm,new ve),u.uv2=u.uv1),o&&(_b.fromBufferAttribute(o,a),Ab.fromBufferAttribute(o,l),Sb.fromBufferAttribute(o,c),u.normal=Ji.getInterpolation(Nm,Uc,zc,Hc,_b,Ab,Sb,new k),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new k,materialIndex:0};Ji.getNormal(Uc,zc,Hc,d.normal),u.face=d}return u}class oc extends dt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let p=0,m=0;g("z","y","x",-1,-1,i,t,e,o,s,0),g("z","y","x",1,-1,i,t,-e,o,s,1),g("x","z","y",1,1,e,i,t,r,o,2),g("x","z","y",1,-1,e,i,-t,r,o,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new He(c,3)),this.setAttribute("normal",new He(u,3)),this.setAttribute("uv",new He(d,2));function g(x,_,v,A,S,w,T,C,R,D,P){const B=w/R,N=T/D,j=w/2,z=T/2,$=C/2,J=R+1,Q=D+1;let ee=0,O=0;const W=new k;for(let G=0;G<Q;G++){const H=G*N-z;for(let Y=0;Y<J;Y++){const me=Y*B-j;W[x]=me*A,W[_]=H*S,W[v]=$,c.push(W.x,W.y,W.z),W[x]=0,W[_]=0,W[v]=C>0?1:-1,u.push(W.x,W.y,W.z),d.push(Y/R),d.push(1-G/D),ee+=1}}for(let G=0;G<D;G++)for(let H=0;H<R;H++){const Y=p+H+J*G,me=p+H+J*(G+1),ce=p+(H+1)+J*(G+1),Ae=p+(H+1)+J*G;l.push(Y,me,Ae),l.push(me,ce,Ae),O+=6}a.addGroup(m,O,P),m+=O,p+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ii(n){const e={};for(let t=0;t<n.length;t++){const i=Qu(n[t]);for(const r in i)e[r]=i[r]}return e}function V4(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function sO(n){return n.getRenderTarget()===null?n.outputColorSpace:As}const oO={clone:Qu,merge:Ii};var W4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Xr extends Vn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=W4,this.fragmentShader=$4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qu(e.uniforms),this.uniformsGroups=V4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Gh extends bt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ue,this.projectionMatrix=new Ue,this.projectionMatrixInverse=new Ue,this.coordinateSystem=Hs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class kn extends Gh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Yu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(kl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Yu*2*Math.atan(Math.tan(kl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(kl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Gc=-90,Vc=1;class aO extends bt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null;const r=new kn(Gc,Vc,e,t);r.layers=this.layers,this.add(r);const s=new kn(Gc,Vc,e,t);s.layers=this.layers,this.add(s);const o=new kn(Gc,Vc,e,t);o.layers=this.layers,this.add(o);const a=new kn(Gc,Vc,e,t);a.layers=this.layers,this.add(a);const l=new kn(Gc,Vc,e,t);l.layers=this.layers,this.add(l);const c=new kn(Gc,Vc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Hs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===vh)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.xr.enabled;e.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=p,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class Vh extends qt{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Oo,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lO extends _r{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(Nd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ba?yt:Da),this.texture=new Vh(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:dn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new oc(5,5,5),s=new Xr({name:"CubemapFromEquirect",uniforms:Qu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ni,blending:Co});s.uniforms.tEquirect.value=t;const o=new Hn(r,s),a=t.minFilter;return t.minFilter===Ys&&(t.minFilter=dn),new aO(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const s_=new k,j4=new k,X4=new _t;class pa{constructor(e=new k(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=s_.subVectors(i,t).cross(j4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(s_),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||X4.getNormalMatrix(e),r=this.coplanarPoint(s_).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const fl=new Kr,zm=new k;class _v{constructor(e=new pa,t=new pa,i=new pa,r=new pa,s=new pa,o=new pa){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Hs){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],d=r[6],p=r[7],m=r[8],g=r[9],x=r[10],_=r[11],v=r[12],A=r[13],S=r[14],w=r[15];if(i[0].setComponents(l-s,p-c,_-m,w-v).normalize(),i[1].setComponents(l+s,p+c,_+m,w+v).normalize(),i[2].setComponents(l+o,p+u,_+g,w+A).normalize(),i[3].setComponents(l-o,p-u,_-g,w-A).normalize(),i[4].setComponents(l-a,p-d,_-x,w-S).normalize(),t===Hs)i[5].setComponents(l+a,p+d,_+x,w+S).normalize();else if(t===vh)i[5].setComponents(a,d,x,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),fl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),fl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(fl)}intersectsSprite(e){return fl.center.set(0,0,0),fl.radius=.7071067811865476,fl.applyMatrix4(e.matrixWorld),this.intersectsSphere(fl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(zm.x=r.normal.x>0?e.max.x:e.min.x,zm.y=r.normal.y>0?e.max.y:e.min.y,zm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(zm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function cO(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function J4(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const d=c.array,p=c.usage,m=n.createBuffer();n.bindBuffer(u,m),n.bufferData(u,d,p),c.onUploadCallback();let g;if(d instanceof Float32Array)g=n.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)g=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)g=n.SHORT;else if(d instanceof Uint32Array)g=n.UNSIGNED_INT;else if(d instanceof Int32Array)g=n.INT;else if(d instanceof Int8Array)g=n.BYTE;else if(d instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:m,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,d){const p=u.array,m=u.updateRange;n.bindBuffer(d,c),m.count===-1?n.bufferSubData(d,0,p):(t?n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const p=i.get(c);(!p||p.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d===void 0?i.set(c,r(c,u)):d.version<c.version&&(s(d.buffer,c,u),d.version=c.version)}return{get:o,remove:a,update:l}}class df extends dt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,p=t/l,m=[],g=[],x=[],_=[];for(let v=0;v<u;v++){const A=v*p-o;for(let S=0;S<c;S++){const w=S*d-s;g.push(w,-A,0),x.push(0,0,1),_.push(S/a),_.push(1-v/l)}}for(let v=0;v<l;v++)for(let A=0;A<a;A++){const S=A+c*v,w=A+c*(v+1),T=A+1+c*(v+1),C=A+1+c*v;m.push(S,w,C),m.push(w,T,C)}this.setIndex(m),this.setAttribute("position",new He(g,3)),this.setAttribute("normal",new He(x,3)),this.setAttribute("uv",new He(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new df(e.width,e.height,e.widthSegments,e.heightSegments)}}var K4=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Y4=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Q4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,q4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Z4=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,eV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,tV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,nV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,iV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,rV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,oV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,aV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,cV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,uV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,fV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,dV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,pV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,mV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,gV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,vV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,yV=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,xV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_V=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,AV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,SV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,EV="gl_FragColor = linearToOutputTexel( gl_FragColor );",wV=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,MV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,TV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,CV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,bV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,RV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,IV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,BV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,DV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,LV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,OV=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,FV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,NV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,kV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,UV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,zV=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,HV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,GV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,VV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,WV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,$V=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,jV=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,XV=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,JV=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,KV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,YV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,QV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,ZV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,e5=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,t5=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,n5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,i5=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,r5=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,s5=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,o5=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,a5=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,l5=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,c5=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,u5=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,f5=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,d5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,h5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,p5=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,m5=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,g5=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,v5=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,y5=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,x5=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,_5=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,A5=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,S5=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,E5=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,w5=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,M5=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,T5=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,C5=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,b5=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,R5=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,P5=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,I5=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,B5=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,D5=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,L5=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,O5=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,F5=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,N5=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,k5=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,U5=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,z5=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,H5=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,G5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,V5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,W5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$5=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const j5=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,X5=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,J5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,K5=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Y5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Q5=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,q5=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Z5=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,e9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,t9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,n9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,i9=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,r9=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,s9=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,o9=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,a9=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,c9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,u9=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,f9=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,d9=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,h9=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,p9=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,m9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g9=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,v9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,x9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,A9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,S9=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,E9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,w9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,M9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xt={alphahash_fragment:K4,alphahash_pars_fragment:Y4,alphamap_fragment:Q4,alphamap_pars_fragment:q4,alphatest_fragment:Z4,alphatest_pars_fragment:eV,aomap_fragment:tV,aomap_pars_fragment:nV,begin_vertex:iV,beginnormal_vertex:rV,bsdfs:sV,iridescence_fragment:oV,bumpmap_pars_fragment:aV,clipping_planes_fragment:lV,clipping_planes_pars_fragment:cV,clipping_planes_pars_vertex:uV,clipping_planes_vertex:fV,color_fragment:dV,color_pars_fragment:hV,color_pars_vertex:pV,color_vertex:mV,common:gV,cube_uv_reflection_fragment:vV,defaultnormal_vertex:yV,displacementmap_pars_vertex:xV,displacementmap_vertex:_V,emissivemap_fragment:AV,emissivemap_pars_fragment:SV,colorspace_fragment:EV,colorspace_pars_fragment:wV,envmap_fragment:MV,envmap_common_pars_fragment:TV,envmap_pars_fragment:CV,envmap_pars_vertex:bV,envmap_physical_pars_fragment:zV,envmap_vertex:RV,fog_vertex:PV,fog_pars_vertex:IV,fog_fragment:BV,fog_pars_fragment:DV,gradientmap_pars_fragment:LV,lightmap_fragment:OV,lightmap_pars_fragment:FV,lights_lambert_fragment:NV,lights_lambert_pars_fragment:kV,lights_pars_begin:UV,lights_toon_fragment:HV,lights_toon_pars_fragment:GV,lights_phong_fragment:VV,lights_phong_pars_fragment:WV,lights_physical_fragment:$V,lights_physical_pars_fragment:jV,lights_fragment_begin:XV,lights_fragment_maps:JV,lights_fragment_end:KV,logdepthbuf_fragment:YV,logdepthbuf_pars_fragment:QV,logdepthbuf_pars_vertex:qV,logdepthbuf_vertex:ZV,map_fragment:e5,map_pars_fragment:t5,map_particle_fragment:n5,map_particle_pars_fragment:i5,metalnessmap_fragment:r5,metalnessmap_pars_fragment:s5,morphcolor_vertex:o5,morphnormal_vertex:a5,morphtarget_pars_vertex:l5,morphtarget_vertex:c5,normal_fragment_begin:u5,normal_fragment_maps:f5,normal_pars_fragment:d5,normal_pars_vertex:h5,normal_vertex:p5,normalmap_pars_fragment:m5,clearcoat_normal_fragment_begin:g5,clearcoat_normal_fragment_maps:v5,clearcoat_pars_fragment:y5,iridescence_pars_fragment:x5,opaque_fragment:_5,packing:A5,premultiplied_alpha_fragment:S5,project_vertex:E5,dithering_fragment:w5,dithering_pars_fragment:M5,roughnessmap_fragment:T5,roughnessmap_pars_fragment:C5,shadowmap_pars_fragment:b5,shadowmap_pars_vertex:R5,shadowmap_vertex:P5,shadowmask_pars_fragment:I5,skinbase_vertex:B5,skinning_pars_vertex:D5,skinning_vertex:L5,skinnormal_vertex:O5,specularmap_fragment:F5,specularmap_pars_fragment:N5,tonemapping_fragment:k5,tonemapping_pars_fragment:U5,transmission_fragment:z5,transmission_pars_fragment:H5,uv_pars_fragment:G5,uv_pars_vertex:V5,uv_vertex:W5,worldpos_vertex:$5,background_vert:j5,background_frag:X5,backgroundCube_vert:J5,backgroundCube_frag:K5,cube_vert:Y5,cube_frag:Q5,depth_vert:q5,depth_frag:Z5,distanceRGBA_vert:e9,distanceRGBA_frag:t9,equirect_vert:n9,equirect_frag:i9,linedashed_vert:r9,linedashed_frag:s9,meshbasic_vert:o9,meshbasic_frag:a9,meshlambert_vert:l9,meshlambert_frag:c9,meshmatcap_vert:u9,meshmatcap_frag:f9,meshnormal_vert:d9,meshnormal_frag:h9,meshphong_vert:p9,meshphong_frag:m9,meshphysical_vert:g9,meshphysical_frag:v9,meshtoon_vert:y9,meshtoon_frag:x9,points_vert:_9,points_frag:A9,shadow_vert:S9,shadow_frag:E9,sprite_vert:w9,sprite_frag:M9},Ie={common:{diffuse:{value:new be(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new _t},alphaMap:{value:null},alphaMapTransform:{value:new _t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new _t}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new _t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new _t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new _t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new _t},normalScale:{value:new ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new _t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new _t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new _t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new _t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new be(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new be(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new _t},alphaTest:{value:0},uvTransform:{value:new _t}},sprite:{diffuse:{value:new be(16777215)},opacity:{value:1},center:{value:new ve(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new _t},alphaMap:{value:null},alphaMapTransform:{value:new _t},alphaTest:{value:0}}},ds={basic:{uniforms:Ii([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.fog]),vertexShader:xt.meshbasic_vert,fragmentShader:xt.meshbasic_frag},lambert:{uniforms:Ii([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new be(0)}}]),vertexShader:xt.meshlambert_vert,fragmentShader:xt.meshlambert_frag},phong:{uniforms:Ii([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new be(0)},specular:{value:new be(1118481)},shininess:{value:30}}]),vertexShader:xt.meshphong_vert,fragmentShader:xt.meshphong_frag},standard:{uniforms:Ii([Ie.common,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.roughnessmap,Ie.metalnessmap,Ie.fog,Ie.lights,{emissive:{value:new be(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag},toon:{uniforms:Ii([Ie.common,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.gradientmap,Ie.fog,Ie.lights,{emissive:{value:new be(0)}}]),vertexShader:xt.meshtoon_vert,fragmentShader:xt.meshtoon_frag},matcap:{uniforms:Ii([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,{matcap:{value:null}}]),vertexShader:xt.meshmatcap_vert,fragmentShader:xt.meshmatcap_frag},points:{uniforms:Ii([Ie.points,Ie.fog]),vertexShader:xt.points_vert,fragmentShader:xt.points_frag},dashed:{uniforms:Ii([Ie.common,Ie.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xt.linedashed_vert,fragmentShader:xt.linedashed_frag},depth:{uniforms:Ii([Ie.common,Ie.displacementmap]),vertexShader:xt.depth_vert,fragmentShader:xt.depth_frag},normal:{uniforms:Ii([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,{opacity:{value:1}}]),vertexShader:xt.meshnormal_vert,fragmentShader:xt.meshnormal_frag},sprite:{uniforms:Ii([Ie.sprite,Ie.fog]),vertexShader:xt.sprite_vert,fragmentShader:xt.sprite_frag},background:{uniforms:{uvTransform:{value:new _t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xt.background_vert,fragmentShader:xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xt.backgroundCube_vert,fragmentShader:xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xt.cube_vert,fragmentShader:xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xt.equirect_vert,fragmentShader:xt.equirect_frag},distanceRGBA:{uniforms:Ii([Ie.common,Ie.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xt.distanceRGBA_vert,fragmentShader:xt.distanceRGBA_frag},shadow:{uniforms:Ii([Ie.lights,Ie.fog,{color:{value:new be(0)},opacity:{value:1}}]),vertexShader:xt.shadow_vert,fragmentShader:xt.shadow_frag}};ds.physical={uniforms:Ii([ds.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new _t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new _t},clearcoatNormalScale:{value:new ve(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new _t},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new _t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new _t},sheen:{value:0},sheenColor:{value:new be(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new _t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new _t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new _t},transmissionSamplerSize:{value:new ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new _t},attenuationDistance:{value:0},attenuationColor:{value:new be(0)},specularColor:{value:new be(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new _t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new _t},anisotropyVector:{value:new ve},anisotropyMap:{value:null},anisotropyMapTransform:{value:new _t}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag};const Hm={r:0,b:0,g:0};function T9(n,e,t,i,r,s,o){const a=new be(0);let l=s===!0?0:1,c,u,d=null,p=0,m=null;function g(_,v){let A=!1,S=v.isScene===!0?v.background:null;switch(S&&S.isTexture&&(S=(v.backgroundBlurriness>0?t:e).get(S)),S===null?x(a,l):S&&S.isColor&&(x(S,1),A=!0),n.xr.getEnvironmentBlendMode()){case"opaque":A=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),A=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),A=!0;break}(n.autoClear||A)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===uf)?(u===void 0&&(u=new Hn(new oc(1,1,1),new Xr({name:"BackgroundCubeMaterial",uniforms:Qu(ds.backgroundCube.uniforms),vertexShader:ds.backgroundCube.vertexShader,fragmentShader:ds.backgroundCube.fragmentShader,side:Ni,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,R,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=S,u.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=S.colorSpace!==yt,(d!==S||p!==S.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new Hn(new df(2,2),new Xr({name:"BackgroundMaterial",uniforms:Qu(ds.background.uniforms),vertexShader:ds.background.vertexShader,fragmentShader:ds.background.fragmentShader,side:Js,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=S.colorSpace!==yt,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||p!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function x(_,v){_.getRGB(Hm,sO(n)),i.buffers.color.setClear(Hm.r,Hm.g,Hm.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(_,v=1){a.set(_),l=v,x(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,x(a,l)},render:g}}function C9(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=_(null);let c=l,u=!1;function d($,J,Q,ee,O){let W=!1;if(o){const G=x(ee,Q,J);c!==G&&(c=G,m(c.object)),W=v($,ee,Q,O),W&&A($,ee,Q,O)}else{const G=J.wireframe===!0;(c.geometry!==ee.id||c.program!==Q.id||c.wireframe!==G)&&(c.geometry=ee.id,c.program=Q.id,c.wireframe=G,W=!0)}O!==null&&t.update(O,n.ELEMENT_ARRAY_BUFFER),(W||u)&&(u=!1,D($,J,Q,ee),O!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(O).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m($){return i.isWebGL2?n.bindVertexArray($):s.bindVertexArrayOES($)}function g($){return i.isWebGL2?n.deleteVertexArray($):s.deleteVertexArrayOES($)}function x($,J,Q){const ee=Q.wireframe===!0;let O=a[$.id];O===void 0&&(O={},a[$.id]=O);let W=O[J.id];W===void 0&&(W={},O[J.id]=W);let G=W[ee];return G===void 0&&(G=_(p()),W[ee]=G),G}function _($){const J=[],Q=[],ee=[];for(let O=0;O<r;O++)J[O]=0,Q[O]=0,ee[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:Q,attributeDivisors:ee,object:$,attributes:{},index:null}}function v($,J,Q,ee){const O=c.attributes,W=J.attributes;let G=0;const H=Q.getAttributes();for(const Y in H)if(H[Y].location>=0){const ce=O[Y];let Ae=W[Y];if(Ae===void 0&&(Y==="instanceMatrix"&&$.instanceMatrix&&(Ae=$.instanceMatrix),Y==="instanceColor"&&$.instanceColor&&(Ae=$.instanceColor)),ce===void 0||ce.attribute!==Ae||Ae&&ce.data!==Ae.data)return!0;G++}return c.attributesNum!==G||c.index!==ee}function A($,J,Q,ee){const O={},W=J.attributes;let G=0;const H=Q.getAttributes();for(const Y in H)if(H[Y].location>=0){let ce=W[Y];ce===void 0&&(Y==="instanceMatrix"&&$.instanceMatrix&&(ce=$.instanceMatrix),Y==="instanceColor"&&$.instanceColor&&(ce=$.instanceColor));const Ae={};Ae.attribute=ce,ce&&ce.data&&(Ae.data=ce.data),O[Y]=Ae,G++}c.attributes=O,c.attributesNum=G,c.index=ee}function S(){const $=c.newAttributes;for(let J=0,Q=$.length;J<Q;J++)$[J]=0}function w($){T($,0)}function T($,J){const Q=c.newAttributes,ee=c.enabledAttributes,O=c.attributeDivisors;Q[$]=1,ee[$]===0&&(n.enableVertexAttribArray($),ee[$]=1),O[$]!==J&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($,J),O[$]=J)}function C(){const $=c.newAttributes,J=c.enabledAttributes;for(let Q=0,ee=J.length;Q<ee;Q++)J[Q]!==$[Q]&&(n.disableVertexAttribArray(Q),J[Q]=0)}function R($,J,Q,ee,O,W,G){G===!0?n.vertexAttribIPointer($,J,Q,O,W):n.vertexAttribPointer($,J,Q,ee,O,W)}function D($,J,Q,ee){if(i.isWebGL2===!1&&($.isInstancedMesh||ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const O=ee.attributes,W=Q.getAttributes(),G=J.defaultAttributeValues;for(const H in W){const Y=W[H];if(Y.location>=0){let me=O[H];if(me===void 0&&(H==="instanceMatrix"&&$.instanceMatrix&&(me=$.instanceMatrix),H==="instanceColor"&&$.instanceColor&&(me=$.instanceColor)),me!==void 0){const ce=me.normalized,Ae=me.itemSize,Se=t.get(me);if(Se===void 0)continue;const Re=Se.buffer,Ne=Se.type,pt=Se.bytesPerElement,wt=i.isWebGL2===!0&&(Ne===n.INT||Ne===n.UNSIGNED_INT||me.gpuType===FE);if(me.isInterleavedBufferAttribute){const Le=me.data,X=Le.stride,xe=me.offset;if(Le.isInstancedInterleavedBuffer){for(let pe=0;pe<Y.locationSize;pe++)T(Y.location+pe,Le.meshPerAttribute);$.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Le.meshPerAttribute*Le.count)}else for(let pe=0;pe<Y.locationSize;pe++)w(Y.location+pe);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let pe=0;pe<Y.locationSize;pe++)R(Y.location+pe,Ae/Y.locationSize,Ne,ce,X*pt,(xe+Ae/Y.locationSize*pe)*pt,wt)}else{if(me.isInstancedBufferAttribute){for(let Le=0;Le<Y.locationSize;Le++)T(Y.location+Le,me.meshPerAttribute);$.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let Le=0;Le<Y.locationSize;Le++)w(Y.location+Le);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let Le=0;Le<Y.locationSize;Le++)R(Y.location+Le,Ae/Y.locationSize,Ne,ce,Ae*pt,Ae/Y.locationSize*Le*pt,wt)}}else if(G!==void 0){const ce=G[H];if(ce!==void 0)switch(ce.length){case 2:n.vertexAttrib2fv(Y.location,ce);break;case 3:n.vertexAttrib3fv(Y.location,ce);break;case 4:n.vertexAttrib4fv(Y.location,ce);break;default:n.vertexAttrib1fv(Y.location,ce)}}}}C()}function P(){j();for(const $ in a){const J=a[$];for(const Q in J){const ee=J[Q];for(const O in ee)g(ee[O].object),delete ee[O];delete J[Q]}delete a[$]}}function B($){if(a[$.id]===void 0)return;const J=a[$.id];for(const Q in J){const ee=J[Q];for(const O in ee)g(ee[O].object),delete ee[O];delete J[Q]}delete a[$.id]}function N($){for(const J in a){const Q=a[J];if(Q[$.id]===void 0)continue;const ee=Q[$.id];for(const O in ee)g(ee[O].object),delete ee[O];delete Q[$.id]}}function j(){z(),u=!0,c!==l&&(c=l,m(c.object))}function z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:j,resetDefaultState:z,dispose:P,releaseStatesOfGeometry:B,releaseStatesOfProgram:N,initAttributes:S,enableAttribute:w,disableUnusedAttributes:C}}function b9(n,e,t,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,d){if(d===0)return;let p,m;if(r)p=n,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,c,u,d),t.update(u,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function R9(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=p>0,w=o||e.has("OES_texture_float"),T=S&&w,C=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:g,maxAttributes:x,maxVertexUniforms:_,maxVaryings:v,maxFragmentUniforms:A,vertexTextures:S,floatFragmentTextures:w,floatVertexTextures:T,maxSamples:C}}function P9(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new pa,a=new _t,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||i!==0||r;return r=p,i=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=u(d,p,0)},this.setState=function(d,p,m){const g=d.clippingPlanes,x=d.clipIntersection,_=d.clipShadows,v=n.get(d);if(!r||g===null||g.length===0||s&&!_)s?u(null):c();else{const A=s?0:i,S=A*4;let w=v.clippingState||null;l.value=w,w=u(g,p,S,m);for(let T=0;T!==S;++T)w[T]=t[T];v.clippingState=w,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,p,m,g){const x=d!==null?d.length:0;let _=null;if(x!==0){if(_=l.value,g!==!0||_===null){const v=m+x*4,A=p.matrixWorldInverse;a.getNormalMatrix(A),(_===null||_.length<v)&&(_=new Float32Array(v));for(let S=0,w=m;S!==x;++S,w+=4)o.copy(d[S]).applyMatrix4(A,a),o.normal.toArray(_,w),_[w+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,_}}function I9(n){let e=new WeakMap;function t(o,a){return a===ju?o.mapping=Oo:a===hh&&(o.mapping=Na),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===ju||a===hh)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new lO(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class ac extends Gh{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const yu=4,Eb=[.125,.215,.35,.446,.526,.582],Ml=20,o_=new ac,wb=new be;let a_=null;const Al=(1+Math.sqrt(5))/2,Wc=1/Al,Mb=[new k(1,1,1),new k(-1,1,1),new k(1,1,-1),new k(-1,1,-1),new k(0,Al,Wc),new k(0,Al,-Wc),new k(Wc,0,Al),new k(-Wc,0,Al),new k(Al,Wc,0),new k(-Al,Wc,0)];class zA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){a_=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=bb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Cb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(a_),e.scissorTest=!1,Gm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Oo||e.mapping===Na?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),a_=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:dn,minFilter:dn,generateMipmaps:!1,type:Ju,format:Ki,colorSpace:As,depthBuffer:!1},r=Tb(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Tb(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=B9(s)),this._blurMaterial=D9(s,e,t)}return r}_compileMaterial(e){const t=new Hn(this._lodPlanes[0],e);this._renderer.compile(t,o_)}_sceneToCubeUV(e,t,i,r){const a=new kn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,p=u.toneMapping;u.getClearColor(wb),u.toneMapping=Ws,u.autoClear=!1;const m=new pr({name:"PMREM.Background",side:Ni,depthWrite:!1,depthTest:!1}),g=new Hn(new oc,m);let x=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,x=!0):(m.color.copy(wb),x=!0);for(let v=0;v<6;v++){const A=v%3;A===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):A===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const S=this._cubeSize;Gm(r,A*S,v>2?S:0,S,S),u.setRenderTarget(r),x&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=p,u.autoClear=d,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Oo||e.mapping===Na;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=bb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Cb());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Hn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Gm(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,o_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=Mb[(r-1)%Mb.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Hn(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Ml-1),x=s/g,_=isFinite(s)?1+Math.floor(u*x):Ml;_>Ml&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Ml}`);const v=[];let A=0;for(let R=0;R<Ml;++R){const D=R/x,P=Math.exp(-D*D/2);v.push(P),R===0?A+=P:R<_&&(A+=2*P)}for(let R=0;R<v.length;R++)v[R]=v[R]/A;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=v,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=g,p.mipInt.value=S-i;const w=this._sizeLods[r],T=3*w*(r>S-yu?r-S+yu:0),C=4*(this._cubeSize-w);Gm(t,T,C,3*w,2*w),l.setRenderTarget(t),l.render(d,o_)}}function B9(n){const e=[],t=[],i=[];let r=n;const s=n-yu+1+Eb.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-yu?l=Eb[o-n+yu-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,p=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,g=6,x=3,_=2,v=1,A=new Float32Array(x*g*m),S=new Float32Array(_*g*m),w=new Float32Array(v*g*m);for(let C=0;C<m;C++){const R=C%3*2/3-1,D=C>2?0:-1,P=[R,D,0,R+2/3,D,0,R+2/3,D+1,0,R,D,0,R+2/3,D+1,0,R,D+1,0];A.set(P,x*g*C),S.set(p,_*g*C);const B=[C,C,C,C,C,C];w.set(B,v*g*C)}const T=new dt;T.setAttribute("position",new kt(A,x)),T.setAttribute("uv",new kt(S,_)),T.setAttribute("faceIndex",new kt(w,v)),e.push(T),r>yu&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Tb(n,e,t){const i=new _r(n,e,t);return i.texture.mapping=uf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Gm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function D9(n,e,t){const i=new Float32Array(Ml),r=new k(0,1,0);return new Xr({name:"SphericalGaussianBlur",defines:{n:Ml,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:YE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Co,depthTest:!1,depthWrite:!1})}function Cb(){return new Xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:YE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Co,depthTest:!1,depthWrite:!1})}function bb(){return new Xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:YE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Co,depthTest:!1,depthWrite:!1})}function YE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function L9(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===ju||l===hh,u=l===Oo||l===Na;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new zA(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&r(d)){t===null&&(t=new zA(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function O9(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function F9(n,e,t,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);for(const g in p.morphAttributes){const x=p.morphAttributes[g];for(let _=0,v=x.length;_<v;_++)e.remove(x[_])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const g in p)e.update(p[g],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const g in m){const x=m[g];for(let _=0,v=x.length;_<v;_++)e.update(x[_],n.ARRAY_BUFFER)}}function c(d){const p=[],m=d.index,g=d.attributes.position;let x=0;if(m!==null){const A=m.array;x=m.version;for(let S=0,w=A.length;S<w;S+=3){const T=A[S+0],C=A[S+1],R=A[S+2];p.push(T,C,C,R,R,T)}}else if(g!==void 0){const A=g.array;x=g.version;for(let S=0,w=A.length/3-1;S<w;S+=3){const T=S+0,C=S+1,R=S+2;p.push(T,C,C,R,R,T)}}else return;const _=new(nO(p)?KE:xv)(p,1);_.version=x;const v=s.get(d);v&&e.remove(v),s.set(d,_)}function u(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function N9(n,e,t,i){const r=i.isWebGL2;let s;function o(p){s=p}let a,l;function c(p){a=p.type,l=p.bytesPerElement}function u(p,m){n.drawElements(s,m,a,p*l),t.update(m,s,1)}function d(p,m,g){if(g===0)return;let x,_;if(r)x=n,_="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[_](s,m,a,p*l,g),t.update(m,s,g)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=d}function k9(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function U9(n,e){return n[0]-e[0]}function z9(n,e){return Math.abs(e[1])-Math.abs(n[1])}function H9(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Dt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,x=g!==void 0?g.length:0;let _=s.get(u);if(_===void 0||_.count!==x){let J=function(){z.dispose(),s.delete(u),u.removeEventListener("dispose",J)};var m=J;_!==void 0&&_.texture.dispose();const S=u.morphAttributes.position!==void 0,w=u.morphAttributes.normal!==void 0,T=u.morphAttributes.color!==void 0,C=u.morphAttributes.position||[],R=u.morphAttributes.normal||[],D=u.morphAttributes.color||[];let P=0;S===!0&&(P=1),w===!0&&(P=2),T===!0&&(P=3);let B=u.attributes.position.count*P,N=1;B>e.maxTextureSize&&(N=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const j=new Float32Array(B*N*4*x),z=new yv(j,B,N,x);z.type=zs,z.needsUpdate=!0;const $=P*4;for(let Q=0;Q<x;Q++){const ee=C[Q],O=R[Q],W=D[Q],G=B*N*4*Q;for(let H=0;H<ee.count;H++){const Y=H*$;S===!0&&(o.fromBufferAttribute(ee,H),j[G+Y+0]=o.x,j[G+Y+1]=o.y,j[G+Y+2]=o.z,j[G+Y+3]=0),w===!0&&(o.fromBufferAttribute(O,H),j[G+Y+4]=o.x,j[G+Y+5]=o.y,j[G+Y+6]=o.z,j[G+Y+7]=0),T===!0&&(o.fromBufferAttribute(W,H),j[G+Y+8]=o.x,j[G+Y+9]=o.y,j[G+Y+10]=o.z,j[G+Y+11]=W.itemSize===4?o.w:1)}}_={count:x,texture:z,size:new ve(B,N)},s.set(u,_),u.addEventListener("dispose",J)}let v=0;for(let S=0;S<p.length;S++)v+=p[S];const A=u.morphTargetsRelative?1:1-v;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const g=p===void 0?0:p.length;let x=i[u.id];if(x===void 0||x.length!==g){x=[];for(let w=0;w<g;w++)x[w]=[w,0];i[u.id]=x}for(let w=0;w<g;w++){const T=x[w];T[0]=w,T[1]=p[w]}x.sort(z9);for(let w=0;w<8;w++)w<g&&x[w][1]?(a[w][0]=x[w][0],a[w][1]=x[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(U9);const _=u.morphAttributes.position,v=u.morphAttributes.normal;let A=0;for(let w=0;w<8;w++){const T=a[w],C=T[0],R=T[1];C!==Number.MAX_SAFE_INTEGER&&R?(_&&u.getAttribute("morphTarget"+w)!==_[C]&&u.setAttribute("morphTarget"+w,_[C]),v&&u.getAttribute("morphNormal"+w)!==v[C]&&u.setAttribute("morphNormal"+w,v[C]),r[w]=R,A+=R):(_&&u.hasAttribute("morphTarget"+w)===!0&&u.deleteAttribute("morphTarget"+w),v&&u.hasAttribute("morphNormal"+w)===!0&&u.deleteAttribute("morphNormal"+w),r[w]=0)}const S=u.morphTargetsRelative?1:1-A;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function G9(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return d}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const uO=new qt,fO=new yv,dO=new JE,hO=new Vh,Rb=[],Pb=[],Ib=new Float32Array(16),Bb=new Float32Array(9),Db=new Float32Array(4);function hf(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=Rb[r];if(s===void 0&&(s=new Float32Array(r),Rb[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Qn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function qn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Av(n,e){let t=Pb[e];t===void 0&&(t=new Int32Array(e),Pb[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function V9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function W9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2fv(this.addr,e),qn(t,e)}}function $9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Qn(t,e))return;n.uniform3fv(this.addr,e),qn(t,e)}}function j9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4fv(this.addr,e),qn(t,e)}}function X9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Qn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),qn(t,e)}else{if(Qn(t,i))return;Db.set(i),n.uniformMatrix2fv(this.addr,!1,Db),qn(t,i)}}function J9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Qn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),qn(t,e)}else{if(Qn(t,i))return;Bb.set(i),n.uniformMatrix3fv(this.addr,!1,Bb),qn(t,i)}}function K9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Qn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),qn(t,e)}else{if(Qn(t,i))return;Ib.set(i),n.uniformMatrix4fv(this.addr,!1,Ib),qn(t,i)}}function Y9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Q9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2iv(this.addr,e),qn(t,e)}}function q9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qn(t,e))return;n.uniform3iv(this.addr,e),qn(t,e)}}function Z9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4iv(this.addr,e),qn(t,e)}}function e8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function t8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2uiv(this.addr,e),qn(t,e)}}function n8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qn(t,e))return;n.uniform3uiv(this.addr,e),qn(t,e)}}function i8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4uiv(this.addr,e),qn(t,e)}}function r8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||uO,r)}function s8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||dO,r)}function o8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||hO,r)}function a8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||fO,r)}function l8(n){switch(n){case 5126:return V9;case 35664:return W9;case 35665:return $9;case 35666:return j9;case 35674:return X9;case 35675:return J9;case 35676:return K9;case 5124:case 35670:return Y9;case 35667:case 35671:return Q9;case 35668:case 35672:return q9;case 35669:case 35673:return Z9;case 5125:return e8;case 36294:return t8;case 36295:return n8;case 36296:return i8;case 35678:case 36198:case 36298:case 36306:case 35682:return r8;case 35679:case 36299:case 36307:return s8;case 35680:case 36300:case 36308:case 36293:return o8;case 36289:case 36303:case 36311:case 36292:return a8}}function c8(n,e){n.uniform1fv(this.addr,e)}function u8(n,e){const t=hf(e,this.size,2);n.uniform2fv(this.addr,t)}function f8(n,e){const t=hf(e,this.size,3);n.uniform3fv(this.addr,t)}function d8(n,e){const t=hf(e,this.size,4);n.uniform4fv(this.addr,t)}function h8(n,e){const t=hf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function p8(n,e){const t=hf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function m8(n,e){const t=hf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function g8(n,e){n.uniform1iv(this.addr,e)}function v8(n,e){n.uniform2iv(this.addr,e)}function y8(n,e){n.uniform3iv(this.addr,e)}function x8(n,e){n.uniform4iv(this.addr,e)}function _8(n,e){n.uniform1uiv(this.addr,e)}function A8(n,e){n.uniform2uiv(this.addr,e)}function S8(n,e){n.uniform3uiv(this.addr,e)}function E8(n,e){n.uniform4uiv(this.addr,e)}function w8(n,e,t){const i=this.cache,r=e.length,s=Av(t,r);Qn(i,s)||(n.uniform1iv(this.addr,s),qn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||uO,s[o])}function M8(n,e,t){const i=this.cache,r=e.length,s=Av(t,r);Qn(i,s)||(n.uniform1iv(this.addr,s),qn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||dO,s[o])}function T8(n,e,t){const i=this.cache,r=e.length,s=Av(t,r);Qn(i,s)||(n.uniform1iv(this.addr,s),qn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||hO,s[o])}function C8(n,e,t){const i=this.cache,r=e.length,s=Av(t,r);Qn(i,s)||(n.uniform1iv(this.addr,s),qn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||fO,s[o])}function b8(n){switch(n){case 5126:return c8;case 35664:return u8;case 35665:return f8;case 35666:return d8;case 35674:return h8;case 35675:return p8;case 35676:return m8;case 5124:case 35670:return g8;case 35667:case 35671:return v8;case 35668:case 35672:return y8;case 35669:case 35673:return x8;case 5125:return _8;case 36294:return A8;case 36295:return S8;case 36296:return E8;case 35678:case 36198:case 36298:case 36306:case 35682:return w8;case 35679:case 36299:case 36307:return M8;case 35680:case 36300:case 36308:case 36293:return T8;case 36289:case 36303:case 36311:case 36292:return C8}}class R8{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=l8(t.type)}}class P8{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=b8(t.type)}}class I8{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const l_=/(\w+)(\])?(\[|\.)?/g;function Lb(n,e){n.seq.push(e),n.map[e.id]=e}function B8(n,e,t){const i=n.name,r=i.length;for(l_.lastIndex=0;;){const s=l_.exec(i),o=l_.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){Lb(t,c===void 0?new R8(a,n,e):new P8(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new I8(a),Lb(t,d)),t=d}}}class $g{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);B8(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function Ob(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let D8=0;function L8(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function O8(n){switch(n){case As:return["Linear","( value )"];case yt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function Fb(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+L8(n.getShaderSource(e),o)}else return r}function F8(n,e){const t=O8(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function N8(n,e){let t;switch(e){case TL:t="Linear";break;case CL:t="Reinhard";break;case bL:t="OptimizedCineon";break;case OE:t="ACESFilmic";break;case RL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function k8(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ed).join(`
`)}function U8(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function z8(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Ed(n){return n!==""}function Nb(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kb(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const H8=/^[ \t]*#include +<([\w\d./]+)>/gm;function HA(n){return n.replace(H8,V8)}const G8=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function V8(n,e){let t=xt[e];if(t===void 0){const i=G8.get(e);if(i!==void 0)t=xt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return HA(t)}const W8=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ub(n){return n.replace(W8,$8)}function $8(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function zb(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function j8(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===hv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Od?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===cs&&(e="SHADOWMAP_TYPE_VSM"),e}function X8(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Oo:case Na:e="ENVMAP_TYPE_CUBE";break;case uf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function J8(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Na:e="ENVMAP_MODE_REFRACTION";break}return e}function K8(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Hh:e="ENVMAP_BLENDING_MULTIPLY";break;case wL:e="ENVMAP_BLENDING_MIX";break;case ML:e="ENVMAP_BLENDING_ADD";break}return e}function Y8(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Q8(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=j8(t),c=X8(t),u=J8(t),d=K8(t),p=Y8(t),m=t.isWebGL2?"":k8(t),g=U8(s),x=r.createProgram();let _,v,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Ed).join(`
`),_.length>0&&(_+=`
`),v=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Ed).join(`
`),v.length>0&&(v+=`
`)):(_=[zb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ed).join(`
`),v=[m,zb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ws?"#define TONE_MAPPING":"",t.toneMapping!==Ws?xt.tonemapping_pars_fragment:"",t.toneMapping!==Ws?N8("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",xt.colorspace_pars_fragment,F8("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ed).join(`
`)),o=HA(o),o=Nb(o,t),o=kb(o,t),a=HA(a),a=Nb(a,t),a=kb(a,t),o=Ub(o),a=Ub(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,v=["#define varying in",t.glslVersion===kA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===kA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const S=A+_+o,w=A+v+a,T=Ob(r,r.VERTEX_SHADER,S),C=Ob(r,r.FRAGMENT_SHADER,w);if(r.attachShader(x,T),r.attachShader(x,C),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x),n.debug.checkShaderErrors){const P=r.getProgramInfoLog(x).trim(),B=r.getShaderInfoLog(T).trim(),N=r.getShaderInfoLog(C).trim();let j=!0,z=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(j=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,T,C);else{const $=Fb(r,T,"vertex"),J=Fb(r,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Program Info Log: `+P+`
`+$+`
`+J)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(B===""||N==="")&&(z=!1);z&&(this.diagnostics={runnable:j,programLog:P,vertexShader:{log:B,prefix:_},fragmentShader:{log:N,prefix:v}})}r.deleteShader(T),r.deleteShader(C);let R;this.getUniforms=function(){return R===void 0&&(R=new $g(r,x)),R};let D;return this.getAttributes=function(){return D===void 0&&(D=z8(r,x)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=D8++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=T,this.fragmentShader=C,this}let q8=0;class Z8{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new eW(e),t.set(e,i)),i}}class eW{constructor(e){this.id=q8++,this.code=e,this.usedTimes=0}}function tW(n,e,t,i,r,s,o){const a=new Ul,l=new Z8,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(P){return P===0?"uv":`uv${P}`}function _(P,B,N,j,z){const $=j.fog,J=z.geometry,Q=P.isMeshStandardMaterial?j.environment:null,ee=(P.isMeshStandardMaterial?t:e).get(P.envMap||Q),O=ee&&ee.mapping===uf?ee.image.height:null,W=g[P.type];P.precision!==null&&(m=r.getMaxPrecision(P.precision),m!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",m,"instead."));const G=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,H=G!==void 0?G.length:0;let Y=0;J.morphAttributes.position!==void 0&&(Y=1),J.morphAttributes.normal!==void 0&&(Y=2),J.morphAttributes.color!==void 0&&(Y=3);let me,ce,Ae,Se;if(W){const Gt=ds[W];me=Gt.vertexShader,ce=Gt.fragmentShader}else me=P.vertexShader,ce=P.fragmentShader,l.update(P),Ae=l.getVertexShaderID(P),Se=l.getFragmentShaderID(P);const Re=n.getRenderTarget(),Ne=z.isInstancedMesh===!0,pt=!!P.map,wt=!!P.matcap,Le=!!ee,X=!!P.aoMap,xe=!!P.lightMap,pe=!!P.bumpMap,Ee=!!P.normalMap,ge=!!P.displacementMap,Ke=!!P.emissiveMap,ke=!!P.metalnessMap,ze=!!P.roughnessMap,Ze=P.anisotropy>0,St=P.clearcoat>0,Xt=P.iridescence>0,F=P.sheen>0,L=P.transmission>0,ne=Ze&&!!P.anisotropyMap,_e=St&&!!P.clearcoatMap,ye=St&&!!P.clearcoatNormalMap,we=St&&!!P.clearcoatRoughnessMap,$e=Xt&&!!P.iridescenceMap,Te=Xt&&!!P.iridescenceThicknessMap,oe=F&&!!P.sheenColorMap,et=F&&!!P.sheenRoughnessMap,Ye=!!P.specularMap,Qe=!!P.specularColorMap,Ge=!!P.specularIntensityMap,Ve=L&&!!P.transmissionMap,mt=L&&!!P.thicknessMap,Ut=!!P.gradientMap,q=!!P.alphaMap,Be=P.alphaTest>0,le=!!P.alphaHash,Pe=!!P.extensions,Oe=!!J.attributes.uv1,It=!!J.attributes.uv2,Jt=!!J.attributes.uv3;let xn=Ws;return P.toneMapped&&(Re===null||Re.isXRRenderTarget===!0)&&(xn=n.toneMapping),{isWebGL2:u,shaderID:W,shaderType:P.type,shaderName:P.name,vertexShader:me,fragmentShader:ce,defines:P.defines,customVertexShaderID:Ae,customFragmentShaderID:Se,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:m,instancing:Ne,instancingColor:Ne&&z.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:Re===null?n.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:As,map:pt,matcap:wt,envMap:Le,envMapMode:Le&&ee.mapping,envMapCubeUVHeight:O,aoMap:X,lightMap:xe,bumpMap:pe,normalMap:Ee,displacementMap:p&&ge,emissiveMap:Ke,normalMapObjectSpace:Ee&&P.normalMapType===$L,normalMapTangentSpace:Ee&&P.normalMapType===Ja,metalnessMap:ke,roughnessMap:ze,anisotropy:Ze,anisotropyMap:ne,clearcoat:St,clearcoatMap:_e,clearcoatNormalMap:ye,clearcoatRoughnessMap:we,iridescence:Xt,iridescenceMap:$e,iridescenceThicknessMap:Te,sheen:F,sheenColorMap:oe,sheenRoughnessMap:et,specularMap:Ye,specularColorMap:Qe,specularIntensityMap:Ge,transmission:L,transmissionMap:Ve,thicknessMap:mt,gradientMap:Ut,opaque:P.transparent===!1&&P.blending===Nl,alphaMap:q,alphaTest:Be,alphaHash:le,combine:P.combine,mapUv:pt&&x(P.map.channel),aoMapUv:X&&x(P.aoMap.channel),lightMapUv:xe&&x(P.lightMap.channel),bumpMapUv:pe&&x(P.bumpMap.channel),normalMapUv:Ee&&x(P.normalMap.channel),displacementMapUv:ge&&x(P.displacementMap.channel),emissiveMapUv:Ke&&x(P.emissiveMap.channel),metalnessMapUv:ke&&x(P.metalnessMap.channel),roughnessMapUv:ze&&x(P.roughnessMap.channel),anisotropyMapUv:ne&&x(P.anisotropyMap.channel),clearcoatMapUv:_e&&x(P.clearcoatMap.channel),clearcoatNormalMapUv:ye&&x(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:we&&x(P.clearcoatRoughnessMap.channel),iridescenceMapUv:$e&&x(P.iridescenceMap.channel),iridescenceThicknessMapUv:Te&&x(P.iridescenceThicknessMap.channel),sheenColorMapUv:oe&&x(P.sheenColorMap.channel),sheenRoughnessMapUv:et&&x(P.sheenRoughnessMap.channel),specularMapUv:Ye&&x(P.specularMap.channel),specularColorMapUv:Qe&&x(P.specularColorMap.channel),specularIntensityMapUv:Ge&&x(P.specularIntensityMap.channel),transmissionMapUv:Ve&&x(P.transmissionMap.channel),thicknessMapUv:mt&&x(P.thicknessMap.channel),alphaMapUv:q&&x(P.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(Ee||Ze),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,vertexUv1s:Oe,vertexUv2s:It,vertexUv3s:Jt,pointsUvs:z.isPoints===!0&&!!J.attributes.uv&&(pt||q),fog:!!$,useFog:P.fog===!0,fogExp2:$&&$.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:z.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:Y,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:xn,useLegacyLights:n._useLegacyLights,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===hs,flipSided:P.side===Ni,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionDerivatives:Pe&&P.extensions.derivatives===!0,extensionFragDepth:Pe&&P.extensions.fragDepth===!0,extensionDrawBuffers:Pe&&P.extensions.drawBuffers===!0,extensionShaderTextureLOD:Pe&&P.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:P.customProgramCacheKey()}}function v(P){const B=[];if(P.shaderID?B.push(P.shaderID):(B.push(P.customVertexShaderID),B.push(P.customFragmentShaderID)),P.defines!==void 0)for(const N in P.defines)B.push(N),B.push(P.defines[N]);return P.isRawShaderMaterial===!1&&(A(B,P),S(B,P),B.push(n.outputColorSpace)),B.push(P.customProgramCacheKey),B.join()}function A(P,B){P.push(B.precision),P.push(B.outputColorSpace),P.push(B.envMapMode),P.push(B.envMapCubeUVHeight),P.push(B.mapUv),P.push(B.alphaMapUv),P.push(B.lightMapUv),P.push(B.aoMapUv),P.push(B.bumpMapUv),P.push(B.normalMapUv),P.push(B.displacementMapUv),P.push(B.emissiveMapUv),P.push(B.metalnessMapUv),P.push(B.roughnessMapUv),P.push(B.anisotropyMapUv),P.push(B.clearcoatMapUv),P.push(B.clearcoatNormalMapUv),P.push(B.clearcoatRoughnessMapUv),P.push(B.iridescenceMapUv),P.push(B.iridescenceThicknessMapUv),P.push(B.sheenColorMapUv),P.push(B.sheenRoughnessMapUv),P.push(B.specularMapUv),P.push(B.specularColorMapUv),P.push(B.specularIntensityMapUv),P.push(B.transmissionMapUv),P.push(B.thicknessMapUv),P.push(B.combine),P.push(B.fogExp2),P.push(B.sizeAttenuation),P.push(B.morphTargetsCount),P.push(B.morphAttributeCount),P.push(B.numDirLights),P.push(B.numPointLights),P.push(B.numSpotLights),P.push(B.numSpotLightMaps),P.push(B.numHemiLights),P.push(B.numRectAreaLights),P.push(B.numDirLightShadows),P.push(B.numPointLightShadows),P.push(B.numSpotLightShadows),P.push(B.numSpotLightShadowsWithMaps),P.push(B.shadowMapType),P.push(B.toneMapping),P.push(B.numClippingPlanes),P.push(B.numClipIntersection),P.push(B.depthPacking)}function S(P,B){a.disableAll(),B.isWebGL2&&a.enable(0),B.supportsVertexTextures&&a.enable(1),B.instancing&&a.enable(2),B.instancingColor&&a.enable(3),B.matcap&&a.enable(4),B.envMap&&a.enable(5),B.normalMapObjectSpace&&a.enable(6),B.normalMapTangentSpace&&a.enable(7),B.clearcoat&&a.enable(8),B.iridescence&&a.enable(9),B.alphaTest&&a.enable(10),B.vertexColors&&a.enable(11),B.vertexAlphas&&a.enable(12),B.vertexUv1s&&a.enable(13),B.vertexUv2s&&a.enable(14),B.vertexUv3s&&a.enable(15),B.vertexTangents&&a.enable(16),B.anisotropy&&a.enable(17),P.push(a.mask),a.disableAll(),B.fog&&a.enable(0),B.useFog&&a.enable(1),B.flatShading&&a.enable(2),B.logarithmicDepthBuffer&&a.enable(3),B.skinning&&a.enable(4),B.morphTargets&&a.enable(5),B.morphNormals&&a.enable(6),B.morphColors&&a.enable(7),B.premultipliedAlpha&&a.enable(8),B.shadowMapEnabled&&a.enable(9),B.useLegacyLights&&a.enable(10),B.doubleSided&&a.enable(11),B.flipSided&&a.enable(12),B.useDepthPacking&&a.enable(13),B.dithering&&a.enable(14),B.transmission&&a.enable(15),B.sheen&&a.enable(16),B.opaque&&a.enable(17),B.pointsUvs&&a.enable(18),P.push(a.mask)}function w(P){const B=g[P.type];let N;if(B){const j=ds[B];N=oO.clone(j.uniforms)}else N=P.uniforms;return N}function T(P,B){let N;for(let j=0,z=c.length;j<z;j++){const $=c[j];if($.cacheKey===B){N=$,++N.usedTimes;break}}return N===void 0&&(N=new Q8(n,B,P,s),c.push(N)),N}function C(P){if(--P.usedTimes===0){const B=c.indexOf(P);c[B]=c[c.length-1],c.pop(),P.destroy()}}function R(P){l.remove(P)}function D(){l.dispose()}return{getParameters:_,getProgramCacheKey:v,getUniforms:w,acquireProgram:T,releaseProgram:C,releaseShaderCache:R,programs:c,dispose:D}}function nW(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function iW(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Hb(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Gb(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,p,m,g,x,_){let v=n[e];return v===void 0?(v={id:d.id,object:d,geometry:p,material:m,groupOrder:g,renderOrder:d.renderOrder,z:x,group:_},n[e]=v):(v.id=d.id,v.object=d,v.geometry=p,v.material=m,v.groupOrder=g,v.renderOrder=d.renderOrder,v.z=x,v.group=_),e++,v}function a(d,p,m,g,x,_){const v=o(d,p,m,g,x,_);m.transmission>0?i.push(v):m.transparent===!0?r.push(v):t.push(v)}function l(d,p,m,g,x,_){const v=o(d,p,m,g,x,_);m.transmission>0?i.unshift(v):m.transparent===!0?r.unshift(v):t.unshift(v)}function c(d,p){t.length>1&&t.sort(d||iW),i.length>1&&i.sort(p||Hb),r.length>1&&r.sort(p||Hb)}function u(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function rW(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new Gb,n.set(i,[o])):r>=s.length?(o=new Gb,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function sW(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new k,color:new be};break;case"SpotLight":t={position:new k,direction:new k,color:new be,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new k,color:new be,distance:0,decay:0};break;case"HemisphereLight":t={direction:new k,skyColor:new be,groundColor:new be};break;case"RectAreaLight":t={color:new be,position:new k,halfWidth:new k,halfHeight:new k};break}return n[e.id]=t,t}}}function oW(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let aW=0;function lW(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function cW(n,e){const t=new sW,i=oW(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new k);const s=new k,o=new Ue,a=new Ue;function l(u,d){let p=0,m=0,g=0;for(let N=0;N<9;N++)r.probe[N].set(0,0,0);let x=0,_=0,v=0,A=0,S=0,w=0,T=0,C=0,R=0,D=0;u.sort(lW);const P=d===!0?Math.PI:1;for(let N=0,j=u.length;N<j;N++){const z=u[N],$=z.color,J=z.intensity,Q=z.distance,ee=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)p+=$.r*J*P,m+=$.g*J*P,g+=$.b*J*P;else if(z.isLightProbe)for(let O=0;O<9;O++)r.probe[O].addScaledVector(z.sh.coefficients[O],J);else if(z.isDirectionalLight){const O=t.get(z);if(O.color.copy(z.color).multiplyScalar(z.intensity*P),z.castShadow){const W=z.shadow,G=i.get(z);G.shadowBias=W.bias,G.shadowNormalBias=W.normalBias,G.shadowRadius=W.radius,G.shadowMapSize=W.mapSize,r.directionalShadow[x]=G,r.directionalShadowMap[x]=ee,r.directionalShadowMatrix[x]=z.shadow.matrix,w++}r.directional[x]=O,x++}else if(z.isSpotLight){const O=t.get(z);O.position.setFromMatrixPosition(z.matrixWorld),O.color.copy($).multiplyScalar(J*P),O.distance=Q,O.coneCos=Math.cos(z.angle),O.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),O.decay=z.decay,r.spot[v]=O;const W=z.shadow;if(z.map&&(r.spotLightMap[R]=z.map,R++,W.updateMatrices(z),z.castShadow&&D++),r.spotLightMatrix[v]=W.matrix,z.castShadow){const G=i.get(z);G.shadowBias=W.bias,G.shadowNormalBias=W.normalBias,G.shadowRadius=W.radius,G.shadowMapSize=W.mapSize,r.spotShadow[v]=G,r.spotShadowMap[v]=ee,C++}v++}else if(z.isRectAreaLight){const O=t.get(z);O.color.copy($).multiplyScalar(J),O.halfWidth.set(z.width*.5,0,0),O.halfHeight.set(0,z.height*.5,0),r.rectArea[A]=O,A++}else if(z.isPointLight){const O=t.get(z);if(O.color.copy(z.color).multiplyScalar(z.intensity*P),O.distance=z.distance,O.decay=z.decay,z.castShadow){const W=z.shadow,G=i.get(z);G.shadowBias=W.bias,G.shadowNormalBias=W.normalBias,G.shadowRadius=W.radius,G.shadowMapSize=W.mapSize,G.shadowCameraNear=W.camera.near,G.shadowCameraFar=W.camera.far,r.pointShadow[_]=G,r.pointShadowMap[_]=ee,r.pointShadowMatrix[_]=z.shadow.matrix,T++}r.point[_]=O,_++}else if(z.isHemisphereLight){const O=t.get(z);O.skyColor.copy(z.color).multiplyScalar(J*P),O.groundColor.copy(z.groundColor).multiplyScalar(J*P),r.hemi[S]=O,S++}}A>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ie.LTC_FLOAT_1,r.rectAreaLTC2=Ie.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ie.LTC_HALF_1,r.rectAreaLTC2=Ie.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=g;const B=r.hash;(B.directionalLength!==x||B.pointLength!==_||B.spotLength!==v||B.rectAreaLength!==A||B.hemiLength!==S||B.numDirectionalShadows!==w||B.numPointShadows!==T||B.numSpotShadows!==C||B.numSpotMaps!==R)&&(r.directional.length=x,r.spot.length=v,r.rectArea.length=A,r.point.length=_,r.hemi.length=S,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=T,r.pointShadowMap.length=T,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=T,r.spotLightMatrix.length=C+R-D,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=D,B.directionalLength=x,B.pointLength=_,B.spotLength=v,B.rectAreaLength=A,B.hemiLength=S,B.numDirectionalShadows=w,B.numPointShadows=T,B.numSpotShadows=C,B.numSpotMaps=R,r.version=aW++)}function c(u,d){let p=0,m=0,g=0,x=0,_=0;const v=d.matrixWorldInverse;for(let A=0,S=u.length;A<S;A++){const w=u[A];if(w.isDirectionalLight){const T=r.directional[p];T.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(v),p++}else if(w.isSpotLight){const T=r.spot[g];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(v),T.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(v),g++}else if(w.isRectAreaLight){const T=r.rectArea[x];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(v),a.identity(),o.copy(w.matrixWorld),o.premultiply(v),a.extractRotation(o),T.halfWidth.set(w.width*.5,0,0),T.halfHeight.set(0,w.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),x++}else if(w.isPointLight){const T=r.point[m];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(v),m++}else if(w.isHemisphereLight){const T=r.hemi[_];T.direction.setFromMatrixPosition(w.matrixWorld),T.direction.transformDirection(v),_++}}}return{setup:l,setupView:c,state:r}}function Vb(n,e){const t=new cW(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(d){i.push(d)}function a(d){r.push(d)}function l(d){t.setup(i,d)}function c(d){t.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function uW(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new Vb(n,e),t.set(s,[l])):o>=a.length?(l=new Vb(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class Sv extends Vn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=VL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class QE extends Vn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const fW=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,dW=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hW(n,e,t){let i=new _v;const r=new ve,s=new ve,o=new Dt,a=new Sv({depthPacking:WL}),l=new QE,c={},u=t.maxTextureSize,d={[Js]:Ni,[Ni]:Js,[hs]:hs},p=new Xr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ve},radius:{value:4}},vertexShader:fW,fragmentShader:dW}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new dt;g.setAttribute("position",new kt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Hn(g,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=hv;let v=this.type;this.render=function(T,C,R){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||T.length===0)return;const D=n.getRenderTarget(),P=n.getActiveCubeFace(),B=n.getActiveMipmapLevel(),N=n.state;N.setBlending(Co),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);const j=v!==cs&&this.type===cs,z=v===cs&&this.type!==cs;for(let $=0,J=T.length;$<J;$++){const Q=T[$],ee=Q.shadow;if(ee===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;r.copy(ee.mapSize);const O=ee.getFrameExtents();if(r.multiply(O),s.copy(ee.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/O.x),r.x=s.x*O.x,ee.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/O.y),r.y=s.y*O.y,ee.mapSize.y=s.y)),ee.map===null||j===!0||z===!0){const G=this.type!==cs?{minFilter:Mn,magFilter:Mn}:{};ee.map!==null&&ee.map.dispose(),ee.map=new _r(r.x,r.y,G),ee.map.texture.name=Q.name+".shadowMap",ee.camera.updateProjectionMatrix()}n.setRenderTarget(ee.map),n.clear();const W=ee.getViewportCount();for(let G=0;G<W;G++){const H=ee.getViewport(G);o.set(s.x*H.x,s.y*H.y,s.x*H.z,s.y*H.w),N.viewport(o),ee.updateMatrices(Q,G),i=ee.getFrustum(),w(C,R,ee.camera,Q,this.type)}ee.isPointLightShadow!==!0&&this.type===cs&&A(ee,R),ee.needsUpdate=!1}v=this.type,_.needsUpdate=!1,n.setRenderTarget(D,P,B)};function A(T,C){const R=e.update(x);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new _r(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(C,null,R,p,x,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(C,null,R,m,x,null)}function S(T,C,R,D){let P=null;const B=R.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(B!==void 0)P=B;else if(P=R.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const N=P.uuid,j=C.uuid;let z=c[N];z===void 0&&(z={},c[N]=z);let $=z[j];$===void 0&&($=P.clone(),z[j]=$),P=$}if(P.visible=C.visible,P.wireframe=C.wireframe,D===cs?P.side=C.shadowSide!==null?C.shadowSide:C.side:P.side=C.shadowSide!==null?C.shadowSide:d[C.side],P.alphaMap=C.alphaMap,P.alphaTest=C.alphaTest,P.map=C.map,P.clipShadows=C.clipShadows,P.clippingPlanes=C.clippingPlanes,P.clipIntersection=C.clipIntersection,P.displacementMap=C.displacementMap,P.displacementScale=C.displacementScale,P.displacementBias=C.displacementBias,P.wireframeLinewidth=C.wireframeLinewidth,P.linewidth=C.linewidth,R.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const N=n.properties.get(P);N.light=R}return P}function w(T,C,R,D,P){if(T.visible===!1)return;if(T.layers.test(C.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&P===cs)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,T.matrixWorld);const j=e.update(T),z=T.material;if(Array.isArray(z)){const $=j.groups;for(let J=0,Q=$.length;J<Q;J++){const ee=$[J],O=z[ee.materialIndex];if(O&&O.visible){const W=S(T,O,D,P);n.renderBufferDirect(R,null,j,W,T,ee)}}}else if(z.visible){const $=S(T,z,D,P);n.renderBufferDirect(R,null,j,$,T,null)}}const N=T.children;for(let j=0,z=N.length;j<z;j++)w(N[j],C,R,D,P)}}function pW(n,e,t){const i=t.isWebGL2;function r(){let q=!1;const Be=new Dt;let le=null;const Pe=new Dt(0,0,0,0);return{setMask:function(Oe){le!==Oe&&!q&&(n.colorMask(Oe,Oe,Oe,Oe),le=Oe)},setLocked:function(Oe){q=Oe},setClear:function(Oe,It,Jt,xn,qr){qr===!0&&(Oe*=xn,It*=xn,Jt*=xn),Be.set(Oe,It,Jt,xn),Pe.equals(Be)===!1&&(n.clearColor(Oe,It,Jt,xn),Pe.copy(Be))},reset:function(){q=!1,le=null,Pe.set(-1,0,0,0)}}}function s(){let q=!1,Be=null,le=null,Pe=null;return{setTest:function(Oe){Oe?Re(n.DEPTH_TEST):Ne(n.DEPTH_TEST)},setMask:function(Oe){Be!==Oe&&!q&&(n.depthMask(Oe),Be=Oe)},setFunc:function(Oe){if(le!==Oe){switch(Oe){case vL:n.depthFunc(n.NEVER);break;case yL:n.depthFunc(n.ALWAYS);break;case xL:n.depthFunc(n.LESS);break;case x0:n.depthFunc(n.LEQUAL);break;case _L:n.depthFunc(n.EQUAL);break;case AL:n.depthFunc(n.GEQUAL);break;case SL:n.depthFunc(n.GREATER);break;case EL:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}le=Oe}},setLocked:function(Oe){q=Oe},setClear:function(Oe){Pe!==Oe&&(n.clearDepth(Oe),Pe=Oe)},reset:function(){q=!1,Be=null,le=null,Pe=null}}}function o(){let q=!1,Be=null,le=null,Pe=null,Oe=null,It=null,Jt=null,xn=null,qr=null;return{setTest:function(Gt){q||(Gt?Re(n.STENCIL_TEST):Ne(n.STENCIL_TEST))},setMask:function(Gt){Be!==Gt&&!q&&(n.stencilMask(Gt),Be=Gt)},setFunc:function(Gt,ir,oi){(le!==Gt||Pe!==ir||Oe!==oi)&&(n.stencilFunc(Gt,ir,oi),le=Gt,Pe=ir,Oe=oi)},setOp:function(Gt,ir,oi){(It!==Gt||Jt!==ir||xn!==oi)&&(n.stencilOp(Gt,ir,oi),It=Gt,Jt=ir,xn=oi)},setLocked:function(Gt){q=Gt},setClear:function(Gt){qr!==Gt&&(n.clearStencil(Gt),qr=Gt)},reset:function(){q=!1,Be=null,le=null,Pe=null,Oe=null,It=null,Jt=null,xn=null,qr=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,d=new WeakMap;let p={},m={},g=new WeakMap,x=[],_=null,v=!1,A=null,S=null,w=null,T=null,C=null,R=null,D=null,P=!1,B=null,N=null,j=null,z=null,$=null;const J=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,ee=0;const O=n.getParameter(n.VERSION);O.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(O)[1]),Q=ee>=1):O.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),Q=ee>=2);let W=null,G={};const H=n.getParameter(n.SCISSOR_BOX),Y=n.getParameter(n.VIEWPORT),me=new Dt().fromArray(H),ce=new Dt().fromArray(Y);function Ae(q,Be,le,Pe){const Oe=new Uint8Array(4),It=n.createTexture();n.bindTexture(q,It),n.texParameteri(q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Jt=0;Jt<le;Jt++)i&&(q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY)?n.texImage3D(Be,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,Oe):n.texImage2D(Be+Jt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Oe);return It}const Se={};Se[n.TEXTURE_2D]=Ae(n.TEXTURE_2D,n.TEXTURE_2D,1),Se[n.TEXTURE_CUBE_MAP]=Ae(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Se[n.TEXTURE_2D_ARRAY]=Ae(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Se[n.TEXTURE_3D]=Ae(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Re(n.DEPTH_TEST),l.setFunc(x0),ge(!1),Ke(cA),Re(n.CULL_FACE),pe(Co);function Re(q){p[q]!==!0&&(n.enable(q),p[q]=!0)}function Ne(q){p[q]!==!1&&(n.disable(q),p[q]=!1)}function pt(q,Be){return m[q]!==Be?(n.bindFramebuffer(q,Be),m[q]=Be,i&&(q===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Be),q===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Be)),!0):!1}function wt(q,Be){let le=x,Pe=!1;if(q)if(le=g.get(Be),le===void 0&&(le=[],g.set(Be,le)),q.isWebGLMultipleRenderTargets){const Oe=q.texture;if(le.length!==Oe.length||le[0]!==n.COLOR_ATTACHMENT0){for(let It=0,Jt=Oe.length;It<Jt;It++)le[It]=n.COLOR_ATTACHMENT0+It;le.length=Oe.length,Pe=!0}}else le[0]!==n.COLOR_ATTACHMENT0&&(le[0]=n.COLOR_ATTACHMENT0,Pe=!0);else le[0]!==n.BACK&&(le[0]=n.BACK,Pe=!0);Pe&&(t.isWebGL2?n.drawBuffers(le):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(le))}function Le(q){return _!==q?(n.useProgram(q),_=q,!0):!1}const X={[wl]:n.FUNC_ADD,[oL]:n.FUNC_SUBTRACT,[aL]:n.FUNC_REVERSE_SUBTRACT};if(i)X[hA]=n.MIN,X[pA]=n.MAX;else{const q=e.get("EXT_blend_minmax");q!==null&&(X[hA]=q.MIN_EXT,X[pA]=q.MAX_EXT)}const xe={[lL]:n.ZERO,[cL]:n.ONE,[uL]:n.SRC_COLOR,[DE]:n.SRC_ALPHA,[gL]:n.SRC_ALPHA_SATURATE,[pL]:n.DST_COLOR,[dL]:n.DST_ALPHA,[fL]:n.ONE_MINUS_SRC_COLOR,[LE]:n.ONE_MINUS_SRC_ALPHA,[mL]:n.ONE_MINUS_DST_COLOR,[hL]:n.ONE_MINUS_DST_ALPHA};function pe(q,Be,le,Pe,Oe,It,Jt,xn){if(q===Co){v===!0&&(Ne(n.BLEND),v=!1);return}if(v===!1&&(Re(n.BLEND),v=!0),q!==sL){if(q!==A||xn!==P){if((S!==wl||C!==wl)&&(n.blendEquation(n.FUNC_ADD),S=wl,C=wl),xn)switch(q){case Nl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uA:n.blendFunc(n.ONE,n.ONE);break;case fA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case dA:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case Nl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uA:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case fA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case dA:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}w=null,T=null,R=null,D=null,A=q,P=xn}return}Oe=Oe||Be,It=It||le,Jt=Jt||Pe,(Be!==S||Oe!==C)&&(n.blendEquationSeparate(X[Be],X[Oe]),S=Be,C=Oe),(le!==w||Pe!==T||It!==R||Jt!==D)&&(n.blendFuncSeparate(xe[le],xe[Pe],xe[It],xe[Jt]),w=le,T=Pe,R=It,D=Jt),A=q,P=!1}function Ee(q,Be){q.side===hs?Ne(n.CULL_FACE):Re(n.CULL_FACE);let le=q.side===Ni;Be&&(le=!le),ge(le),q.blending===Nl&&q.transparent===!1?pe(Co):pe(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.premultipliedAlpha),l.setFunc(q.depthFunc),l.setTest(q.depthTest),l.setMask(q.depthWrite),a.setMask(q.colorWrite);const Pe=q.stencilWrite;c.setTest(Pe),Pe&&(c.setMask(q.stencilWriteMask),c.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),c.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),ze(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?Re(n.SAMPLE_ALPHA_TO_COVERAGE):Ne(n.SAMPLE_ALPHA_TO_COVERAGE)}function ge(q){B!==q&&(q?n.frontFace(n.CW):n.frontFace(n.CCW),B=q)}function Ke(q){q!==nL?(Re(n.CULL_FACE),q!==N&&(q===cA?n.cullFace(n.BACK):q===iL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ne(n.CULL_FACE),N=q}function ke(q){q!==j&&(Q&&n.lineWidth(q),j=q)}function ze(q,Be,le){q?(Re(n.POLYGON_OFFSET_FILL),(z!==Be||$!==le)&&(n.polygonOffset(Be,le),z=Be,$=le)):Ne(n.POLYGON_OFFSET_FILL)}function Ze(q){q?Re(n.SCISSOR_TEST):Ne(n.SCISSOR_TEST)}function St(q){q===void 0&&(q=n.TEXTURE0+J-1),W!==q&&(n.activeTexture(q),W=q)}function Xt(q,Be,le){le===void 0&&(W===null?le=n.TEXTURE0+J-1:le=W);let Pe=G[le];Pe===void 0&&(Pe={type:void 0,texture:void 0},G[le]=Pe),(Pe.type!==q||Pe.texture!==Be)&&(W!==le&&(n.activeTexture(le),W=le),n.bindTexture(q,Be||Se[q]),Pe.type=q,Pe.texture=Be)}function F(){const q=G[W];q!==void 0&&q.type!==void 0&&(n.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function L(){try{n.compressedTexImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ne(){try{n.compressedTexImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function _e(){try{n.texSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ye(){try{n.texSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function we(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function $e(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Te(){try{n.texStorage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function oe(){try{n.texStorage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function et(){try{n.texImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ye(){try{n.texImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Qe(q){me.equals(q)===!1&&(n.scissor(q.x,q.y,q.z,q.w),me.copy(q))}function Ge(q){ce.equals(q)===!1&&(n.viewport(q.x,q.y,q.z,q.w),ce.copy(q))}function Ve(q,Be){let le=d.get(Be);le===void 0&&(le=new WeakMap,d.set(Be,le));let Pe=le.get(q);Pe===void 0&&(Pe=n.getUniformBlockIndex(Be,q.name),le.set(q,Pe))}function mt(q,Be){const Pe=d.get(Be).get(q);u.get(Be)!==Pe&&(n.uniformBlockBinding(Be,Pe,q.__bindingPointIndex),u.set(Be,Pe))}function Ut(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},W=null,G={},m={},g=new WeakMap,x=[],_=null,v=!1,A=null,S=null,w=null,T=null,C=null,R=null,D=null,P=!1,B=null,N=null,j=null,z=null,$=null,me.set(0,0,n.canvas.width,n.canvas.height),ce.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Re,disable:Ne,bindFramebuffer:pt,drawBuffers:wt,useProgram:Le,setBlending:pe,setMaterial:Ee,setFlipSided:ge,setCullFace:Ke,setLineWidth:ke,setPolygonOffset:ze,setScissorTest:Ze,activeTexture:St,bindTexture:Xt,unbindTexture:F,compressedTexImage2D:L,compressedTexImage3D:ne,texImage2D:et,texImage3D:Ye,updateUBOMapping:Ve,uniformBlockBinding:mt,texStorage2D:Te,texStorage3D:oe,texSubImage2D:_e,texSubImage3D:ye,compressedTexSubImage2D:we,compressedTexSubImage3D:$e,scissor:Qe,viewport:Ge,reset:Ut}}function mW(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let x;const _=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(F,L){return v?new OffscreenCanvas(F,L):yh("canvas")}function S(F,L,ne,_e){let ye=1;if((F.width>_e||F.height>_e)&&(ye=_e/Math.max(F.width,F.height)),ye<1||L===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const we=L?S0:Math.floor,$e=we(ye*F.width),Te=we(ye*F.height);x===void 0&&(x=A($e,Te));const oe=ne?A($e,Te):x;return oe.width=$e,oe.height=Te,oe.getContext("2d").drawImage(F,0,0,$e,Te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+$e+"x"+Te+")."),oe}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function w(F){return UA(F.width)&&UA(F.height)}function T(F){return a?!1:F.wrapS!==Jn||F.wrapT!==Jn||F.minFilter!==Mn&&F.minFilter!==dn}function C(F,L){return F.generateMipmaps&&L&&F.minFilter!==Mn&&F.minFilter!==dn}function R(F){n.generateMipmap(F)}function D(F,L,ne,_e,ye=!1){if(a===!1)return L;if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let we=L;return L===n.RED&&(ne===n.FLOAT&&(we=n.R32F),ne===n.HALF_FLOAT&&(we=n.R16F),ne===n.UNSIGNED_BYTE&&(we=n.R8)),L===n.RED_INTEGER&&(ne===n.UNSIGNED_BYTE&&(we=n.R8UI),ne===n.UNSIGNED_SHORT&&(we=n.R16UI),ne===n.UNSIGNED_INT&&(we=n.R32UI),ne===n.BYTE&&(we=n.R8I),ne===n.SHORT&&(we=n.R16I),ne===n.INT&&(we=n.R32I)),L===n.RG&&(ne===n.FLOAT&&(we=n.RG32F),ne===n.HALF_FLOAT&&(we=n.RG16F),ne===n.UNSIGNED_BYTE&&(we=n.RG8)),L===n.RGBA&&(ne===n.FLOAT&&(we=n.RGBA32F),ne===n.HALF_FLOAT&&(we=n.RGBA16F),ne===n.UNSIGNED_BYTE&&(we=_e===yt&&ye===!1?n.SRGB8_ALPHA8:n.RGBA8),ne===n.UNSIGNED_SHORT_4_4_4_4&&(we=n.RGBA4),ne===n.UNSIGNED_SHORT_5_5_5_1&&(we=n.RGB5_A1)),(we===n.R16F||we===n.R32F||we===n.RG16F||we===n.RG32F||we===n.RGBA16F||we===n.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function P(F,L,ne){return C(F,ne)===!0||F.isFramebufferTexture&&F.minFilter!==Mn&&F.minFilter!==dn?Math.log2(Math.max(L.width,L.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?L.mipmaps.length:1}function B(F){return F===Mn||F===ph||F===Bu?n.NEAREST:n.LINEAR}function N(F){const L=F.target;L.removeEventListener("dispose",N),z(L),L.isVideoTexture&&g.delete(L)}function j(F){const L=F.target;L.removeEventListener("dispose",j),J(L)}function z(F){const L=i.get(F);if(L.__webglInit===void 0)return;const ne=F.source,_e=_.get(ne);if(_e){const ye=_e[L.__cacheKey];ye.usedTimes--,ye.usedTimes===0&&$(F),Object.keys(_e).length===0&&_.delete(ne)}i.remove(F)}function $(F){const L=i.get(F);n.deleteTexture(L.__webglTexture);const ne=F.source,_e=_.get(ne);delete _e[L.__cacheKey],o.memory.textures--}function J(F){const L=F.texture,ne=i.get(F),_e=i.get(L);if(_e.__webglTexture!==void 0&&(n.deleteTexture(_e.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++){if(Array.isArray(ne.__webglFramebuffer[ye]))for(let we=0;we<ne.__webglFramebuffer[ye].length;we++)n.deleteFramebuffer(ne.__webglFramebuffer[ye][we]);else n.deleteFramebuffer(ne.__webglFramebuffer[ye]);ne.__webglDepthbuffer&&n.deleteRenderbuffer(ne.__webglDepthbuffer[ye])}else{if(Array.isArray(ne.__webglFramebuffer))for(let ye=0;ye<ne.__webglFramebuffer.length;ye++)n.deleteFramebuffer(ne.__webglFramebuffer[ye]);else n.deleteFramebuffer(ne.__webglFramebuffer);if(ne.__webglDepthbuffer&&n.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer)for(let ye=0;ye<ne.__webglColorRenderbuffer.length;ye++)ne.__webglColorRenderbuffer[ye]&&n.deleteRenderbuffer(ne.__webglColorRenderbuffer[ye]);ne.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ne.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let ye=0,we=L.length;ye<we;ye++){const $e=i.get(L[ye]);$e.__webglTexture&&(n.deleteTexture($e.__webglTexture),o.memory.textures--),i.remove(L[ye])}i.remove(L),i.remove(F)}let Q=0;function ee(){Q=0}function O(){const F=Q;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),Q+=1,F}function W(F){const L=[];return L.push(F.wrapS),L.push(F.wrapT),L.push(F.wrapR||0),L.push(F.magFilter),L.push(F.minFilter),L.push(F.anisotropy),L.push(F.internalFormat),L.push(F.format),L.push(F.type),L.push(F.generateMipmaps),L.push(F.premultiplyAlpha),L.push(F.flipY),L.push(F.unpackAlignment),L.push(F.colorSpace),L.join()}function G(F,L){const ne=i.get(F);if(F.isVideoTexture&&St(F),F.isRenderTargetTexture===!1&&F.version>0&&ne.__version!==F.version){const _e=F.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{pt(ne,F,L);return}}t.bindTexture(n.TEXTURE_2D,ne.__webglTexture,n.TEXTURE0+L)}function H(F,L){const ne=i.get(F);if(F.version>0&&ne.__version!==F.version){pt(ne,F,L);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ne.__webglTexture,n.TEXTURE0+L)}function Y(F,L){const ne=i.get(F);if(F.version>0&&ne.__version!==F.version){pt(ne,F,L);return}t.bindTexture(n.TEXTURE_3D,ne.__webglTexture,n.TEXTURE0+L)}function me(F,L){const ne=i.get(F);if(F.version>0&&ne.__version!==F.version){wt(ne,F,L);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+L)}const ce={[Ks]:n.REPEAT,[Jn]:n.CLAMP_TO_EDGE,[Xu]:n.MIRRORED_REPEAT},Ae={[Mn]:n.NEAREST,[ph]:n.NEAREST_MIPMAP_NEAREST,[Bu]:n.NEAREST_MIPMAP_LINEAR,[dn]:n.LINEAR,[mv]:n.LINEAR_MIPMAP_NEAREST,[Ys]:n.LINEAR_MIPMAP_LINEAR},Se={[XL]:n.NEVER,[eO]:n.ALWAYS,[JL]:n.LESS,[YL]:n.LEQUAL,[KL]:n.EQUAL,[ZL]:n.GEQUAL,[QL]:n.GREATER,[qL]:n.NOTEQUAL};function Re(F,L,ne){if(ne?(n.texParameteri(F,n.TEXTURE_WRAP_S,ce[L.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,ce[L.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,ce[L.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,Ae[L.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,Ae[L.minFilter])):(n.texParameteri(F,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(F,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(L.wrapS!==Jn||L.wrapT!==Jn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(F,n.TEXTURE_MAG_FILTER,B(L.magFilter)),n.texParameteri(F,n.TEXTURE_MIN_FILTER,B(L.minFilter)),L.minFilter!==Mn&&L.minFilter!==dn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),L.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,Se[L.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(L.magFilter===Mn||L.minFilter!==Bu&&L.minFilter!==Ys||L.type===zs&&e.has("OES_texture_float_linear")===!1||a===!1&&L.type===Ju&&e.has("OES_texture_half_float_linear")===!1)return;(L.anisotropy>1||i.get(L).__currentAnisotropy)&&(n.texParameterf(F,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,r.getMaxAnisotropy())),i.get(L).__currentAnisotropy=L.anisotropy)}}function Ne(F,L){let ne=!1;F.__webglInit===void 0&&(F.__webglInit=!0,L.addEventListener("dispose",N));const _e=L.source;let ye=_.get(_e);ye===void 0&&(ye={},_.set(_e,ye));const we=W(L);if(we!==F.__cacheKey){ye[we]===void 0&&(ye[we]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),ye[we].usedTimes++;const $e=ye[F.__cacheKey];$e!==void 0&&(ye[F.__cacheKey].usedTimes--,$e.usedTimes===0&&$(L)),F.__cacheKey=we,F.__webglTexture=ye[we].texture}return ne}function pt(F,L,ne){let _e=n.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),L.isData3DTexture&&(_e=n.TEXTURE_3D);const ye=Ne(F,L),we=L.source;t.bindTexture(_e,F.__webglTexture,n.TEXTURE0+ne);const $e=i.get(we);if(we.version!==$e.__version||ye===!0){t.activeTexture(n.TEXTURE0+ne),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,L.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,L.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Te=T(L)&&w(L.image)===!1;let oe=S(L.image,Te,!1,u);oe=Xt(L,oe);const et=w(oe)||a,Ye=s.convert(L.format,L.colorSpace);let Qe=s.convert(L.type),Ge=D(L.internalFormat,Ye,Qe,L.colorSpace);Re(_e,L,et);let Ve;const mt=L.mipmaps,Ut=a&&L.isVideoTexture!==!0,q=$e.__version===void 0||ye===!0,Be=P(L,oe,et);if(L.isDepthTexture)Ge=n.DEPTH_COMPONENT,a?L.type===zs?Ge=n.DEPTH_COMPONENT32F:L.type===wo?Ge=n.DEPTH_COMPONENT24:L.type===Pa?Ge=n.DEPTH24_STENCIL8:Ge=n.DEPTH_COMPONENT16:L.type===zs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),L.format===Ia&&Ge===n.DEPTH_COMPONENT&&L.type!==gv&&L.type!==wo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),L.type=wo,Qe=s.convert(L.type)),L.format===Jl&&Ge===n.DEPTH_COMPONENT&&(Ge=n.DEPTH_STENCIL,L.type!==Pa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),L.type=Pa,Qe=s.convert(L.type))),q&&(Ut?t.texStorage2D(n.TEXTURE_2D,1,Ge,oe.width,oe.height):t.texImage2D(n.TEXTURE_2D,0,Ge,oe.width,oe.height,0,Ye,Qe,null));else if(L.isDataTexture)if(mt.length>0&&et){Ut&&q&&t.texStorage2D(n.TEXTURE_2D,Be,Ge,mt[0].width,mt[0].height);for(let le=0,Pe=mt.length;le<Pe;le++)Ve=mt[le],Ut?t.texSubImage2D(n.TEXTURE_2D,le,0,0,Ve.width,Ve.height,Ye,Qe,Ve.data):t.texImage2D(n.TEXTURE_2D,le,Ge,Ve.width,Ve.height,0,Ye,Qe,Ve.data);L.generateMipmaps=!1}else Ut?(q&&t.texStorage2D(n.TEXTURE_2D,Be,Ge,oe.width,oe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,oe.width,oe.height,Ye,Qe,oe.data)):t.texImage2D(n.TEXTURE_2D,0,Ge,oe.width,oe.height,0,Ye,Qe,oe.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){Ut&&q&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Be,Ge,mt[0].width,mt[0].height,oe.depth);for(let le=0,Pe=mt.length;le<Pe;le++)Ve=mt[le],L.format!==Ki?Ye!==null?Ut?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,le,0,0,0,Ve.width,Ve.height,oe.depth,Ye,Ve.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,le,Ge,Ve.width,Ve.height,oe.depth,0,Ve.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ut?t.texSubImage3D(n.TEXTURE_2D_ARRAY,le,0,0,0,Ve.width,Ve.height,oe.depth,Ye,Qe,Ve.data):t.texImage3D(n.TEXTURE_2D_ARRAY,le,Ge,Ve.width,Ve.height,oe.depth,0,Ye,Qe,Ve.data)}else{Ut&&q&&t.texStorage2D(n.TEXTURE_2D,Be,Ge,mt[0].width,mt[0].height);for(let le=0,Pe=mt.length;le<Pe;le++)Ve=mt[le],L.format!==Ki?Ye!==null?Ut?t.compressedTexSubImage2D(n.TEXTURE_2D,le,0,0,Ve.width,Ve.height,Ye,Ve.data):t.compressedTexImage2D(n.TEXTURE_2D,le,Ge,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ut?t.texSubImage2D(n.TEXTURE_2D,le,0,0,Ve.width,Ve.height,Ye,Qe,Ve.data):t.texImage2D(n.TEXTURE_2D,le,Ge,Ve.width,Ve.height,0,Ye,Qe,Ve.data)}else if(L.isDataArrayTexture)Ut?(q&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Be,Ge,oe.width,oe.height,oe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,oe.width,oe.height,oe.depth,Ye,Qe,oe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ge,oe.width,oe.height,oe.depth,0,Ye,Qe,oe.data);else if(L.isData3DTexture)Ut?(q&&t.texStorage3D(n.TEXTURE_3D,Be,Ge,oe.width,oe.height,oe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,oe.width,oe.height,oe.depth,Ye,Qe,oe.data)):t.texImage3D(n.TEXTURE_3D,0,Ge,oe.width,oe.height,oe.depth,0,Ye,Qe,oe.data);else if(L.isFramebufferTexture){if(q)if(Ut)t.texStorage2D(n.TEXTURE_2D,Be,Ge,oe.width,oe.height);else{let le=oe.width,Pe=oe.height;for(let Oe=0;Oe<Be;Oe++)t.texImage2D(n.TEXTURE_2D,Oe,Ge,le,Pe,0,Ye,Qe,null),le>>=1,Pe>>=1}}else if(mt.length>0&&et){Ut&&q&&t.texStorage2D(n.TEXTURE_2D,Be,Ge,mt[0].width,mt[0].height);for(let le=0,Pe=mt.length;le<Pe;le++)Ve=mt[le],Ut?t.texSubImage2D(n.TEXTURE_2D,le,0,0,Ye,Qe,Ve):t.texImage2D(n.TEXTURE_2D,le,Ge,Ye,Qe,Ve);L.generateMipmaps=!1}else Ut?(q&&t.texStorage2D(n.TEXTURE_2D,Be,Ge,oe.width,oe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ye,Qe,oe)):t.texImage2D(n.TEXTURE_2D,0,Ge,Ye,Qe,oe);C(L,et)&&R(_e),$e.__version=we.version,L.onUpdate&&L.onUpdate(L)}F.__version=L.version}function wt(F,L,ne){if(L.image.length!==6)return;const _e=Ne(F,L),ye=L.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+ne);const we=i.get(ye);if(ye.version!==we.__version||_e===!0){t.activeTexture(n.TEXTURE0+ne),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,L.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,L.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const $e=L.isCompressedTexture||L.image[0].isCompressedTexture,Te=L.image[0]&&L.image[0].isDataTexture,oe=[];for(let le=0;le<6;le++)!$e&&!Te?oe[le]=S(L.image[le],!1,!0,c):oe[le]=Te?L.image[le].image:L.image[le],oe[le]=Xt(L,oe[le]);const et=oe[0],Ye=w(et)||a,Qe=s.convert(L.format,L.colorSpace),Ge=s.convert(L.type),Ve=D(L.internalFormat,Qe,Ge,L.colorSpace),mt=a&&L.isVideoTexture!==!0,Ut=we.__version===void 0||_e===!0;let q=P(L,et,Ye);Re(n.TEXTURE_CUBE_MAP,L,Ye);let Be;if($e){mt&&Ut&&t.texStorage2D(n.TEXTURE_CUBE_MAP,q,Ve,et.width,et.height);for(let le=0;le<6;le++){Be=oe[le].mipmaps;for(let Pe=0;Pe<Be.length;Pe++){const Oe=Be[Pe];L.format!==Ki?Qe!==null?mt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,Pe,0,0,Oe.width,Oe.height,Qe,Oe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,Pe,Ve,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):mt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,Pe,0,0,Oe.width,Oe.height,Qe,Ge,Oe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,Pe,Ve,Oe.width,Oe.height,0,Qe,Ge,Oe.data)}}}else{Be=L.mipmaps,mt&&Ut&&(Be.length>0&&q++,t.texStorage2D(n.TEXTURE_CUBE_MAP,q,Ve,oe[0].width,oe[0].height));for(let le=0;le<6;le++)if(Te){mt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,0,0,0,oe[le].width,oe[le].height,Qe,Ge,oe[le].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,0,Ve,oe[le].width,oe[le].height,0,Qe,Ge,oe[le].data);for(let Pe=0;Pe<Be.length;Pe++){const It=Be[Pe].image[le].image;mt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,Pe+1,0,0,It.width,It.height,Qe,Ge,It.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,Pe+1,Ve,It.width,It.height,0,Qe,Ge,It.data)}}else{mt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,0,0,0,Qe,Ge,oe[le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,0,Ve,Qe,Ge,oe[le]);for(let Pe=0;Pe<Be.length;Pe++){const Oe=Be[Pe];mt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,Pe+1,0,0,Qe,Ge,Oe.image[le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+le,Pe+1,Ve,Qe,Ge,Oe.image[le])}}}C(L,Ye)&&R(n.TEXTURE_CUBE_MAP),we.__version=ye.version,L.onUpdate&&L.onUpdate(L)}F.__version=L.version}function Le(F,L,ne,_e,ye,we){const $e=s.convert(ne.format,ne.colorSpace),Te=s.convert(ne.type),oe=D(ne.internalFormat,$e,Te,ne.colorSpace);if(!i.get(L).__hasExternalTextures){const Ye=Math.max(1,L.width>>we),Qe=Math.max(1,L.height>>we);ye===n.TEXTURE_3D||ye===n.TEXTURE_2D_ARRAY?t.texImage3D(ye,we,oe,Ye,Qe,L.depth,0,$e,Te,null):t.texImage2D(ye,we,oe,Ye,Qe,0,$e,Te,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),Ze(L)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,ye,i.get(ne).__webglTexture,0,ze(L)):(ye===n.TEXTURE_2D||ye>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ye<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,ye,i.get(ne).__webglTexture,we),t.bindFramebuffer(n.FRAMEBUFFER,null)}function X(F,L,ne){if(n.bindRenderbuffer(n.RENDERBUFFER,F),L.depthBuffer&&!L.stencilBuffer){let _e=n.DEPTH_COMPONENT16;if(ne||Ze(L)){const ye=L.depthTexture;ye&&ye.isDepthTexture&&(ye.type===zs?_e=n.DEPTH_COMPONENT32F:ye.type===wo&&(_e=n.DEPTH_COMPONENT24));const we=ze(L);Ze(L)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,we,_e,L.width,L.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,we,_e,L.width,L.height)}else n.renderbufferStorage(n.RENDERBUFFER,_e,L.width,L.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,F)}else if(L.depthBuffer&&L.stencilBuffer){const _e=ze(L);ne&&Ze(L)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,L.width,L.height):Ze(L)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,L.width,L.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,L.width,L.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,F)}else{const _e=L.isWebGLMultipleRenderTargets===!0?L.texture:[L.texture];for(let ye=0;ye<_e.length;ye++){const we=_e[ye],$e=s.convert(we.format,we.colorSpace),Te=s.convert(we.type),oe=D(we.internalFormat,$e,Te,we.colorSpace),et=ze(L);ne&&Ze(L)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,et,oe,L.width,L.height):Ze(L)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,et,oe,L.width,L.height):n.renderbufferStorage(n.RENDERBUFFER,oe,L.width,L.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function xe(F,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,F),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(L.depthTexture).__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),G(L.depthTexture,0);const _e=i.get(L.depthTexture).__webglTexture,ye=ze(L);if(L.depthTexture.format===Ia)Ze(L)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0);else if(L.depthTexture.format===Jl)Ze(L)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0);else throw new Error("Unknown depthTexture format")}function pe(F){const L=i.get(F),ne=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!L.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");xe(L.__webglFramebuffer,F)}else if(ne){L.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)t.bindFramebuffer(n.FRAMEBUFFER,L.__webglFramebuffer[_e]),L.__webglDepthbuffer[_e]=n.createRenderbuffer(),X(L.__webglDepthbuffer[_e],F,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer=n.createRenderbuffer(),X(L.__webglDepthbuffer,F,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(F,L,ne){const _e=i.get(F);L!==void 0&&Le(_e.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ne!==void 0&&pe(F)}function ge(F){const L=F.texture,ne=i.get(F),_e=i.get(L);F.addEventListener("dispose",j),F.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=L.version,o.memory.textures++);const ye=F.isWebGLCubeRenderTarget===!0,we=F.isWebGLMultipleRenderTargets===!0,$e=w(F)||a;if(ye){ne.__webglFramebuffer=[];for(let Te=0;Te<6;Te++)if(a&&L.mipmaps&&L.mipmaps.length>0){ne.__webglFramebuffer[Te]=[];for(let oe=0;oe<L.mipmaps.length;oe++)ne.__webglFramebuffer[Te][oe]=n.createFramebuffer()}else ne.__webglFramebuffer[Te]=n.createFramebuffer()}else{if(a&&L.mipmaps&&L.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Te=0;Te<L.mipmaps.length;Te++)ne.__webglFramebuffer[Te]=n.createFramebuffer()}else ne.__webglFramebuffer=n.createFramebuffer();if(we)if(r.drawBuffers){const Te=F.texture;for(let oe=0,et=Te.length;oe<et;oe++){const Ye=i.get(Te[oe]);Ye.__webglTexture===void 0&&(Ye.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&Ze(F)===!1){const Te=we?L:[L];ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let oe=0;oe<Te.length;oe++){const et=Te[oe];ne.__webglColorRenderbuffer[oe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ne.__webglColorRenderbuffer[oe]);const Ye=s.convert(et.format,et.colorSpace),Qe=s.convert(et.type),Ge=D(et.internalFormat,Ye,Qe,et.colorSpace,F.isXRRenderTarget===!0),Ve=ze(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ve,Ge,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+oe,n.RENDERBUFFER,ne.__webglColorRenderbuffer[oe])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),X(ne.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ye){t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),Re(n.TEXTURE_CUBE_MAP,L,$e);for(let Te=0;Te<6;Te++)if(a&&L.mipmaps&&L.mipmaps.length>0)for(let oe=0;oe<L.mipmaps.length;oe++)Le(ne.__webglFramebuffer[Te][oe],F,L,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,oe);else Le(ne.__webglFramebuffer[Te],F,L,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0);C(L,$e)&&R(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(we){const Te=F.texture;for(let oe=0,et=Te.length;oe<et;oe++){const Ye=Te[oe],Qe=i.get(Ye);t.bindTexture(n.TEXTURE_2D,Qe.__webglTexture),Re(n.TEXTURE_2D,Ye,$e),Le(ne.__webglFramebuffer,F,Ye,n.COLOR_ATTACHMENT0+oe,n.TEXTURE_2D,0),C(Ye,$e)&&R(n.TEXTURE_2D)}t.unbindTexture()}else{let Te=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?Te=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Te,_e.__webglTexture),Re(Te,L,$e),a&&L.mipmaps&&L.mipmaps.length>0)for(let oe=0;oe<L.mipmaps.length;oe++)Le(ne.__webglFramebuffer[oe],F,L,n.COLOR_ATTACHMENT0,Te,oe);else Le(ne.__webglFramebuffer,F,L,n.COLOR_ATTACHMENT0,Te,0);C(L,$e)&&R(Te),t.unbindTexture()}F.depthBuffer&&pe(F)}function Ke(F){const L=w(F)||a,ne=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let _e=0,ye=ne.length;_e<ye;_e++){const we=ne[_e];if(C(we,L)){const $e=F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Te=i.get(we).__webglTexture;t.bindTexture($e,Te),R($e),t.unbindTexture()}}}function ke(F){if(a&&F.samples>0&&Ze(F)===!1){const L=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],ne=F.width,_e=F.height;let ye=n.COLOR_BUFFER_BIT;const we=[],$e=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Te=i.get(F),oe=F.isWebGLMultipleRenderTargets===!0;if(oe)for(let et=0;et<L.length;et++)t.bindFramebuffer(n.FRAMEBUFFER,Te.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Te.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Te.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Te.__webglFramebuffer);for(let et=0;et<L.length;et++){we.push(n.COLOR_ATTACHMENT0+et),F.depthBuffer&&we.push($e);const Ye=Te.__ignoreDepthValues!==void 0?Te.__ignoreDepthValues:!1;if(Ye===!1&&(F.depthBuffer&&(ye|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&(ye|=n.STENCIL_BUFFER_BIT)),oe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Te.__webglColorRenderbuffer[et]),Ye===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[$e]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[$e])),oe){const Qe=i.get(L[et]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Qe,0)}n.blitFramebuffer(0,0,ne,_e,0,0,ne,_e,ye,n.NEAREST),m&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,we)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),oe)for(let et=0;et<L.length;et++){t.bindFramebuffer(n.FRAMEBUFFER,Te.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,Te.__webglColorRenderbuffer[et]);const Ye=i.get(L[et]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Te.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,Ye,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Te.__webglMultisampledFramebuffer)}}function ze(F){return Math.min(d,F.samples)}function Ze(F){const L=i.get(F);return a&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function St(F){const L=o.render.frame;g.get(F)!==L&&(g.set(F,L),F.update())}function Xt(F,L){const ne=F.colorSpace,_e=F.format,ye=F.type;return F.isCompressedTexture===!0||F.format===A0||ne!==As&&ne!==Da&&(ne===yt?a===!1?e.has("EXT_sRGB")===!0&&_e===Ki?(F.format=A0,F.minFilter=dn,F.generateMipmaps=!1):L=XE.sRGBToLinear(L):(_e!==Ki||ye!==$s)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),L}this.allocateTextureUnit=O,this.resetTextureUnits=ee,this.setTexture2D=G,this.setTexture2DArray=H,this.setTexture3D=Y,this.setTextureCube=me,this.rebindTextures=Ee,this.setupRenderTarget=ge,this.updateRenderTargetMipmap=Ke,this.updateMultisampleRenderTarget=ke,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=Le,this.useMultisampledRTT=Ze}function pO(n,e,t){const i=t.isWebGL2;function r(s,o=Da){let a;if(s===$s)return n.UNSIGNED_BYTE;if(s===NE)return n.UNSIGNED_SHORT_4_4_4_4;if(s===kE)return n.UNSIGNED_SHORT_5_5_5_1;if(s===PL)return n.BYTE;if(s===IL)return n.SHORT;if(s===gv)return n.UNSIGNED_SHORT;if(s===FE)return n.INT;if(s===wo)return n.UNSIGNED_INT;if(s===zs)return n.FLOAT;if(s===Ju)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===BL)return n.ALPHA;if(s===Ki)return n.RGBA;if(s===DL)return n.LUMINANCE;if(s===LL)return n.LUMINANCE_ALPHA;if(s===Ia)return n.DEPTH_COMPONENT;if(s===Jl)return n.DEPTH_STENCIL;if(s===A0)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===OL)return n.RED;if(s===UE)return n.RED_INTEGER;if(s===FL)return n.RG;if(s===zE)return n.RG_INTEGER;if(s===HE)return n.RGBA_INTEGER;if(s===kg||s===Ug||s===zg||s===Hg)if(o===yt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===kg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Ug)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===zg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Hg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===kg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ug)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===zg)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Hg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===mA||s===gA||s===vA||s===yA)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===mA)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===gA)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===vA)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===yA)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===NL)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===xA||s===_A)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===xA)return o===yt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===_A)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===AA||s===SA||s===EA||s===wA||s===MA||s===TA||s===CA||s===bA||s===RA||s===PA||s===IA||s===BA||s===DA||s===LA)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===AA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===SA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===EA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===wA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===MA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===TA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===CA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===bA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===RA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===PA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===IA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===BA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===DA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===LA)return o===yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Gg)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Gg)return o===yt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===kL||s===OA||s===FA||s===NA)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Gg)return a.COMPRESSED_RED_RGTC1_EXT;if(s===OA)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===FA)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===NA)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Pa?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class mO extends kn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ms extends bt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const gW={type:"move"};class c_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ms,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ms,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ms,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const x of e.hand.values()){const _=t.getJointPose(x,i),v=this._getHandJoint(c,x);_!==null&&(v.matrix.fromArray(_.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=_.radius),v.visible=_!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=u.position.distanceTo(d.position),m=.02,g=.005;c.inputState.pinching&&p>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(gW)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new ms;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class gO extends qt{constructor(e,t,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:Ia,u!==Ia&&u!==Jl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Ia&&(i=wo),i===void 0&&u===Jl&&(i=Pa),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Mn,this.minFilter=l!==void 0?l:Mn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class vW extends Vo{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,p=null,m=null,g=null;const x=t.getContextAttributes();let _=null,v=null;const A=[],S=[],w=new kn;w.layers.enable(1),w.viewport=new Dt;const T=new kn;T.layers.enable(2),T.viewport=new Dt;const C=[w,T],R=new mO;R.layers.enable(1),R.layers.enable(2);let D=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(H){let Y=A[H];return Y===void 0&&(Y=new c_,A[H]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(H){let Y=A[H];return Y===void 0&&(Y=new c_,A[H]=Y),Y.getGripSpace()},this.getHand=function(H){let Y=A[H];return Y===void 0&&(Y=new c_,A[H]=Y),Y.getHandSpace()};function B(H){const Y=S.indexOf(H.inputSource);if(Y===-1)return;const me=A[Y];me!==void 0&&(me.update(H.inputSource,H.frame,c||o),me.dispatchEvent({type:H.type,data:H.inputSource}))}function N(){r.removeEventListener("select",B),r.removeEventListener("selectstart",B),r.removeEventListener("selectend",B),r.removeEventListener("squeeze",B),r.removeEventListener("squeezestart",B),r.removeEventListener("squeezeend",B),r.removeEventListener("end",N),r.removeEventListener("inputsourceschange",j);for(let H=0;H<A.length;H++){const Y=S[H];Y!==null&&(S[H]=null,A[H].disconnect(Y))}D=null,P=null,e.setRenderTarget(_),m=null,p=null,d=null,r=null,v=null,G.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(H){s=H,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(H){a=H,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(H){c=H},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(H){if(r=H,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",B),r.addEventListener("selectstart",B),r.addEventListener("selectend",B),r.addEventListener("squeeze",B),r.addEventListener("squeezestart",B),r.addEventListener("squeezeend",B),r.addEventListener("end",N),r.addEventListener("inputsourceschange",j),x.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Y={antialias:r.renderState.layers===void 0?x.antialias:!0,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,Y),r.updateRenderState({baseLayer:m}),v=new _r(m.framebufferWidth,m.framebufferHeight,{format:Ki,type:$s,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let Y=null,me=null,ce=null;x.depth&&(ce=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Y=x.stencil?Jl:Ia,me=x.stencil?Pa:wo);const Ae={colorFormat:t.RGBA8,depthFormat:ce,scaleFactor:s};d=new XRWebGLBinding(r,t),p=d.createProjectionLayer(Ae),r.updateRenderState({layers:[p]}),v=new _r(p.textureWidth,p.textureHeight,{format:Ki,type:$s,depthTexture:new gO(p.textureWidth,p.textureHeight,me,void 0,void 0,void 0,void 0,void 0,void 0,Y),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0});const Se=e.properties.get(v);Se.__ignoreDepthValues=p.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),G.setContext(r),G.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function j(H){for(let Y=0;Y<H.removed.length;Y++){const me=H.removed[Y],ce=S.indexOf(me);ce>=0&&(S[ce]=null,A[ce].disconnect(me))}for(let Y=0;Y<H.added.length;Y++){const me=H.added[Y];let ce=S.indexOf(me);if(ce===-1){for(let Se=0;Se<A.length;Se++)if(Se>=S.length){S.push(me),ce=Se;break}else if(S[Se]===null){S[Se]=me,ce=Se;break}if(ce===-1)break}const Ae=A[ce];Ae&&Ae.connect(me)}}const z=new k,$=new k;function J(H,Y,me){z.setFromMatrixPosition(Y.matrixWorld),$.setFromMatrixPosition(me.matrixWorld);const ce=z.distanceTo($),Ae=Y.projectionMatrix.elements,Se=me.projectionMatrix.elements,Re=Ae[14]/(Ae[10]-1),Ne=Ae[14]/(Ae[10]+1),pt=(Ae[9]+1)/Ae[5],wt=(Ae[9]-1)/Ae[5],Le=(Ae[8]-1)/Ae[0],X=(Se[8]+1)/Se[0],xe=Re*Le,pe=Re*X,Ee=ce/(-Le+X),ge=Ee*-Le;Y.matrixWorld.decompose(H.position,H.quaternion,H.scale),H.translateX(ge),H.translateZ(Ee),H.matrixWorld.compose(H.position,H.quaternion,H.scale),H.matrixWorldInverse.copy(H.matrixWorld).invert();const Ke=Re+Ee,ke=Ne+Ee,ze=xe-ge,Ze=pe+(ce-ge),St=pt*Ne/ke*Ke,Xt=wt*Ne/ke*Ke;H.projectionMatrix.makePerspective(ze,Ze,St,Xt,Ke,ke),H.projectionMatrixInverse.copy(H.projectionMatrix).invert()}function Q(H,Y){Y===null?H.matrixWorld.copy(H.matrix):H.matrixWorld.multiplyMatrices(Y.matrixWorld,H.matrix),H.matrixWorldInverse.copy(H.matrixWorld).invert()}this.updateCamera=function(H){if(r===null)return;R.near=T.near=w.near=H.near,R.far=T.far=w.far=H.far,(D!==R.near||P!==R.far)&&(r.updateRenderState({depthNear:R.near,depthFar:R.far}),D=R.near,P=R.far);const Y=H.parent,me=R.cameras;Q(R,Y);for(let ce=0;ce<me.length;ce++)Q(me[ce],Y);me.length===2?J(R,w,T):R.projectionMatrix.copy(w.projectionMatrix),ee(H,R,Y)};function ee(H,Y,me){me===null?H.matrix.copy(Y.matrixWorld):(H.matrix.copy(me.matrixWorld),H.matrix.invert(),H.matrix.multiply(Y.matrixWorld)),H.matrix.decompose(H.position,H.quaternion,H.scale),H.updateMatrixWorld(!0);const ce=H.children;for(let Ae=0,Se=ce.length;Ae<Se;Ae++)ce[Ae].updateMatrixWorld(!0);H.projectionMatrix.copy(Y.projectionMatrix),H.projectionMatrixInverse.copy(Y.projectionMatrixInverse),H.isPerspectiveCamera&&(H.fov=Yu*2*Math.atan(1/H.projectionMatrix.elements[5]),H.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(H){l=H,p!==null&&(p.fixedFoveation=H),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=H)};let O=null;function W(H,Y){if(u=Y.getViewerPose(c||o),g=Y,u!==null){const me=u.views;m!==null&&(e.setRenderTargetFramebuffer(v,m.framebuffer),e.setRenderTarget(v));let ce=!1;me.length!==R.cameras.length&&(R.cameras.length=0,ce=!0);for(let Ae=0;Ae<me.length;Ae++){const Se=me[Ae];let Re=null;if(m!==null)Re=m.getViewport(Se);else{const pt=d.getViewSubImage(p,Se);Re=pt.viewport,Ae===0&&(e.setRenderTargetTextures(v,pt.colorTexture,p.ignoreDepthValues?void 0:pt.depthStencilTexture),e.setRenderTarget(v))}let Ne=C[Ae];Ne===void 0&&(Ne=new kn,Ne.layers.enable(Ae),Ne.viewport=new Dt,C[Ae]=Ne),Ne.matrix.fromArray(Se.transform.matrix),Ne.matrix.decompose(Ne.position,Ne.quaternion,Ne.scale),Ne.projectionMatrix.fromArray(Se.projectionMatrix),Ne.projectionMatrixInverse.copy(Ne.projectionMatrix).invert(),Ne.viewport.set(Re.x,Re.y,Re.width,Re.height),Ae===0&&(R.matrix.copy(Ne.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),ce===!0&&R.cameras.push(Ne)}}for(let me=0;me<A.length;me++){const ce=S[me],Ae=A[me];ce!==null&&Ae!==void 0&&Ae.update(ce,Y,c||o)}O&&O(H,Y),Y.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Y}),g=null}const G=new cO;G.setAnimationLoop(W),this.setAnimationLoop=function(H){O=H},this.dispose=function(){}}}function yW(n,e){function t(_,v){_.matrixAutoUpdate===!0&&_.updateMatrix(),v.value.copy(_.matrix)}function i(_,v){v.color.getRGB(_.fogColor.value,sO(n)),v.isFog?(_.fogNear.value=v.near,_.fogFar.value=v.far):v.isFogExp2&&(_.fogDensity.value=v.density)}function r(_,v,A,S,w){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(_,v):v.isMeshToonMaterial?(s(_,v),d(_,v)):v.isMeshPhongMaterial?(s(_,v),u(_,v)):v.isMeshStandardMaterial?(s(_,v),p(_,v),v.isMeshPhysicalMaterial&&m(_,v,w)):v.isMeshMatcapMaterial?(s(_,v),g(_,v)):v.isMeshDepthMaterial?s(_,v):v.isMeshDistanceMaterial?(s(_,v),x(_,v)):v.isMeshNormalMaterial?s(_,v):v.isLineBasicMaterial?(o(_,v),v.isLineDashedMaterial&&a(_,v)):v.isPointsMaterial?l(_,v,A,S):v.isSpriteMaterial?c(_,v):v.isShadowMaterial?(_.color.value.copy(v.color),_.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(_,v){_.opacity.value=v.opacity,v.color&&_.diffuse.value.copy(v.color),v.emissive&&_.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.bumpMap&&(_.bumpMap.value=v.bumpMap,t(v.bumpMap,_.bumpMapTransform),_.bumpScale.value=v.bumpScale,v.side===Ni&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,t(v.normalMap,_.normalMapTransform),_.normalScale.value.copy(v.normalScale),v.side===Ni&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,t(v.displacementMap,_.displacementMapTransform),_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias),v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,_.emissiveMapTransform)),v.specularMap&&(_.specularMap.value=v.specularMap,t(v.specularMap,_.specularMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest);const A=e.get(v).envMap;if(A&&(_.envMap.value=A,_.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=v.reflectivity,_.ior.value=v.ior,_.refractionRatio.value=v.refractionRatio),v.lightMap){_.lightMap.value=v.lightMap;const S=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=v.lightMapIntensity*S,t(v.lightMap,_.lightMapTransform)}v.aoMap&&(_.aoMap.value=v.aoMap,_.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,_.aoMapTransform))}function o(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform))}function a(_,v){_.dashSize.value=v.dashSize,_.totalSize.value=v.dashSize+v.gapSize,_.scale.value=v.scale}function l(_,v,A,S){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.size.value=v.size*A,_.scale.value=S*.5,v.map&&(_.map.value=v.map,t(v.map,_.uvTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function c(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.rotation.value=v.rotation,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function u(_,v){_.specular.value.copy(v.specular),_.shininess.value=Math.max(v.shininess,1e-4)}function d(_,v){v.gradientMap&&(_.gradientMap.value=v.gradientMap)}function p(_,v){_.metalness.value=v.metalness,v.metalnessMap&&(_.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,_.metalnessMapTransform)),_.roughness.value=v.roughness,v.roughnessMap&&(_.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,_.roughnessMapTransform)),e.get(v).envMap&&(_.envMapIntensity.value=v.envMapIntensity)}function m(_,v,A){_.ior.value=v.ior,v.sheen>0&&(_.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),_.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(_.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,_.sheenColorMapTransform)),v.sheenRoughnessMap&&(_.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,_.sheenRoughnessMapTransform))),v.clearcoat>0&&(_.clearcoat.value=v.clearcoat,_.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(_.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,_.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(_.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Ni&&_.clearcoatNormalScale.value.negate())),v.iridescence>0&&(_.iridescence.value=v.iridescence,_.iridescenceIOR.value=v.iridescenceIOR,_.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(_.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,_.iridescenceMapTransform)),v.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),v.transmission>0&&(_.transmission.value=v.transmission,_.transmissionSamplerMap.value=A.texture,_.transmissionSamplerSize.value.set(A.width,A.height),v.transmissionMap&&(_.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,_.transmissionMapTransform)),_.thickness.value=v.thickness,v.thicknessMap&&(_.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=v.attenuationDistance,_.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(_.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(_.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=v.specularIntensity,_.specularColor.value.copy(v.specularColor),v.specularColorMap&&(_.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,_.specularColorMapTransform)),v.specularIntensityMap&&(_.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,_.specularIntensityMapTransform))}function g(_,v){v.matcap&&(_.matcap.value=v.matcap)}function x(_,v){const A=e.get(v).light;_.referencePosition.value.setFromMatrixPosition(A.matrixWorld),_.nearDistance.value=A.shadow.camera.near,_.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function xW(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(A,S){const w=S.program;i.uniformBlockBinding(A,w)}function c(A,S){let w=r[A.id];w===void 0&&(g(A),w=u(A),r[A.id]=w,A.addEventListener("dispose",_));const T=S.program;i.updateUBOMapping(A,T);const C=e.render.frame;s[A.id]!==C&&(p(A),s[A.id]=C)}function u(A){const S=d();A.__bindingPointIndex=S;const w=n.createBuffer(),T=A.__size,C=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,T,C),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,w),w}function d(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(A){const S=r[A.id],w=A.uniforms,T=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let C=0,R=w.length;C<R;C++){const D=w[C];if(m(D,C,T)===!0){const P=D.__offset,B=Array.isArray(D.value)?D.value:[D.value];let N=0;for(let j=0;j<B.length;j++){const z=B[j],$=x(z);typeof z=="number"?(D.__data[0]=z,n.bufferSubData(n.UNIFORM_BUFFER,P+N,D.__data)):z.isMatrix3?(D.__data[0]=z.elements[0],D.__data[1]=z.elements[1],D.__data[2]=z.elements[2],D.__data[3]=z.elements[0],D.__data[4]=z.elements[3],D.__data[5]=z.elements[4],D.__data[6]=z.elements[5],D.__data[7]=z.elements[0],D.__data[8]=z.elements[6],D.__data[9]=z.elements[7],D.__data[10]=z.elements[8],D.__data[11]=z.elements[0]):(z.toArray(D.__data,N),N+=$.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,P,D.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(A,S,w){const T=A.value;if(w[S]===void 0){if(typeof T=="number")w[S]=T;else{const C=Array.isArray(T)?T:[T],R=[];for(let D=0;D<C.length;D++)R.push(C[D].clone());w[S]=R}return!0}else if(typeof T=="number"){if(w[S]!==T)return w[S]=T,!0}else{const C=Array.isArray(w[S])?w[S]:[w[S]],R=Array.isArray(T)?T:[T];for(let D=0;D<C.length;D++){const P=C[D];if(P.equals(R[D])===!1)return P.copy(R[D]),!0}}return!1}function g(A){const S=A.uniforms;let w=0;const T=16;let C=0;for(let R=0,D=S.length;R<D;R++){const P=S[R],B={boundary:0,storage:0},N=Array.isArray(P.value)?P.value:[P.value];for(let j=0,z=N.length;j<z;j++){const $=N[j],J=x($);B.boundary+=J.boundary,B.storage+=J.storage}if(P.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=w,R>0){C=w%T;const j=T-C;C!==0&&j-B.boundary<0&&(w+=T-C,P.__offset=w)}w+=B.storage}return C=w%T,C>0&&(w+=T-C),A.__size=w,A.__cache={},this}function x(A){const S={boundary:0,storage:0};return typeof A=="number"?(S.boundary=4,S.storage=4):A.isVector2?(S.boundary=8,S.storage=8):A.isVector3||A.isColor?(S.boundary=16,S.storage=12):A.isVector4?(S.boundary=16,S.storage=16):A.isMatrix3?(S.boundary=48,S.storage=48):A.isMatrix4?(S.boundary=64,S.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),S}function _(A){const S=A.target;S.removeEventListener("dispose",_);const w=o.indexOf(S.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function v(){for(const A in r)n.deleteBuffer(r[A]);o=[],r={},s={}}return{bind:l,update:c,dispose:v}}function _W(){const n=yh("canvas");return n.style.display="block",n}class qE{constructor(e={}){const{canvas:t=_W(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),g=new Int32Array(4);let x=null,_=null;const v=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=yt,this._useLegacyLights=!1,this.toneMapping=Ws,this.toneMappingExposure=1;const S=this;let w=!1,T=0,C=0,R=null,D=-1,P=null;const B=new Dt,N=new Dt;let j=null;const z=new be(0);let $=0,J=t.width,Q=t.height,ee=1,O=null,W=null;const G=new Dt(0,0,J,Q),H=new Dt(0,0,J,Q);let Y=!1;const me=new _v;let ce=!1,Ae=!1,Se=null;const Re=new Ue,Ne=new ve,pt=new k,wt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Le(){return R===null?ee:1}let X=i;function xe(U,re){for(let de=0;de<U.length;de++){const ie=U[de],fe=t.getContext(ie,re);if(fe!==null)return fe}return null}try{const U={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${zh}`),t.addEventListener("webglcontextlost",Be,!1),t.addEventListener("webglcontextrestored",le,!1),t.addEventListener("webglcontextcreationerror",Pe,!1),X===null){const re=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&re.shift(),X=xe(re,U),X===null)throw xe(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&X instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),X.getShaderPrecisionFormat===void 0&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let pe,Ee,ge,Ke,ke,ze,Ze,St,Xt,F,L,ne,_e,ye,we,$e,Te,oe,et,Ye,Qe,Ge,Ve,mt;function Ut(){pe=new O9(X),Ee=new R9(X,pe,e),pe.init(Ee),Ge=new pO(X,pe,Ee),ge=new pW(X,pe,Ee),Ke=new k9(X),ke=new nW,ze=new mW(X,pe,ge,ke,Ee,Ge,Ke),Ze=new I9(S),St=new L9(S),Xt=new J4(X,Ee),Ve=new C9(X,pe,Xt,Ee),F=new F9(X,Xt,Ke,Ve),L=new G9(X,F,Xt,Ke),et=new H9(X,Ee,ze),$e=new P9(ke),ne=new tW(S,Ze,St,pe,Ee,Ve,$e),_e=new yW(S,ke),ye=new rW,we=new uW(pe,Ee),oe=new T9(S,Ze,St,ge,L,p,l),Te=new hW(S,L,Ee),mt=new xW(X,Ke,Ee,ge),Ye=new b9(X,pe,Ke,Ee),Qe=new N9(X,pe,Ke,Ee),Ke.programs=ne.programs,S.capabilities=Ee,S.extensions=pe,S.properties=ke,S.renderLists=ye,S.shadowMap=Te,S.state=ge,S.info=Ke}Ut();const q=new vW(S,X);this.xr=q,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const U=pe.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=pe.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return ee},this.setPixelRatio=function(U){U!==void 0&&(ee=U,this.setSize(J,Q,!1))},this.getSize=function(U){return U.set(J,Q)},this.setSize=function(U,re,de=!0){if(q.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}J=U,Q=re,t.width=Math.floor(U*ee),t.height=Math.floor(re*ee),de===!0&&(t.style.width=U+"px",t.style.height=re+"px"),this.setViewport(0,0,U,re)},this.getDrawingBufferSize=function(U){return U.set(J*ee,Q*ee).floor()},this.setDrawingBufferSize=function(U,re,de){J=U,Q=re,ee=de,t.width=Math.floor(U*de),t.height=Math.floor(re*de),this.setViewport(0,0,U,re)},this.getCurrentViewport=function(U){return U.copy(B)},this.getViewport=function(U){return U.copy(G)},this.setViewport=function(U,re,de,ie){U.isVector4?G.set(U.x,U.y,U.z,U.w):G.set(U,re,de,ie),ge.viewport(B.copy(G).multiplyScalar(ee).floor())},this.getScissor=function(U){return U.copy(H)},this.setScissor=function(U,re,de,ie){U.isVector4?H.set(U.x,U.y,U.z,U.w):H.set(U,re,de,ie),ge.scissor(N.copy(H).multiplyScalar(ee).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(U){ge.setScissorTest(Y=U)},this.setOpaqueSort=function(U){O=U},this.setTransparentSort=function(U){W=U},this.getClearColor=function(U){return U.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(U=!0,re=!0,de=!0){let ie=0;if(U){let fe=!1;if(R!==null){const je=R.texture.format;fe=je===HE||je===zE||je===UE}if(fe){const je=R.texture.type,nt=je===$s||je===wo||je===gv||je===Pa||je===NE||je===kE,lt=oe.getClearColor(),ct=oe.getClearAlpha(),Mt=lt.r,st=lt.g,ft=lt.b;nt?(m[0]=Mt,m[1]=st,m[2]=ft,m[3]=ct,X.clearBufferuiv(X.COLOR,0,m)):(g[0]=Mt,g[1]=st,g[2]=ft,g[3]=ct,X.clearBufferiv(X.COLOR,0,g))}else ie|=X.COLOR_BUFFER_BIT}re&&(ie|=X.DEPTH_BUFFER_BIT),de&&(ie|=X.STENCIL_BUFFER_BIT),X.clear(ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Be,!1),t.removeEventListener("webglcontextrestored",le,!1),t.removeEventListener("webglcontextcreationerror",Pe,!1),ye.dispose(),we.dispose(),ke.dispose(),Ze.dispose(),St.dispose(),L.dispose(),Ve.dispose(),mt.dispose(),ne.dispose(),q.dispose(),q.removeEventListener("sessionstart",Gt),q.removeEventListener("sessionend",ir),Se&&(Se.dispose(),Se=null),oi.stop()};function Be(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function le(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const U=Ke.autoReset,re=Te.enabled,de=Te.autoUpdate,ie=Te.needsUpdate,fe=Te.type;Ut(),Ke.autoReset=U,Te.enabled=re,Te.autoUpdate=de,Te.needsUpdate=ie,Te.type=fe}function Pe(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Oe(U){const re=U.target;re.removeEventListener("dispose",Oe),It(re)}function It(U){Jt(U),ke.remove(U)}function Jt(U){const re=ke.get(U).programs;re!==void 0&&(re.forEach(function(de){ne.releaseProgram(de)}),U.isShaderMaterial&&ne.releaseShaderCache(U))}this.renderBufferDirect=function(U,re,de,ie,fe,je){re===null&&(re=wt);const nt=fe.isMesh&&fe.matrixWorld.determinant()<0,lt=uy(U,re,de,ie,fe);ge.setMaterial(ie,nt);let ct=de.index,Mt=1;if(ie.wireframe===!0){if(ct=F.getWireframeAttribute(de),ct===void 0)return;Mt=2}const st=de.drawRange,ft=de.attributes.position;let Kt=st.start*Mt,Zt=(st.start+st.count)*Mt;je!==null&&(Kt=Math.max(Kt,je.start*Mt),Zt=Math.min(Zt,(je.start+je.count)*Mt)),ct!==null?(Kt=Math.max(Kt,0),Zt=Math.min(Zt,ct.count)):ft!=null&&(Kt=Math.max(Kt,0),Zt=Math.min(Zt,ft.count));const zi=Zt-Kt;if(zi<0||zi===1/0)return;Ve.setup(fe,ie,lt,de,ct);let rr,$t=Ye;if(ct!==null&&(rr=Xt.get(ct),$t=Qe,$t.setIndex(rr)),fe.isMesh)ie.wireframe===!0?(ge.setLineWidth(ie.wireframeLinewidth*Le()),$t.setMode(X.LINES)):$t.setMode(X.TRIANGLES);else if(fe.isLine){let ht=ie.linewidth;ht===void 0&&(ht=1),ge.setLineWidth(ht*Le()),fe.isLineSegments?$t.setMode(X.LINES):fe.isLineLoop?$t.setMode(X.LINE_LOOP):$t.setMode(X.LINE_STRIP)}else fe.isPoints?$t.setMode(X.POINTS):fe.isSprite&&$t.setMode(X.TRIANGLES);if(fe.isInstancedMesh)$t.renderInstances(Kt,zi,fe.count);else if(de.isInstancedBufferGeometry){const ht=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,zt=Math.min(de.instanceCount,ht);$t.renderInstances(Kt,zi,zt)}else $t.render(Kt,zi)},this.compile=function(U,re){function de(ie,fe,je){ie.transparent===!0&&ie.side===hs&&ie.forceSinglePass===!1?(ie.side=Ni,ie.needsUpdate=!0,Cs(ie,fe,je),ie.side=Js,ie.needsUpdate=!0,Cs(ie,fe,je),ie.side=hs):Cs(ie,fe,je)}_=we.get(U),_.init(),A.push(_),U.traverseVisible(function(ie){ie.isLight&&ie.layers.test(re.layers)&&(_.pushLight(ie),ie.castShadow&&_.pushShadow(ie))}),_.setupLights(S._useLegacyLights),U.traverse(function(ie){const fe=ie.material;if(fe)if(Array.isArray(fe))for(let je=0;je<fe.length;je++){const nt=fe[je];de(nt,U,ie)}else de(fe,U,ie)}),A.pop(),_=null};let xn=null;function qr(U){xn&&xn(U)}function Gt(){oi.stop()}function ir(){oi.start()}const oi=new cO;oi.setAnimationLoop(qr),typeof self<"u"&&oi.setContext(self),this.setAnimationLoop=function(U){xn=U,q.setAnimationLoop(U),U===null?oi.stop():oi.start()},q.addEventListener("sessionstart",Gt),q.addEventListener("sessionend",ir),this.render=function(U,re){if(re!==void 0&&re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),re.parent===null&&re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),q.enabled===!0&&q.isPresenting===!0&&(q.cameraAutoUpdate===!0&&q.updateCamera(re),re=q.getCamera()),U.isScene===!0&&U.onBeforeRender(S,U,re,R),_=we.get(U,A.length),_.init(),A.push(_),Re.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),me.setFromProjectionMatrix(Re),Ae=this.localClippingEnabled,ce=$e.init(this.clippingPlanes,Ae),x=ye.get(U,v.length),x.init(),v.push(x),cp(U,re,0,S.sortObjects),x.finish(),S.sortObjects===!0&&x.sort(O,W),this.info.render.frame++,ce===!0&&$e.beginShadows();const de=_.state.shadowsArray;if(Te.render(de,U,re),ce===!0&&$e.endShadows(),this.info.autoReset===!0&&this.info.reset(),oe.render(x,U),_.setupLights(S._useLegacyLights),re.isArrayCamera){const ie=re.cameras;for(let fe=0,je=ie.length;fe<je;fe++){const nt=ie[fe];up(x,U,nt,nt.viewport)}}else up(x,U,re);R!==null&&(ze.updateMultisampleRenderTarget(R),ze.updateRenderTargetMipmap(R)),U.isScene===!0&&U.onAfterRender(S,U,re),Ve.resetDefaultState(),D=-1,P=null,A.pop(),A.length>0?_=A[A.length-1]:_=null,v.pop(),v.length>0?x=v[v.length-1]:x=null};function cp(U,re,de,ie){if(U.visible===!1)return;if(U.layers.test(re.layers)){if(U.isGroup)de=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(re);else if(U.isLight)_.pushLight(U),U.castShadow&&_.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||me.intersectsSprite(U)){ie&&pt.setFromMatrixPosition(U.matrixWorld).applyMatrix4(Re);const nt=L.update(U),lt=U.material;lt.visible&&x.push(U,nt,lt,de,pt.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||me.intersectsObject(U))){const nt=L.update(U),lt=U.material;if(ie&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),pt.copy(U.boundingSphere.center)):(nt.boundingSphere===null&&nt.computeBoundingSphere(),pt.copy(nt.boundingSphere.center)),pt.applyMatrix4(U.matrixWorld).applyMatrix4(Re)),Array.isArray(lt)){const ct=nt.groups;for(let Mt=0,st=ct.length;Mt<st;Mt++){const ft=ct[Mt],Kt=lt[ft.materialIndex];Kt&&Kt.visible&&x.push(U,nt,Kt,de,pt.z,ft)}}else lt.visible&&x.push(U,nt,lt,de,pt.z,null)}}const je=U.children;for(let nt=0,lt=je.length;nt<lt;nt++)cp(je[nt],re,de,ie)}function up(U,re,de,ie){const fe=U.opaque,je=U.transmissive,nt=U.transparent;_.setupLightsView(de),ce===!0&&$e.setGlobalState(S.clippingPlanes,de),je.length>0&&fp(fe,je,re,de),ie&&ge.viewport(B.copy(ie)),fe.length>0&&jo(fe,re,de),je.length>0&&jo(je,re,de),nt.length>0&&jo(nt,re,de),ge.buffers.depth.setTest(!0),ge.buffers.depth.setMask(!0),ge.buffers.color.setMask(!0),ge.setPolygonOffset(!1)}function fp(U,re,de,ie){const fe=Ee.isWebGL2;Se===null&&(Se=new _r(1,1,{generateMipmaps:!0,type:pe.has("EXT_color_buffer_half_float")?Ju:$s,minFilter:Ys,samples:fe?4:0})),S.getDrawingBufferSize(Ne),fe?Se.setSize(Ne.x,Ne.y):Se.setSize(S0(Ne.x),S0(Ne.y));const je=S.getRenderTarget();S.setRenderTarget(Se),S.getClearColor(z),$=S.getClearAlpha(),$<1&&S.setClearColor(16777215,.5),S.clear();const nt=S.toneMapping;S.toneMapping=Ws,jo(U,de,ie),ze.updateMultisampleRenderTarget(Se),ze.updateRenderTargetMipmap(Se);let lt=!1;for(let ct=0,Mt=re.length;ct<Mt;ct++){const st=re[ct],ft=st.object,Kt=st.geometry,Zt=st.material,zi=st.group;if(Zt.side===hs&&ft.layers.test(ie.layers)){const rr=Zt.side;Zt.side=Ni,Zt.needsUpdate=!0,dp(ft,de,ie,Kt,Zt,zi),Zt.side=rr,Zt.needsUpdate=!0,lt=!0}}lt===!0&&(ze.updateMultisampleRenderTarget(Se),ze.updateRenderTargetMipmap(Se)),S.setRenderTarget(je),S.setClearColor(z,$),S.toneMapping=nt}function jo(U,re,de){const ie=re.isScene===!0?re.overrideMaterial:null;for(let fe=0,je=U.length;fe<je;fe++){const nt=U[fe],lt=nt.object,ct=nt.geometry,Mt=ie===null?nt.material:ie,st=nt.group;lt.layers.test(de.layers)&&dp(lt,re,de,ct,Mt,st)}}function dp(U,re,de,ie,fe,je){U.onBeforeRender(S,re,de,ie,fe,je),U.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),fe.onBeforeRender(S,re,de,ie,U,je),fe.transparent===!0&&fe.side===hs&&fe.forceSinglePass===!1?(fe.side=Ni,fe.needsUpdate=!0,S.renderBufferDirect(de,re,ie,fe,U,je),fe.side=Js,fe.needsUpdate=!0,S.renderBufferDirect(de,re,ie,fe,U,je),fe.side=hs):S.renderBufferDirect(de,re,ie,fe,U,je),U.onAfterRender(S,re,de,ie,fe,je)}function Cs(U,re,de){re.isScene!==!0&&(re=wt);const ie=ke.get(U),fe=_.state.lights,je=_.state.shadowsArray,nt=fe.state.version,lt=ne.getParameters(U,fe.state,je,re,de),ct=ne.getProgramCacheKey(lt);let Mt=ie.programs;ie.environment=U.isMeshStandardMaterial?re.environment:null,ie.fog=re.fog,ie.envMap=(U.isMeshStandardMaterial?St:Ze).get(U.envMap||ie.environment),Mt===void 0&&(U.addEventListener("dispose",Oe),Mt=new Map,ie.programs=Mt);let st=Mt.get(ct);if(st!==void 0){if(ie.currentProgram===st&&ie.lightsStateVersion===nt)return hp(U,lt),st}else lt.uniforms=ne.getUniforms(U),U.onBuild(de,lt,S),U.onBeforeCompile(lt,S),st=ne.acquireProgram(lt,ct),Mt.set(ct,st),ie.uniforms=lt.uniforms;const ft=ie.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(ft.clippingPlanes=$e.uniform),hp(U,lt),ie.needsLights=dy(U),ie.lightsStateVersion=nt,ie.needsLights&&(ft.ambientLightColor.value=fe.state.ambient,ft.lightProbe.value=fe.state.probe,ft.directionalLights.value=fe.state.directional,ft.directionalLightShadows.value=fe.state.directionalShadow,ft.spotLights.value=fe.state.spot,ft.spotLightShadows.value=fe.state.spotShadow,ft.rectAreaLights.value=fe.state.rectArea,ft.ltc_1.value=fe.state.rectAreaLTC1,ft.ltc_2.value=fe.state.rectAreaLTC2,ft.pointLights.value=fe.state.point,ft.pointLightShadows.value=fe.state.pointShadow,ft.hemisphereLights.value=fe.state.hemi,ft.directionalShadowMap.value=fe.state.directionalShadowMap,ft.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,ft.spotShadowMap.value=fe.state.spotShadowMap,ft.spotLightMatrix.value=fe.state.spotLightMatrix,ft.spotLightMap.value=fe.state.spotLightMap,ft.pointShadowMap.value=fe.state.pointShadowMap,ft.pointShadowMatrix.value=fe.state.pointShadowMatrix);const Kt=st.getUniforms(),Zt=$g.seqWithValue(Kt.seq,ft);return ie.currentProgram=st,ie.uniformsList=Zt,st}function hp(U,re){const de=ke.get(U);de.outputColorSpace=re.outputColorSpace,de.instancing=re.instancing,de.instancingColor=re.instancingColor,de.skinning=re.skinning,de.morphTargets=re.morphTargets,de.morphNormals=re.morphNormals,de.morphColors=re.morphColors,de.morphTargetsCount=re.morphTargetsCount,de.numClippingPlanes=re.numClippingPlanes,de.numIntersection=re.numClipIntersection,de.vertexAlphas=re.vertexAlphas,de.vertexTangents=re.vertexTangents,de.toneMapping=re.toneMapping}function uy(U,re,de,ie,fe){re.isScene!==!0&&(re=wt),ze.resetTextureUnits();const je=re.fog,nt=ie.isMeshStandardMaterial?re.environment:null,lt=R===null?S.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:As,ct=(ie.isMeshStandardMaterial?St:Ze).get(ie.envMap||nt),Mt=ie.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,st=!!de.attributes.tangent&&(!!ie.normalMap||ie.anisotropy>0),ft=!!de.morphAttributes.position,Kt=!!de.morphAttributes.normal,Zt=!!de.morphAttributes.color;let zi=Ws;ie.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(zi=S.toneMapping);const rr=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,$t=rr!==void 0?rr.length:0,ht=ke.get(ie),zt=_.state.lights;if(ce===!0&&(Ae===!0||U!==P)){const pi=U===P&&ie.id===D;$e.setState(ie,U,pi)}let ut=!1;ie.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==zt.state.version||ht.outputColorSpace!==lt||fe.isInstancedMesh&&ht.instancing===!1||!fe.isInstancedMesh&&ht.instancing===!0||fe.isSkinnedMesh&&ht.skinning===!1||!fe.isSkinnedMesh&&ht.skinning===!0||fe.isInstancedMesh&&ht.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&ht.instancingColor===!1&&fe.instanceColor!==null||ht.envMap!==ct||ie.fog===!0&&ht.fog!==je||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==$e.numPlanes||ht.numIntersection!==$e.numIntersection)||ht.vertexAlphas!==Mt||ht.vertexTangents!==st||ht.morphTargets!==ft||ht.morphNormals!==Kt||ht.morphColors!==Zt||ht.toneMapping!==zi||Ee.isWebGL2===!0&&ht.morphTargetsCount!==$t)&&(ut=!0):(ut=!0,ht.__version=ie.version);let hi=ht.currentProgram;ut===!0&&(hi=Cs(ie,re,fe));let Wn=!1,Ln=!1,Zr=!1;const _n=hi.getUniforms(),An=ht.uniforms;if(ge.useProgram(hi.program)&&(Wn=!0,Ln=!0,Zr=!0),ie.id!==D&&(D=ie.id,Ln=!0),Wn||P!==U){if(_n.setValue(X,"projectionMatrix",U.projectionMatrix),Ee.logarithmicDepthBuffer&&_n.setValue(X,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),P!==U&&(P=U,Ln=!0,Zr=!0),ie.isShaderMaterial||ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshStandardMaterial||ie.envMap){const pi=_n.map.cameraPosition;pi!==void 0&&pi.setValue(X,pt.setFromMatrixPosition(U.matrixWorld))}(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&_n.setValue(X,"isOrthographic",U.isOrthographicCamera===!0),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial||ie.isShadowMaterial||fe.isSkinnedMesh)&&_n.setValue(X,"viewMatrix",U.matrixWorldInverse)}if(fe.isSkinnedMesh){_n.setOptional(X,fe,"bindMatrix"),_n.setOptional(X,fe,"bindMatrixInverse");const pi=fe.skeleton;pi&&(Ee.floatVertexTextures?(pi.boneTexture===null&&pi.computeBoneTexture(),_n.setValue(X,"boneTexture",pi.boneTexture,ze),_n.setValue(X,"boneTextureSize",pi.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Xo=de.morphAttributes;if((Xo.position!==void 0||Xo.normal!==void 0||Xo.color!==void 0&&Ee.isWebGL2===!0)&&et.update(fe,de,hi),(Ln||ht.receiveShadow!==fe.receiveShadow)&&(ht.receiveShadow=fe.receiveShadow,_n.setValue(X,"receiveShadow",fe.receiveShadow)),ie.isMeshGouraudMaterial&&ie.envMap!==null&&(An.envMap.value=ct,An.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),Ln&&(_n.setValue(X,"toneMappingExposure",S.toneMappingExposure),ht.needsLights&&fy(An,Zr),je&&ie.fog===!0&&_e.refreshFogUniforms(An,je),_e.refreshMaterialUniforms(An,ie,ee,Q,Se),$g.upload(X,ht.uniformsList,An,ze)),ie.isShaderMaterial&&ie.uniformsNeedUpdate===!0&&($g.upload(X,ht.uniformsList,An,ze),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&_n.setValue(X,"center",fe.center),_n.setValue(X,"modelViewMatrix",fe.modelViewMatrix),_n.setValue(X,"normalMatrix",fe.normalMatrix),_n.setValue(X,"modelMatrix",fe.matrixWorld),ie.isShaderMaterial||ie.isRawShaderMaterial){const pi=ie.uniformsGroups;for(let pc=0,mc=pi.length;pc<mc;pc++)if(Ee.isWebGL2){const Tf=pi[pc];mt.update(Tf,hi),mt.bind(Tf,hi)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return hi}function fy(U,re){U.ambientLightColor.needsUpdate=re,U.lightProbe.needsUpdate=re,U.directionalLights.needsUpdate=re,U.directionalLightShadows.needsUpdate=re,U.pointLights.needsUpdate=re,U.pointLightShadows.needsUpdate=re,U.spotLights.needsUpdate=re,U.spotLightShadows.needsUpdate=re,U.rectAreaLights.needsUpdate=re,U.hemisphereLights.needsUpdate=re}function dy(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(U,re,de){ke.get(U.texture).__webglTexture=re,ke.get(U.depthTexture).__webglTexture=de;const ie=ke.get(U);ie.__hasExternalTextures=!0,ie.__hasExternalTextures&&(ie.__autoAllocateDepthBuffer=de===void 0,ie.__autoAllocateDepthBuffer||pe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ie.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,re){const de=ke.get(U);de.__webglFramebuffer=re,de.__useDefaultFramebuffer=re===void 0},this.setRenderTarget=function(U,re=0,de=0){R=U,T=re,C=de;let ie=!0,fe=null,je=!1,nt=!1;if(U){const ct=ke.get(U);ct.__useDefaultFramebuffer!==void 0?(ge.bindFramebuffer(X.FRAMEBUFFER,null),ie=!1):ct.__webglFramebuffer===void 0?ze.setupRenderTarget(U):ct.__hasExternalTextures&&ze.rebindTextures(U,ke.get(U.texture).__webglTexture,ke.get(U.depthTexture).__webglTexture);const Mt=U.texture;(Mt.isData3DTexture||Mt.isDataArrayTexture||Mt.isCompressedArrayTexture)&&(nt=!0);const st=ke.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(st[re])?fe=st[re][de]:fe=st[re],je=!0):Ee.isWebGL2&&U.samples>0&&ze.useMultisampledRTT(U)===!1?fe=ke.get(U).__webglMultisampledFramebuffer:Array.isArray(st)?fe=st[de]:fe=st,B.copy(U.viewport),N.copy(U.scissor),j=U.scissorTest}else B.copy(G).multiplyScalar(ee).floor(),N.copy(H).multiplyScalar(ee).floor(),j=Y;if(ge.bindFramebuffer(X.FRAMEBUFFER,fe)&&Ee.drawBuffers&&ie&&ge.drawBuffers(U,fe),ge.viewport(B),ge.scissor(N),ge.setScissorTest(j),je){const ct=ke.get(U.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+re,ct.__webglTexture,de)}else if(nt){const ct=ke.get(U.texture),Mt=re||0;X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,ct.__webglTexture,de||0,Mt)}D=-1},this.readRenderTargetPixels=function(U,re,de,ie,fe,je,nt){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=ke.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&nt!==void 0&&(lt=lt[nt]),lt){ge.bindFramebuffer(X.FRAMEBUFFER,lt);try{const ct=U.texture,Mt=ct.format,st=ct.type;if(Mt!==Ki&&Ge.convert(Mt)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ft=st===Ju&&(pe.has("EXT_color_buffer_half_float")||Ee.isWebGL2&&pe.has("EXT_color_buffer_float"));if(st!==$s&&Ge.convert(st)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_TYPE)&&!(st===zs&&(Ee.isWebGL2||pe.has("OES_texture_float")||pe.has("WEBGL_color_buffer_float")))&&!ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}re>=0&&re<=U.width-ie&&de>=0&&de<=U.height-fe&&X.readPixels(re,de,ie,fe,Ge.convert(Mt),Ge.convert(st),je)}finally{const ct=R!==null?ke.get(R).__webglFramebuffer:null;ge.bindFramebuffer(X.FRAMEBUFFER,ct)}}},this.copyFramebufferToTexture=function(U,re,de=0){const ie=Math.pow(2,-de),fe=Math.floor(re.image.width*ie),je=Math.floor(re.image.height*ie);ze.setTexture2D(re,0),X.copyTexSubImage2D(X.TEXTURE_2D,de,0,0,U.x,U.y,fe,je),ge.unbindTexture()},this.copyTextureToTexture=function(U,re,de,ie=0){const fe=re.image.width,je=re.image.height,nt=Ge.convert(de.format),lt=Ge.convert(de.type);ze.setTexture2D(de,0),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,de.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,de.unpackAlignment),re.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,ie,U.x,U.y,fe,je,nt,lt,re.image.data):re.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,ie,U.x,U.y,re.mipmaps[0].width,re.mipmaps[0].height,nt,re.mipmaps[0].data):X.texSubImage2D(X.TEXTURE_2D,ie,U.x,U.y,nt,lt,re.image),ie===0&&de.generateMipmaps&&X.generateMipmap(X.TEXTURE_2D),ge.unbindTexture()},this.copyTextureToTexture3D=function(U,re,de,ie,fe=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const je=U.max.x-U.min.x+1,nt=U.max.y-U.min.y+1,lt=U.max.z-U.min.z+1,ct=Ge.convert(ie.format),Mt=Ge.convert(ie.type);let st;if(ie.isData3DTexture)ze.setTexture3D(ie,0),st=X.TEXTURE_3D;else if(ie.isDataArrayTexture)ze.setTexture2DArray(ie,0),st=X.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,ie.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,ie.unpackAlignment);const ft=X.getParameter(X.UNPACK_ROW_LENGTH),Kt=X.getParameter(X.UNPACK_IMAGE_HEIGHT),Zt=X.getParameter(X.UNPACK_SKIP_PIXELS),zi=X.getParameter(X.UNPACK_SKIP_ROWS),rr=X.getParameter(X.UNPACK_SKIP_IMAGES),$t=de.isCompressedTexture?de.mipmaps[0]:de.image;X.pixelStorei(X.UNPACK_ROW_LENGTH,$t.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,$t.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,U.min.x),X.pixelStorei(X.UNPACK_SKIP_ROWS,U.min.y),X.pixelStorei(X.UNPACK_SKIP_IMAGES,U.min.z),de.isDataTexture||de.isData3DTexture?X.texSubImage3D(st,fe,re.x,re.y,re.z,je,nt,lt,ct,Mt,$t.data):de.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),X.compressedTexSubImage3D(st,fe,re.x,re.y,re.z,je,nt,lt,ct,$t.data)):X.texSubImage3D(st,fe,re.x,re.y,re.z,je,nt,lt,ct,Mt,$t),X.pixelStorei(X.UNPACK_ROW_LENGTH,ft),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,Kt),X.pixelStorei(X.UNPACK_SKIP_PIXELS,Zt),X.pixelStorei(X.UNPACK_SKIP_ROWS,zi),X.pixelStorei(X.UNPACK_SKIP_IMAGES,rr),fe===0&&ie.generateMipmaps&&X.generateMipmap(st),ge.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?ze.setTextureCube(U,0):U.isData3DTexture?ze.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?ze.setTexture2DArray(U,0):ze.setTexture2D(U,0),ge.unbindTexture()},this.resetState=function(){T=0,C=0,R=null,ge.reset(),Ve.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Hs}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===yt?Ba:WE}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ba?yt:As}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class vO extends qE{}vO.prototype.isWebGL1Renderer=!0;class Ev{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new be(e),this.density=t}clone(){return new Ev(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class wv{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new be(e),this.near=t,this.far=i}clone(){return new wv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class E0 extends bt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Wh{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=gh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=gr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ri=new k;class ka{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ri.fromBufferAttribute(this,t),Ri.applyMatrix4(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ri.fromBufferAttribute(this,t),Ri.applyNormalMatrix(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ri.fromBufferAttribute(this,t),Ri.transformDirection(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Yi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Yi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Yi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Yi(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array),s=At(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new kt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ka(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ZE extends Vn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new be(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let $c;const rd=new k,jc=new k,Xc=new k,Jc=new ve,sd=new ve,yO=new Ue,Vm=new k,od=new k,Wm=new k,Wb=new ve,u_=new ve,$b=new ve;class xO extends bt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",$c===void 0){$c=new dt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Wh(t,5);$c.setIndex([0,1,2,0,2,3]),$c.setAttribute("position",new ka(i,3,0,!1)),$c.setAttribute("uv",new ka(i,2,3,!1))}this.geometry=$c,this.material=e!==void 0?e:new ZE,this.center=new ve(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),jc.setFromMatrixScale(this.matrixWorld),yO.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Xc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&jc.multiplyScalar(-Xc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;$m(Vm.set(-.5,-.5,0),Xc,o,jc,r,s),$m(od.set(.5,-.5,0),Xc,o,jc,r,s),$m(Wm.set(.5,.5,0),Xc,o,jc,r,s),Wb.set(0,0),u_.set(1,0),$b.set(1,1);let a=e.ray.intersectTriangle(Vm,od,Wm,!1,rd);if(a===null&&($m(od.set(-.5,.5,0),Xc,o,jc,r,s),u_.set(0,1),a=e.ray.intersectTriangle(Vm,Wm,od,!1,rd),a===null))return;const l=e.ray.origin.distanceTo(rd);l<e.near||l>e.far||t.push({distance:l,point:rd.clone(),uv:Ji.getInterpolation(rd,Vm,od,Wm,Wb,u_,$b,new ve),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function $m(n,e,t,i,r,s){Jc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(sd.x=s*Jc.x-r*Jc.y,sd.y=r*Jc.x+s*Jc.y):sd.copy(Jc),n.copy(e),n.x+=sd.x,n.y+=sd.y,n.applyMatrix4(yO)}const jm=new k,jb=new k;class _O extends bt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){jm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(jm);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){jm.setFromMatrixPosition(e.matrixWorld),jb.setFromMatrixPosition(this.matrixWorld);const i=jm.distanceTo(jb)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const Xb=new k,Jb=new Dt,Kb=new Dt,AW=new k,Yb=new Ue,Kc=new k,f_=new Kr,Qb=new Ue,d_=new ff;class Mv extends Hn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ue,this.bindMatrixInverse=new Ue,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Es),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Kc.fromBufferAttribute(t,i),this.applyBoneTransform(i,Kc),this.boundingBox.expandByPoint(Kc)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Kr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Kc.fromBufferAttribute(t,i),this.applyBoneTransform(i,Kc),this.boundingSphere.expandByPoint(Kc)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),f_.copy(this.boundingSphere),f_.applyMatrix4(r),e.ray.intersectsSphere(f_)!==!1&&(Qb.copy(r).invert(),d_.copy(e.ray).applyMatrix4(Qb),!(this.boundingBox!==null&&d_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,d_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Dt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;Jb.fromBufferAttribute(r.attributes.skinIndex,e),Kb.fromBufferAttribute(r.attributes.skinWeight,e),Xb.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=Kb.getComponent(s);if(o!==0){const a=Jb.getComponent(s);Yb.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(AW.copy(Xb).applyMatrix4(Yb),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class qu extends bt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Lu extends qt{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Mn,u=Mn,d,p){super(null,o,a,l,c,u,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const qb=new Ue,SW=new Ue;class pf{constructor(e=[],t=[]){this.uuid=gr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ue)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ue;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:SW;qb.multiplyMatrices(a,t[s]),qb.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new pf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=tO(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Lu(t,e,e,Ki,zs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new qu),this.bones.push(o),this.boneInverses.push(new Ue().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Zu extends kt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Yc=new Ue,Zb=new Ue,Xm=[],eR=new Es,EW=new Ue,ad=new Hn,ld=new Kr;class ew extends Hn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Zu(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,EW)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Es),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Yc),eR.copy(e.boundingBox).applyMatrix4(Yc),this.boundingBox.union(eR)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Kr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Yc),ld.copy(e.boundingSphere).applyMatrix4(Yc),this.boundingSphere.union(ld)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(ad.geometry=this.geometry,ad.material=this.material,ad.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ld.copy(this.boundingSphere),ld.applyMatrix4(i),e.ray.intersectsSphere(ld)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Yc),Zb.multiplyMatrices(i,Yc),ad.matrixWorld=Zb,ad.raycast(e,Xm);for(let o=0,a=Xm.length;o<a;o++){const l=Xm[o];l.instanceId=s,l.object=this,t.push(l)}Xm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Zu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class fi extends Vn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new be(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const tR=new k,nR=new k,iR=new Ue,h_=new ff,Jm=new Kr;class Qs extends bt{constructor(e=new dt,t=new fi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)tR.fromBufferAttribute(t,r-1),nR.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=tR.distanceTo(nR);e.setAttribute("lineDistance",new He(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Jm.copy(i.boundingSphere),Jm.applyMatrix4(r),Jm.radius+=s,e.ray.intersectsSphere(Jm)===!1)return;iR.copy(r).invert(),h_.copy(e.ray).applyMatrix4(iR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new k,u=new k,d=new k,p=new k,m=this.isLineSegments?2:1,g=i.index,_=i.attributes.position;if(g!==null){const v=Math.max(0,o.start),A=Math.min(g.count,o.start+o.count);for(let S=v,w=A-1;S<w;S+=m){const T=g.getX(S),C=g.getX(S+1);if(c.fromBufferAttribute(_,T),u.fromBufferAttribute(_,C),h_.distanceSqToSegment(c,u,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(p);D<e.near||D>e.far||t.push({distance:D,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),A=Math.min(_.count,o.start+o.count);for(let S=v,w=A-1;S<w;S+=m){if(c.fromBufferAttribute(_,S),u.fromBufferAttribute(_,S+1),h_.distanceSqToSegment(c,u,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(p);C<e.near||C>e.far||t.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const rR=new k,sR=new k;class ws extends Qs{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)rR.fromBufferAttribute(t,r),sR.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+rR.distanceTo(sR);e.setAttribute("lineDistance",new He(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class tw extends Qs{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Tv extends Vn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new be(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const oR=new Ue,GA=new ff,Km=new Kr,Ym=new k;class nw extends bt{constructor(e=new dt,t=new Tv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Km.copy(i.boundingSphere),Km.applyMatrix4(r),Km.radius+=s,e.ray.intersectsSphere(Km)===!1)return;oR.copy(r).invert(),GA.copy(e.ray).applyMatrix4(oR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let g=p,x=m;g<x;g++){const _=c.getX(g);Ym.fromBufferAttribute(d,_),aR(Ym,_,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let g=p,x=m;g<x;g++)Ym.fromBufferAttribute(d,g),aR(Ym,g,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function aR(n,e,t,i,r,s,o){const a=GA.distanceSqToPoint(n);if(a<t){const l=new k;GA.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class wW extends qt{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:dn,this.magFilter=s!==void 0?s:dn,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class MW extends qt{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Mn,this.minFilter=Mn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Cv extends qt{constructor(e,t,i,r,s,o,a,l,c,u,d,p){super(null,o,a,l,c,u,r,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class TW extends Cv{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Jn}}class CW extends Cv{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Oo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class bW extends qt{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Yr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],p=i[r+1]-u,m=(o-u)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ve:new k);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new k,r=[],s=[],o=[],a=new k,l=new Ue;for(let m=0;m<=e;m++){const g=m/e;r[m]=this.getTangentAt(g,new k)}s[0]=new k,o[0]=new k;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Tn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(Tn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class bv extends Yr{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new ve,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*d+this.aX,c=p*d+m*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class AO extends bv{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function iw(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+d)+(l-a)/d;p*=u,m*=u,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Qm=new k,p_=new iw,m_=new iw,g_=new iw;class SO extends Yr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new k){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(Qm.subVectors(r[0],r[1]).add(r[0]),c=Qm);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(Qm.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Qm),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(d),m),x=Math.pow(d.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(u),m);x<1e-4&&(x=1),g<1e-4&&(g=x),_<1e-4&&(_=x),p_.initNonuniformCatmullRom(c.x,d.x,p.x,u.x,g,x,_),m_.initNonuniformCatmullRom(c.y,d.y,p.y,u.y,g,x,_),g_.initNonuniformCatmullRom(c.z,d.z,p.z,u.z,g,x,_)}else this.curveType==="catmullrom"&&(p_.initCatmullRom(c.x,d.x,p.x,u.x,this.tension),m_.initCatmullRom(c.y,d.y,p.y,u.y,this.tension),g_.initCatmullRom(c.z,d.z,p.z,u.z,this.tension));return i.set(p_.calc(l),m_.calc(l),g_.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new k().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function lR(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function RW(n,e){const t=1-n;return t*t*e}function PW(n,e){return 2*(1-n)*n*e}function IW(n,e){return n*n*e}function kd(n,e,t,i){return RW(n,e)+PW(n,t)+IW(n,i)}function BW(n,e){const t=1-n;return t*t*t*e}function DW(n,e){const t=1-n;return 3*t*t*n*e}function LW(n,e){return 3*(1-n)*n*n*e}function OW(n,e){return n*n*n*e}function Ud(n,e,t,i,r){return BW(n,e)+DW(n,t)+LW(n,i)+OW(n,r)}class rw extends Yr{constructor(e=new ve,t=new ve,i=new ve,r=new ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ve){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ud(e,r.x,s.x,o.x,a.x),Ud(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class EO extends Yr{constructor(e=new k,t=new k,i=new k,r=new k){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new k){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ud(e,r.x,s.x,o.x,a.x),Ud(e,r.y,s.y,o.y,a.y),Ud(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Rv extends Yr{constructor(e=new ve,t=new ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ve){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wO extends Yr{constructor(e=new k,t=new k){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new k){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new k){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sw extends Yr{constructor(e=new ve,t=new ve,i=new ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ve){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(kd(e,r.x,s.x,o.x),kd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ow extends Yr{constructor(e=new k,t=new k,i=new k){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new k){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(kd(e,r.x,s.x,o.x),kd(e,r.y,s.y,o.y),kd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aw extends Yr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ve){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(lR(a,l.x,c.x,u.x,d.x),lR(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ve().fromArray(r))}return this}}var lw=Object.freeze({__proto__:null,ArcCurve:AO,CatmullRomCurve3:SO,CubicBezierCurve:rw,CubicBezierCurve3:EO,EllipseCurve:bv,LineCurve:Rv,LineCurve3:wO,QuadraticBezierCurve:sw,QuadraticBezierCurve3:ow,SplineCurve:aw});class MO extends Yr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Rv(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new lw[r.type]().fromJSON(r))}return this}}class xh extends MO{constructor(e){super(),this.type="Path",this.currentPoint=new ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Rv(this.currentPoint.clone(),new ve(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new sw(this.currentPoint.clone(),new ve(e,t),new ve(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new rw(this.currentPoint.clone(),new ve(e,t),new ve(i,r),new ve(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new aw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new bv(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class $h extends dt{constructor(e=[new ve(0,-.5),new ve(.5,0),new ve(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Tn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,d=new k,p=new ve,m=new k,g=new k,x=new k;let _=0,v=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:_=e[A+1].x-e[A].x,v=e[A+1].y-e[A].y,m.x=v*1,m.y=-_,m.z=v*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:_=e[A+1].x-e[A].x,v=e[A+1].y-e[A].y,m.x=v*1,m.y=-_,m.z=v*0,g.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(g)}for(let A=0;A<=t;A++){const S=i+A*u*r,w=Math.sin(S),T=Math.cos(S);for(let C=0;C<=e.length-1;C++){d.x=e[C].x*w,d.y=e[C].y,d.z=e[C].x*T,o.push(d.x,d.y,d.z),p.x=A/t,p.y=C/(e.length-1),a.push(p.x,p.y);const R=l[3*C+0]*w,D=l[3*C+1],P=l[3*C+0]*T;c.push(R,D,P)}}for(let A=0;A<t;A++)for(let S=0;S<e.length-1;S++){const w=S+A*e.length,T=w,C=w+e.length,R=w+e.length+1,D=w+1;s.push(T,C,D),s.push(R,D,C)}this.setIndex(s),this.setAttribute("position",new He(o,3)),this.setAttribute("uv",new He(a,2)),this.setAttribute("normal",new He(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $h(e.points,e.segments,e.phiStart,e.phiLength)}}class Pv extends $h{constructor(e=1,t=1,i=4,r=8){const s=new xh;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Pv(e.radius,e.length,e.capSegments,e.radialSegments)}}class Iv extends dt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new k,u=new ve;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=i+d/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new He(o,3)),this.setAttribute("normal",new He(a,3)),this.setAttribute("uv",new He(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Iv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class mf extends dt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],d=[],p=[],m=[];let g=0;const x=[],_=i/2;let v=0;A(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new He(d,3)),this.setAttribute("normal",new He(p,3)),this.setAttribute("uv",new He(m,2));function A(){const w=new k,T=new k;let C=0;const R=(t-e)/i;for(let D=0;D<=s;D++){const P=[],B=D/s,N=B*(t-e)+e;for(let j=0;j<=r;j++){const z=j/r,$=z*l+a,J=Math.sin($),Q=Math.cos($);T.x=N*J,T.y=-B*i+_,T.z=N*Q,d.push(T.x,T.y,T.z),w.set(J,R,Q).normalize(),p.push(w.x,w.y,w.z),m.push(z,1-B),P.push(g++)}x.push(P)}for(let D=0;D<r;D++)for(let P=0;P<s;P++){const B=x[P][D],N=x[P+1][D],j=x[P+1][D+1],z=x[P][D+1];u.push(B,N,z),u.push(N,j,z),C+=6}c.addGroup(v,C,0),v+=C}function S(w){const T=g,C=new ve,R=new k;let D=0;const P=w===!0?e:t,B=w===!0?1:-1;for(let j=1;j<=r;j++)d.push(0,_*B,0),p.push(0,B,0),m.push(.5,.5),g++;const N=g;for(let j=0;j<=r;j++){const $=j/r*l+a,J=Math.cos($),Q=Math.sin($);R.x=P*Q,R.y=_*B,R.z=P*J,d.push(R.x,R.y,R.z),p.push(0,B,0),C.x=J*.5+.5,C.y=Q*.5*B+.5,m.push(C.x,C.y),g++}for(let j=0;j<r;j++){const z=T+j,$=N+j;w===!0?u.push($,$+1,z):u.push($+1,$,z),D+=3}c.addGroup(v,D,w===!0?1:2),v+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bv extends mf{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Bv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ka extends dt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new He(s,3)),this.setAttribute("normal",new He(s.slice(),3)),this.setAttribute("uv",new He(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const S=new k,w=new k,T=new k;for(let C=0;C<t.length;C+=3)m(t[C+0],S),m(t[C+1],w),m(t[C+2],T),l(S,w,T,A)}function l(A,S,w,T){const C=T+1,R=[];for(let D=0;D<=C;D++){R[D]=[];const P=A.clone().lerp(w,D/C),B=S.clone().lerp(w,D/C),N=C-D;for(let j=0;j<=N;j++)j===0&&D===C?R[D][j]=P:R[D][j]=P.clone().lerp(B,j/N)}for(let D=0;D<C;D++)for(let P=0;P<2*(C-D)-1;P++){const B=Math.floor(P/2);P%2===0?(p(R[D][B+1]),p(R[D+1][B]),p(R[D][B])):(p(R[D][B+1]),p(R[D+1][B+1]),p(R[D+1][B]))}}function c(A){const S=new k;for(let w=0;w<s.length;w+=3)S.x=s[w+0],S.y=s[w+1],S.z=s[w+2],S.normalize().multiplyScalar(A),s[w+0]=S.x,s[w+1]=S.y,s[w+2]=S.z}function u(){const A=new k;for(let S=0;S<s.length;S+=3){A.x=s[S+0],A.y=s[S+1],A.z=s[S+2];const w=_(A)/2/Math.PI+.5,T=v(A)/Math.PI+.5;o.push(w,1-T)}g(),d()}function d(){for(let A=0;A<o.length;A+=6){const S=o[A+0],w=o[A+2],T=o[A+4],C=Math.max(S,w,T),R=Math.min(S,w,T);C>.9&&R<.1&&(S<.2&&(o[A+0]+=1),w<.2&&(o[A+2]+=1),T<.2&&(o[A+4]+=1))}}function p(A){s.push(A.x,A.y,A.z)}function m(A,S){const w=A*3;S.x=e[w+0],S.y=e[w+1],S.z=e[w+2]}function g(){const A=new k,S=new k,w=new k,T=new k,C=new ve,R=new ve,D=new ve;for(let P=0,B=0;P<s.length;P+=9,B+=6){A.set(s[P+0],s[P+1],s[P+2]),S.set(s[P+3],s[P+4],s[P+5]),w.set(s[P+6],s[P+7],s[P+8]),C.set(o[B+0],o[B+1]),R.set(o[B+2],o[B+3]),D.set(o[B+4],o[B+5]),T.copy(A).add(S).add(w).divideScalar(3);const N=_(T);x(C,B+0,A,N),x(R,B+2,S,N),x(D,B+4,w,N)}}function x(A,S,w,T){T<0&&A.x===1&&(o[S]=A.x-1),w.x===0&&w.z===0&&(o[S]=T/2/Math.PI+.5)}function _(A){return Math.atan2(A.z,-A.x)}function v(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ka(e.vertices,e.indices,e.radius,e.details)}}class Dv extends Ka{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Dv(e.radius,e.detail)}}const qm=new k,Zm=new k,v_=new k,eg=new Ji;class TO extends dt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(kl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),p={},m=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:x,b:_,c:v}=eg;if(x.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),eg.getNormal(v_),d[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,d[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let A=0;A<3;A++){const S=(A+1)%3,w=d[A],T=d[S],C=eg[u[A]],R=eg[u[S]],D=`${w}_${T}`,P=`${T}_${w}`;P in p&&p[P]?(v_.dot(p[P].normal)<=s&&(m.push(C.x,C.y,C.z),m.push(R.x,R.y,R.z)),p[P]=null):D in p||(p[D]={index0:c[A],index1:c[S],normal:v_.clone()})}}for(const g in p)if(p[g]){const{index0:x,index1:_}=p[g];qm.fromBufferAttribute(a,x),Zm.fromBufferAttribute(a,_),m.push(qm.x,qm.y,qm.z),m.push(Zm.x,Zm.y,Zm.z)}this.setAttribute("position",new He(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class zl extends xh{constructor(e){super(e),this.uuid=gr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new xh().fromJSON(r))}return this}}const FW={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=CO(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,p,m;if(i&&(s=HW(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let g=t;g<r;g+=t)d=n[g],p=n[g+1],d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return _h(s,o,t,a,l,m,0),o}};function CO(n,e,t,i,r){let s,o;if(r===qW(n,e,t,i)>0)for(s=e;s<t;s+=i)o=cR(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=cR(s,n[s],n[s+1],o);return o&&Lv(o,o.next)&&(Sh(o),o=o.next),o}function Yl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Lv(t,t.next)||hn(t.prev,t,t.next)===0)){if(Sh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function _h(n,e,t,i,r,s,o){if(!n)return;!o&&s&&jW(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?kW(n,i,r,s):NW(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Sh(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=UW(Yl(n),e,t),_h(n,e,t,i,r,s,2)):o===2&&zW(n,e,t,i,r,s):_h(Yl(n),e,t,i,r,s,1);break}}}function NW(n){const e=n.prev,t=n,i=n.next;if(hn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let g=i.next;for(;g!==e;){if(g.x>=u&&g.x<=p&&g.y>=d&&g.y<=m&&xu(r,a,s,l,o,c,g.x,g.y)&&hn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function kW(n,e,t,i){const r=n.prev,s=n,o=n.next;if(hn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,d=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,g=u<d?u<p?u:p:d<p?d:p,x=a>l?a>c?a:c:l>c?l:c,_=u>d?u>p?u:p:d>p?d:p,v=VA(m,g,e,t,i),A=VA(x,_,e,t,i);let S=n.prevZ,w=n.nextZ;for(;S&&S.z>=v&&w&&w.z<=A;){if(S.x>=m&&S.x<=x&&S.y>=g&&S.y<=_&&S!==r&&S!==o&&xu(a,u,l,d,c,p,S.x,S.y)&&hn(S.prev,S,S.next)>=0||(S=S.prevZ,w.x>=m&&w.x<=x&&w.y>=g&&w.y<=_&&w!==r&&w!==o&&xu(a,u,l,d,c,p,w.x,w.y)&&hn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;S&&S.z>=v;){if(S.x>=m&&S.x<=x&&S.y>=g&&S.y<=_&&S!==r&&S!==o&&xu(a,u,l,d,c,p,S.x,S.y)&&hn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;w&&w.z<=A;){if(w.x>=m&&w.x<=x&&w.y>=g&&w.y<=_&&w!==r&&w!==o&&xu(a,u,l,d,c,p,w.x,w.y)&&hn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function UW(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Lv(r,s)&&bO(r,i,i.next,s)&&Ah(r,s)&&Ah(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Sh(i),Sh(i.next),i=n=s),i=i.next}while(i!==n);return Yl(i)}function zW(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&KW(o,a)){let l=RO(o,a);o=Yl(o,o.next),l=Yl(l,l.next),_h(o,e,t,i,r,s,0),_h(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function HW(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=CO(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(JW(c));for(r.sort(GW),s=0;s<r.length;s++)t=VW(r[s],t);return t}function GW(n,e){return n.x-e.x}function VW(n,e){const t=WW(n,e);if(!t)return e;const i=RO(t,n);return Yl(i,i.next),Yl(t,t.next)}function WW(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,d;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&xu(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Ah(t,n)&&(d<u||d===u&&(t.x>r.x||t.x===r.x&&$W(r,t)))&&(r=t,u=d)),t=t.next;while(t!==a);return r}function $W(n,e){return hn(n.prev,n,e.prev)<0&&hn(e.next,n,n.next)<0}function jW(n,e,t,i){let r=n;do r.z===0&&(r.z=VA(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,XW(r)}function XW(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function VA(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function JW(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function xu(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function KW(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!YW(n,e)&&(Ah(n,e)&&Ah(e,n)&&QW(n,e)&&(hn(n.prev,n,e.prev)||hn(n,e.prev,e))||Lv(n,e)&&hn(n.prev,n,n.next)>0&&hn(e.prev,e,e.next)>0)}function hn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Lv(n,e){return n.x===e.x&&n.y===e.y}function bO(n,e,t,i){const r=ng(hn(n,e,t)),s=ng(hn(n,e,i)),o=ng(hn(t,i,n)),a=ng(hn(t,i,e));return!!(r!==s&&o!==a||r===0&&tg(n,t,e)||s===0&&tg(n,i,e)||o===0&&tg(t,n,i)||a===0&&tg(t,e,i))}function tg(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function ng(n){return n>0?1:n<0?-1:0}function YW(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&bO(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ah(n,e){return hn(n.prev,n,n.next)<0?hn(n,e,n.next)>=0&&hn(n,n.prev,e)>=0:hn(n,e,n.prev)<0||hn(n,n.next,e)<0}function QW(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function RO(n,e){const t=new WA(n.i,n.x,n.y),i=new WA(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function cR(n,e,t,i){const r=new WA(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Sh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function WA(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qW(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class js{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return js.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];uR(e),fR(i,e);let o=e.length;t.forEach(uR);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,fR(i,t[l]);const a=FW.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function uR(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function fR(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ov extends dt{constructor(e=new zl([new ve(.5,.5),new ve(-.5,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new He(r,3)),this.setAttribute("uv",new He(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:ZW;let S,w=!1,T,C,R,D;v&&(S=v.getSpacedPoints(u),w=!0,p=!1,T=v.computeFrenetFrames(u,!1),C=new k,R=new k,D=new k),p||(_=0,m=0,g=0,x=0);const P=a.extractPoints(c);let B=P.shape;const N=P.holes;if(!js.isClockWise(B)){B=B.reverse();for(let X=0,xe=N.length;X<xe;X++){const pe=N[X];js.isClockWise(pe)&&(N[X]=pe.reverse())}}const z=js.triangulateShape(B,N),$=B;for(let X=0,xe=N.length;X<xe;X++){const pe=N[X];B=B.concat(pe)}function J(X,xe,pe){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),X.clone().addScaledVector(xe,pe)}const Q=B.length,ee=z.length;function O(X,xe,pe){let Ee,ge,Ke;const ke=X.x-xe.x,ze=X.y-xe.y,Ze=pe.x-X.x,St=pe.y-X.y,Xt=ke*ke+ze*ze,F=ke*St-ze*Ze;if(Math.abs(F)>Number.EPSILON){const L=Math.sqrt(Xt),ne=Math.sqrt(Ze*Ze+St*St),_e=xe.x-ze/L,ye=xe.y+ke/L,we=pe.x-St/ne,$e=pe.y+Ze/ne,Te=((we-_e)*St-($e-ye)*Ze)/(ke*St-ze*Ze);Ee=_e+ke*Te-X.x,ge=ye+ze*Te-X.y;const oe=Ee*Ee+ge*ge;if(oe<=2)return new ve(Ee,ge);Ke=Math.sqrt(oe/2)}else{let L=!1;ke>Number.EPSILON?Ze>Number.EPSILON&&(L=!0):ke<-Number.EPSILON?Ze<-Number.EPSILON&&(L=!0):Math.sign(ze)===Math.sign(St)&&(L=!0),L?(Ee=-ze,ge=ke,Ke=Math.sqrt(Xt)):(Ee=ke,ge=ze,Ke=Math.sqrt(Xt/2))}return new ve(Ee/Ke,ge/Ke)}const W=[];for(let X=0,xe=$.length,pe=xe-1,Ee=X+1;X<xe;X++,pe++,Ee++)pe===xe&&(pe=0),Ee===xe&&(Ee=0),W[X]=O($[X],$[pe],$[Ee]);const G=[];let H,Y=W.concat();for(let X=0,xe=N.length;X<xe;X++){const pe=N[X];H=[];for(let Ee=0,ge=pe.length,Ke=ge-1,ke=Ee+1;Ee<ge;Ee++,Ke++,ke++)Ke===ge&&(Ke=0),ke===ge&&(ke=0),H[Ee]=O(pe[Ee],pe[Ke],pe[ke]);G.push(H),Y=Y.concat(H)}for(let X=0;X<_;X++){const xe=X/_,pe=m*Math.cos(xe*Math.PI/2),Ee=g*Math.sin(xe*Math.PI/2)+x;for(let ge=0,Ke=$.length;ge<Ke;ge++){const ke=J($[ge],W[ge],Ee);Re(ke.x,ke.y,-pe)}for(let ge=0,Ke=N.length;ge<Ke;ge++){const ke=N[ge];H=G[ge];for(let ze=0,Ze=ke.length;ze<Ze;ze++){const St=J(ke[ze],H[ze],Ee);Re(St.x,St.y,-pe)}}}const me=g+x;for(let X=0;X<Q;X++){const xe=p?J(B[X],Y[X],me):B[X];w?(R.copy(T.normals[0]).multiplyScalar(xe.x),C.copy(T.binormals[0]).multiplyScalar(xe.y),D.copy(S[0]).add(R).add(C),Re(D.x,D.y,D.z)):Re(xe.x,xe.y,0)}for(let X=1;X<=u;X++)for(let xe=0;xe<Q;xe++){const pe=p?J(B[xe],Y[xe],me):B[xe];w?(R.copy(T.normals[X]).multiplyScalar(pe.x),C.copy(T.binormals[X]).multiplyScalar(pe.y),D.copy(S[X]).add(R).add(C),Re(D.x,D.y,D.z)):Re(pe.x,pe.y,d/u*X)}for(let X=_-1;X>=0;X--){const xe=X/_,pe=m*Math.cos(xe*Math.PI/2),Ee=g*Math.sin(xe*Math.PI/2)+x;for(let ge=0,Ke=$.length;ge<Ke;ge++){const ke=J($[ge],W[ge],Ee);Re(ke.x,ke.y,d+pe)}for(let ge=0,Ke=N.length;ge<Ke;ge++){const ke=N[ge];H=G[ge];for(let ze=0,Ze=ke.length;ze<Ze;ze++){const St=J(ke[ze],H[ze],Ee);w?Re(St.x,St.y+S[u-1].y,S[u-1].x+pe):Re(St.x,St.y,d+pe)}}}ce(),Ae();function ce(){const X=r.length/3;if(p){let xe=0,pe=Q*xe;for(let Ee=0;Ee<ee;Ee++){const ge=z[Ee];Ne(ge[2]+pe,ge[1]+pe,ge[0]+pe)}xe=u+_*2,pe=Q*xe;for(let Ee=0;Ee<ee;Ee++){const ge=z[Ee];Ne(ge[0]+pe,ge[1]+pe,ge[2]+pe)}}else{for(let xe=0;xe<ee;xe++){const pe=z[xe];Ne(pe[2],pe[1],pe[0])}for(let xe=0;xe<ee;xe++){const pe=z[xe];Ne(pe[0]+Q*u,pe[1]+Q*u,pe[2]+Q*u)}}i.addGroup(X,r.length/3-X,0)}function Ae(){const X=r.length/3;let xe=0;Se($,xe),xe+=$.length;for(let pe=0,Ee=N.length;pe<Ee;pe++){const ge=N[pe];Se(ge,xe),xe+=ge.length}i.addGroup(X,r.length/3-X,1)}function Se(X,xe){let pe=X.length;for(;--pe>=0;){const Ee=pe;let ge=pe-1;ge<0&&(ge=X.length-1);for(let Ke=0,ke=u+_*2;Ke<ke;Ke++){const ze=Q*Ke,Ze=Q*(Ke+1),St=xe+Ee+ze,Xt=xe+ge+ze,F=xe+ge+Ze,L=xe+Ee+Ze;pt(St,Xt,F,L)}}}function Re(X,xe,pe){l.push(X),l.push(xe),l.push(pe)}function Ne(X,xe,pe){wt(X),wt(xe),wt(pe);const Ee=r.length/3,ge=A.generateTopUV(i,r,Ee-3,Ee-2,Ee-1);Le(ge[0]),Le(ge[1]),Le(ge[2])}function pt(X,xe,pe,Ee){wt(X),wt(xe),wt(Ee),wt(xe),wt(pe),wt(Ee);const ge=r.length/3,Ke=A.generateSideWallUV(i,r,ge-6,ge-3,ge-2,ge-1);Le(Ke[0]),Le(Ke[1]),Le(Ke[3]),Le(Ke[1]),Le(Ke[2]),Le(Ke[3])}function wt(X){r.push(l[X*3+0]),r.push(l[X*3+1]),r.push(l[X*3+2])}function Le(X){s.push(X.x),s.push(X.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return e6(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new lw[r.type]().fromJSON(r)),new Ov(i,e.options)}}const ZW={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new ve(s,o),new ve(a,l),new ve(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],p=e[r*3],m=e[r*3+1],g=e[r*3+2],x=e[s*3],_=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new ve(o,1-l),new ve(c,1-d),new ve(p,1-g),new ve(x,1-v)]:[new ve(a,1-l),new ve(u,1-d),new ve(m,1-g),new ve(_,1-v)]}};function e6(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Fv extends Ka{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fv(e.radius,e.detail)}}class jh extends Ka{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jh(e.radius,e.detail)}}class Nv extends dt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let d=e;const p=(t-e)/r,m=new k,g=new ve;for(let x=0;x<=r;x++){for(let _=0;_<=i;_++){const v=s+_/i*o;m.x=d*Math.cos(v),m.y=d*Math.sin(v),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,u.push(g.x,g.y)}d+=p}for(let x=0;x<r;x++){const _=x*(i+1);for(let v=0;v<i;v++){const A=v+_,S=A,w=A+i+1,T=A+i+2,C=A+1;a.push(S,w,C),a.push(w,T,C)}}this.setIndex(a),this.setAttribute("position",new He(l,3)),this.setAttribute("normal",new He(c,3)),this.setAttribute("uv",new He(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class kv extends dt{constructor(e=new zl([new ve(0,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new He(r,3)),this.setAttribute("normal",new He(s,3)),this.setAttribute("uv",new He(o,2));function c(u){const d=r.length/3,p=u.extractPoints(t);let m=p.shape;const g=p.holes;js.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,v=g.length;_<v;_++){const A=g[_];js.isClockWise(A)===!0&&(g[_]=A.reverse())}const x=js.triangulateShape(m,g);for(let _=0,v=g.length;_<v;_++){const A=g[_];m=m.concat(A)}for(let _=0,v=m.length;_<v;_++){const A=m[_];r.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let _=0,v=x.length;_<v;_++){const A=x[_],S=A[0]+d,w=A[1]+d,T=A[2]+d;i.push(S,w,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return t6(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new kv(i,e.curveSegments)}}function t6(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Xh extends dt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new k,p=new k,m=[],g=[],x=[],_=[];for(let v=0;v<=i;v++){const A=[],S=v/i;let w=0;v===0&&o===0?w=.5/t:v===i&&l===Math.PI&&(w=-.5/t);for(let T=0;T<=t;T++){const C=T/t;d.x=-e*Math.cos(r+C*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(r+C*s)*Math.sin(o+S*a),g.push(d.x,d.y,d.z),p.copy(d).normalize(),x.push(p.x,p.y,p.z),_.push(C+w,1-S),A.push(c++)}u.push(A)}for(let v=0;v<i;v++)for(let A=0;A<t;A++){const S=u[v][A+1],w=u[v][A],T=u[v+1][A],C=u[v+1][A+1];(v!==0||o>0)&&m.push(S,w,C),(v!==i-1||l<Math.PI)&&m.push(w,T,C)}this.setIndex(m),this.setAttribute("position",new He(g,3)),this.setAttribute("normal",new He(x,3)),this.setAttribute("uv",new He(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Uv extends Ka{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Uv(e.radius,e.detail)}}class zv extends dt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new k,d=new k,p=new k;for(let m=0;m<=i;m++)for(let g=0;g<=r;g++){const x=g/r*s,_=m/i*Math.PI*2;d.x=(e+t*Math.cos(_))*Math.cos(x),d.y=(e+t*Math.cos(_))*Math.sin(x),d.z=t*Math.sin(_),a.push(d.x,d.y,d.z),u.x=e*Math.cos(x),u.y=e*Math.sin(x),p.subVectors(d,u).normalize(),l.push(p.x,p.y,p.z),c.push(g/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let g=1;g<=r;g++){const x=(r+1)*m+g-1,_=(r+1)*(m-1)+g-1,v=(r+1)*(m-1)+g,A=(r+1)*m+g;o.push(x,_,A),o.push(_,v,A)}this.setIndex(o),this.setAttribute("position",new He(a,3)),this.setAttribute("normal",new He(l,3)),this.setAttribute("uv",new He(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Hv extends dt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],d=new k,p=new k,m=new k,g=new k,x=new k,_=new k,v=new k;for(let S=0;S<=i;++S){const w=S/i*s*Math.PI*2;A(w,s,o,e,m),A(w+.01,s,o,e,g),_.subVectors(g,m),v.addVectors(g,m),x.crossVectors(_,v),v.crossVectors(x,_),x.normalize(),v.normalize();for(let T=0;T<=r;++T){const C=T/r*Math.PI*2,R=-t*Math.cos(C),D=t*Math.sin(C);d.x=m.x+(R*v.x+D*x.x),d.y=m.y+(R*v.y+D*x.y),d.z=m.z+(R*v.z+D*x.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),c.push(p.x,p.y,p.z),u.push(S/i),u.push(T/r)}}for(let S=1;S<=i;S++)for(let w=1;w<=r;w++){const T=(r+1)*(S-1)+(w-1),C=(r+1)*S+(w-1),R=(r+1)*S+w,D=(r+1)*(S-1)+w;a.push(T,C,D),a.push(C,R,D)}this.setIndex(a),this.setAttribute("position",new He(l,3)),this.setAttribute("normal",new He(c,3)),this.setAttribute("uv",new He(u,2));function A(S,w,T,C,R){const D=Math.cos(S),P=Math.sin(S),B=T/w*S,N=Math.cos(B);R.x=C*(2+N)*.5*D,R.y=C*(2+N)*P*.5,R.z=C*Math.sin(B)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Gv extends dt{constructor(e=new ow(new k(-1,-1,0),new k(-1,1,0),new k(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new k,l=new k,c=new ve;let u=new k;const d=[],p=[],m=[],g=[];x(),this.setIndex(g),this.setAttribute("position",new He(d,3)),this.setAttribute("normal",new He(p,3)),this.setAttribute("uv",new He(m,2));function x(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),A(),v()}function _(S){u=e.getPointAt(S/t,u);const w=o.normals[S],T=o.binormals[S];for(let C=0;C<=r;C++){const R=C/r*Math.PI*2,D=Math.sin(R),P=-Math.cos(R);l.x=P*w.x+D*T.x,l.y=P*w.y+D*T.y,l.z=P*w.z+D*T.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,d.push(a.x,a.y,a.z)}}function v(){for(let S=1;S<=t;S++)for(let w=1;w<=r;w++){const T=(r+1)*(S-1)+(w-1),C=(r+1)*S+(w-1),R=(r+1)*S+w,D=(r+1)*(S-1)+w;g.push(T,C,D),g.push(C,R,D)}}function A(){for(let S=0;S<=t;S++)for(let w=0;w<=r;w++)c.x=S/t,c.y=w/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Gv(new lw[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class PO extends dt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new k,s=new k;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],p=d.start,m=d.count;for(let g=p,x=p+m;g<x;g+=3)for(let _=0;_<3;_++){const v=a.getX(g+_),A=a.getX(g+(_+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,A),dR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),dR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new He(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function dR(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var hR=Object.freeze({__proto__:null,BoxGeometry:oc,CapsuleGeometry:Pv,CircleGeometry:Iv,ConeGeometry:Bv,CylinderGeometry:mf,DodecahedronGeometry:Dv,EdgesGeometry:TO,ExtrudeGeometry:Ov,IcosahedronGeometry:Fv,LatheGeometry:$h,OctahedronGeometry:jh,PlaneGeometry:df,PolyhedronGeometry:Ka,RingGeometry:Nv,ShapeGeometry:kv,SphereGeometry:Xh,TetrahedronGeometry:Uv,TorusGeometry:zv,TorusKnotGeometry:Hv,TubeGeometry:Gv,WireframeGeometry:PO});class IO extends Vn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new be(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class BO extends Xr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Jh extends Vn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new be(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eo extends Jh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Tn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new be(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new be(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new be(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class zd extends Vn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new be(16777215),this.specular=new be(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DO extends Vn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new be(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class LO extends Vn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class cw extends Vn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class OO extends Vn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new be(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FO extends fi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Fr(n,e,t){return uw(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Bl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function uw(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function NO(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function $A(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function fw(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function n6(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],p=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*r;if(!(g<t||g>=i)){d.push(c.times[m]);for(let x=0;x<u;++x)p.push(c.values[m*u+x])}}d.length!==0&&(c.times=Bl(d,c.times.constructor),c.values=Bl(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function i6(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let x;if(s<=a.times[0]){const v=u,A=d-u;x=Fr(a.values,v,A)}else if(s>=a.times[g]){const v=g*d+u,A=v+d-u;x=Fr(a.values,v,A)}else{const v=a.createInterpolant(),A=u,S=d-u;v.evaluate(s),x=Fr(v.resultBuffer,A,S)}l==="quaternion"&&new zn().fromArray(x).normalize().conjugate().toArray(x);const _=c.times.length;for(let v=0;v<_;++v){const A=v*m+p;if(l==="quaternion")zn.multiplyQuaternionsFlat(c.values,A,x,0,c.values,A);else{const S=m-p*2;for(let w=0;w<S;++w)c.values[A+w]-=x[w]}}}return n.blendMode=GE,n}const r6={arraySlice:Fr,convertArray:Bl,isTypedArray:uw,getKeyframeOrder:NO,sortedArray:$A,flattenJSON:fw,subclip:n6,makeClipAdditive:i6};class gf{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class kO extends gf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Rl,endingEnd:Rl}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Pl:s=e,a=2*t-i;break;case mh:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Pl:o=e,l=2*i-t;break;case mh:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(i-t)/(r-t),x=g*g,_=x*g,v=-p*_+2*p*x-p*g,A=(1+p)*_+(-1.5-2*p)*x+(-.5+p)*g+1,S=(-1-m)*_+(1.5+m)*x+.5*g,w=m*_-m*x;for(let T=0;T!==a;++T)s[T]=v*o[u+T]+A*o[c+T]+S*o[l+T]+w*o[d+T];return s}}class dw extends gf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*d+o[l+p]*u;return s}}class UO extends gf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ms{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bl(t,this.TimeBufferType),this.values=Bl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Bl(e.times,Array),values:Bl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new UO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new kO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ku:t=this.InterpolantFactoryMethodDiscrete;break;case Kl:t=this.InterpolantFactoryMethodLinear;break;case Vg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ku;case this.InterpolantFactoryMethodLinear:return Kl;case this.InterpolantFactoryMethodSmooth:return Vg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Fr(i,s,o),this.values=Fr(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&uw(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Fr(this.times),t=Fr(this.values),i=this.getValueSize(),r=this.getInterpolation()===Vg,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,m=d+i;for(let g=0;g!==i;++g){const x=t[d+g];if(x!==t[p+g]||x!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Fr(e,0,o),this.values=Fr(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Fr(this.times,0),t=Fr(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ms.prototype.TimeBufferType=Float32Array;Ms.prototype.ValueBufferType=Float32Array;Ms.prototype.DefaultInterpolation=Kl;class lc extends Ms{}lc.prototype.ValueTypeName="bool";lc.prototype.ValueBufferType=Array;lc.prototype.DefaultInterpolation=Ku;lc.prototype.InterpolantFactoryMethodLinear=void 0;lc.prototype.InterpolantFactoryMethodSmooth=void 0;class hw extends Ms{}hw.prototype.ValueTypeName="color";class Ql extends Ms{}Ql.prototype.ValueTypeName="number";class zO extends gf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)zn.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Fo extends Ms{InterpolantFactoryMethodLinear(e){return new zO(this.times,this.values,this.getValueSize(),e)}}Fo.prototype.ValueTypeName="quaternion";Fo.prototype.DefaultInterpolation=Kl;Fo.prototype.InterpolantFactoryMethodSmooth=void 0;class cc extends Ms{}cc.prototype.ValueTypeName="string";cc.prototype.ValueBufferType=Array;cc.prototype.DefaultInterpolation=Ku;cc.prototype.InterpolantFactoryMethodLinear=void 0;cc.prototype.InterpolantFactoryMethodSmooth=void 0;class ql extends Ms{}ql.prototype.ValueTypeName="vector";class Zl{constructor(e,t=-1,i,r=vv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=gr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(o6(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ms.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=NO(l);l=$A(l,1,u),c=$A(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Ql(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let p=r[d];p||(r[d]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,m,g,x){if(m.length!==0){const _=[],v=[];fw(m,_,v,g),_.length!==0&&x.push(new d(p,_,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const p=c[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let x=0;x<p[g].morphTargets.length;x++)m[p[g].morphTargets[x]]=-1;for(const x in m){const _=[],v=[];for(let A=0;A!==p[g].morphTargets.length;++A){const S=p[g];_.push(S.time),v.push(S.morphTarget===x?1:0)}r.push(new Ql(".morphTargetInfluence["+x+"]",_,v))}l=m.length*o}else{const m=".bones["+t[d].name+"]";i(ql,m+".position",p,"pos",r),i(Fo,m+".quaternion",p,"rot",r),i(ql,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function s6(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ql;case"vector":case"vector2":case"vector3":case"vector4":return ql;case"color":return hw;case"quaternion":return Fo;case"bool":case"boolean":return lc;case"string":return cc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function o6(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=s6(n.type);if(n.times===void 0){const t=[],i=[];fw(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ec={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class pw{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,p=c.length;d<p;d+=2){const m=c[d],g=c[d+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const HO=new pw;class di{constructor(e){this.manager=e!==void 0?e:HO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}di.DEFAULT_MATERIAL_NAME="__DEFAULT";const po={};class a6 extends Error{constructor(e,t){super(e),this.response=t}}class nr extends di{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ec.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(po[e]!==void 0){po[e].push({onLoad:t,onProgress:i,onError:r});return}po[e]=[],po[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=po[e],d=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,g=m!==0;let x=0;const _=new ReadableStream({start(v){A();function A(){d.read().then(({done:S,value:w})=>{if(S)v.close();else{x+=w.byteLength;const T=new ProgressEvent("progress",{lengthComputable:g,loaded:x,total:m});for(let C=0,R=u.length;C<R;C++){const D=u[C];D.onProgress&&D.onProgress(T)}v.enqueue(w),A()}})}}});return new Response(_)}else throw new a6(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{ec.add(e,c);const u=po[e];delete po[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=po[e];if(u===void 0)throw this.manager.itemError(e),c;delete po[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class l6 extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new nr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Zl.parse(e[i]);t.push(r)}return t}}class c6 extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Cv,l=new nr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=dn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)u(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let x=0;x<p.mipmapCount;x++)o[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+x]),o[g].format=p.format,o[g].width=p.width,o[g].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=dn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class Eh extends di{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ec.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=yh("img");function l(){u(),ec.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class u6 extends di{constructor(e){super(e)}load(e,t,i,r){const s=new Vh;s.colorSpace=yt;const o=new Eh(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class f6 extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Lu,a=new nr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}if(!c)return r();c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Jn,o.wrapT=c.wrapT!==void 0?c.wrapT:Jn,o.magFilter=c.magFilter!==void 0?c.magFilter:dn,o.minFilter=c.minFilter!==void 0?c.minFilter:dn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Ys),c.mipmapCount===1&&(o.minFilter=dn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class mw extends di{constructor(e){super(e)}load(e,t,i,r){const s=new qt,o=new Eh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Ya extends bt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new be(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class GO extends Ya{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(bt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new be(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const y_=new Ue,pR=new k,mR=new k;class gw{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ve(512,512),this.map=null,this.mapPass=null,this.matrix=new Ue,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _v,this._frameExtents=new ve(1,1),this._viewportCount=1,this._viewports=[new Dt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;pR.setFromMatrixPosition(e.matrixWorld),t.position.copy(pR),mR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(mR),t.updateMatrixWorld(),y_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(y_),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(y_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class d6 extends gw{constructor(){super(new kn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Yu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Vv extends Ya{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(bt.DEFAULT_UP),this.updateMatrix(),this.target=new bt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new d6}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const gR=new Ue,cd=new k,x_=new k;class h6 extends gw{constructor(){super(new kn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ve(4,2),this._viewportCount=6,this._viewports=[new Dt(2,1,1,1),new Dt(0,1,1,1),new Dt(3,1,1,1),new Dt(1,1,1,1),new Dt(3,0,1,1),new Dt(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),cd.setFromMatrixPosition(e.matrixWorld),i.position.copy(cd),x_.copy(i.position),x_.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(x_),i.updateMatrixWorld(),r.makeTranslation(-cd.x,-cd.y,-cd.z),gR.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gR)}}class wh extends Ya{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new h6}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class p6 extends gw{constructor(){super(new ac(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Wv extends Ya{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(bt.DEFAULT_UP),this.updateMatrix(),this.target=new bt,this.shadow=new p6}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class vw extends Ya{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class VO extends Ya{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class WO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new k)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class $v extends Ya{constructor(e=new WO,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class jv extends di{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new nr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=jv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new be().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new be().setHex(o.value);break;case"v2":r.uniforms[s].value=new ve().fromArray(o.value);break;case"v3":r.uniforms[s].value=new k().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Dt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new _t().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Ue().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ve().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ve().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:IO,SpriteMaterial:ZE,RawShaderMaterial:BO,ShaderMaterial:Xr,PointsMaterial:Tv,MeshPhysicalMaterial:eo,MeshStandardMaterial:Jh,MeshPhongMaterial:zd,MeshToonMaterial:DO,MeshNormalMaterial:LO,MeshLambertMaterial:cw,MeshDepthMaterial:Sv,MeshDistanceMaterial:QE,MeshBasicMaterial:pr,MeshMatcapMaterial:OO,LineDashedMaterial:FO,LineBasicMaterial:fi,Material:Vn};return new t[e]}}class vr{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $O extends dt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class jO extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new nr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,g){if(t[g]!==void 0)return t[g];const _=m.interleavedBuffers[g],v=s(m,_.buffer),A=vu(_.type,v),S=new Wh(A,_.stride);return S.uuid=_.uuid,t[g]=S,S}function s(m,g){if(i[g]!==void 0)return i[g];const _=m.arrayBuffers[g],v=new Uint32Array(_).buffer;return i[g]=v,v}const o=e.isInstancedBufferGeometry?new $O:new dt,a=e.data.index;if(a!==void 0){const m=vu(a.type,a.array);o.setIndex(new kt(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let x;if(g.isInterleavedBufferAttribute){const _=r(e.data,g.data);x=new ka(_,g.itemSize,g.offset,g.normalized)}else{const _=vu(g.type,g.array),v=g.isInstancedBufferAttribute?Zu:kt;x=new v(_,g.itemSize,g.normalized)}g.name!==void 0&&(x.name=g.name),g.usage!==void 0&&x.setUsage(g.usage),g.updateRange!==void 0&&(x.updateRange.offset=g.updateRange.offset,x.updateRange.count=g.updateRange.count),o.setAttribute(m,x)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],x=[];for(let _=0,v=g.length;_<v;_++){const A=g[_];let S;if(A.isInterleavedBufferAttribute){const w=r(e.data,A.data);S=new ka(w,A.itemSize,A.offset,A.normalized)}else{const w=vu(A.type,A.array);S=new kt(w,A.itemSize,A.normalized)}A.name!==void 0&&(S.name=A.name),x.push(S)}o.morphAttributes[m]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,g=d.length;m!==g;++m){const x=d[m];o.addGroup(x.start,x.count,x.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new k;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Kr(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class m6 extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?vr.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new nr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?vr.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new nr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new zl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new pf().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new jO;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in hR?a=hR[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new jv;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Zl.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:vu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new pw(t);s=new Eh(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],p=d.url;if(Array.isArray(p)){const m=[];for(let g=0,x=p.length;g<x;g++){const _=p[g],v=a(_);v!==null&&(v instanceof HTMLImageElement?m.push(v):m.push(new Lu(v.data,v.width,v.height)))}r[d.uuid]=new Il(m)}else{const m=a(d.url);r[d.uuid]=new Il(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:vu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Eh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d],g=await s(m);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Lu(g.data,g.width,g.height)))}i[l.uuid]=new Il(u)}else{const u=await s(l.url);i[l.uuid]=new Il(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new Vh,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Lu:u=new qt,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,g6)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],vR),u.wrapT=i(a.wrap[1],vR)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,yR)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,yR)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,x=p.length;g<x;g++){const _=p[g];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(i[_])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let u,d;switch(e.type){case"Scene":o=new E0,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new be(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new wv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Ev(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new kn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ac(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new vw(e.color,e.intensity);break;case"DirectionalLight":o=new Wv(e.color,e.intensity);break;case"PointLight":o=new wh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new VO(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Vv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new GO(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new $v().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new Mv(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new Hn(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new ew(u,d,p),o.instanceMatrix=new Zu(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new Zu(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new _O;break;case"Line":o=new Qs(a(e.geometry),l(e.material));break;case"LineLoop":o=new tw(a(e.geometry),l(e.material));break;case"LineSegments":o=new ws(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new nw(a(e.geometry),l(e.material));break;case"Sprite":o=new xO(l(e.material));break;case"Group":o=new ms;break;case"Bone":o=new qu;break;default:o=new bt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],x=o.getObjectByProperty("uuid",g.object);x!==void 0&&o.addLevel(x,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const g6={UVMapping:pv,CubeReflectionMapping:Oo,CubeRefractionMapping:Na,EquirectangularReflectionMapping:ju,EquirectangularRefractionMapping:hh,CubeUVReflectionMapping:uf},vR={RepeatWrapping:Ks,ClampToEdgeWrapping:Jn,MirroredRepeatWrapping:Xu},yR={NearestFilter:Mn,NearestMipmapNearestFilter:ph,NearestMipmapLinearFilter:Bu,LinearFilter:dn,LinearMipmapNearestFilter:mv,LinearMipmapLinearFilter:Ys};class XO extends di{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ec.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){ec.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let ig;class yw{static getContext(){return ig===void 0&&(ig=new(window.AudioContext||window.webkitAudioContext)),ig}static setContext(e){ig=e}}class v6 extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new nr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);yw.getContext().decodeAudioData(c,function(d){t(d)},a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}class y6 extends $v{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new be().set(e),s=new be().set(t),o=new k(r.r,r.g,r.b),a=new k(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class x6 extends $v{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new be().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const xR=new Ue,_R=new Ue,dl=new Ue;class _6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new kn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new kn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,dl.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(kl*t.fov*.5)/t.zoom;let a,l;_R.elements[12]=-r,xR.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,dl.elements[0]=2*t.near/(l-a),dl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(dl),a=-o*t.aspect-s,l=o*t.aspect-s,dl.elements[0]=2*t.near/(l-a),dl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(dl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_R),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(xR)}}class xw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=AR(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=AR();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function AR(){return(typeof performance>"u"?Date:performance).now()}const hl=new k,SR=new zn,A6=new k,pl=new k;class S6 extends bt{constructor(){super(),this.type="AudioListener",this.context=yw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(hl,SR,A6),pl.set(0,0,-1).applyQuaternion(SR),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(hl.x,r),t.positionY.linearRampToValueAtTime(hl.y,r),t.positionZ.linearRampToValueAtTime(hl.z,r),t.forwardX.linearRampToValueAtTime(pl.x,r),t.forwardY.linearRampToValueAtTime(pl.y,r),t.forwardZ.linearRampToValueAtTime(pl.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(hl.x,hl.y,hl.z),t.setOrientation(pl.x,pl.y,pl.z,i.x,i.y,i.z)}}class JO extends bt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ml=new k,ER=new zn,E6=new k,gl=new k;class w6 extends JO{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ml,ER,E6),gl.set(0,0,1).applyQuaternion(ER);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ml.x,i),t.positionY.linearRampToValueAtTime(ml.y,i),t.positionZ.linearRampToValueAtTime(ml.z,i),t.orientationX.linearRampToValueAtTime(gl.x,i),t.orientationY.linearRampToValueAtTime(gl.y,i),t.orientationZ.linearRampToValueAtTime(gl.z,i)}else t.setPosition(ml.x,ml.y,ml.z),t.setOrientation(gl.x,gl.y,gl.z)}}class M6{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class KO{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){zn.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;zn.multiplyQuaternionsFlat(e,o,e,t,e,i),zn.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const _w="\\[\\]\\.:\\/",T6=new RegExp("["+_w+"]","g"),Aw="[^"+_w+"]",C6="[^"+_w.replace("\\.","")+"]",b6=/((?:WC+[\/:])*)/.source.replace("WC",Aw),R6=/(WCOD+)?/.source.replace("WCOD",C6),P6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Aw),I6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Aw),B6=new RegExp("^"+b6+R6+P6+I6+"$"),D6=["material","materials","bones","map"];class L6{constructor(e,t,i){const r=i||Ct.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Ct{constructor(e,t,i){this.path=t,this.parsedPath=i||Ct.parseTrackName(t),this.node=Ct.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ct.Composite(e,t,i):new Ct(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(T6,"")}static parseTrackName(e){const t=B6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);D6.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Ct.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ct.Composite=L6;Ct.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ct.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ct.prototype.GetterByBindingType=[Ct.prototype._getValue_direct,Ct.prototype._getValue_array,Ct.prototype._getValue_arrayElement,Ct.prototype._getValue_toArray];Ct.prototype.SetterByBindingTypeAndVersioning=[[Ct.prototype._setValue_direct,Ct.prototype._setValue_direct_setNeedsUpdate,Ct.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ct.prototype._setValue_array,Ct.prototype._setValue_array_setNeedsUpdate,Ct.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ct.prototype._setValue_arrayElement,Ct.prototype._setValue_arrayElement_setNeedsUpdate,Ct.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ct.prototype._setValue_fromArray,Ct.prototype._setValue_fromArray_setNeedsUpdate,Ct.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class O6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=gr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],m=p.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(p);for(let x=0,_=o;x!==_;++x)s[x].push(new Ct(p,i[x],r[x]))}else if(g<c){a=e[g];const x=--c,_=e[x];t[_.uuid]=g,e[g]=_,t[m]=x,e[x]=p;for(let v=0,A=o;v!==A;++v){const S=s[v],w=S[x];let T=S[g];S[g]=w,T===void 0&&(T=new Ct(p,i[v],r[v])),S[x]=T}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const d=s++,p=e[d];t[p.uuid]=u,e[u]=p,t[c]=d,e[d]=l;for(let m=0,g=r;m!==g;++m){const x=i[m],_=x[d],v=x[u];x[u]=_,x[d]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<s){const p=--s,m=e[p],g=--o,x=e[g];t[m.uuid]=d,e[d]=m,t[x.uuid]=p,e[p]=x,e.pop();for(let _=0,v=r;_!==v;++_){const A=i[_],S=A[p],w=A[g];A[d]=S,A[p]=w,A.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let g=0,x=r;g!==x;++g){const _=i[g];_[d]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(d);for(let p=u,m=l.length;p!==m;++p){const g=l[p];d[p]=new Ct(g,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class YO{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Rl,endingEnd:Rl};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case GE:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case vv:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===HL;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===UL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Pl,r.endingEnd=Pl):(e?r.endingStart=this.zeroSlopeAtStart?Pl:Rl:r.endingStart=mh,t?r.endingEnd=this.zeroSlopeAtEnd?Pl:Rl:r.endingEnd=mh)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const F6=new Float32Array(1);class QO extends Vo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const p=r[d],m=p.name;let g=u[m];if(g!==void 0)++g.referenceCount,o[d]=g;else{if(g=o[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const x=t&&t._propertyBindings[d].binding.parsedPath;g=new KO(Ct.create(i,m,x),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new dw(new Float32Array(2),new Float32Array(2),1,F6),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Zl.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=vv),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new YO(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Zl.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Sw{constructor(e){this.value=e}clone(){return new Sw(this.value.clone===void 0?this.value:this.value.clone())}}let N6=0;class k6 extends Vo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:N6++}),this.name="",this.usage=gh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class U6 extends Wh{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class z6{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class qO{constructor(e,t,i=0,r=1/0){this.ray=new ff(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ul,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return jA(e,this,i,t),i.sort(wR),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)jA(e[r],this,i,t);return i.sort(wR),i}}function wR(n,e){return n.distance-e.distance}function jA(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)jA(r[s],e,t,!0)}}class H6{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Tn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class G6{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const MR=new ve;class V6{constructor(e=new ve(1/0,1/0),t=new ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=MR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,MR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const TR=new k,rg=new k;class W6{constructor(e=new k,t=new k){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){TR.subVectors(e,this.start),rg.subVectors(this.end,this.start);const i=rg.dot(rg);let s=rg.dot(TR)/i;return t&&(s=Tn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const CR=new k;class $6 extends bt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new dt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new He(r,3));const s=new fi({fog:!1,toneMapped:!1});this.cone=new ws(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),CR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(CR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const aa=new k,sg=new Ue,__=new Ue;class j6 extends ws{constructor(e){const t=ZO(e),i=new dt,r=[],s=[],o=new be(0,0,1),a=new be(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new He(r,3)),i.setAttribute("color",new He(s,3));const l=new fi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");__.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(sg.multiplyMatrices(__,a.matrixWorld),aa.setFromMatrixPosition(sg),r.setXYZ(o,aa.x,aa.y,aa.z),sg.multiplyMatrices(__,a.parent.matrixWorld),aa.setFromMatrixPosition(sg),r.setXYZ(o+1,aa.x,aa.y,aa.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function ZO(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,ZO(n.children[t]));return e}class X6 extends Hn{constructor(e,t,i){const r=new Xh(t,4,2),s=new pr({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const J6=new k,bR=new be,RR=new be;class K6 extends bt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new jh(t);r.rotateY(Math.PI*.5),this.material=new pr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new kt(o,3)),this.add(new Hn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");bR.copy(this.light.color),RR.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?bR:RR;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(J6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Y6 extends ws{constructor(e=10,t=10,i=4473924,r=8947848){i=new be(i),r=new be(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,g=-a;p<=t;p++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const x=p===s?i:r;x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3}const u=new dt;u.setAttribute("position",new He(l,3)),u.setAttribute("color",new He(c,3));const d=new fi({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Q6 extends ws{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new be(s),o=new be(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,g);const x=d&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let d=0;d<i;d++){const p=d&1?s:o,m=e-e/i*d;for(let g=0;g<r;g++){let x=g/r*(Math.PI*2),_=Math.sin(x)*m,v=Math.cos(x)*m;a.push(_,0,v),l.push(p.r,p.g,p.b),x=(g+1)/r*(Math.PI*2),_=Math.sin(x)*m,v=Math.cos(x)*m,a.push(_,0,v),l.push(p.r,p.g,p.b)}}const c=new dt;c.setAttribute("position",new He(a,3)),c.setAttribute("color",new He(l,3));const u=new fi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const PR=new k,og=new k,IR=new k;class q6 extends bt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new dt;r.setAttribute("position",new He([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new fi({fog:!1,toneMapped:!1});this.lightPlane=new Qs(r,s),this.add(this.lightPlane),r=new dt,r.setAttribute("position",new He([0,0,0,0,0,1],3)),this.targetLine=new Qs(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),PR.setFromMatrixPosition(this.light.matrixWorld),og.setFromMatrixPosition(this.light.target.matrixWorld),IR.subVectors(og,PR),this.lightPlane.lookAt(og),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(og),this.targetLine.scale.z=IR.length()}}const ag=new k,En=new Gh;class Z6 extends ws{constructor(e){const t=new dt,i=new fi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,x){l(g),l(x)}function l(g){r.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(r.length/3-1)}t.setAttribute("position",new He(r,3)),t.setAttribute("color",new He(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new be(16755200),u=new be(16711680),d=new be(43775),p=new be(16777215),m=new be(3355443);this.setColors(c,u,d,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;En.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Pn("c",t,e,En,0,0,-1),Pn("t",t,e,En,0,0,1),Pn("n1",t,e,En,-i,-r,-1),Pn("n2",t,e,En,i,-r,-1),Pn("n3",t,e,En,-i,r,-1),Pn("n4",t,e,En,i,r,-1),Pn("f1",t,e,En,-i,-r,1),Pn("f2",t,e,En,i,-r,1),Pn("f3",t,e,En,-i,r,1),Pn("f4",t,e,En,i,r,1),Pn("u1",t,e,En,i*.7,r*1.1,-1),Pn("u2",t,e,En,-i*.7,r*1.1,-1),Pn("u3",t,e,En,0,r*2,-1),Pn("cf1",t,e,En,-i,0,1),Pn("cf2",t,e,En,i,0,1),Pn("cf3",t,e,En,0,-r,1),Pn("cf4",t,e,En,0,r,1),Pn("cn1",t,e,En,-i,0,-1),Pn("cn2",t,e,En,i,0,-1),Pn("cn3",t,e,En,0,-r,-1),Pn("cn4",t,e,En,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pn(n,e,t,i,r,s,o){ag.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],ag.x,ag.y,ag.z)}}const lg=new Es;class e$ extends ws{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new dt;s.setIndex(new kt(i,1)),s.setAttribute("position",new kt(r,3)),super(s,new fi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&lg.setFromObject(this.object),lg.isEmpty())return;const t=lg.min,i=lg.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class t$ extends ws{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new dt;s.setIndex(new kt(i,1)),s.setAttribute("position",new He(r,3)),super(s,new fi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class n$ extends Qs{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new dt;o.setAttribute("position",new He(s,3)),o.computeBoundingSphere(),super(o,new fi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new dt;l.setAttribute("position",new He(a,3)),l.computeBoundingSphere(),this.add(new Hn(l,new pr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const BR=new k;let cg,A_;class i$ extends bt{constructor(e=new k(0,0,1),t=new k(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",cg===void 0&&(cg=new dt,cg.setAttribute("position",new He([0,0,0,0,1,0],3)),A_=new mf(0,.5,1,5,1),A_.translate(0,-.5,0)),this.position.copy(t),this.line=new Qs(cg,new fi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Hn(A_,new pr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{BR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(BR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class r$ extends ws{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new dt;r.setAttribute("position",new He(t,3)),r.setAttribute("color",new He(i,3));const s=new fi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new be,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class s${constructor(){this.type="ShapePath",this.color=new be,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new xh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const A=[];for(let S=0,w=v.length;S<w;S++){const T=v[S],C=new zl;C.curves=T.curves,A.push(C)}return A}function i(v,A){const S=A.length;let w=!1;for(let T=S-1,C=0;C<S;T=C++){let R=A[T],D=A[C],P=D.x-R.x,B=D.y-R.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(R=A[C],P=-P,D=A[T],B=-B),v.y<R.y||v.y>D.y)continue;if(v.y===R.y){if(v.x===R.x)return!0}else{const N=B*(v.x-R.x)-P*(v.y-R.y);if(N===0)return!0;if(N<0)continue;w=!w}}else{if(v.y!==R.y)continue;if(D.x<=v.x&&v.x<=R.x||R.x<=v.x&&v.x<=D.x)return!0}}return w}const r=js.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new zl,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const d=[],p=[];let m=[],g=0,x;p[g]=void 0,m[g]=[];for(let v=0,A=s.length;v<A;v++)a=s[v],x=a.getPoints(),o=r(x),o=e?!o:o,o?(!u&&p[g]&&g++,p[g]={s:new zl,p:x},p[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:x[0]});if(!p[0])return t(s);if(p.length>1){let v=!1,A=0;for(let S=0,w=p.length;S<w;S++)d[S]=[];for(let S=0,w=p.length;S<w;S++){const T=m[S];for(let C=0;C<T.length;C++){const R=T[C];let D=!0;for(let P=0;P<p.length;P++)i(R.p,p[P].p)&&(S!==P&&A++,D?(D=!1,d[P].push(R)):v=!0);D&&d[S].push(R)}}A>0&&v===!1&&(m=d)}let _;for(let v=0,A=p.length;v<A;v++){l=p[v].s,c.push(l),_=m[v];for(let S=0,w=_.length;S<w;S++)l.holes.push(_[S].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zh);const o$=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:OE,AddEquation:wl,AddOperation:ML,AdditiveAnimationBlendMode:GE,AdditiveBlending:uA,AlphaFormat:BL,AlwaysCompare:eO,AlwaysDepth:yL,AlwaysStencilFunc:jL,AmbientLight:vw,AmbientLightProbe:x6,AnimationAction:YO,AnimationClip:Zl,AnimationLoader:l6,AnimationMixer:QO,AnimationObjectGroup:O6,AnimationUtils:r6,ArcCurve:AO,ArrayCamera:mO,ArrowHelper:i$,Audio:JO,AudioAnalyser:M6,AudioContext:yw,AudioListener:S6,AudioLoader:v6,AxesHelper:r$,BackSide:Ni,BasicDepthPacking:VL,BasicShadowMap:rL,Bone:qu,BooleanKeyframeTrack:lc,Box2:V6,Box3:Es,Box3Helper:t$,BoxGeometry:oc,BoxHelper:e$,BufferAttribute:kt,BufferGeometry:dt,BufferGeometryLoader:jO,ByteType:PL,Cache:ec,Camera:Gh,CameraHelper:Z6,CanvasTexture:bW,CapsuleGeometry:Pv,CatmullRomCurve3:SO,CineonToneMapping:bL,CircleGeometry:Iv,ClampToEdgeWrapping:Jn,Clock:xw,Color:be,ColorKeyframeTrack:hw,ColorManagement:Lr,CompressedArrayTexture:TW,CompressedCubeTexture:CW,CompressedTexture:Cv,CompressedTextureLoader:c6,ConeGeometry:Bv,CubeCamera:aO,CubeReflectionMapping:Oo,CubeRefractionMapping:Na,CubeTexture:Vh,CubeTextureLoader:u6,CubeUVReflectionMapping:uf,CubicBezierCurve:rw,CubicBezierCurve3:EO,CubicInterpolant:kO,CullFaceBack:cA,CullFaceFront:iL,CullFaceFrontBack:wG,CullFaceNone:nL,Curve:Yr,CurvePath:MO,CustomBlending:sL,CustomToneMapping:RL,CylinderGeometry:mf,Cylindrical:G6,Data3DTexture:JE,DataArrayTexture:yv,DataTexture:Lu,DataTextureLoader:f6,DataUtils:D4,DecrementStencilOp:DG,DecrementWrapStencilOp:OG,DefaultLoadingManager:HO,DepthFormat:Ia,DepthStencilFormat:Jl,DepthTexture:gO,DirectionalLight:Wv,DirectionalLightHelper:q6,DiscreteInterpolant:UO,DisplayP3ColorSpace:$E,DodecahedronGeometry:Dv,DoubleSide:hs,DstAlphaFactor:dL,DstColorFactor:pL,DynamicCopyUsage:YG,DynamicDrawUsage:WG,DynamicReadUsage:XG,EdgesGeometry:TO,EllipseCurve:bv,EqualCompare:KL,EqualDepth:_L,EqualStencilFunc:UG,EquirectangularReflectionMapping:ju,EquirectangularRefractionMapping:hh,Euler:ps,EventDispatcher:Vo,ExtrudeGeometry:Ov,FileLoader:nr,Float16BufferAttribute:U4,Float32BufferAttribute:He,Float64BufferAttribute:z4,FloatType:zs,Fog:wv,FogExp2:Ev,FramebufferTexture:MW,FrontSide:Js,Frustum:_v,GLBufferAttribute:z6,GLSL1:qG,GLSL3:kA,GreaterCompare:QL,GreaterDepth:SL,GreaterEqualCompare:ZL,GreaterEqualDepth:AL,GreaterEqualStencilFunc:VG,GreaterStencilFunc:HG,GridHelper:Y6,Group:ms,HalfFloatType:Ju,HemisphereLight:GO,HemisphereLightHelper:K6,HemisphereLightProbe:y6,IcosahedronGeometry:Fv,ImageBitmapLoader:XO,ImageLoader:Eh,ImageUtils:XE,IncrementStencilOp:BG,IncrementWrapStencilOp:LG,InstancedBufferAttribute:Zu,InstancedBufferGeometry:$O,InstancedInterleavedBuffer:U6,InstancedMesh:ew,Int16BufferAttribute:N4,Int32BufferAttribute:k4,Int8BufferAttribute:L4,IntType:FE,InterleavedBuffer:Wh,InterleavedBufferAttribute:ka,Interpolant:gf,InterpolateDiscrete:Ku,InterpolateLinear:Kl,InterpolateSmooth:Vg,InvertStencilOp:FG,KeepStencilOp:Wg,KeyframeTrack:Ms,LOD:_O,LatheGeometry:$h,Layers:Ul,LessCompare:JL,LessDepth:xL,LessEqualCompare:YL,LessEqualDepth:x0,LessEqualStencilFunc:zG,LessStencilFunc:kG,Light:Ya,LightProbe:$v,Line:Qs,Line3:W6,LineBasicMaterial:fi,LineCurve:Rv,LineCurve3:wO,LineDashedMaterial:FO,LineLoop:tw,LineSegments:ws,LinearEncoding:WE,LinearFilter:dn,LinearInterpolant:dw,LinearMipMapLinearFilter:RG,LinearMipMapNearestFilter:bG,LinearMipmapLinearFilter:Ys,LinearMipmapNearestFilter:mv,LinearSRGBColorSpace:As,LinearToneMapping:TL,Loader:di,LoaderUtils:vr,LoadingManager:pw,LoopOnce:UL,LoopPingPong:HL,LoopRepeat:zL,LuminanceAlphaFormat:LL,LuminanceFormat:DL,MOUSE:SG,Material:Vn,MaterialLoader:jv,MathUtils:zr,Matrix3:_t,Matrix4:Ue,MaxEquation:pA,Mesh:Hn,MeshBasicMaterial:pr,MeshDepthMaterial:Sv,MeshDistanceMaterial:QE,MeshLambertMaterial:cw,MeshMatcapMaterial:OO,MeshNormalMaterial:LO,MeshPhongMaterial:zd,MeshPhysicalMaterial:eo,MeshStandardMaterial:Jh,MeshToonMaterial:DO,MinEquation:hA,MirroredRepeatWrapping:Xu,MixOperation:wL,MultiplyBlending:dA,MultiplyOperation:Hh,NearestFilter:Mn,NearestMipMapLinearFilter:CG,NearestMipMapNearestFilter:TG,NearestMipmapLinearFilter:Bu,NearestMipmapNearestFilter:ph,NeverCompare:XL,NeverDepth:vL,NeverStencilFunc:NG,NoBlending:Co,NoColorSpace:Da,NoToneMapping:Ws,NormalAnimationBlendMode:vv,NormalBlending:Nl,NotEqualCompare:qL,NotEqualDepth:EL,NotEqualStencilFunc:GG,NumberKeyframeTrack:Ql,Object3D:bt,ObjectLoader:m6,ObjectSpaceNormalMap:$L,OctahedronGeometry:jh,OneFactor:cL,OneMinusDstAlphaFactor:hL,OneMinusDstColorFactor:mL,OneMinusSrcAlphaFactor:LE,OneMinusSrcColorFactor:fL,OrthographicCamera:ac,PCFShadowMap:hv,PCFSoftShadowMap:Od,PMREMGenerator:zA,Path:xh,PerspectiveCamera:kn,Plane:pa,PlaneGeometry:df,PlaneHelper:n$,PointLight:wh,PointLightHelper:X6,Points:nw,PointsMaterial:Tv,PolarGridHelper:Q6,PolyhedronGeometry:Ka,PositionalAudio:w6,PropertyBinding:Ct,PropertyMixer:KO,QuadraticBezierCurve:sw,QuadraticBezierCurve3:ow,Quaternion:zn,QuaternionKeyframeTrack:Fo,QuaternionLinearInterpolant:zO,RED_GREEN_RGTC2_Format:FA,RED_RGTC1_Format:kL,REVISION:zh,RGBADepthPacking:WL,RGBAFormat:Ki,RGBAIntegerFormat:HE,RGBA_ASTC_10x10_Format:BA,RGBA_ASTC_10x5_Format:RA,RGBA_ASTC_10x6_Format:PA,RGBA_ASTC_10x8_Format:IA,RGBA_ASTC_12x10_Format:DA,RGBA_ASTC_12x12_Format:LA,RGBA_ASTC_4x4_Format:AA,RGBA_ASTC_5x4_Format:SA,RGBA_ASTC_5x5_Format:EA,RGBA_ASTC_6x5_Format:wA,RGBA_ASTC_6x6_Format:MA,RGBA_ASTC_8x5_Format:TA,RGBA_ASTC_8x6_Format:CA,RGBA_ASTC_8x8_Format:bA,RGBA_BPTC_Format:Gg,RGBA_ETC2_EAC_Format:_A,RGBA_PVRTC_2BPPV1_Format:yA,RGBA_PVRTC_4BPPV1_Format:vA,RGBA_S3TC_DXT1_Format:Ug,RGBA_S3TC_DXT3_Format:zg,RGBA_S3TC_DXT5_Format:Hg,RGB_ETC1_Format:NL,RGB_ETC2_Format:xA,RGB_PVRTC_2BPPV1_Format:gA,RGB_PVRTC_4BPPV1_Format:mA,RGB_S3TC_DXT1_Format:kg,RGFormat:FL,RGIntegerFormat:zE,RawShaderMaterial:BO,Ray:ff,Raycaster:qO,RectAreaLight:VO,RedFormat:OL,RedIntegerFormat:UE,ReinhardToneMapping:CL,RenderTarget:iO,RepeatWrapping:Ks,ReplaceStencilOp:IG,ReverseSubtractEquation:aL,RingGeometry:Nv,SIGNED_RED_GREEN_RGTC2_Format:NA,SIGNED_RED_RGTC1_Format:OA,SRGBColorSpace:yt,Scene:E0,ShaderChunk:xt,ShaderLib:ds,ShaderMaterial:Xr,ShadowMaterial:IO,Shape:zl,ShapeGeometry:kv,ShapePath:s$,ShapeUtils:js,ShortType:IL,Skeleton:pf,SkeletonHelper:j6,SkinnedMesh:Mv,Source:Il,Sphere:Kr,SphereGeometry:Xh,Spherical:H6,SphericalHarmonics3:WO,SplineCurve:aw,SpotLight:Vv,SpotLightHelper:$6,Sprite:xO,SpriteMaterial:ZE,SrcAlphaFactor:DE,SrcAlphaSaturateFactor:gL,SrcColorFactor:uL,StaticCopyUsage:KG,StaticDrawUsage:gh,StaticReadUsage:jG,StereoCamera:_6,StreamCopyUsage:QG,StreamDrawUsage:$G,StreamReadUsage:JG,StringKeyframeTrack:cc,SubtractEquation:oL,SubtractiveBlending:fA,TOUCH:EG,TangentSpaceNormalMap:Ja,TetrahedronGeometry:Uv,Texture:qt,TextureLoader:mw,TorusGeometry:zv,TorusKnotGeometry:Hv,Triangle:Ji,TriangleFanDrawMode:_0,TriangleStripDrawMode:VE,TrianglesDrawMode:GL,TubeGeometry:Gv,TwoPassDoubleSide:MG,UVMapping:pv,Uint16BufferAttribute:xv,Uint32BufferAttribute:KE,Uint8BufferAttribute:O4,Uint8ClampedBufferAttribute:F4,Uniform:Sw,UniformsGroup:k6,UniformsLib:Ie,UniformsUtils:oO,UnsignedByteType:$s,UnsignedInt248Type:Pa,UnsignedIntType:wo,UnsignedShort4444Type:NE,UnsignedShort5551Type:kE,UnsignedShortType:gv,VSMShadowMap:cs,Vector2:ve,Vector3:k,Vector4:Dt,VectorKeyframeTrack:ql,VideoTexture:wW,WebGL1Renderer:vO,WebGL3DRenderTarget:S4,WebGLArrayRenderTarget:A4,WebGLCoordinateSystem:Hs,WebGLCubeRenderTarget:lO,WebGLMultipleRenderTargets:E4,WebGLRenderTarget:_r,WebGLRenderer:qE,WebGLUtils:pO,WebGPUCoordinateSystem:vh,WireframeGeometry:PO,WrapAroundEnding:mh,ZeroCurvatureEnding:Rl,ZeroFactor:lL,ZeroSlopeEnding:Pl,ZeroStencilOp:PG,_SRGBAFormat:A0,sRGBEncoding:Ba},Symbol.toStringTag,{value:"Module"}));var e3={exports:{}},uc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */uc.ConcurrentRoot=1;uc.ContinuousEventPriority=4;uc.DefaultEventPriority=16;uc.DiscreteEventPriority=1;uc.IdleEventPriority=536870912;uc.LegacyRoot=0;e3.exports=uc;var _u=e3.exports;function a$(n){let e;const t=new Set,i=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,u=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const g=u(e);if(!d(p,g)){const x=p;c(p=g,x)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const l$=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),DR=l$?I.useEffect:I.useLayoutEffect;function c$(n){const e=typeof n=="function"?a$(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=I.useReducer(_=>_+1,0),o=e.getState(),a=I.useRef(o),l=I.useRef(i),c=I.useRef(r),u=I.useRef(!1),d=I.useRef();d.current===void 0&&(d.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(p=i(o),m=!r(d.current,p)),DR(()=>{m&&(d.current=p),a.current=o,l.current=i,c.current=r,u.current=!1});const g=I.useRef(o);DR(()=>{const _=()=>{try{const A=e.getState(),S=l.current(A);c.current(d.current,S)||(a.current=A,d.current=S,s())}catch{u.current=!0,s()}},v=e.subscribe(_);return e.getState()!==g.current&&_(),v},[]);const x=m?p:d.current;return I.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var t3={exports:{}},S_={exports:{}},E_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LR;function u$(){return LR||(LR=1,function(n){function e(O,W){var G=O.length;O.push(W);e:for(;0<G;){var H=G-1>>>1,Y=O[H];if(0<r(Y,W))O[H]=W,O[G]=Y,G=H;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],G=O.pop();if(G!==W){O[0]=G;e:for(var H=0,Y=O.length,me=Y>>>1;H<me;){var ce=2*(H+1)-1,Ae=O[ce],Se=ce+1,Re=O[Se];if(0>r(Ae,G))Se<Y&&0>r(Re,Ae)?(O[H]=Re,O[Se]=G,H=Se):(O[H]=Ae,O[ce]=G,H=ce);else if(Se<Y&&0>r(Re,G))O[H]=Re,O[Se]=G,H=Se;else break e}}return W}function r(O,W){var G=O.sortIndex-W.sortIndex;return G!==0?G:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=O)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function w(O){if(x=!1,S(O),!g)if(t(l)!==null)g=!0,Q(T);else{var W=t(c);W!==null&&ee(w,W.startTime-O)}}function T(O,W){g=!1,x&&(x=!1,v(D),D=-1),m=!0;var G=p;try{for(S(W),d=t(l);d!==null&&(!(d.expirationTime>W)||O&&!N());){var H=d.callback;if(typeof H=="function"){d.callback=null,p=d.priorityLevel;var Y=H(d.expirationTime<=W);W=n.unstable_now(),typeof Y=="function"?d.callback=Y:d===t(l)&&i(l),S(W)}else i(l);d=t(l)}if(d!==null)var me=!0;else{var ce=t(c);ce!==null&&ee(w,ce.startTime-W),me=!1}return me}finally{d=null,p=G,m=!1}}var C=!1,R=null,D=-1,P=5,B=-1;function N(){return!(n.unstable_now()-B<P)}function j(){if(R!==null){var O=n.unstable_now();B=O;var W=!0;try{W=R(!0,O)}finally{W?z():(C=!1,R=null)}}else C=!1}var z;if(typeof A=="function")z=function(){A(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,J=$.port2;$.port1.onmessage=j,z=function(){J.postMessage(null)}}else z=function(){_(j,0)};function Q(O){R=O,C||(C=!0,z())}function ee(O,W){D=_(function(){O(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,Q(T))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var G=p;p=W;try{return O()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=p;p=O;try{return W()}finally{p=G}},n.unstable_scheduleCallback=function(O,W,G){var H=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?H+G:H):G=H,O){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=G+Y,O={id:u++,callback:W,priorityLevel:O,startTime:G,expirationTime:Y,sortIndex:-1},G>H?(O.sortIndex=G,e(c,O),t(l)===null&&O===t(c)&&(x?(v(D),D=-1):x=!0,ee(w,G-H))):(O.sortIndex=Y,e(l,O),g||m||(g=!0,Q(T))),O},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(O){var W=p;return function(){var G=p;p=W;try{return O.apply(this,arguments)}finally{p=G}}}}(E_)),E_}var OR;function f$(){return OR||(OR=1,S_.exports=u$()),S_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d$=function(e){var t={},i=I,r=f$(),s=Object.assign;function o(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,y=1;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),T=Symbol.iterator;function C(f){return f===null||typeof f!="object"?null:(f=T&&f[T]||f["@@iterator"],typeof f=="function"?f:null)}function R(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case v:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case g:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case x:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case A:return h=f.displayName||null,h!==null?h:R(f.type)||"Memo";case S:h=f._payload,f=f._init;try{return R(f(h))}catch{}}return null}function D(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(h);case 8:return h===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function P(f){var h=f,y=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,h.flags&4098&&(y=h.return),f=h.return;while(f)}return h.tag===3?y:null}function B(f){if(P(f)!==f)throw Error(o(188))}function N(f){var h=f.alternate;if(!h){if(h=P(f),h===null)throw Error(o(188));return h!==f?null:f}for(var y=f,E=h;;){var M=y.return;if(M===null)break;var b=M.alternate;if(b===null){if(E=M.return,E!==null){y=E;continue}break}if(M.child===b.child){for(b=M.child;b;){if(b===y)return B(M),f;if(b===E)return B(M),h;b=b.sibling}throw Error(o(188))}if(y.return!==E.return)y=M,E=b;else{for(var V=!1,Z=M.child;Z;){if(Z===y){V=!0,y=M,E=b;break}if(Z===E){V=!0,E=M,y=b;break}Z=Z.sibling}if(!V){for(Z=b.child;Z;){if(Z===y){V=!0,y=b,E=M;break}if(Z===E){V=!0,E=b,y=M;break}Z=Z.sibling}if(!V)throw Error(o(189))}}if(y.alternate!==E)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?f:h}function j(f){return f=N(f),f!==null?z(f):null}function z(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=z(f);if(h!==null)return h;f=f.sibling}return null}function $(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var h=$(f);if(h!==null)return h}f=f.sibling}return null}var J=Array.isArray,Q=e.getPublicInstance,ee=e.getRootHostContext,O=e.getChildHostContext,W=e.prepareForCommit,G=e.resetAfterCommit,H=e.createInstance,Y=e.appendInitialChild,me=e.finalizeInitialChildren,ce=e.prepareUpdate,Ae=e.shouldSetTextContent,Se=e.createTextInstance,Re=e.scheduleTimeout,Ne=e.cancelTimeout,pt=e.noTimeout,wt=e.isPrimaryRenderer,Le=e.supportsMutation,X=e.supportsPersistence,xe=e.supportsHydration,pe=e.getInstanceFromNode,Ee=e.preparePortalMount,ge=e.getCurrentEventPriority,Ke=e.detachDeletedInstance,ke=e.supportsMicrotasks,ze=e.scheduleMicrotask,Ze=e.supportsTestSelectors,St=e.findFiberRoot,Xt=e.getBoundingRect,F=e.getTextContent,L=e.isHiddenSubtree,ne=e.matchAccessibilityRole,_e=e.setFocusIfFocusable,ye=e.setupIntersectionObserver,we=e.appendChild,$e=e.appendChildToContainer,Te=e.commitTextUpdate,oe=e.commitMount,et=e.commitUpdate,Ye=e.insertBefore,Qe=e.insertInContainerBefore,Ge=e.removeChild,Ve=e.removeChildFromContainer,mt=e.resetTextContent,Ut=e.hideInstance,q=e.hideTextInstance,Be=e.unhideInstance,le=e.unhideTextInstance,Pe=e.clearContainer,Oe=e.cloneInstance,It=e.createContainerChildSet,Jt=e.appendChildToContainerChildSet,xn=e.finalizeContainerChildren,qr=e.replaceContainerChildren,Gt=e.cloneHiddenInstance,ir=e.cloneHiddenTextInstance,oi=e.canHydrateInstance,cp=e.canHydrateTextInstance,up=e.canHydrateSuspenseInstance,fp=e.isSuspenseInstancePending,jo=e.isSuspenseInstanceFallback,dp=e.registerSuspenseInstanceRetry,Cs=e.getNextHydratableSibling,hp=e.getFirstHydratableChild,uy=e.getFirstHydratableChildWithinContainer,fy=e.getFirstHydratableChildWithinSuspenseInstance,dy=e.hydrateInstance,U=e.hydrateTextInstance,re=e.hydrateSuspenseInstance,de=e.getNextHydratableInstanceAfterSuspenseInstance,ie=e.commitHydratedContainer,fe=e.commitHydratedSuspenseInstance,je=e.clearSuspenseBoundary,nt=e.clearSuspenseBoundaryFromContainer,lt=e.shouldDeleteUnhydratedTailInstances,ct=e.didNotMatchHydratedContainerTextInstance,Mt=e.didNotMatchHydratedTextInstance,st;function ft(f){if(st===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);st=h&&h[1]||""}return`
`+st+f}var Kt=!1;function Zt(f,h){if(!f||Kt)return"";Kt=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ce){var E=Ce}Reflect.construct(f,[],h)}else{try{h.call()}catch(Ce){E=Ce}f.call(h.prototype)}else{try{throw Error()}catch(Ce){E=Ce}f()}}catch(Ce){if(Ce&&E&&typeof Ce.stack=="string"){for(var M=Ce.stack.split(`
`),b=E.stack.split(`
`),V=M.length-1,Z=b.length-1;1<=V&&0<=Z&&M[V]!==b[Z];)Z--;for(;1<=V&&0<=Z;V--,Z--)if(M[V]!==b[Z]){if(V!==1||Z!==1)do if(V--,Z--,0>Z||M[V]!==b[Z]){var ue=`
`+M[V].replace(" at new "," at ");return f.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",f.displayName)),ue}while(1<=V&&0<=Z);break}}}finally{Kt=!1,Error.prepareStackTrace=y}return(f=f?f.displayName||f.name:"")?ft(f):""}var zi=Object.prototype.hasOwnProperty,rr=[],$t=-1;function ht(f){return{current:f}}function zt(f){0>$t||(f.current=rr[$t],rr[$t]=null,$t--)}function ut(f,h){$t++,rr[$t]=f.current,f.current=h}var hi={},Wn=ht(hi),Ln=ht(!1),Zr=hi;function _n(f,h){var y=f.type.contextTypes;if(!y)return hi;var E=f.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===h)return E.__reactInternalMemoizedMaskedChildContext;var M={},b;for(b in y)M[b]=h[b];return E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=M),M}function An(f){return f=f.childContextTypes,f!=null}function Xo(){zt(Ln),zt(Wn)}function pi(f,h,y){if(Wn.current!==hi)throw Error(o(168));ut(Wn,h),ut(Ln,y)}function pc(f,h,y){var E=f.stateNode;if(h=h.childContextTypes,typeof E.getChildContext!="function")return y;E=E.getChildContext();for(var M in E)if(!(M in h))throw Error(o(108,D(f)||"Unknown",M));return s({},y,E)}function mc(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||hi,Zr=Wn.current,ut(Wn,f),ut(Ln,Ln.current),!0}function Tf(f,h,y){var E=f.stateNode;if(!E)throw Error(o(169));y?(f=pc(f,h,Zr),E.__reactInternalMemoizedMergedChildContext=f,zt(Ln),zt(Wn),ut(Wn,f)):zt(Ln),ut(Ln,y)}var es=Math.clz32?Math.clz32:aU,sU=Math.log,oU=Math.LN2;function aU(f){return f>>>=0,f===0?32:31-(sU(f)/oU|0)|0}var pp=64,mp=4194304;function Cf(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function gp(f,h){var y=f.pendingLanes;if(y===0)return 0;var E=0,M=f.suspendedLanes,b=f.pingedLanes,V=y&268435455;if(V!==0){var Z=V&~M;Z!==0?E=Cf(Z):(b&=V,b!==0&&(E=Cf(b)))}else V=y&~M,V!==0?E=Cf(V):b!==0&&(E=Cf(b));if(E===0)return 0;if(h!==0&&h!==E&&!(h&M)&&(M=E&-E,b=h&-h,M>=b||M===16&&(b&4194240)!==0))return h;if(E&4&&(E|=y&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=E;0<h;)y=31-es(h),M=1<<y,E|=f[y],h&=~M;return E}function lU(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cU(f,h){for(var y=f.suspendedLanes,E=f.pingedLanes,M=f.expirationTimes,b=f.pendingLanes;0<b;){var V=31-es(b),Z=1<<V,ue=M[V];ue===-1?(!(Z&y)||Z&E)&&(M[V]=lU(Z,h)):ue<=h&&(f.expiredLanes|=Z),b&=~Z}}function hy(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function py(f){for(var h=[],y=0;31>y;y++)h.push(f);return h}function bf(f,h,y){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-es(h),f[h]=y}function uU(f,h){var y=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var E=f.eventTimes;for(f=f.expirationTimes;0<y;){var M=31-es(y),b=1<<M;h[M]=0,E[M]=-1,f[M]=-1,y&=~b}}function my(f,h){var y=f.entangledLanes|=h;for(f=f.entanglements;y;){var E=31-es(y),M=1<<E;M&h|f[E]&h&&(f[E]|=h),y&=~M}}var Ot=0;function AM(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var gy=r.unstable_scheduleCallback,SM=r.unstable_cancelCallback,fU=r.unstable_shouldYield,dU=r.unstable_requestPaint,Zn=r.unstable_now,vy=r.unstable_ImmediatePriority,hU=r.unstable_UserBlockingPriority,yy=r.unstable_NormalPriority,pU=r.unstable_IdlePriority,vp=null,bs=null;function mU(f){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(vp,f,void 0,(f.current.flags&128)===128)}catch{}}function gU(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var Rs=typeof Object.is=="function"?Object.is:gU,to=null,yp=!1,xy=!1;function EM(f){to===null?to=[f]:to.push(f)}function vU(f){yp=!0,EM(f)}function Ps(){if(!xy&&to!==null){xy=!0;var f=0,h=Ot;try{var y=to;for(Ot=1;f<y.length;f++){var E=y[f];do E=E(!0);while(E!==null)}to=null,yp=!1}catch(M){throw to!==null&&(to=to.slice(f+1)),gy(vy,Ps),M}finally{Ot=h,xy=!1}}return null}var yU=a.ReactCurrentBatchConfig;function xp(f,h){if(Rs(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var y=Object.keys(f),E=Object.keys(h);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var M=y[E];if(!zi.call(h,M)||!Rs(f[M],h[M]))return!1}return!0}function xU(f){switch(f.tag){case 5:return ft(f.type);case 16:return ft("Lazy");case 13:return ft("Suspense");case 19:return ft("SuspenseList");case 0:case 2:case 15:return f=Zt(f.type,!1),f;case 11:return f=Zt(f.type.render,!1),f;case 1:return f=Zt(f.type,!0),f;default:return""}}function ts(f,h){if(f&&f.defaultProps){h=s({},h),f=f.defaultProps;for(var y in f)h[y]===void 0&&(h[y]=f[y]);return h}return h}var _p=ht(null),Ap=null,gc=null,_y=null;function Ay(){_y=gc=Ap=null}function wM(f,h,y){wt?(ut(_p,h._currentValue),h._currentValue=y):(ut(_p,h._currentValue2),h._currentValue2=y)}function Sy(f){var h=_p.current;zt(_p),wt?f._currentValue=h:f._currentValue2=h}function Ey(f,h,y){for(;f!==null;){var E=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),f===y)break;f=f.return}}function vc(f,h){Ap=f,_y=gc=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&h&&(ar=!0),f.firstContext=null)}function wr(f){var h=wt?f._currentValue:f._currentValue2;if(_y!==f)if(f={context:f,memoizedValue:h,next:null},gc===null){if(Ap===null)throw Error(o(308));gc=f,Ap.dependencies={lanes:0,firstContext:f}}else gc=gc.next=f;return h}var Is=null,Jo=!1;function wy(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MM(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function no(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function Ko(f,h){var y=f.updateQueue;y!==null&&(y=y.shared,On!==null&&f.mode&1&&!(Tt&2)?(f=y.interleaved,f===null?(h.next=h,Is===null?Is=[y]:Is.push(y)):(h.next=f.next,f.next=h),y.interleaved=h):(f=y.pending,f===null?h.next=h:(h.next=f.next,f.next=h),y.pending=h))}function Sp(f,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194240)!==0)){var E=h.lanes;E&=f.pendingLanes,y|=E,h.lanes=y,my(f,y)}}function TM(f,h){var y=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,y===E)){var M=null,b=null;if(y=y.firstBaseUpdate,y!==null){do{var V={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};b===null?M=b=V:b=b.next=V,y=y.next}while(y!==null);b===null?M=b=h:b=b.next=h}else M=b=h;y={baseState:E.baseState,firstBaseUpdate:M,lastBaseUpdate:b,shared:E.shared,effects:E.effects},f.updateQueue=y;return}f=y.lastBaseUpdate,f===null?y.firstBaseUpdate=h:f.next=h,y.lastBaseUpdate=h}function Ep(f,h,y,E){var M=f.updateQueue;Jo=!1;var b=M.firstBaseUpdate,V=M.lastBaseUpdate,Z=M.shared.pending;if(Z!==null){M.shared.pending=null;var ue=Z,Ce=ue.next;ue.next=null,V===null?b=Ce:V.next=Ce,V=ue;var Xe=f.alternate;Xe!==null&&(Xe=Xe.updateQueue,Z=Xe.lastBaseUpdate,Z!==V&&(Z===null?Xe.firstBaseUpdate=Ce:Z.next=Ce,Xe.lastBaseUpdate=ue))}if(b!==null){var gt=M.baseState;V=0,Xe=Ce=ue=null,Z=b;do{var it=Z.lane,jt=Z.eventTime;if((E&it)===it){Xe!==null&&(Xe=Xe.next={eventTime:jt,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var tt=f,yi=Z;switch(it=h,jt=y,yi.tag){case 1:if(tt=yi.payload,typeof tt=="function"){gt=tt.call(jt,gt,it);break e}gt=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=yi.payload,it=typeof tt=="function"?tt.call(jt,gt,it):tt,it==null)break e;gt=s({},gt,it);break e;case 2:Jo=!0}}Z.callback!==null&&Z.lane!==0&&(f.flags|=64,it=M.effects,it===null?M.effects=[Z]:it.push(Z))}else jt={eventTime:jt,lane:it,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Xe===null?(Ce=Xe=jt,ue=gt):Xe=Xe.next=jt,V|=it;if(Z=Z.next,Z===null){if(Z=M.shared.pending,Z===null)break;it=Z,Z=it.next,it.next=null,M.lastBaseUpdate=it,M.shared.pending=null}}while(1);if(Xe===null&&(ue=gt),M.baseState=ue,M.firstBaseUpdate=Ce,M.lastBaseUpdate=Xe,h=M.shared.interleaved,h!==null){M=h;do V|=M.lane,M=M.next;while(M!==h)}else b===null&&(M.shared.lanes=0);Tc|=V,f.lanes=V,f.memoizedState=gt}}function CM(f,h,y){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var E=f[h],M=E.callback;if(M!==null){if(E.callback=null,E=y,typeof M!="function")throw Error(o(191,M));M.call(E)}}}var bM=new i.Component().refs;function My(f,h,y,E){h=f.memoizedState,y=y(E,h),y=y==null?h:s({},h,y),f.memoizedState=y,f.lanes===0&&(f.updateQueue.baseState=y)}var wp={isMounted:function(f){return(f=f._reactInternals)?P(f)===f:!1},enqueueSetState:function(f,h,y){f=f._reactInternals;var E=bi(),M=qo(f),b=no(E,M);b.payload=h,y!=null&&(b.callback=y),Ko(f,b),h=Rr(f,M,E),h!==null&&Sp(h,f,M)},enqueueReplaceState:function(f,h,y){f=f._reactInternals;var E=bi(),M=qo(f),b=no(E,M);b.tag=1,b.payload=h,y!=null&&(b.callback=y),Ko(f,b),h=Rr(f,M,E),h!==null&&Sp(h,f,M)},enqueueForceUpdate:function(f,h){f=f._reactInternals;var y=bi(),E=qo(f),M=no(y,E);M.tag=2,h!=null&&(M.callback=h),Ko(f,M),h=Rr(f,E,y),h!==null&&Sp(h,f,E)}};function RM(f,h,y,E,M,b,V){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,b,V):h.prototype&&h.prototype.isPureReactComponent?!xp(y,E)||!xp(M,b):!0}function PM(f,h,y){var E=!1,M=hi,b=h.contextType;return typeof b=="object"&&b!==null?b=wr(b):(M=An(h)?Zr:Wn.current,E=h.contextTypes,b=(E=E!=null)?_n(f,M):hi),h=new h(y,b),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=wp,f.stateNode=h,h._reactInternals=f,E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=M,f.__reactInternalMemoizedMaskedChildContext=b),h}function IM(f,h,y,E){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,E),h.state!==f&&wp.enqueueReplaceState(h,h.state,null)}function Ty(f,h,y,E){var M=f.stateNode;M.props=y,M.state=f.memoizedState,M.refs=bM,wy(f);var b=h.contextType;typeof b=="object"&&b!==null?M.context=wr(b):(b=An(h)?Zr:Wn.current,M.context=_n(f,b)),M.state=f.memoizedState,b=h.getDerivedStateFromProps,typeof b=="function"&&(My(f,h,b,y),M.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(h=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),h!==M.state&&wp.enqueueReplaceState(M,M.state,null),Ep(f,y,M,E),M.state=f.memoizedState),typeof M.componentDidMount=="function"&&(f.flags|=4194308)}var yc=[],xc=0,Mp=null,Tp=0,Mr=[],Tr=0,Za=null,io=1,ro="";function el(f,h){yc[xc++]=Tp,yc[xc++]=Mp,Mp=f,Tp=h}function BM(f,h,y){Mr[Tr++]=io,Mr[Tr++]=ro,Mr[Tr++]=Za,Za=f;var E=io;f=ro;var M=32-es(E)-1;E&=~(1<<M),y+=1;var b=32-es(h)+M;if(30<b){var V=M-M%5;b=(E&(1<<V)-1).toString(32),E>>=V,M-=V,io=1<<32-es(h)+M|y<<M|E,ro=b+f}else io=1<<b|y<<M|E,ro=f}function Cy(f){f.return!==null&&(el(f,1),BM(f,1,0))}function by(f){for(;f===Mp;)Mp=yc[--xc],yc[xc]=null,Tp=yc[--xc],yc[xc]=null;for(;f===Za;)Za=Mr[--Tr],Mr[Tr]=null,ro=Mr[--Tr],Mr[Tr]=null,io=Mr[--Tr],Mr[Tr]=null}var sr=null,or=null,sn=!1,Rf=!1,ns=null;function DM(f,h){var y=Pr(5,null,null,0);y.elementType="DELETED",y.stateNode=h,y.return=f,h=f.deletions,h===null?(f.deletions=[y],f.flags|=16):h.push(y)}function LM(f,h){switch(f.tag){case 5:return h=oi(h,f.type,f.pendingProps),h!==null?(f.stateNode=h,sr=f,or=hp(h),!0):!1;case 6:return h=cp(h,f.pendingProps),h!==null?(f.stateNode=h,sr=f,or=null,!0):!1;case 13:if(h=up(h),h!==null){var y=Za!==null?{id:io,overflow:ro}:null;return f.memoizedState={dehydrated:h,treeContext:y,retryLane:1073741824},y=Pr(18,null,null,0),y.stateNode=h,y.return=f,f.child=y,sr=f,or=null,!0}return!1;default:return!1}}function Ry(f){return(f.mode&1)!==0&&(f.flags&128)===0}function Py(f){if(sn){var h=or;if(h){var y=h;if(!LM(f,h)){if(Ry(f))throw Error(o(418));h=Cs(y);var E=sr;h&&LM(f,h)?DM(E,y):(f.flags=f.flags&-4097|2,sn=!1,sr=f)}}else{if(Ry(f))throw Error(o(418));f.flags=f.flags&-4097|2,sn=!1,sr=f}}}function OM(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;sr=f}function Pf(f){if(!xe||f!==sr)return!1;if(!sn)return OM(f),sn=!0,!1;if(f.tag!==3&&(f.tag!==5||lt(f.type)&&!Ae(f.type,f.memoizedProps))){var h=or;if(h){if(Ry(f)){for(f=or;f;)f=Cs(f);throw Error(o(418))}for(;h;)DM(f,h),h=Cs(h)}}if(OM(f),f.tag===13){if(!xe)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));or=de(f)}else or=sr?Cs(f.stateNode):null;return!0}function _c(){xe&&(or=sr=null,Rf=sn=!1)}function Iy(f){ns===null?ns=[f]:ns.push(f)}function If(f,h,y){if(f=y.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var E=y.stateNode}if(!E)throw Error(o(147,f));var M=E,b=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===b?h.ref:(h=function(V){var Z=M.refs;Z===bM&&(Z=M.refs={}),V===null?delete Z[b]:Z[b]=V},h._stringRef=b,h)}if(typeof f!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,f))}return f}function Cp(f,h){throw f=Object.prototype.toString.call(h),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function FM(f){var h=f._init;return h(f._payload)}function NM(f){function h(se,te){if(f){var ae=se.deletions;ae===null?(se.deletions=[te],se.flags|=16):ae.push(te)}}function y(se,te){if(!f)return null;for(;te!==null;)h(se,te),te=te.sibling;return null}function E(se,te){for(se=new Map;te!==null;)te.key!==null?se.set(te.key,te):se.set(te.index,te),te=te.sibling;return se}function M(se,te){return se=ea(se,te),se.index=0,se.sibling=null,se}function b(se,te,ae){return se.index=ae,f?(ae=se.alternate,ae!==null?(ae=ae.index,ae<te?(se.flags|=2,te):ae):(se.flags|=2,te)):(se.flags|=1048576,te)}function V(se){return f&&se.alternate===null&&(se.flags|=2),se}function Z(se,te,ae,Fe){return te===null||te.tag!==6?(te=px(ae,se.mode,Fe),te.return=se,te):(te=M(te,ae),te.return=se,te)}function ue(se,te,ae,Fe){var qe=ae.type;return qe===u?Xe(se,te,ae.props.children,Fe,ae.key):te!==null&&(te.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===S&&FM(qe)===te.type)?(Fe=M(te,ae.props),Fe.ref=If(se,te,ae),Fe.return=se,Fe):(Fe=rm(ae.type,ae.key,ae.props,null,se.mode,Fe),Fe.ref=If(se,te,ae),Fe.return=se,Fe)}function Ce(se,te,ae,Fe){return te===null||te.tag!==4||te.stateNode.containerInfo!==ae.containerInfo||te.stateNode.implementation!==ae.implementation?(te=mx(ae,se.mode,Fe),te.return=se,te):(te=M(te,ae.children||[]),te.return=se,te)}function Xe(se,te,ae,Fe,qe){return te===null||te.tag!==7?(te=al(ae,se.mode,Fe,qe),te.return=se,te):(te=M(te,ae),te.return=se,te)}function gt(se,te,ae){if(typeof te=="string"&&te!==""||typeof te=="number")return te=px(""+te,se.mode,ae),te.return=se,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case l:return ae=rm(te.type,te.key,te.props,null,se.mode,ae),ae.ref=If(se,null,te),ae.return=se,ae;case c:return te=mx(te,se.mode,ae),te.return=se,te;case S:var Fe=te._init;return gt(se,Fe(te._payload),ae)}if(J(te)||C(te))return te=al(te,se.mode,ae,null),te.return=se,te;Cp(se,te)}return null}function it(se,te,ae,Fe){var qe=te!==null?te.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return qe!==null?null:Z(se,te,""+ae,Fe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case l:return ae.key===qe?ue(se,te,ae,Fe):null;case c:return ae.key===qe?Ce(se,te,ae,Fe):null;case S:return qe=ae._init,it(se,te,qe(ae._payload),Fe)}if(J(ae)||C(ae))return qe!==null?null:Xe(se,te,ae,Fe,null);Cp(se,ae)}return null}function jt(se,te,ae,Fe,qe){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return se=se.get(ae)||null,Z(te,se,""+Fe,qe);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case l:return se=se.get(Fe.key===null?ae:Fe.key)||null,ue(te,se,Fe,qe);case c:return se=se.get(Fe.key===null?ae:Fe.key)||null,Ce(te,se,Fe,qe);case S:var Et=Fe._init;return jt(se,te,ae,Et(Fe._payload),qe)}if(J(Fe)||C(Fe))return se=se.get(ae)||null,Xe(te,se,Fe,qe,null);Cp(te,Fe)}return null}function tt(se,te,ae,Fe){for(var qe=null,Et=null,vt=te,Ft=te=0,ti=null;vt!==null&&Ft<ae.length;Ft++){vt.index>Ft?(ti=vt,vt=null):ti=vt.sibling;var Nt=it(se,vt,ae[Ft],Fe);if(Nt===null){vt===null&&(vt=ti);break}f&&vt&&Nt.alternate===null&&h(se,vt),te=b(Nt,te,Ft),Et===null?qe=Nt:Et.sibling=Nt,Et=Nt,vt=ti}if(Ft===ae.length)return y(se,vt),sn&&el(se,Ft),qe;if(vt===null){for(;Ft<ae.length;Ft++)vt=gt(se,ae[Ft],Fe),vt!==null&&(te=b(vt,te,Ft),Et===null?qe=vt:Et.sibling=vt,Et=vt);return sn&&el(se,Ft),qe}for(vt=E(se,vt);Ft<ae.length;Ft++)ti=jt(vt,se,Ft,ae[Ft],Fe),ti!==null&&(f&&ti.alternate!==null&&vt.delete(ti.key===null?Ft:ti.key),te=b(ti,te,Ft),Et===null?qe=ti:Et.sibling=ti,Et=ti);return f&&vt.forEach(function(ta){return h(se,ta)}),sn&&el(se,Ft),qe}function yi(se,te,ae,Fe){var qe=C(ae);if(typeof qe!="function")throw Error(o(150));if(ae=qe.call(ae),ae==null)throw Error(o(151));for(var Et=qe=null,vt=te,Ft=te=0,ti=null,Nt=ae.next();vt!==null&&!Nt.done;Ft++,Nt=ae.next()){vt.index>Ft?(ti=vt,vt=null):ti=vt.sibling;var ta=it(se,vt,Nt.value,Fe);if(ta===null){vt===null&&(vt=ti);break}f&&vt&&ta.alternate===null&&h(se,vt),te=b(ta,te,Ft),Et===null?qe=ta:Et.sibling=ta,Et=ta,vt=ti}if(Nt.done)return y(se,vt),sn&&el(se,Ft),qe;if(vt===null){for(;!Nt.done;Ft++,Nt=ae.next())Nt=gt(se,Nt.value,Fe),Nt!==null&&(te=b(Nt,te,Ft),Et===null?qe=Nt:Et.sibling=Nt,Et=Nt);return sn&&el(se,Ft),qe}for(vt=E(se,vt);!Nt.done;Ft++,Nt=ae.next())Nt=jt(vt,se,Ft,Nt.value,Fe),Nt!==null&&(f&&Nt.alternate!==null&&vt.delete(Nt.key===null?Ft:Nt.key),te=b(Nt,te,Ft),Et===null?qe=Nt:Et.sibling=Nt,Et=Nt);return f&&vt.forEach(function(KU){return h(se,KU)}),sn&&el(se,Ft),qe}function Ir(se,te,ae,Fe){if(typeof ae=="object"&&ae!==null&&ae.type===u&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case l:e:{for(var qe=ae.key,Et=te;Et!==null;){if(Et.key===qe){if(qe=ae.type,qe===u){if(Et.tag===7){y(se,Et.sibling),te=M(Et,ae.props.children),te.return=se,se=te;break e}}else if(Et.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===S&&FM(qe)===Et.type){y(se,Et.sibling),te=M(Et,ae.props),te.ref=If(se,Et,ae),te.return=se,se=te;break e}y(se,Et);break}else h(se,Et);Et=Et.sibling}ae.type===u?(te=al(ae.props.children,se.mode,Fe,ae.key),te.return=se,se=te):(Fe=rm(ae.type,ae.key,ae.props,null,se.mode,Fe),Fe.ref=If(se,te,ae),Fe.return=se,se=Fe)}return V(se);case c:e:{for(Et=ae.key;te!==null;){if(te.key===Et)if(te.tag===4&&te.stateNode.containerInfo===ae.containerInfo&&te.stateNode.implementation===ae.implementation){y(se,te.sibling),te=M(te,ae.children||[]),te.return=se,se=te;break e}else{y(se,te);break}else h(se,te);te=te.sibling}te=mx(ae,se.mode,Fe),te.return=se,se=te}return V(se);case S:return Et=ae._init,Ir(se,te,Et(ae._payload),Fe)}if(J(ae))return tt(se,te,ae,Fe);if(C(ae))return yi(se,te,ae,Fe);Cp(se,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,te!==null&&te.tag===6?(y(se,te.sibling),te=M(te,ae),te.return=se,se=te):(y(se,te),te=px(ae,se.mode,Fe),te.return=se,se=te),V(se)):y(se,te)}return Ir}var Ac=NM(!0),kM=NM(!1),Bf={},Cr=ht(Bf),Df=ht(Bf),Sc=ht(Bf);function Bs(f){if(f===Bf)throw Error(o(174));return f}function By(f,h){ut(Sc,h),ut(Df,f),ut(Cr,Bf),f=ee(h),zt(Cr),ut(Cr,f)}function Ec(){zt(Cr),zt(Df),zt(Sc)}function UM(f){var h=Bs(Sc.current),y=Bs(Cr.current);h=O(y,f.type,h),y!==h&&(ut(Df,f),ut(Cr,h))}function Dy(f){Df.current===f&&(zt(Cr),zt(Df))}var an=ht(0);function bp(f){for(var h=f;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||fp(y)||jo(y)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Ly=[];function Oy(){for(var f=0;f<Ly.length;f++){var h=Ly[f];wt?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Ly.length=0}var Rp=a.ReactCurrentDispatcher,br=a.ReactCurrentBatchConfig,wc=0,Sn=null,mi=null,ei=null,Pp=!1,Lf=!1,Of=0,_U=0;function gi(){throw Error(o(321))}function Fy(f,h){if(h===null)return!1;for(var y=0;y<h.length&&y<f.length;y++)if(!Rs(f[y],h[y]))return!1;return!0}function Ny(f,h,y,E,M,b){if(wc=b,Sn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Rp.current=f===null||f.memoizedState===null?wU:MU,f=y(E,M),Lf){b=0;do{if(Lf=!1,Of=0,25<=b)throw Error(o(301));b+=1,ei=mi=null,h.updateQueue=null,Rp.current=TU,f=y(E,M)}while(Lf)}if(Rp.current=Op,h=mi!==null&&mi.next!==null,wc=0,ei=mi=Sn=null,Pp=!1,h)throw Error(o(300));return f}function ky(){var f=Of!==0;return Of=0,f}function so(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ei===null?Sn.memoizedState=ei=f:ei=ei.next=f,ei}function Ds(){if(mi===null){var f=Sn.alternate;f=f!==null?f.memoizedState:null}else f=mi.next;var h=ei===null?Sn.memoizedState:ei.next;if(h!==null)ei=h,mi=f;else{if(f===null)throw Error(o(310));mi=f,f={memoizedState:mi.memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},ei===null?Sn.memoizedState=ei=f:ei=ei.next=f}return ei}function tl(f,h){return typeof h=="function"?h(f):h}function Ip(f){var h=Ds(),y=h.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=f;var E=mi,M=E.baseQueue,b=y.pending;if(b!==null){if(M!==null){var V=M.next;M.next=b.next,b.next=V}E.baseQueue=M=b,y.pending=null}if(M!==null){b=M.next,E=E.baseState;var Z=V=null,ue=null,Ce=b;do{var Xe=Ce.lane;if((wc&Xe)===Xe)ue!==null&&(ue=ue.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),E=Ce.hasEagerState?Ce.eagerState:f(E,Ce.action);else{var gt={lane:Xe,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};ue===null?(Z=ue=gt,V=E):ue=ue.next=gt,Sn.lanes|=Xe,Tc|=Xe}Ce=Ce.next}while(Ce!==null&&Ce!==b);ue===null?V=E:ue.next=Z,Rs(E,h.memoizedState)||(ar=!0),h.memoizedState=E,h.baseState=V,h.baseQueue=ue,y.lastRenderedState=E}if(f=y.interleaved,f!==null){M=f;do b=M.lane,Sn.lanes|=b,Tc|=b,M=M.next;while(M!==f)}else M===null&&(y.lanes=0);return[h.memoizedState,y.dispatch]}function Bp(f){var h=Ds(),y=h.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=f;var E=y.dispatch,M=y.pending,b=h.memoizedState;if(M!==null){y.pending=null;var V=M=M.next;do b=f(b,V.action),V=V.next;while(V!==M);Rs(b,h.memoizedState)||(ar=!0),h.memoizedState=b,h.baseQueue===null&&(h.baseState=b),y.lastRenderedState=b}return[b,E]}function zM(){}function HM(f,h){var y=Sn,E=Ds(),M=h(),b=!Rs(E.memoizedState,M);if(b&&(E.memoizedState=M,ar=!0),E=E.queue,Nf(WM.bind(null,y,E,f),[f]),E.getSnapshot!==h||b||ei!==null&&ei.memoizedState.tag&1){if(y.flags|=2048,Ff(9,VM.bind(null,y,E,M,h),void 0,null),On===null)throw Error(o(349));wc&30||GM(y,h,M)}return M}function GM(f,h,y){f.flags|=16384,f={getSnapshot:h,value:y},h=Sn.updateQueue,h===null?(h={lastEffect:null,stores:null},Sn.updateQueue=h,h.stores=[f]):(y=h.stores,y===null?h.stores=[f]:y.push(f))}function VM(f,h,y,E){h.value=y,h.getSnapshot=E,$M(h)&&Rr(f,1,-1)}function WM(f,h,y){return y(function(){$M(h)&&Rr(f,1,-1)})}function $M(f){var h=f.getSnapshot;f=f.value;try{var y=h();return!Rs(f,y)}catch{return!0}}function Uy(f){var h=so();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:f},h.queue=f,f=f.dispatch=EU.bind(null,Sn,f),[h.memoizedState,f]}function Ff(f,h,y,E){return f={tag:f,create:h,destroy:y,deps:E,next:null},h=Sn.updateQueue,h===null?(h={lastEffect:null,stores:null},Sn.updateQueue=h,h.lastEffect=f.next=f):(y=h.lastEffect,y===null?h.lastEffect=f.next=f:(E=y.next,y.next=f,f.next=E,h.lastEffect=f)),f}function jM(){return Ds().memoizedState}function Dp(f,h,y,E){var M=so();Sn.flags|=f,M.memoizedState=Ff(1|h,y,void 0,E===void 0?null:E)}function Lp(f,h,y,E){var M=Ds();E=E===void 0?null:E;var b=void 0;if(mi!==null){var V=mi.memoizedState;if(b=V.destroy,E!==null&&Fy(E,V.deps)){M.memoizedState=Ff(h,y,b,E);return}}Sn.flags|=f,M.memoizedState=Ff(1|h,y,b,E)}function zy(f,h){return Dp(8390656,8,f,h)}function Nf(f,h){return Lp(2048,8,f,h)}function XM(f,h){return Lp(4,2,f,h)}function JM(f,h){return Lp(4,4,f,h)}function KM(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function YM(f,h,y){return y=y!=null?y.concat([f]):null,Lp(4,4,KM.bind(null,h,f),y)}function Hy(){}function QM(f,h){var y=Ds();h=h===void 0?null:h;var E=y.memoizedState;return E!==null&&h!==null&&Fy(h,E[1])?E[0]:(y.memoizedState=[f,h],f)}function qM(f,h){var y=Ds();h=h===void 0?null:h;var E=y.memoizedState;return E!==null&&h!==null&&Fy(h,E[1])?E[0]:(f=f(),y.memoizedState=[f,h],f)}function AU(f,h){var y=Ot;Ot=y!==0&&4>y?y:4,f(!0);var E=br.transition;br.transition={};try{f(!1),h()}finally{Ot=y,br.transition=E}}function ZM(){return Ds().memoizedState}function SU(f,h,y){var E=qo(f);y={lane:E,action:y,hasEagerState:!1,eagerState:null,next:null},eT(f)?tT(h,y):(nT(f,h,y),y=bi(),f=Rr(f,E,y),f!==null&&iT(f,h,E))}function EU(f,h,y){var E=qo(f),M={lane:E,action:y,hasEagerState:!1,eagerState:null,next:null};if(eT(f))tT(h,M);else{nT(f,h,M);var b=f.alternate;if(f.lanes===0&&(b===null||b.lanes===0)&&(b=h.lastRenderedReducer,b!==null))try{var V=h.lastRenderedState,Z=b(V,y);if(M.hasEagerState=!0,M.eagerState=Z,Rs(Z,V))return}catch{}finally{}y=bi(),f=Rr(f,E,y),f!==null&&iT(f,h,E)}}function eT(f){var h=f.alternate;return f===Sn||h!==null&&h===Sn}function tT(f,h){Lf=Pp=!0;var y=f.pending;y===null?h.next=h:(h.next=y.next,y.next=h),f.pending=h}function nT(f,h,y){On!==null&&f.mode&1&&!(Tt&2)?(f=h.interleaved,f===null?(y.next=y,Is===null?Is=[h]:Is.push(h)):(y.next=f.next,f.next=y),h.interleaved=y):(f=h.pending,f===null?y.next=y:(y.next=f.next,f.next=y),h.pending=y)}function iT(f,h,y){if(y&4194240){var E=h.lanes;E&=f.pendingLanes,y|=E,h.lanes=y,my(f,y)}}var Op={readContext:wr,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},wU={readContext:wr,useCallback:function(f,h){return so().memoizedState=[f,h===void 0?null:h],f},useContext:wr,useEffect:zy,useImperativeHandle:function(f,h,y){return y=y!=null?y.concat([f]):null,Dp(4194308,4,KM.bind(null,h,f),y)},useLayoutEffect:function(f,h){return Dp(4194308,4,f,h)},useInsertionEffect:function(f,h){return Dp(4,2,f,h)},useMemo:function(f,h){var y=so();return h=h===void 0?null:h,f=f(),y.memoizedState=[f,h],f},useReducer:function(f,h,y){var E=so();return h=y!==void 0?y(h):h,E.memoizedState=E.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},E.queue=f,f=f.dispatch=SU.bind(null,Sn,f),[E.memoizedState,f]},useRef:function(f){var h=so();return f={current:f},h.memoizedState=f},useState:Uy,useDebugValue:Hy,useDeferredValue:function(f){var h=Uy(f),y=h[0],E=h[1];return zy(function(){var M=br.transition;br.transition={};try{E(f)}finally{br.transition=M}},[f]),y},useTransition:function(){var f=Uy(!1),h=f[0];return f=AU.bind(null,f[1]),so().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,y){var E=Sn,M=so();if(sn){if(y===void 0)throw Error(o(407));y=y()}else{if(y=h(),On===null)throw Error(o(349));wc&30||GM(E,h,y)}M.memoizedState=y;var b={value:y,getSnapshot:h};return M.queue=b,zy(WM.bind(null,E,b,f),[f]),E.flags|=2048,Ff(9,VM.bind(null,E,b,y,h),void 0,null),y},useId:function(){var f=so(),h=On.identifierPrefix;if(sn){var y=ro,E=io;y=(E&~(1<<32-es(E)-1)).toString(32)+y,h=":"+h+"R"+y,y=Of++,0<y&&(h+="H"+y.toString(32)),h+=":"}else y=_U++,h=":"+h+"r"+y.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},MU={readContext:wr,useCallback:QM,useContext:wr,useEffect:Nf,useImperativeHandle:YM,useInsertionEffect:XM,useLayoutEffect:JM,useMemo:qM,useReducer:Ip,useRef:jM,useState:function(){return Ip(tl)},useDebugValue:Hy,useDeferredValue:function(f){var h=Ip(tl),y=h[0],E=h[1];return Nf(function(){var M=br.transition;br.transition={};try{E(f)}finally{br.transition=M}},[f]),y},useTransition:function(){var f=Ip(tl)[0],h=Ds().memoizedState;return[f,h]},useMutableSource:zM,useSyncExternalStore:HM,useId:ZM,unstable_isNewReconciler:!1},TU={readContext:wr,useCallback:QM,useContext:wr,useEffect:Nf,useImperativeHandle:YM,useInsertionEffect:XM,useLayoutEffect:JM,useMemo:qM,useReducer:Bp,useRef:jM,useState:function(){return Bp(tl)},useDebugValue:Hy,useDeferredValue:function(f){var h=Bp(tl),y=h[0],E=h[1];return Nf(function(){var M=br.transition;br.transition={};try{E(f)}finally{br.transition=M}},[f]),y},useTransition:function(){var f=Bp(tl)[0],h=Ds().memoizedState;return[f,h]},useMutableSource:zM,useSyncExternalStore:HM,useId:ZM,unstable_isNewReconciler:!1};function Gy(f,h){try{var y="",E=h;do y+=xU(E),E=E.return;while(E);var M=y}catch(b){M=`
Error generating stack: `+b.message+`
`+b.stack}return{value:f,source:h,stack:M}}function Vy(f,h){try{console.error(h.value)}catch(y){setTimeout(function(){throw y})}}var CU=typeof WeakMap=="function"?WeakMap:Map;function rT(f,h,y){y=no(-1,y),y.tag=3,y.payload={element:null};var E=h.value;return y.callback=function(){Qp||(Qp=!0,ax=E),Vy(f,h)},y}function sT(f,h,y){y=no(-1,y),y.tag=3;var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var M=h.value;y.payload=function(){return E(M)},y.callback=function(){Vy(f,h)}}var b=f.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(y.callback=function(){Vy(f,h),typeof E!="function"&&(Yo===null?Yo=new Set([this]):Yo.add(this));var V=h.stack;this.componentDidCatch(h.value,{componentStack:V!==null?V:""})}),y}function oT(f,h,y){var E=f.pingCache;if(E===null){E=f.pingCache=new CU;var M=new Set;E.set(h,M)}else M=E.get(h),M===void 0&&(M=new Set,E.set(h,M));M.has(y)||(M.add(y),f=HU.bind(null,f,h,y),h.then(f,f))}function aT(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function lT(f,h,y,E,M){return f.mode&1?(f.flags|=65536,f.lanes=M,f):(f===h?f.flags|=65536:(f.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(h=no(-1,1),h.tag=2,Ko(y,h))),y.lanes|=1),f)}function Ls(f){f.flags|=4}function cT(f,h){if(f!==null&&f.child===h.child)return!0;if(h.flags&16)return!1;for(f=h.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var kf,Uf,Fp,Np;if(Le)kf=function(f,h){for(var y=h.child;y!==null;){if(y.tag===5||y.tag===6)Y(f,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===h)break;for(;y.sibling===null;){if(y.return===null||y.return===h)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Uf=function(){},Fp=function(f,h,y,E,M){if(f=f.memoizedProps,f!==E){var b=h.stateNode,V=Bs(Cr.current);y=ce(b,y,f,E,M,V),(h.updateQueue=y)&&Ls(h)}},Np=function(f,h,y,E){y!==E&&Ls(h)};else if(X){kf=function(f,h,y,E){for(var M=h.child;M!==null;){if(M.tag===5){var b=M.stateNode;y&&E&&(b=Gt(b,M.type,M.memoizedProps,M)),Y(f,b)}else if(M.tag===6)b=M.stateNode,y&&E&&(b=ir(b,M.memoizedProps,M)),Y(f,b);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)b=M.child,b!==null&&(b.return=M),kf(f,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var uT=function(f,h,y,E){for(var M=h.child;M!==null;){if(M.tag===5){var b=M.stateNode;y&&E&&(b=Gt(b,M.type,M.memoizedProps,M)),Jt(f,b)}else if(M.tag===6)b=M.stateNode,y&&E&&(b=ir(b,M.memoizedProps,M)),Jt(f,b);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)b=M.child,b!==null&&(b.return=M),uT(f,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};Uf=function(f,h){var y=h.stateNode;if(!cT(f,h)){f=y.containerInfo;var E=It(f);uT(E,h,!1,!1),y.pendingChildren=E,Ls(h),xn(f,E)}},Fp=function(f,h,y,E,M){var b=f.stateNode,V=f.memoizedProps;if((f=cT(f,h))&&V===E)h.stateNode=b;else{var Z=h.stateNode,ue=Bs(Cr.current),Ce=null;V!==E&&(Ce=ce(Z,y,V,E,M,ue)),f&&Ce===null?h.stateNode=b:(b=Oe(b,Ce,y,V,E,h,f,Z),me(b,y,E,M,ue)&&Ls(h),h.stateNode=b,f?Ls(h):kf(b,h,!1,!1))}},Np=function(f,h,y,E){y!==E?(f=Bs(Sc.current),y=Bs(Cr.current),h.stateNode=Se(E,f,y,h),Ls(h)):h.stateNode=f.stateNode}}else Uf=function(){},Fp=function(){},Np=function(){};function zf(f,h){if(!sn)switch(f.tailMode){case"hidden":h=f.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?f.tail=null:y.sibling=null;break;case"collapsed":y=f.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function vi(f){var h=f.alternate!==null&&f.alternate.child===f.child,y=0,E=0;if(h)for(var M=f.child;M!==null;)y|=M.lanes|M.childLanes,E|=M.subtreeFlags&14680064,E|=M.flags&14680064,M.return=f,M=M.sibling;else for(M=f.child;M!==null;)y|=M.lanes|M.childLanes,E|=M.subtreeFlags,E|=M.flags,M.return=f,M=M.sibling;return f.subtreeFlags|=E,f.childLanes=y,h}function bU(f,h,y){var E=h.pendingProps;switch(by(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(h),null;case 1:return An(h.type)&&Xo(),vi(h),null;case 3:return E=h.stateNode,Ec(),zt(Ln),zt(Wn),Oy(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(f===null||f.child===null)&&(Pf(h)?Ls(h):f===null||f.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,ns!==null&&(ux(ns),ns=null))),Uf(f,h),vi(h),null;case 5:Dy(h),y=Bs(Sc.current);var M=h.type;if(f!==null&&h.stateNode!=null)Fp(f,h,M,E,y),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!E){if(h.stateNode===null)throw Error(o(166));return vi(h),null}if(f=Bs(Cr.current),Pf(h)){if(!xe)throw Error(o(175));f=dy(h.stateNode,h.type,h.memoizedProps,y,f,h,!Rf),h.updateQueue=f,f!==null&&Ls(h)}else{var b=H(M,E,y,f,h);kf(b,h,!1,!1),h.stateNode=b,me(b,M,E,y,f)&&Ls(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return vi(h),null;case 6:if(f&&h.stateNode!=null)Np(f,h,f.memoizedProps,E);else{if(typeof E!="string"&&h.stateNode===null)throw Error(o(166));if(f=Bs(Sc.current),y=Bs(Cr.current),Pf(h)){if(!xe)throw Error(o(176));if(f=h.stateNode,E=h.memoizedProps,(y=U(f,E,h,!Rf))&&(M=sr,M!==null))switch(b=(M.mode&1)!==0,M.tag){case 3:ct(M.stateNode.containerInfo,f,E,b);break;case 5:Mt(M.type,M.memoizedProps,M.stateNode,f,E,b)}y&&Ls(h)}else h.stateNode=Se(E,f,y,h)}return vi(h),null;case 13:if(zt(an),E=h.memoizedState,sn&&or!==null&&h.mode&1&&!(h.flags&128)){for(f=or;f;)f=Cs(f);return _c(),h.flags|=98560,h}if(E!==null&&E.dehydrated!==null){if(E=Pf(h),f===null){if(!E)throw Error(o(318));if(!xe)throw Error(o(344));if(f=h.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));re(f,h)}else _c(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return vi(h),null}return ns!==null&&(ux(ns),ns=null),h.flags&128?(h.lanes=y,h):(E=E!==null,y=!1,f===null?Pf(h):y=f.memoizedState!==null,E&&!y&&(h.child.flags|=8192,h.mode&1&&(f===null||an.current&1?$n===0&&($n=3):dx())),h.updateQueue!==null&&(h.flags|=4),vi(h),null);case 4:return Ec(),Uf(f,h),f===null&&Ee(h.stateNode.containerInfo),vi(h),null;case 10:return Sy(h.type._context),vi(h),null;case 17:return An(h.type)&&Xo(),vi(h),null;case 19:if(zt(an),M=h.memoizedState,M===null)return vi(h),null;if(E=(h.flags&128)!==0,b=M.rendering,b===null)if(E)zf(M,!1);else{if($n!==0||f!==null&&f.flags&128)for(f=h.child;f!==null;){if(b=bp(f),b!==null){for(h.flags|=128,zf(M,!1),f=b.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),h.subtreeFlags=0,f=y,E=h.child;E!==null;)y=E,M=f,y.flags&=14680066,b=y.alternate,b===null?(y.childLanes=0,y.lanes=M,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=b.childLanes,y.lanes=b.lanes,y.child=b.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=b.memoizedProps,y.memoizedState=b.memoizedState,y.updateQueue=b.updateQueue,y.type=b.type,M=b.dependencies,y.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),E=E.sibling;return ut(an,an.current&1|2),h.child}f=f.sibling}M.tail!==null&&Zn()>ox&&(h.flags|=128,E=!0,zf(M,!1),h.lanes=4194304)}else{if(!E)if(f=bp(b),f!==null){if(h.flags|=128,E=!0,f=f.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),zf(M,!0),M.tail===null&&M.tailMode==="hidden"&&!b.alternate&&!sn)return vi(h),null}else 2*Zn()-M.renderingStartTime>ox&&y!==1073741824&&(h.flags|=128,E=!0,zf(M,!1),h.lanes=4194304);M.isBackwards?(b.sibling=h.child,h.child=b):(f=M.last,f!==null?f.sibling=b:h.child=b,M.last=b)}return M.tail!==null?(h=M.tail,M.rendering=h,M.tail=h.sibling,M.renderingStartTime=Zn(),h.sibling=null,f=an.current,ut(an,E?f&1|2:f&1),h):(vi(h),null);case 22:case 23:return fx(),E=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==E&&(h.flags|=8192),E&&h.mode&1?lr&1073741824&&(vi(h),Le&&h.subtreeFlags&6&&(h.flags|=8192)):vi(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var RU=a.ReactCurrentOwner,ar=!1;function Ci(f,h,y,E){h.child=f===null?kM(h,null,y,E):Ac(h,f.child,y,E)}function fT(f,h,y,E,M){y=y.render;var b=h.ref;return vc(h,M),E=Ny(f,h,y,E,b,M),y=ky(),f!==null&&!ar?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~M,oo(f,h,M)):(sn&&y&&Cy(h),h.flags|=1,Ci(f,h,E,M),h.child)}function dT(f,h,y,E,M){if(f===null){var b=y.type;return typeof b=="function"&&!hx(b)&&b.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(h.tag=15,h.type=b,hT(f,h,b,E,M)):(f=rm(y.type,null,E,h,h.mode,M),f.ref=h.ref,f.return=h,h.child=f)}if(b=f.child,!(f.lanes&M)){var V=b.memoizedProps;if(y=y.compare,y=y!==null?y:xp,y(V,E)&&f.ref===h.ref)return oo(f,h,M)}return h.flags|=1,f=ea(b,E),f.ref=h.ref,f.return=h,h.child=f}function hT(f,h,y,E,M){if(f!==null&&xp(f.memoizedProps,E)&&f.ref===h.ref)if(ar=!1,(f.lanes&M)!==0)f.flags&131072&&(ar=!0);else return h.lanes=f.lanes,oo(f,h,M);return Wy(f,h,y,E,M)}function pT(f,h,y){var E=h.pendingProps,M=E.children,b=f!==null?f.memoizedState:null;if(E.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},ut(Mc,lr),lr|=y;else if(y&1073741824)h.memoizedState={baseLanes:0,cachePool:null},E=b!==null?b.baseLanes:y,ut(Mc,lr),lr|=E;else return f=b!==null?b.baseLanes|y:y,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null},h.updateQueue=null,ut(Mc,lr),lr|=f,null;else b!==null?(E=b.baseLanes|y,h.memoizedState=null):E=y,ut(Mc,lr),lr|=E;return Ci(f,h,M,y),h.child}function mT(f,h){var y=h.ref;(f===null&&y!==null||f!==null&&f.ref!==y)&&(h.flags|=512,h.flags|=2097152)}function Wy(f,h,y,E,M){var b=An(y)?Zr:Wn.current;return b=_n(h,b),vc(h,M),y=Ny(f,h,y,E,b,M),E=ky(),f!==null&&!ar?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~M,oo(f,h,M)):(sn&&E&&Cy(h),h.flags|=1,Ci(f,h,y,M),h.child)}function gT(f,h,y,E,M){if(An(y)){var b=!0;mc(h)}else b=!1;if(vc(h,M),h.stateNode===null)f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),PM(h,y,E),Ty(h,y,E,M),E=!0;else if(f===null){var V=h.stateNode,Z=h.memoizedProps;V.props=Z;var ue=V.context,Ce=y.contextType;typeof Ce=="object"&&Ce!==null?Ce=wr(Ce):(Ce=An(y)?Zr:Wn.current,Ce=_n(h,Ce));var Xe=y.getDerivedStateFromProps,gt=typeof Xe=="function"||typeof V.getSnapshotBeforeUpdate=="function";gt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Z!==E||ue!==Ce)&&IM(h,V,E,Ce),Jo=!1;var it=h.memoizedState;V.state=it,Ep(h,E,V,M),ue=h.memoizedState,Z!==E||it!==ue||Ln.current||Jo?(typeof Xe=="function"&&(My(h,y,Xe,E),ue=h.memoizedState),(Z=Jo||RM(h,y,Z,E,it,ue,Ce))?(gt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(h.flags|=4194308)):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=ue),V.props=E,V.state=ue,V.context=Ce,E=Z):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{V=h.stateNode,MM(f,h),Z=h.memoizedProps,Ce=h.type===h.elementType?Z:ts(h.type,Z),V.props=Ce,gt=h.pendingProps,it=V.context,ue=y.contextType,typeof ue=="object"&&ue!==null?ue=wr(ue):(ue=An(y)?Zr:Wn.current,ue=_n(h,ue));var jt=y.getDerivedStateFromProps;(Xe=typeof jt=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Z!==gt||it!==ue)&&IM(h,V,E,ue),Jo=!1,it=h.memoizedState,V.state=it,Ep(h,E,V,M);var tt=h.memoizedState;Z!==gt||it!==tt||Ln.current||Jo?(typeof jt=="function"&&(My(h,y,jt,E),tt=h.memoizedState),(Ce=Jo||RM(h,y,Ce,E,it,tt,ue)||!1)?(Xe||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(E,tt,ue),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(E,tt,ue)),typeof V.componentDidUpdate=="function"&&(h.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof V.componentDidUpdate!="function"||Z===f.memoizedProps&&it===f.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Z===f.memoizedProps&&it===f.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=tt),V.props=E,V.state=tt,V.context=ue,E=Ce):(typeof V.componentDidUpdate!="function"||Z===f.memoizedProps&&it===f.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Z===f.memoizedProps&&it===f.memoizedState||(h.flags|=1024),E=!1)}return $y(f,h,y,E,b,M)}function $y(f,h,y,E,M,b){mT(f,h);var V=(h.flags&128)!==0;if(!E&&!V)return M&&Tf(h,y,!1),oo(f,h,b);E=h.stateNode,RU.current=h;var Z=V&&typeof y.getDerivedStateFromError!="function"?null:E.render();return h.flags|=1,f!==null&&V?(h.child=Ac(h,f.child,null,b),h.child=Ac(h,null,Z,b)):Ci(f,h,Z,b),h.memoizedState=E.state,M&&Tf(h,y,!0),h.child}function vT(f){var h=f.stateNode;h.pendingContext?pi(f,h.pendingContext,h.pendingContext!==h.context):h.context&&pi(f,h.context,!1),By(f,h.containerInfo)}function yT(f,h,y,E,M){return _c(),Iy(M),h.flags|=256,Ci(f,h,y,E),h.child}var kp={dehydrated:null,treeContext:null,retryLane:0};function Up(f){return{baseLanes:f,cachePool:null}}function xT(f,h,y){var E=h.pendingProps,M=an.current,b=!1,V=(h.flags&128)!==0,Z;if((Z=V)||(Z=f!==null&&f.memoizedState===null?!1:(M&2)!==0),Z?(b=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(M|=1),ut(an,M&1),f===null)return Py(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(h.mode&1?jo(f)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(M=E.children,f=E.fallback,b?(E=h.mode,b=h.child,M={mode:"hidden",children:M},!(E&1)&&b!==null?(b.childLanes=0,b.pendingProps=M):b=sm(M,E,0,null),f=al(f,E,y,null),b.return=h,f.return=h,b.sibling=f,h.child=b,h.child.memoizedState=Up(y),h.memoizedState=kp,f):jy(h,M));if(M=f.memoizedState,M!==null){if(Z=M.dehydrated,Z!==null){if(V)return h.flags&256?(h.flags&=-257,zp(f,h,y,Error(o(422)))):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(b=E.fallback,M=h.mode,E=sm({mode:"visible",children:E.children},M,0,null),b=al(b,M,y,null),b.flags|=2,E.return=h,b.return=h,E.sibling=b,h.child=E,h.mode&1&&Ac(h,f.child,null,y),h.child.memoizedState=Up(y),h.memoizedState=kp,b);if(!(h.mode&1))h=zp(f,h,y,null);else if(jo(Z))h=zp(f,h,y,Error(o(419)));else if(E=(y&f.childLanes)!==0,ar||E){if(E=On,E!==null){switch(y&-y){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}E=b&(E.suspendedLanes|y)?0:b,E!==0&&E!==M.retryLane&&(M.retryLane=E,Rr(f,E,-1))}dx(),h=zp(f,h,y,Error(o(421)))}else fp(Z)?(h.flags|=128,h.child=f.child,h=GU.bind(null,f),dp(Z,h),h=null):(y=M.treeContext,xe&&(or=fy(Z),sr=h,sn=!0,ns=null,Rf=!1,y!==null&&(Mr[Tr++]=io,Mr[Tr++]=ro,Mr[Tr++]=Za,io=y.id,ro=y.overflow,Za=h)),h=jy(h,h.pendingProps.children),h.flags|=4096);return h}return b?(E=AT(f,h,E.children,E.fallback,y),b=h.child,M=f.child.memoizedState,b.memoizedState=M===null?Up(y):{baseLanes:M.baseLanes|y,cachePool:null},b.childLanes=f.childLanes&~y,h.memoizedState=kp,E):(y=_T(f,h,E.children,y),h.memoizedState=null,y)}return b?(E=AT(f,h,E.children,E.fallback,y),b=h.child,M=f.child.memoizedState,b.memoizedState=M===null?Up(y):{baseLanes:M.baseLanes|y,cachePool:null},b.childLanes=f.childLanes&~y,h.memoizedState=kp,E):(y=_T(f,h,E.children,y),h.memoizedState=null,y)}function jy(f,h){return h=sm({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function _T(f,h,y,E){var M=f.child;return f=M.sibling,y=ea(M,{mode:"visible",children:y}),!(h.mode&1)&&(y.lanes=E),y.return=h,y.sibling=null,f!==null&&(E=h.deletions,E===null?(h.deletions=[f],h.flags|=16):E.push(f)),h.child=y}function AT(f,h,y,E,M){var b=h.mode;f=f.child;var V=f.sibling,Z={mode:"hidden",children:y};return!(b&1)&&h.child!==f?(y=h.child,y.childLanes=0,y.pendingProps=Z,h.deletions=null):(y=ea(f,Z),y.subtreeFlags=f.subtreeFlags&14680064),V!==null?E=ea(V,E):(E=al(E,b,M,null),E.flags|=2),E.return=h,y.return=h,y.sibling=E,h.child=y,E}function zp(f,h,y,E){return E!==null&&Iy(E),Ac(h,f.child,null,y),f=jy(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function ST(f,h,y){f.lanes|=h;var E=f.alternate;E!==null&&(E.lanes|=h),Ey(f.return,h,y)}function Xy(f,h,y,E,M){var b=f.memoizedState;b===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:M}:(b.isBackwards=h,b.rendering=null,b.renderingStartTime=0,b.last=E,b.tail=y,b.tailMode=M)}function ET(f,h,y){var E=h.pendingProps,M=E.revealOrder,b=E.tail;if(Ci(f,h,E.children,y),E=an.current,E&2)E=E&1|2,h.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&ST(f,y,h);else if(f.tag===19)ST(f,y,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}if(ut(an,E),!(h.mode&1))h.memoizedState=null;else switch(M){case"forwards":for(y=h.child,M=null;y!==null;)f=y.alternate,f!==null&&bp(f)===null&&(M=y),y=y.sibling;y=M,y===null?(M=h.child,h.child=null):(M=y.sibling,y.sibling=null),Xy(h,!1,M,y,b);break;case"backwards":for(y=null,M=h.child,h.child=null;M!==null;){if(f=M.alternate,f!==null&&bp(f)===null){h.child=M;break}f=M.sibling,M.sibling=y,y=M,M=f}Xy(h,!0,y,null,b);break;case"together":Xy(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function oo(f,h,y){if(f!==null&&(h.dependencies=f.dependencies),Tc|=h.lanes,!(y&h.childLanes))return null;if(f!==null&&h.child!==f.child)throw Error(o(153));if(h.child!==null){for(f=h.child,y=ea(f,f.pendingProps),h.child=y,y.return=h;f.sibling!==null;)f=f.sibling,y=y.sibling=ea(f,f.pendingProps),y.return=h;y.sibling=null}return h.child}function PU(f,h,y){switch(h.tag){case 3:vT(h),_c();break;case 5:UM(h);break;case 1:An(h.type)&&mc(h);break;case 4:By(h,h.stateNode.containerInfo);break;case 10:wM(h,h.type._context,h.memoizedProps.value);break;case 13:var E=h.memoizedState;if(E!==null)return E.dehydrated!==null?(ut(an,an.current&1),h.flags|=128,null):y&h.child.childLanes?xT(f,h,y):(ut(an,an.current&1),f=oo(f,h,y),f!==null?f.sibling:null);ut(an,an.current&1);break;case 19:if(E=(y&h.childLanes)!==0,f.flags&128){if(E)return ET(f,h,y);h.flags|=128}var M=h.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),ut(an,an.current),E)break;return null;case 22:case 23:return h.lanes=0,pT(f,h,y)}return oo(f,h,y)}function IU(f,h){switch(by(h),h.tag){case 1:return An(h.type)&&Xo(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return Ec(),zt(Ln),zt(Wn),Oy(),f=h.flags,f&65536&&!(f&128)?(h.flags=f&-65537|128,h):null;case 5:return Dy(h),null;case 13:if(zt(an),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(o(340));_c()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return zt(an),null;case 4:return Ec(),null;case 10:return Sy(h.type._context),null;case 22:case 23:return fx(),null;case 24:return null;default:return null}}var Hp=!1,nl=!1,BU=typeof WeakSet=="function"?WeakSet:Set,De=null;function Gp(f,h){var y=f.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(E){Vi(f,h,E)}else y.current=null}function Jy(f,h,y){try{y()}catch(E){Vi(f,h,E)}}var wT=!1;function DU(f,h){for(W(f.containerInfo),De=h;De!==null;)if(f=De,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,De=h;else for(;De!==null;){f=De;try{var y=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,M=y.memoizedState,b=f.stateNode,V=b.getSnapshotBeforeUpdate(f.elementType===f.type?E:ts(f.type,E),M);b.__reactInternalSnapshotBeforeUpdate=V}break;case 3:Le&&Pe(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Z){Vi(f,f.return,Z)}if(h=f.sibling,h!==null){h.return=f.return,De=h;break}De=f.return}return y=wT,wT=!1,y}function il(f,h,y){var E=h.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var M=E=E.next;do{if((M.tag&f)===f){var b=M.destroy;M.destroy=void 0,b!==void 0&&Jy(h,y,b)}M=M.next}while(M!==E)}}function Hf(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var y=h=h.next;do{if((y.tag&f)===f){var E=y.create;y.destroy=E()}y=y.next}while(y!==h)}}function Ky(f){var h=f.ref;if(h!==null){var y=f.stateNode;switch(f.tag){case 5:f=Q(y);break;default:f=y}typeof h=="function"?h(f):h.current=f}}function MT(f,h,y){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(vp,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var E=f=f.next;do{var M=E,b=M.destroy;M=M.tag,b!==void 0&&(M&2||M&4)&&Jy(h,y,b),E=E.next}while(E!==f)}break;case 1:if(Gp(h,y),f=h.stateNode,typeof f.componentWillUnmount=="function")try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch(V){Vi(h,y,V)}break;case 5:Gp(h,y);break;case 4:Le?IT(f,h,y):X&&X&&(h=h.stateNode.containerInfo,y=It(h),qr(h,y))}}function TT(f,h,y){for(var E=h;;)if(MT(f,E,y),E.child===null||Le&&E.tag===4){if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function CT(f){var h=f.alternate;h!==null&&(f.alternate=null,CT(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&Ke(h)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function bT(f){return f.tag===5||f.tag===3||f.tag===4}function RT(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||bT(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function PT(f){if(Le){e:{for(var h=f.return;h!==null;){if(bT(h))break e;h=h.return}throw Error(o(160))}var y=h;switch(y.tag){case 5:h=y.stateNode,y.flags&32&&(mt(h),y.flags&=-33),y=RT(f),Qy(f,y,h);break;case 3:case 4:h=y.stateNode.containerInfo,y=RT(f),Yy(f,y,h);break;default:throw Error(o(161))}}}function Yy(f,h,y){var E=f.tag;if(E===5||E===6)f=f.stateNode,h?Qe(y,f,h):$e(y,f);else if(E!==4&&(f=f.child,f!==null))for(Yy(f,h,y),f=f.sibling;f!==null;)Yy(f,h,y),f=f.sibling}function Qy(f,h,y){var E=f.tag;if(E===5||E===6)f=f.stateNode,h?Ye(y,f,h):we(y,f);else if(E!==4&&(f=f.child,f!==null))for(Qy(f,h,y),f=f.sibling;f!==null;)Qy(f,h,y),f=f.sibling}function IT(f,h,y){for(var E=h,M=!1,b,V;;){if(!M){M=E.return;e:for(;;){if(M===null)throw Error(o(160));switch(b=M.stateNode,M.tag){case 5:V=!1;break e;case 3:b=b.containerInfo,V=!0;break e;case 4:b=b.containerInfo,V=!0;break e}M=M.return}M=!0}if(E.tag===5||E.tag===6)TT(f,E,y),V?Ve(b,E.stateNode):Ge(b,E.stateNode);else if(E.tag===18)V?nt(b,E.stateNode):je(b,E.stateNode);else if(E.tag===4){if(E.child!==null){b=E.stateNode.containerInfo,V=!0,E.child.return=E,E=E.child;continue}}else if(MT(f,E,y),E.child!==null){E.child.return=E,E=E.child;continue}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return,E.tag===4&&(M=!1)}E.sibling.return=E.return,E=E.sibling}}function qy(f,h){if(Le){switch(h.tag){case 0:case 11:case 14:case 15:il(3,h,h.return),Hf(3,h),il(5,h,h.return);return;case 1:return;case 5:var y=h.stateNode;if(y!=null){var E=h.memoizedProps;f=f!==null?f.memoizedProps:E;var M=h.type,b=h.updateQueue;h.updateQueue=null,b!==null&&et(y,b,M,f,E,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));y=h.memoizedProps,Te(h.stateNode,f!==null?f.memoizedProps:y,y);return;case 3:xe&&f!==null&&f.memoizedState.isDehydrated&&ie(h.stateNode.containerInfo);return;case 12:return;case 13:Vp(h);return;case 19:Vp(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:il(3,h,h.return),Hf(3,h),il(5,h,h.return);return;case 12:return;case 13:Vp(h);return;case 19:Vp(h);return;case 3:xe&&f!==null&&f.memoizedState.isDehydrated&&ie(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(X){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,qr(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Vp(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var y=f.stateNode;y===null&&(y=f.stateNode=new BU),h.forEach(function(E){var M=VU.bind(null,f,E);y.has(E)||(y.add(E),E.then(M,M))})}}function LU(f,h){for(De=h;De!==null;){h=De;var y=h.deletions;if(y!==null)for(var E=0;E<y.length;E++){var M=y[E];try{var b=f;Le?IT(b,M,h):TT(b,M,h);var V=M.alternate;V!==null&&(V.return=null),M.return=null}catch(qe){Vi(M,h,qe)}}if(y=h.child,h.subtreeFlags&12854&&y!==null)y.return=h,De=y;else for(;De!==null;){h=De;try{var Z=h.flags;if(Z&32&&Le&&mt(h.stateNode),Z&512){var ue=h.alternate;if(ue!==null){var Ce=ue.ref;Ce!==null&&(typeof Ce=="function"?Ce(null):Ce.current=null)}}if(Z&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var Xe=h.alternate;(Xe===null||Xe.memoizedState===null)&&(sx=Zn())}break;case 22:var gt=h.memoizedState!==null,it=h.alternate,jt=it!==null&&it.memoizedState!==null;if(y=h,Le){e:if(E=y,M=gt,b=null,Le)for(var tt=E;;){if(tt.tag===5){if(b===null){b=tt;var yi=tt.stateNode;M?Ut(yi):Be(tt.stateNode,tt.memoizedProps)}}else if(tt.tag===6){if(b===null){var Ir=tt.stateNode;M?q(Ir):le(Ir,tt.memoizedProps)}}else if((tt.tag!==22&&tt.tag!==23||tt.memoizedState===null||tt===E)&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===E)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===E)break e;b===tt&&(b=null),tt=tt.return}b===tt&&(b=null),tt.sibling.return=tt.return,tt=tt.sibling}}if(gt&&!jt&&y.mode&1){De=y;for(var se=y.child;se!==null;){for(y=De=se;De!==null;){E=De;var te=E.child;switch(E.tag){case 0:case 11:case 14:case 15:il(4,E,E.return);break;case 1:Gp(E,E.return);var ae=E.stateNode;if(typeof ae.componentWillUnmount=="function"){var Fe=E.return;try{ae.props=E.memoizedProps,ae.state=E.memoizedState,ae.componentWillUnmount()}catch(qe){Vi(E,Fe,qe)}}break;case 5:Gp(E,E.return);break;case 22:if(E.memoizedState!==null){LT(y);continue}}te!==null?(te.return=E,De=te):LT(y)}se=se.sibling}}}switch(Z&4102){case 2:PT(h),h.flags&=-3;break;case 6:PT(h),h.flags&=-3,qy(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,qy(h.alternate,h);break;case 4:qy(h.alternate,h)}}catch(qe){Vi(h,h.return,qe)}if(y=h.sibling,y!==null){y.return=h.return,De=y;break}De=h.return}}}function OU(f,h,y){De=f,BT(f)}function BT(f,h,y){for(var E=(f.mode&1)!==0;De!==null;){var M=De,b=M.child;if(M.tag===22&&E){var V=M.memoizedState!==null||Hp;if(!V){var Z=M.alternate,ue=Z!==null&&Z.memoizedState!==null||nl;Z=Hp;var Ce=nl;if(Hp=V,(nl=ue)&&!Ce)for(De=M;De!==null;)V=De,ue=V.child,V.tag===22&&V.memoizedState!==null?OT(M):ue!==null?(ue.return=V,De=ue):OT(M);for(;b!==null;)De=b,BT(b),b=b.sibling;De=M,Hp=Z,nl=Ce}DT(f)}else M.subtreeFlags&8772&&b!==null?(b.return=M,De=b):DT(f)}}function DT(f){for(;De!==null;){var h=De;if(h.flags&8772){var y=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:nl||Hf(5,h);break;case 1:var E=h.stateNode;if(h.flags&4&&!nl)if(y===null)E.componentDidMount();else{var M=h.elementType===h.type?y.memoizedProps:ts(h.type,y.memoizedProps);E.componentDidUpdate(M,y.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var b=h.updateQueue;b!==null&&CM(h,b,E);break;case 3:var V=h.updateQueue;if(V!==null){if(y=null,h.child!==null)switch(h.child.tag){case 5:y=Q(h.child.stateNode);break;case 1:y=h.child.stateNode}CM(h,V,y)}break;case 5:var Z=h.stateNode;y===null&&h.flags&4&&oe(Z,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(xe&&h.memoizedState===null){var ue=h.alternate;if(ue!==null){var Ce=ue.memoizedState;if(Ce!==null){var Xe=Ce.dehydrated;Xe!==null&&fe(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}nl||h.flags&512&&Ky(h)}catch(gt){Vi(h,h.return,gt)}}if(h===f){De=null;break}if(y=h.sibling,y!==null){y.return=h.return,De=y;break}De=h.return}}function LT(f){for(;De!==null;){var h=De;if(h===f){De=null;break}var y=h.sibling;if(y!==null){y.return=h.return,De=y;break}De=h.return}}function OT(f){for(;De!==null;){var h=De;try{switch(h.tag){case 0:case 11:case 15:var y=h.return;try{Hf(4,h)}catch(ue){Vi(h,y,ue)}break;case 1:var E=h.stateNode;if(typeof E.componentDidMount=="function"){var M=h.return;try{E.componentDidMount()}catch(ue){Vi(h,M,ue)}}var b=h.return;try{Ky(h)}catch(ue){Vi(h,b,ue)}break;case 5:var V=h.return;try{Ky(h)}catch(ue){Vi(h,V,ue)}}}catch(ue){Vi(h,h.return,ue)}if(h===f){De=null;break}var Z=h.sibling;if(Z!==null){Z.return=h.return,De=Z;break}De=h.return}}var Wp=0,$p=1,jp=2,Xp=3,Jp=4;if(typeof Symbol=="function"&&Symbol.for){var Gf=Symbol.for;Wp=Gf("selector.component"),$p=Gf("selector.has_pseudo_class"),jp=Gf("selector.role"),Xp=Gf("selector.test_id"),Jp=Gf("selector.text")}function Zy(f){var h=pe(f);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(f=St(f),f===null)throw Error(o(362));return f.stateNode.current}function ex(f,h){switch(h.$$typeof){case Wp:if(f.type===h.value)return!0;break;case $p:e:{h=h.value,f=[f,0];for(var y=0;y<f.length;){var E=f[y++],M=f[y++],b=h[M];if(E.tag!==5||!L(E)){for(;b!=null&&ex(E,b);)M++,b=h[M];if(M===h.length){h=!0;break e}else for(E=E.child;E!==null;)f.push(E,M),E=E.sibling}}h=!1}return h;case jp:if(f.tag===5&&ne(f.stateNode,h.value))return!0;break;case Jp:if((f.tag===5||f.tag===6)&&(f=F(f),f!==null&&0<=f.indexOf(h.value)))return!0;break;case Xp:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function tx(f){switch(f.$$typeof){case Wp:return"<"+(R(f.value)||"Unknown")+">";case $p:return":has("+(tx(f)||"")+")";case jp:return'[role="'+f.value+'"]';case Jp:return'"'+f.value+'"';case Xp:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function FT(f,h){var y=[];f=[f,0];for(var E=0;E<f.length;){var M=f[E++],b=f[E++],V=h[b];if(M.tag!==5||!L(M)){for(;V!=null&&ex(M,V);)b++,V=h[b];if(b===h.length)y.push(M);else for(M=M.child;M!==null;)f.push(M,b),M=M.sibling}}return y}function nx(f,h){if(!Ze)throw Error(o(363));f=Zy(f),f=FT(f,h),h=[],f=Array.from(f);for(var y=0;y<f.length;){var E=f[y++];if(E.tag===5)L(E)||h.push(E.stateNode);else for(E=E.child;E!==null;)f.push(E),E=E.sibling}return h}var FU=Math.ceil,Kp=a.ReactCurrentDispatcher,ix=a.ReactCurrentOwner,Rn=a.ReactCurrentBatchConfig,Tt=0,On=null,Fn=null,ai=0,lr=0,Mc=ht(0),$n=0,Vf=null,Tc=0,Yp=0,rx=0,Wf=null,Hi=null,sx=0,ox=1/0;function Cc(){ox=Zn()+500}var Qp=!1,ax=null,Yo=null,qp=!1,Qo=null,Zp=0,$f=0,lx=null,em=-1,tm=0;function bi(){return Tt&6?Zn():em!==-1?em:em=Zn()}function qo(f){return f.mode&1?Tt&2&&ai!==0?ai&-ai:yU.transition!==null?(tm===0&&(f=pp,pp<<=1,!(pp&4194240)&&(pp=64),tm=f),tm):(f=Ot,f!==0?f:ge()):1}function Rr(f,h,y){if(50<$f)throw $f=0,lx=null,Error(o(185));var E=nm(f,h);return E===null?null:(bf(E,h,y),(!(Tt&2)||E!==On)&&(E===On&&(!(Tt&2)&&(Yp|=h),$n===4&&Zo(E,ai)),Gi(E,y),h===1&&Tt===0&&!(f.mode&1)&&(Cc(),yp&&Ps())),E)}function nm(f,h){f.lanes|=h;var y=f.alternate;for(y!==null&&(y.lanes|=h),y=f,f=f.return;f!==null;)f.childLanes|=h,y=f.alternate,y!==null&&(y.childLanes|=h),y=f,f=f.return;return y.tag===3?y.stateNode:null}function Gi(f,h){var y=f.callbackNode;cU(f,h);var E=gp(f,f===On?ai:0);if(E===0)y!==null&&SM(y),f.callbackNode=null,f.callbackPriority=0;else if(h=E&-E,f.callbackPriority!==h){if(y!=null&&SM(y),h===1)f.tag===0?vU(kT.bind(null,f)):EM(kT.bind(null,f)),ke?ze(function(){Tt===0&&Ps()}):gy(vy,Ps),y=null;else{switch(AM(E)){case 1:y=vy;break;case 4:y=hU;break;case 16:y=yy;break;case 536870912:y=pU;break;default:y=yy}y=XT(y,NT.bind(null,f))}f.callbackPriority=h,f.callbackNode=y}}function NT(f,h){if(em=-1,tm=0,Tt&6)throw Error(o(327));var y=f.callbackNode;if(ol()&&f.callbackNode!==y)return null;var E=gp(f,f===On?ai:0);if(E===0)return null;if(E&30||E&f.expiredLanes||h)h=im(f,E);else{h=E;var M=Tt;Tt|=2;var b=HT();(On!==f||ai!==h)&&(Cc(),rl(f,h));do try{UU();break}catch(Z){zT(f,Z)}while(1);Ay(),Kp.current=b,Tt=M,Fn!==null?h=0:(On=null,ai=0,h=$n)}if(h!==0){if(h===2&&(M=hy(f),M!==0&&(E=M,h=cx(f,M))),h===1)throw y=Vf,rl(f,0),Zo(f,E),Gi(f,Zn()),y;if(h===6)Zo(f,E);else{if(M=f.current.alternate,!(E&30)&&!NU(M)&&(h=im(f,E),h===2&&(b=hy(f),b!==0&&(E=b,h=cx(f,b))),h===1))throw y=Vf,rl(f,0),Zo(f,E),Gi(f,Zn()),y;switch(f.finishedWork=M,f.finishedLanes=E,h){case 0:case 1:throw Error(o(345));case 2:sl(f,Hi);break;case 3:if(Zo(f,E),(E&130023424)===E&&(h=sx+500-Zn(),10<h)){if(gp(f,0)!==0)break;if(M=f.suspendedLanes,(M&E)!==E){bi(),f.pingedLanes|=f.suspendedLanes&M;break}f.timeoutHandle=Re(sl.bind(null,f,Hi),h);break}sl(f,Hi);break;case 4:if(Zo(f,E),(E&4194240)===E)break;for(h=f.eventTimes,M=-1;0<E;){var V=31-es(E);b=1<<V,V=h[V],V>M&&(M=V),E&=~b}if(E=M,E=Zn()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*FU(E/1960))-E,10<E){f.timeoutHandle=Re(sl.bind(null,f,Hi),E);break}sl(f,Hi);break;case 5:sl(f,Hi);break;default:throw Error(o(329))}}}return Gi(f,Zn()),f.callbackNode===y?NT.bind(null,f):null}function cx(f,h){var y=Wf;return f.current.memoizedState.isDehydrated&&(rl(f,h).flags|=256),f=im(f,h),f!==2&&(h=Hi,Hi=y,h!==null&&ux(h)),f}function ux(f){Hi===null?Hi=f:Hi.push.apply(Hi,f)}function NU(f){for(var h=f;;){if(h.flags&16384){var y=h.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var E=0;E<y.length;E++){var M=y[E],b=M.getSnapshot;M=M.value;try{if(!Rs(b(),M))return!1}catch{return!1}}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Zo(f,h){for(h&=~rx,h&=~Yp,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var y=31-es(h),E=1<<y;f[y]=-1,h&=~E}}function kT(f){if(Tt&6)throw Error(o(327));ol();var h=gp(f,0);if(!(h&1))return Gi(f,Zn()),null;var y=im(f,h);if(f.tag!==0&&y===2){var E=hy(f);E!==0&&(h=E,y=cx(f,E))}if(y===1)throw y=Vf,rl(f,0),Zo(f,h),Gi(f,Zn()),y;if(y===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,sl(f,Hi),Gi(f,Zn()),null}function UT(f){Qo!==null&&Qo.tag===0&&!(Tt&6)&&ol();var h=Tt;Tt|=1;var y=Rn.transition,E=Ot;try{if(Rn.transition=null,Ot=1,f)return f()}finally{Ot=E,Rn.transition=y,Tt=h,!(Tt&6)&&Ps()}}function fx(){lr=Mc.current,zt(Mc)}function rl(f,h){f.finishedWork=null,f.finishedLanes=0;var y=f.timeoutHandle;if(y!==pt&&(f.timeoutHandle=pt,Ne(y)),Fn!==null)for(y=Fn.return;y!==null;){var E=y;switch(by(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Xo();break;case 3:Ec(),zt(Ln),zt(Wn),Oy();break;case 5:Dy(E);break;case 4:Ec();break;case 13:zt(an);break;case 19:zt(an);break;case 10:Sy(E.type._context);break;case 22:case 23:fx()}y=y.return}if(On=f,Fn=f=ea(f.current,null),ai=lr=h,$n=0,Vf=null,rx=Yp=Tc=0,Hi=Wf=null,Is!==null){for(h=0;h<Is.length;h++)if(y=Is[h],E=y.interleaved,E!==null){y.interleaved=null;var M=E.next,b=y.pending;if(b!==null){var V=b.next;b.next=M,E.next=V}y.pending=E}Is=null}return f}function zT(f,h){do{var y=Fn;try{if(Ay(),Rp.current=Op,Pp){for(var E=Sn.memoizedState;E!==null;){var M=E.queue;M!==null&&(M.pending=null),E=E.next}Pp=!1}if(wc=0,ei=mi=Sn=null,Lf=!1,Of=0,ix.current=null,y===null||y.return===null){$n=1,Vf=h,Fn=null;break}e:{var b=f,V=y.return,Z=y,ue=h;if(h=ai,Z.flags|=32768,ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Ce=ue,Xe=Z,gt=Xe.tag;if(!(Xe.mode&1)&&(gt===0||gt===11||gt===15)){var it=Xe.alternate;it?(Xe.updateQueue=it.updateQueue,Xe.memoizedState=it.memoizedState,Xe.lanes=it.lanes):(Xe.updateQueue=null,Xe.memoizedState=null)}var jt=aT(V);if(jt!==null){jt.flags&=-257,lT(jt,V,Z,b,h),jt.mode&1&&oT(b,Ce,h),h=jt,ue=Ce;var tt=h.updateQueue;if(tt===null){var yi=new Set;yi.add(ue),h.updateQueue=yi}else tt.add(ue);break e}else{if(!(h&1)){oT(b,Ce,h),dx();break e}ue=Error(o(426))}}else if(sn&&Z.mode&1){var Ir=aT(V);if(Ir!==null){!(Ir.flags&65536)&&(Ir.flags|=256),lT(Ir,V,Z,b,h),Iy(ue);break e}}b=ue,$n!==4&&($n=2),Wf===null?Wf=[b]:Wf.push(b),ue=Gy(ue,Z),Z=V;do{switch(Z.tag){case 3:Z.flags|=65536,h&=-h,Z.lanes|=h;var se=rT(Z,ue,h);TM(Z,se);break e;case 1:b=ue;var te=Z.type,ae=Z.stateNode;if(!(Z.flags&128)&&(typeof te.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(Yo===null||!Yo.has(ae)))){Z.flags|=65536,h&=-h,Z.lanes|=h;var Fe=sT(Z,b,h);TM(Z,Fe);break e}}Z=Z.return}while(Z!==null)}VT(y)}catch(qe){h=qe,Fn===y&&y!==null&&(Fn=y=y.return);continue}break}while(1)}function HT(){var f=Kp.current;return Kp.current=Op,f===null?Op:f}function dx(){($n===0||$n===3||$n===2)&&($n=4),On===null||!(Tc&268435455)&&!(Yp&268435455)||Zo(On,ai)}function im(f,h){var y=Tt;Tt|=2;var E=HT();On===f&&ai===h||rl(f,h);do try{kU();break}catch(M){zT(f,M)}while(1);if(Ay(),Tt=y,Kp.current=E,Fn!==null)throw Error(o(261));return On=null,ai=0,$n}function kU(){for(;Fn!==null;)GT(Fn)}function UU(){for(;Fn!==null&&!fU();)GT(Fn)}function GT(f){var h=jT(f.alternate,f,lr);f.memoizedProps=f.pendingProps,h===null?VT(f):Fn=h,ix.current=null}function VT(f){var h=f;do{var y=h.alternate;if(f=h.return,h.flags&32768){if(y=IU(y,h),y!==null){y.flags&=32767,Fn=y;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{$n=6,Fn=null;return}}else if(y=bU(y,h,lr),y!==null){Fn=y;return}if(h=h.sibling,h!==null){Fn=h;return}Fn=h=f}while(h!==null);$n===0&&($n=5)}function sl(f,h){var y=Ot,E=Rn.transition;try{Rn.transition=null,Ot=1,zU(f,h,y)}finally{Rn.transition=E,Ot=y}return null}function zU(f,h,y){do ol();while(Qo!==null);if(Tt&6)throw Error(o(327));var E=f.finishedWork,M=f.finishedLanes;if(E===null)return null;if(f.finishedWork=null,f.finishedLanes=0,E===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var b=E.lanes|E.childLanes;if(uU(f,b),f===On&&(Fn=On=null,ai=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||qp||(qp=!0,XT(yy,function(){return ol(),null})),b=(E.flags&15990)!==0,E.subtreeFlags&15990||b){b=Rn.transition,Rn.transition=null;var V=Ot;Ot=1;var Z=Tt;Tt|=4,ix.current=null,DU(f,E),LU(f,E),G(f.containerInfo),f.current=E,OU(E),dU(),Tt=Z,Ot=V,Rn.transition=b}else f.current=E;if(qp&&(qp=!1,Qo=f,Zp=M),b=f.pendingLanes,b===0&&(Yo=null),mU(E.stateNode),Gi(f,Zn()),h!==null)for(y=f.onRecoverableError,E=0;E<h.length;E++)y(h[E]);if(Qp)throw Qp=!1,f=ax,ax=null,f;return Zp&1&&f.tag!==0&&ol(),b=f.pendingLanes,b&1?f===lx?$f++:($f=0,lx=f):$f=0,Ps(),null}function ol(){if(Qo!==null){var f=AM(Zp),h=Rn.transition,y=Ot;try{if(Rn.transition=null,Ot=16>f?16:f,Qo===null)var E=!1;else{if(f=Qo,Qo=null,Zp=0,Tt&6)throw Error(o(331));var M=Tt;for(Tt|=4,De=f.current;De!==null;){var b=De,V=b.child;if(De.flags&16){var Z=b.deletions;if(Z!==null){for(var ue=0;ue<Z.length;ue++){var Ce=Z[ue];for(De=Ce;De!==null;){var Xe=De;switch(Xe.tag){case 0:case 11:case 15:il(8,Xe,b)}var gt=Xe.child;if(gt!==null)gt.return=Xe,De=gt;else for(;De!==null;){Xe=De;var it=Xe.sibling,jt=Xe.return;if(CT(Xe),Xe===Ce){De=null;break}if(it!==null){it.return=jt,De=it;break}De=jt}}}var tt=b.alternate;if(tt!==null){var yi=tt.child;if(yi!==null){tt.child=null;do{var Ir=yi.sibling;yi.sibling=null,yi=Ir}while(yi!==null)}}De=b}}if(b.subtreeFlags&2064&&V!==null)V.return=b,De=V;else e:for(;De!==null;){if(b=De,b.flags&2048)switch(b.tag){case 0:case 11:case 15:il(9,b,b.return)}var se=b.sibling;if(se!==null){se.return=b.return,De=se;break e}De=b.return}}var te=f.current;for(De=te;De!==null;){V=De;var ae=V.child;if(V.subtreeFlags&2064&&ae!==null)ae.return=V,De=ae;else e:for(V=te;De!==null;){if(Z=De,Z.flags&2048)try{switch(Z.tag){case 0:case 11:case 15:Hf(9,Z)}}catch(qe){Vi(Z,Z.return,qe)}if(Z===V){De=null;break e}var Fe=Z.sibling;if(Fe!==null){Fe.return=Z.return,De=Fe;break e}De=Z.return}}if(Tt=M,Ps(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(vp,f)}catch{}E=!0}return E}finally{Ot=y,Rn.transition=h}}return!1}function WT(f,h,y){h=Gy(y,h),h=rT(f,h,1),Ko(f,h),h=bi(),f=nm(f,1),f!==null&&(bf(f,1,h),Gi(f,h))}function Vi(f,h,y){if(f.tag===3)WT(f,f,y);else for(;h!==null;){if(h.tag===3){WT(h,f,y);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Yo===null||!Yo.has(E))){f=Gy(y,f),f=sT(h,f,1),Ko(h,f),f=bi(),h=nm(h,1),h!==null&&(bf(h,1,f),Gi(h,f));break}}h=h.return}}function HU(f,h,y){var E=f.pingCache;E!==null&&E.delete(h),h=bi(),f.pingedLanes|=f.suspendedLanes&y,On===f&&(ai&y)===y&&($n===4||$n===3&&(ai&130023424)===ai&&500>Zn()-sx?rl(f,0):rx|=y),Gi(f,h)}function $T(f,h){h===0&&(f.mode&1?(h=mp,mp<<=1,!(mp&130023424)&&(mp=4194304)):h=1);var y=bi();f=nm(f,h),f!==null&&(bf(f,h,y),Gi(f,y))}function GU(f){var h=f.memoizedState,y=0;h!==null&&(y=h.retryLane),$T(f,y)}function VU(f,h){var y=0;switch(f.tag){case 13:var E=f.stateNode,M=f.memoizedState;M!==null&&(y=M.retryLane);break;case 19:E=f.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(h),$T(f,y)}var jT;jT=function(f,h,y){if(f!==null)if(f.memoizedProps!==h.pendingProps||Ln.current)ar=!0;else{if(!(f.lanes&y)&&!(h.flags&128))return ar=!1,PU(f,h,y);ar=!!(f.flags&131072)}else ar=!1,sn&&h.flags&1048576&&BM(h,Tp,h.index);switch(h.lanes=0,h.tag){case 2:var E=h.type;f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps;var M=_n(h,Wn.current);vc(h,y),M=Ny(null,h,E,f,M,y);var b=ky();return h.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,An(E)?(b=!0,mc(h)):b=!1,h.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,wy(h),M.updater=wp,h.stateNode=M,M._reactInternals=h,Ty(h,E,f,y),h=$y(null,h,E,!0,b,y)):(h.tag=0,sn&&b&&Cy(h),Ci(null,h,M,y),h=h.child),h;case 16:E=h.elementType;e:{switch(f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps,M=E._init,E=M(E._payload),h.type=E,M=h.tag=$U(E),f=ts(E,f),M){case 0:h=Wy(null,h,E,f,y);break e;case 1:h=gT(null,h,E,f,y);break e;case 11:h=fT(null,h,E,f,y);break e;case 14:h=dT(null,h,E,ts(E.type,f),y);break e}throw Error(o(306,E,""))}return h;case 0:return E=h.type,M=h.pendingProps,M=h.elementType===E?M:ts(E,M),Wy(f,h,E,M,y);case 1:return E=h.type,M=h.pendingProps,M=h.elementType===E?M:ts(E,M),gT(f,h,E,M,y);case 3:e:{if(vT(h),f===null)throw Error(o(387));E=h.pendingProps,b=h.memoizedState,M=b.element,MM(f,h),Ep(h,E,null,y);var V=h.memoizedState;if(E=V.element,xe&&b.isDehydrated)if(b={element:E,isDehydrated:!1,cache:V.cache,transitions:V.transitions},h.updateQueue.baseState=b,h.memoizedState=b,h.flags&256){M=Error(o(423)),h=yT(f,h,E,y,M);break e}else if(E!==M){M=Error(o(424)),h=yT(f,h,E,y,M);break e}else for(xe&&(or=uy(h.stateNode.containerInfo),sr=h,sn=!0,ns=null,Rf=!1),y=kM(h,null,E,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(_c(),E===M){h=oo(f,h,y);break e}Ci(f,h,E,y)}h=h.child}return h;case 5:return UM(h),f===null&&Py(h),E=h.type,M=h.pendingProps,b=f!==null?f.memoizedProps:null,V=M.children,Ae(E,M)?V=null:b!==null&&Ae(E,b)&&(h.flags|=32),mT(f,h),Ci(f,h,V,y),h.child;case 6:return f===null&&Py(h),null;case 13:return xT(f,h,y);case 4:return By(h,h.stateNode.containerInfo),E=h.pendingProps,f===null?h.child=Ac(h,null,E,y):Ci(f,h,E,y),h.child;case 11:return E=h.type,M=h.pendingProps,M=h.elementType===E?M:ts(E,M),fT(f,h,E,M,y);case 7:return Ci(f,h,h.pendingProps,y),h.child;case 8:return Ci(f,h,h.pendingProps.children,y),h.child;case 12:return Ci(f,h,h.pendingProps.children,y),h.child;case 10:e:{if(E=h.type._context,M=h.pendingProps,b=h.memoizedProps,V=M.value,wM(h,E,V),b!==null)if(Rs(b.value,V)){if(b.children===M.children&&!Ln.current){h=oo(f,h,y);break e}}else for(b=h.child,b!==null&&(b.return=h);b!==null;){var Z=b.dependencies;if(Z!==null){V=b.child;for(var ue=Z.firstContext;ue!==null;){if(ue.context===E){if(b.tag===1){ue=no(-1,y&-y),ue.tag=2;var Ce=b.updateQueue;if(Ce!==null){Ce=Ce.shared;var Xe=Ce.pending;Xe===null?ue.next=ue:(ue.next=Xe.next,Xe.next=ue),Ce.pending=ue}}b.lanes|=y,ue=b.alternate,ue!==null&&(ue.lanes|=y),Ey(b.return,y,h),Z.lanes|=y;break}ue=ue.next}}else if(b.tag===10)V=b.type===h.type?null:b.child;else if(b.tag===18){if(V=b.return,V===null)throw Error(o(341));V.lanes|=y,Z=V.alternate,Z!==null&&(Z.lanes|=y),Ey(V,y,h),V=b.sibling}else V=b.child;if(V!==null)V.return=b;else for(V=b;V!==null;){if(V===h){V=null;break}if(b=V.sibling,b!==null){b.return=V.return,V=b;break}V=V.return}b=V}Ci(f,h,M.children,y),h=h.child}return h;case 9:return M=h.type,E=h.pendingProps.children,vc(h,y),M=wr(M),E=E(M),h.flags|=1,Ci(f,h,E,y),h.child;case 14:return E=h.type,M=ts(E,h.pendingProps),M=ts(E.type,M),dT(f,h,E,M,y);case 15:return hT(f,h,h.type,h.pendingProps,y);case 17:return E=h.type,M=h.pendingProps,M=h.elementType===E?M:ts(E,M),f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,An(E)?(f=!0,mc(h)):f=!1,vc(h,y),PM(h,E,M),Ty(h,E,M,y),$y(null,h,E,!0,f,y);case 19:return ET(f,h,y);case 22:return pT(f,h,y)}throw Error(o(156,h.tag))};function XT(f,h){return gy(f,h)}function WU(f,h,y,E){this.tag=f,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(f,h,y,E){return new WU(f,h,y,E)}function hx(f){return f=f.prototype,!(!f||!f.isReactComponent)}function $U(f){if(typeof f=="function")return hx(f)?1:0;if(f!=null){if(f=f.$$typeof,f===x)return 11;if(f===A)return 14}return 2}function ea(f,h){var y=f.alternate;return y===null?(y=Pr(f.tag,h,f.key,f.mode),y.elementType=f.elementType,y.type=f.type,y.stateNode=f.stateNode,y.alternate=f,f.alternate=y):(y.pendingProps=h,y.type=f.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=f.flags&14680064,y.childLanes=f.childLanes,y.lanes=f.lanes,y.child=f.child,y.memoizedProps=f.memoizedProps,y.memoizedState=f.memoizedState,y.updateQueue=f.updateQueue,h=f.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=f.sibling,y.index=f.index,y.ref=f.ref,y}function rm(f,h,y,E,M,b){var V=2;if(E=f,typeof f=="function")hx(f)&&(V=1);else if(typeof f=="string")V=5;else e:switch(f){case u:return al(y.children,M,b,h);case d:V=8,M|=8;break;case p:return f=Pr(12,y,h,M|2),f.elementType=p,f.lanes=b,f;case _:return f=Pr(13,y,h,M),f.elementType=_,f.lanes=b,f;case v:return f=Pr(19,y,h,M),f.elementType=v,f.lanes=b,f;case w:return sm(y,M,b,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:V=10;break e;case g:V=9;break e;case x:V=11;break e;case A:V=14;break e;case S:V=16,E=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return h=Pr(V,y,h,M),h.elementType=f,h.type=E,h.lanes=b,h}function al(f,h,y,E){return f=Pr(7,f,E,h),f.lanes=y,f}function sm(f,h,y,E){return f=Pr(22,f,E,h),f.elementType=w,f.lanes=y,f.stateNode={},f}function px(f,h,y){return f=Pr(6,f,null,h),f.lanes=y,f}function mx(f,h,y){return h=Pr(4,f.children!==null?f.children:[],f.key,h),h.lanes=y,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function jU(f,h,y,E,M){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=pt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=py(0),this.expirationTimes=py(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=py(0),this.identifierPrefix=E,this.onRecoverableError=M,xe&&(this.mutableSourceEagerHydrationData=null)}function JT(f,h,y,E,M,b,V,Z,ue){return f=new jU(f,h,y,Z,ue),h===1?(h=1,b===!0&&(h|=8)):h=0,b=Pr(3,null,null,h),f.current=b,b.stateNode=f,b.memoizedState={element:E,isDehydrated:y,cache:null,transitions:null},wy(b),f}function KT(f){if(!f)return hi;f=f._reactInternals;e:{if(P(f)!==f||f.tag!==1)throw Error(o(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(An(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(f.tag===1){var y=f.type;if(An(y))return pc(f,y,h)}return h}function YT(f){var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=j(h),f===null?null:f.stateNode}function QT(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var y=f.retryLane;f.retryLane=y!==0&&y<h?y:h}}function gx(f,h){QT(f,h),(f=f.alternate)&&QT(f,h)}function XU(f){return f=j(f),f===null?null:f.stateNode}function JU(){return null}return t.attemptContinuousHydration=function(f){if(f.tag===13){var h=bi();Rr(f,134217728,h),gx(f,134217728)}},t.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var h=bi(),y=qo(f);Rr(f,y,h),gx(f,y)}},t.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var y=Cf(h.pendingLanes);y!==0&&(my(h,y|1),Gi(h,Zn()),!(Tt&6)&&(Cc(),Ps()))}break;case 13:var E=bi();UT(function(){return Rr(f,1,E)}),gx(f,1)}},t.batchedUpdates=function(f,h){var y=Tt;Tt|=1;try{return f(h)}finally{Tt=y,Tt===0&&(Cc(),yp&&Ps())}},t.createComponentSelector=function(f){return{$$typeof:Wp,value:f}},t.createContainer=function(f,h,y,E,M,b,V){return JT(f,h,!1,null,y,E,M,b,V)},t.createHasPseudoClassSelector=function(f){return{$$typeof:$p,value:f}},t.createHydrationContainer=function(f,h,y,E,M,b,V,Z,ue){return f=JT(y,E,!0,f,M,b,V,Z,ue),f.context=KT(null),y=f.current,E=bi(),M=qo(y),b=no(E,M),b.callback=h??null,Ko(y,b),f.current.lanes=M,bf(f,M,E),Gi(f,E),f},t.createPortal=function(f,h,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:f,containerInfo:h,implementation:y}},t.createRoleSelector=function(f){return{$$typeof:jp,value:f}},t.createTestNameSelector=function(f){return{$$typeof:Xp,value:f}},t.createTextSelector=function(f){return{$$typeof:Jp,value:f}},t.deferredUpdates=function(f){var h=Ot,y=Rn.transition;try{return Rn.transition=null,Ot=16,f()}finally{Ot=h,Rn.transition=y}},t.discreteUpdates=function(f,h,y,E,M){var b=Ot,V=Rn.transition;try{return Rn.transition=null,Ot=1,f(h,y,E,M)}finally{Ot=b,Rn.transition=V,Tt===0&&Cc()}},t.findAllNodes=nx,t.findBoundingRects=function(f,h){if(!Ze)throw Error(o(363));h=nx(f,h),f=[];for(var y=0;y<h.length;y++)f.push(Xt(h[y]));for(h=f.length-1;0<h;h--){y=f[h];for(var E=y.x,M=E+y.width,b=y.y,V=b+y.height,Z=h-1;0<=Z;Z--)if(h!==Z){var ue=f[Z],Ce=ue.x,Xe=Ce+ue.width,gt=ue.y,it=gt+ue.height;if(E>=Ce&&b>=gt&&M<=Xe&&V<=it){f.splice(h,1);break}else if(E!==Ce||y.width!==ue.width||it<b||gt>V){if(!(b!==gt||y.height!==ue.height||Xe<E||Ce>M)){Ce>E&&(ue.width+=Ce-E,ue.x=E),Xe<M&&(ue.width=M-Ce),f.splice(h,1);break}}else{gt>b&&(ue.height+=gt-b,ue.y=b),it<V&&(ue.height=V-gt),f.splice(h,1);break}}}return f},t.findHostInstance=YT,t.findHostInstanceWithNoPortals=function(f){return f=N(f),f=f!==null?$(f):null,f===null?null:f.stateNode},t.findHostInstanceWithWarning=function(f){return YT(f)},t.flushControlled=function(f){var h=Tt;Tt|=1;var y=Rn.transition,E=Ot;try{Rn.transition=null,Ot=1,f()}finally{Ot=E,Rn.transition=y,Tt=h,Tt===0&&(Cc(),Ps())}},t.flushPassiveEffects=ol,t.flushSync=UT,t.focusWithin=function(f,h){if(!Ze)throw Error(o(363));for(f=Zy(f),h=FT(f,h),h=Array.from(h),f=0;f<h.length;){var y=h[f++];if(!L(y)){if(y.tag===5&&_e(y.stateNode))return!0;for(y=y.child;y!==null;)h.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ot},t.getFindAllNodesFailureDescription=function(f,h){if(!Ze)throw Error(o(363));var y=0,E=[];f=[Zy(f),0];for(var M=0;M<f.length;){var b=f[M++],V=f[M++],Z=h[V];if((b.tag!==5||!L(b))&&(ex(b,Z)&&(E.push(tx(Z)),V++,V>y&&(y=V)),V<h.length))for(b=b.child;b!==null;)f.push(b,V),b=b.sibling}if(y<h.length){for(f=[];y<h.length;y++)f.push(tx(h[y]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},t.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return Q(f.child.stateNode);default:return f.child.stateNode}},t.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:XU,findFiberByHostInstance:f.findFiberByHostInstance||JU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)f=!0;else{try{vp=h.inject(f),bs=h}catch{}f=!!h.checkDCE}}return f},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(f,h,y,E){if(!Ze)throw Error(o(363));f=nx(f,h);var M=ye(f,y,E).disconnect;return{disconnect:function(){M()}}},t.registerMutableSourceForHydration=function(f,h){var y=h._getVersion;y=y(h._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[h,y]:f.mutableSourceEagerHydrationData.push(h,y)},t.runWithPriority=function(f,h){var y=Ot;try{return Ot=f,h()}finally{Ot=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(f,h,y,E){var M=h.current,b=bi(),V=qo(M);return y=KT(y),h.context===null?h.context=y:h.pendingContext=y,h=no(b,V),h.payload={element:f},E=E===void 0?null:E,E!==null&&(h.callback=E),Ko(M,h),f=Rr(M,V,b),f!==null&&Sp(f,M,V),V},t};t3.exports=d$;var h$=t3.exports;const p$=ic(h$);var n3={exports:{}},i3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,W){var G=O.length;O.push(W);e:for(;0<G;){var H=G-1>>>1,Y=O[H];if(0<r(Y,W))O[H]=W,O[G]=Y,G=H;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],G=O.pop();if(G!==W){O[0]=G;e:for(var H=0,Y=O.length,me=Y>>>1;H<me;){var ce=2*(H+1)-1,Ae=O[ce],Se=ce+1,Re=O[Se];if(0>r(Ae,G))Se<Y&&0>r(Re,Ae)?(O[H]=Re,O[Se]=G,H=Se):(O[H]=Ae,O[ce]=G,H=ce);else if(Se<Y&&0>r(Re,G))O[H]=Re,O[Se]=G,H=Se;else break e}}return W}function r(O,W){var G=O.sortIndex-W.sortIndex;return G!==0?G:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=O)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function w(O){if(x=!1,S(O),!g)if(t(l)!==null)g=!0,Q(T);else{var W=t(c);W!==null&&ee(w,W.startTime-O)}}function T(O,W){g=!1,x&&(x=!1,v(D),D=-1),m=!0;var G=p;try{for(S(W),d=t(l);d!==null&&(!(d.expirationTime>W)||O&&!N());){var H=d.callback;if(typeof H=="function"){d.callback=null,p=d.priorityLevel;var Y=H(d.expirationTime<=W);W=n.unstable_now(),typeof Y=="function"?d.callback=Y:d===t(l)&&i(l),S(W)}else i(l);d=t(l)}if(d!==null)var me=!0;else{var ce=t(c);ce!==null&&ee(w,ce.startTime-W),me=!1}return me}finally{d=null,p=G,m=!1}}var C=!1,R=null,D=-1,P=5,B=-1;function N(){return!(n.unstable_now()-B<P)}function j(){if(R!==null){var O=n.unstable_now();B=O;var W=!0;try{W=R(!0,O)}finally{W?z():(C=!1,R=null)}}else C=!1}var z;if(typeof A=="function")z=function(){A(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,J=$.port2;$.port1.onmessage=j,z=function(){J.postMessage(null)}}else z=function(){_(j,0)};function Q(O){R=O,C||(C=!0,z())}function ee(O,W){D=_(function(){O(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,Q(T))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var G=p;p=W;try{return O()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=p;p=O;try{return W()}finally{p=G}},n.unstable_scheduleCallback=function(O,W,G){var H=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?H+G:H):G=H,O){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=G+Y,O={id:u++,callback:W,priorityLevel:O,startTime:G,expirationTime:Y,sortIndex:-1},G>H?(O.sortIndex=G,e(c,O),t(l)===null&&O===t(c)&&(x?(v(D),D=-1):x=!0,ee(w,G-H))):(O.sortIndex=Y,e(l,O),g||m||(g=!0,Q(T))),O},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(O){var W=p;return function(){var G=p;p=W;try{return O.apply(this,arguments)}finally{p=G}}}})(i3);n3.exports=i3;var FR=n3.exports;function r3(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}const _o=[];function s3(n,e,t=!1,i={}){for(const s of _o)if(r3(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,promise:n(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=_o.indexOf(r);s!==-1&&_o.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(_o.push(r),!t)throw r.promise}const m$=(n,e,t)=>s3(n,e,!1,t),g$=(n,e,t)=>void s3(n,e,!0,t),v$=n=>{if(n===void 0||n.length===0)_o.splice(0,_o.length);else{const e=_o.find(t=>r3(n,t.keys,t.equal));if(e){const t=_o.indexOf(e);t!==-1&&_o.splice(t,1)}}},Ew={},y$=n=>void Object.assign(Ew,n);function x$(n,e){function t(u,{args:d=[],attach:p,...m},g){let x=`${u[0].toUpperCase()}${u.slice(1)}`,_;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=m.object;_=iu(v,{type:u,root:g,attach:p,primitive:!0})}else{const v=Ew[x];if(!v)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");_=iu(new v(...d),{type:u,root:g,attach:p,memoizedProps:{args:d}})}return _.__r3f.attach===void 0&&(_ instanceof dt?_.__r3f.attach="geometry":_ instanceof Vn&&(_.__r3f.attach="material")),x!=="inject"&&T_(_,m),_}function i(u,d){let p=!1;if(d){var m,g;(m=d.__r3f)!=null&&m.attach?M_(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),p=!0),p||(g=u.__r3f)==null||g.objects.push(d),d.__r3f||iu(d,{}),d.__r3f.parent=u,JA(d),ru(d)}}function r(u,d,p){let m=!1;if(d){var g,x;if((g=d.__r3f)!=null&&g.attach)M_(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"});const _=u.children.filter(A=>A!==d),v=_.indexOf(p);u.children=[..._.slice(0,v),d,..._.slice(v)],m=!0}m||(x=u.__r3f)==null||x.objects.push(d),d.__r3f||iu(d,{}),d.__r3f.parent=u,JA(d),ru(d)}}function s(u,d,p=!1){u&&[...u].forEach(m=>o(d,m,p))}function o(u,d,p){if(d){var m,g,x;if(d.__r3f&&(d.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(w=>w!==d)),(g=d.__r3f)!=null&&g.attach)HR(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var _;u.remove(d),(_=d.__r3f)!=null&&_.root&&C$(d.__r3f.root,d)}const A=(x=d.__r3f)==null?void 0:x.primitive,S=p===void 0?d.dispose!==null&&!A:p;if(!A){var v;s((v=d.__r3f)==null?void 0:v.objects,d,S),s(d.children,d,S)}d.__r3f&&(delete d.__r3f.root,delete d.__r3f.objects,delete d.__r3f.handlers,delete d.__r3f.memoizedProps,A||delete d.__r3f),S&&d.dispose&&d.type!=="Scene"&&FR.unstable_scheduleCallback(FR.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),ru(u)}}function a(u,d,p,m){var g;const x=(g=u.__r3f)==null?void 0:g.parent;if(!x)return;const _=t(d,p,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&i(_,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>i(_,v)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(x,u),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(x,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[m,m.alternate].forEach(v=>{v!==null&&(v.stateNode=_,v.ref&&(typeof v.ref=="function"?v.ref(_):v.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:p$({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,i(p,d))},removeChildFromContainer:(u,d)=>{d&&o(u.getState().scene,d)},insertInContainerBefore:(u,d,p)=>{if(!d||!p)return;const m=u.getState().scene;m.__r3f&&r(m,d,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,p,m){if(u.__r3f.primitive&&m.object&&m.object!==u)return[!0];{const{args:g=[],children:x,..._}=m,{args:v=[],children:A,...S}=p;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((T,C)=>T!==v[C]))return[!0];const w=d3(u,_,S,!0);return w.changes.length?[!1,w]:null}},commitUpdate(u,[d,p],m,g,x,_){d?a(u,m,x,_):T_(u,p)},commitMount(u,d,p,m){var g;const x=(g=u.__r3f)!=null?g:{};u.raycast&&x.handlers&&x.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>iu(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:p,parent:m}=(d=u.__r3f)!=null?d:{};p&&m&&HR(m,u,p),u.isObject3D&&(u.visible=!1),ru(u)},unhideInstance(u,d){var p;const{attach:m,parent:g}=(p=u.__r3f)!=null?p:{};m&&g&&M_(g,u,m),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),ru(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():_u.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&tn.fun(performance.now)?performance.now:tn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:tn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:tn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:T_}}var NR,kR;const w_=n=>"colorSpace"in n||"outputColorSpace"in n,o3=()=>{var n;return(n=Ew.ColorManagement)!=null?n:null},a3=n=>n&&n.isOrthographicCamera,_$=n=>n&&n.hasOwnProperty("current"),Kh=typeof window<"u"&&((NR=window.document)!=null&&NR.createElement||((kR=window.navigator)==null?void 0:kR.product)==="ReactNative")?I.useLayoutEffect:I.useEffect;function l3(n){const e=I.useRef(n);return Kh(()=>void(e.current=n),[n]),e}function A$({set:n}){return Kh(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class c3 extends I.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}c3.getDerivedStateFromError=()=>({error:!0});const u3="__default",UR=new Map,S$=n=>n&&!!n.memoized&&!!n.changes;function f3(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const ud=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},tn={obj:n=>n===Object(n)&&!tn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(tn.str(n)||tn.num(n))return n===e;const s=tn.obj(n);if(s&&i==="reference")return n===e;const o=tn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!tn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(tn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function E$(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function w$(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function iu(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function XA(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const zR=/-\d+$/;function M_(n,e,t){if(tn.str(t)){if(zR.test(t)){const s=t.replace(zR,""),{target:o,key:a}=XA(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=XA(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function HR(n,e,t){var i,r;if(tn.str(t)){const{target:s,key:o}=XA(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function d3(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var u;const d=(u=n==null?void 0:n.__r3f)!=null?u:{},p=Object.entries(r),m=[];if(c){const x=Object.keys(l);for(let _=0;_<x.length;_++)r.hasOwnProperty(x[_])||p.unshift([x[_],u3+"remove"])}p.forEach(([x,_])=>{var v;if((v=n.__r3f)!=null&&v.primitive&&x==="object"||tn.equ(_,l[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return m.push([x,_,!0,[]]);let A=[];x.includes("-")&&(A=x.split("-")),m.push([x,_,!1,A]);for(const S in r){const w=r[S];S.startsWith(`${x}-`)&&m.push([S,w,!1,S.split("-")])}});const g={...r};return d.memoizedProps&&d.memoizedProps.args&&(g.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(g.attach=d.memoizedProps.attach),{memoized:g,changes:m}}function T_(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=S$(e)?e:d3(n,e),u=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,g,x,_]=c[p];if(w_(n)){const w="srgb",T="srgb-linear";m==="encoding"?(m="colorSpace",g=g===3001?w:T):m==="outputEncoding"&&(m="outputColorSpace",g=g===3001?w:T)}let v=n,A=v[m];if(_.length&&(A=_.reduce((S,w)=>S[w],n),!(A&&A.set))){const[S,...w]=_.reverse();v=w.reverse().reduce((T,C)=>T[C],n),m=S}if(g===u3+"remove")if(v.constructor){let S=UR.get(v.constructor);S||(S=new v.constructor,UR.set(v.constructor,S)),g=S[m]}else g=0;if(x)g?s.handlers[m]=g:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(A&&A.set&&(A.copy||A instanceof Ul)){if(Array.isArray(g))A.fromArray?A.fromArray(g):A.set(...g);else if(A.copy&&g&&g.constructor&&A.constructor===g.constructor)A.copy(g);else if(g!==void 0){const S=A instanceof be;!S&&A.setScalar?A.setScalar(g):A instanceof Ul&&g instanceof Ul?A.mask=g.mask:A.set(g),!o3()&&!a.linear&&S&&A.convertSRGBToLinear()}}else if(v[m]=g,v[m]instanceof qt&&v[m].format===Ki&&v[m].type===$s){const S=v[m];w_(S)&&w_(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}ru(n)}if(s.parent&&a.internal&&n.raycast&&u!==s.eventCount){const p=a.internal.interaction.indexOf(n);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(r=n.__r3f)!=null&&r.parent&&JA(n),n}function ru(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function JA(n){n.onUpdate==null||n.onUpdate(n)}function M$(n,e){n.manual||(a3(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function ug(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function T$(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return _u.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return _u.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return _u.ContinuousEventPriority;default:return _u.DefaultEventPriority}}function h3(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function C$(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{h3(t.capturedMap,e,i,r)})}function b$(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),d=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<m.length;v++){const A=ud(m[v]);A&&(A.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(v){const A=ud(v);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var S;A.events.compute==null||A.events.compute(l,A,(S=A.previousRoot)==null?void 0:S.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(v,!0):[]}let x=m.flatMap(g).sort((v,A)=>{const S=ud(v.object),w=ud(A.object);return!S||!w?v.distance-A.distance:w.events.priority-S.events.priority||v.distance-A.distance}).filter(v=>{const A=ug(v);return d.has(A)?!1:(d.add(A),!0)});u.events.filter&&(x=u.events.filter(x,u));for(const v of x){let A=v.object;for(;A;){var _;(_=A.__r3f)!=null&&_.eventCount&&p.push({...v,eventObject:A}),A=A.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())d.has(ug(v.intersection))||p.push(v.intersection);return p}function r(l,c,u,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const g of l){const x=ud(g.object)||p,{raycaster:_,pointer:v,camera:A,internal:S}=x,w=new k(v.x,v.y,0).unproject(A),T=B=>{var N,j;return(N=(j=S.capturedMap.get(B))==null?void 0:j.has(g.eventObject))!=null?N:!1},C=B=>{const N={intersection:g,target:c.target};S.capturedMap.has(B)?S.capturedMap.get(B).set(g.eventObject,N):S.capturedMap.set(B,new Map([[g.eventObject,N]])),c.target.setPointerCapture(B)},R=B=>{const N=S.capturedMap.get(B);N&&h3(S.capturedMap,g.eventObject,N,B)};let D={};for(let B in c){let N=c[B];typeof N!="function"&&(D[B]=N)}let P={...g,...D,pointer:v,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:w,ray:_.ray,camera:A,stopPropagation(){const B="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!B||B.has(g.eventObject))&&(P.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(N=>N.eventObject===g.eventObject))){const N=l.slice(0,l.indexOf(g));s([...N,g])}},target:{hasPointerCapture:T,setPointerCapture:C,releasePointerCapture:R},currentTarget:{hasPointerCapture:T,setPointerCapture:C,releasePointerCapture:R},nativeEvent:c};if(d(P),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(ug(u)),p!=null&&p.eventCount){const g={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=u;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(u,m?t:void 0),v=g?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=_.map(S=>S.eventObject)),g&&!_.length&&v<=2&&(o(u,p.interaction),d&&d(u)),m&&s(_);function A(S){const w=S.eventObject,T=w.__r3f,C=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(m){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const R=ug(S),D=p.hovered.get(R);D?D.stopped&&S.stopPropagation():(p.hovered.set(R,S),C.onPointerOver==null||C.onPointerOver(S),C.onPointerEnter==null||C.onPointerEnter(S))}C.onPointerMove==null||C.onPointerMove(S)}else{const R=C[l];R?(!g||p.initialHits.includes(w))&&(o(u,p.interaction.filter(D=>!p.initialHits.includes(D))),R(S)):g&&p.initialHits.includes(w)&&o(u,p.interaction.filter(D=>!p.initialHits.includes(D)))}}r(_,u,v,A)}}return{handlePointer:a}}const p3=n=>!!(n!=null&&n.render),m3=I.createContext(null),R$=(n,e)=>{const t=c$((a,l)=>{const c=new k,u=new k,d=new k;function p(v=l().camera,A=u,S=l().size){const{width:w,height:T,top:C,left:R}=S,D=w/T;A instanceof k?d.copy(A):d.set(...A);const P=v.getWorldPosition(c).distanceTo(d);if(a3(v))return{width:w/v.zoom,height:T/v.zoom,top:C,left:R,factor:1,distance:P,aspect:D};{const B=v.fov*Math.PI/180,N=2*Math.tan(B/2)*P,j=N*(w/T);return{width:j,height:N,top:C,left:R,factor:w/j,distance:P,aspect:D}}}let m;const g=v=>a(A=>({performance:{...A.performance,current:v}})),x=new ve;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,A)=>e(v,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new xw,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();m&&clearTimeout(m),v.performance.current!==v.performance.min&&g(v.performance.min),m=setTimeout(()=>g(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:v=>a(A=>({...A,events:{...A.events,...v}})),setSize:(v,A,S,w,T)=>{const C=l().camera,R={width:v,height:A,top:w||0,left:T||0,updateStyle:S};a(D=>({size:R,viewport:{...D.viewport,...p(C,u,R)}}))},setDpr:v=>a(A=>{const S=f3(v);return{viewport:{...A.viewport,dpr:S,initialDpr:A.viewport.initialDpr||S}}}),setFrameloop:(v="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,v!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:I.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,A,S)=>{const w=l().internal;return w.priority=w.priority+(A>0?1:0),w.subscribers.push({ref:v,priority:A,store:S}),w.subscribers=w.subscribers.sort((T,C)=>T.priority-C.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(A>0?1:0),T.subscribers=T.subscribers.filter(C=>C.ref!==v))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=t.getState();if(l!==r||c.dpr!==s){var p;r=l,s=c.dpr,M$(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let fg,P$=new Set,I$=new Set,B$=new Set;function C_(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function fd(n,e){switch(n){case"before":return C_(P$,e);case"after":return C_(I$,e);case"tail":return C_(B$,e)}}let b_,R_;function P_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),b_=e.internal.subscribers,fg=0;fg<b_.length;fg++)R_=b_[fg],R_.ref.current(R_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function D$(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,fd("before",l);for(const u of n.values()){var c;r=u.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(t+=P_(l,r))}if(fd("after",l),t===0)return fd("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var u;if(!l)return n.forEach(d=>o(d.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,d){if(c&&fd("before",l),u)P_(l,u,d);else for(const p of n.values())P_(l,p.store.getState());c&&fd("after",l)}return{loop:s,invalidate:o,advance:a}}function g3(){const n=I.useContext(m3);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function GR(n=t=>t,e){return g3()(n,e)}function ww(n,e=0){const t=g3(),i=t.getState().internal.subscribe,r=l3(n);return Kh(()=>i(r,e,t),[e,i,t]),null}function v3(n,e){return function(t,...i){const r=new t;return n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,E$(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function Qa(n,e,t,i){const r=Array.isArray(e)?e:[e],s=m$(v3(t,i),[n,...r],{equal:tn.equ});return Array.isArray(e)?s:s[0]}Qa.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return g$(v3(t),[n,...i])};Qa.clear=function(n,e){const t=Array.isArray(e)?e:[e];return v$([n,...t])};const ef=new Map,{invalidate:VR,advance:WR}=D$(ef),{reconciler:w0,applyProps:Qc}=x$(ef,T$),qc={objects:"shallow",strict:!1},L$=(n,e)=>{const t=typeof n=="function"?n(e):n;return p3(t)?t:new qE({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function O$(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function F$(n){const e=ef.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||R$(VR,WR),o=t||w0.createContainer(s,_u.ConcurrentRoot,null,!1,null,"",r,null);e||ef.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:d,size:p,scene:m,events:g,onCreated:x,shadows:_=!1,linear:v=!1,flat:A=!1,legacy:S=!1,orthographic:w=!1,frameloop:T="always",dpr:C=[1,2],performance:R,raycaster:D,camera:P,onPointerMissed:B}=u,N=s.getState(),j=N.gl;N.gl||N.set({gl:j=L$(d,n)});let z=N.raycaster;z||N.set({raycaster:z=new qO});const{params:$,...J}=D||{};if(tn.equ(J,z,qc)||Qc(z,{...J}),tn.equ($,z.params,qc)||Qc(z,{params:{...z.params,...$}}),!N.camera||N.camera===c&&!tn.equ(c,P,qc)){c=P;const H=P instanceof Gh,Y=H?P:w?new ac(0,0,0,0,.1,1e3):new kn(75,0,.1,1e3);H||(Y.position.z=5,P&&Qc(Y,P),!N.camera&&!(P!=null&&P.rotation)&&Y.lookAt(0,0,0)),N.set({camera:Y})}if(!N.scene){let H;m instanceof E0?H=m:(H=new E0,m&&Qc(H,m)),N.set({scene:iu(H)})}if(!N.xr){const H=(ce,Ae)=>{const Se=s.getState();Se.frameloop!=="never"&&WR(ce,!0,Se,Ae)},Y=()=>{const ce=s.getState();ce.gl.xr.enabled=ce.gl.xr.isPresenting,ce.gl.xr.setAnimationLoop(ce.gl.xr.isPresenting?H:null),ce.gl.xr.isPresenting||VR(ce)},me={connect(){const ce=s.getState().gl;ce.xr.addEventListener("sessionstart",Y),ce.xr.addEventListener("sessionend",Y)},disconnect(){const ce=s.getState().gl;ce.xr.removeEventListener("sessionstart",Y),ce.xr.removeEventListener("sessionend",Y)}};j.xr&&me.connect(),N.set({xr:me})}if(j.shadowMap){const H=j.shadowMap.enabled,Y=j.shadowMap.type;if(j.shadowMap.enabled=!!_,tn.boo(_))j.shadowMap.type=Od;else if(tn.str(_)){var Q;const me={basic:rL,percentage:hv,soft:Od,variance:cs};j.shadowMap.type=(Q=me[_])!=null?Q:Od}else tn.obj(_)&&Object.assign(j.shadowMap,_);(H!==j.shadowMap.enabled||Y!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const ee=o3();ee&&("enabled"in ee?ee.enabled=!S:"legacyMode"in ee&&(ee.legacyMode=S)),Qc(j,{outputEncoding:v?3e3:3001,toneMapping:A?Ws:OE}),N.legacy!==S&&N.set(()=>({legacy:S})),N.linear!==v&&N.set(()=>({linear:v})),N.flat!==A&&N.set(()=>({flat:A})),d&&!tn.fun(d)&&!p3(d)&&!tn.equ(d,j,qc)&&Qc(j,d),g&&!N.events.handlers&&N.set({events:g(s)});const G=O$(n,p);return tn.equ(G,N.size,qc)||N.setSize(G.width,G.height,G.updateStyle,G.top,G.left),C&&N.viewport.dpr!==f3(C)&&N.setDpr(C),N.frameloop!==T&&N.setFrameloop(T),N.onPointerMissed||N.set({onPointerMissed:B}),R&&!tn.equ(R,N.performance,qc)&&N.set(H=>({performance:{...H.performance,...R}})),a=x,l=!0,this},render(u){return l||this.configure(),w0.updateContainer(I.createElement(N$,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){y3(n)}}}function N$({store:n,children:e,onCreated:t,rootElement:i}){return Kh(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),I.createElement(m3.Provider,{value:n},e)}function y3(n,e){const t=ef.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),w0.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),w$(r),ef.delete(n),e&&e(n)}catch{}},500)})}}w0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:I.version});function Cn(){return Cn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Cn.apply(this,arguments)}function KA(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,t||(a=n.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var u=t&&!i;return i||(i=setTimeout(l,e)),u&&(a=n.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}KA.debounce=KA;var k$=KA;const $R=ic(k$);function U$(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=I.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=I.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=I.useRef(!1);I.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,g]=I.useMemo(()=>{const A=()=>{if(!l.current.element)return;const{left:S,top:w,width:T,height:C,bottom:R,right:D,x:P,y:B}=l.current.element.getBoundingClientRect(),N={left:S,top:w,width:T,height:C,bottom:R,right:D,x:P,y:B};l.current.element instanceof HTMLElement&&r&&(N.height=l.current.element.offsetHeight,N.width=l.current.element.offsetWidth),Object.freeze(N),d.current&&!V$(l.current.lastBounds,N)&&a(l.current.lastBounds=N)};return[A,u?$R(A,u):A,c?$R(A,c):A]},[a,r,c,u]);function x(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(A=>A.addEventListener("scroll",g,{capture:!0,passive:!0})))}const v=A=>{!A||A===l.current.element||(x(),l.current.element=A,l.current.scrollContainers=x3(A),_())};return H$(g,!!t),z$(m),I.useEffect(()=>{x(),_()},[t,g,m]),I.useEffect(()=>x,[]),[v,o,p]}function z$(n){I.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function H$(n,e){I.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function x3(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...x3(n.parentElement)]}const G$=["x","y","top","bottom","left","right","width","height"],V$=(n,e)=>G$.every(t=>n[t]===e[t]);var W$=Object.defineProperty,$$=Object.defineProperties,j$=Object.getOwnPropertyDescriptors,jR=Object.getOwnPropertySymbols,X$=Object.prototype.hasOwnProperty,J$=Object.prototype.propertyIsEnumerable,XR=(n,e,t)=>e in n?W$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,JR=(n,e)=>{for(var t in e||(e={}))X$.call(e,t)&&XR(n,t,e[t]);if(jR)for(var t of jR(e))J$.call(e,t)&&XR(n,t,e[t]);return n},K$=(n,e)=>$$(n,j$(e));function _3(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=_3(i,e,t);if(r)return r;i=e?null:i.sibling}}function A3(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Mw=A3(I.createContext(null));class S3 extends I.Component{render(){return I.createElement(Mw.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:KR,ReactCurrentDispatcher:YR}=I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Y$(){const n=I.useContext(Mw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=I.useId();return I.useMemo(()=>{for(const i of[KR==null?void 0:KR.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=_3(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function Q$(){var n,e;const t=Y$(),[i]=I.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==Mw&&!i.has(s)&&i.set(s,(e=YR==null?void 0:YR.current)==null?void 0:e.readContext(A3(s))),r=r.return}return i}function q$(){const n=Q$();return I.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>I.createElement(e,null,I.createElement(t.Provider,K$(JR({},i),{value:n.get(t)}))),e=>I.createElement(S3,JR({},e))),[n])}const I_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Z$(n){const{handlePointer:e}=b$(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(I_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=I_[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=I_[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const ej=I.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=Z$,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:x,performance:_,raycaster:v,camera:A,onPointerMissed:S,onCreated:w,...T},C){I.useMemo(()=>y$(o$),[]);const R=q$(),[D,P]=U$({scroll:!0,debounce:{scroll:50,resize:0},...i}),B=I.useRef(null),N=I.useRef(null);I.useImperativeHandle(C,()=>B.current);const j=l3(S),[z,$]=I.useState(!1),[J,Q]=I.useState(!1);if(z)throw z;if(J)throw J;const ee=I.useRef(null);Kh(()=>{const W=B.current;P.width>0&&P.height>0&&W&&(ee.current||(ee.current=F$(W)),ee.current.configure({gl:s,events:o,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:x,performance:_,raycaster:v,camera:A,size:P,onPointerMissed:(...G)=>j.current==null?void 0:j.current(...G),onCreated:G=>{G.events.connect==null||G.events.connect(a?_$(a)?a.current:a:N.current),l&&G.setEvents({compute:(H,Y)=>{const me=H[l+"X"],ce=H[l+"Y"];Y.pointer.set(me/Y.size.width*2-1,-(ce/Y.size.height)*2+1),Y.raycaster.setFromCamera(Y.pointer,Y.camera)}}),w==null||w(G)}}),ee.current.render(I.createElement(R,null,I.createElement(c3,{set:Q},I.createElement(I.Suspense,{fallback:I.createElement(A$,{set:$})},e)))))}),I.useEffect(()=>{const W=B.current;if(W)return()=>y3(W)},[]);const O=a?"none":"auto";return I.createElement("div",Cn({ref:N,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:O,...r}},T),I.createElement("div",{ref:D,style:{width:"100%",height:"100%"}},I.createElement("canvas",{ref:B,style:{display:"block"}},t)))}),tj=I.forwardRef(function(e,t){return I.createElement(S3,null,I.createElement(ej,Cn({},e,{ref:t})))}),M0=I.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Xv=I.createContext({}),Tw=I.createContext(null),Jv=typeof document<"u",QR=Jv?I.useLayoutEffect:I.useEffect,E3=I.createContext({strict:!1});function nj(n,e,t,i){const{visualElement:r}=I.useContext(Xv),s=I.useContext(E3),o=I.useContext(Tw),a=I.useContext(M0).reducedMotion,l=I.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;return I.useInsertionEffect(()=>{c&&c.update(t,o)}),QR(()=>{c&&c.render()}),I.useEffect(()=>{c&&c.updateFeatures()}),(window.HandoffAppearAnimations?QR:I.useEffect)(()=>{c&&c.animationState&&c.animationState.animateChanges()}),c}function Au(n){return typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function ij(n,e,t){return I.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Au(t)&&(t.current=i))},[e])}function Mh(n){return typeof n=="string"||Array.isArray(n)}function Kv(n){return typeof n=="object"&&typeof n.start=="function"}const Cw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bw=["initial",...Cw];function Yv(n){return Kv(n.animate)||bw.some(e=>Mh(n[e]))}function w3(n){return!!(Yv(n)||n.variants)}function rj(n,e){if(Yv(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Mh(t)?t:void 0,animate:Mh(i)?i:void 0}}return n.inherit!==!1?e:{}}function sj(n){const{initial:e,animate:t}=rj(n,I.useContext(Xv));return I.useMemo(()=>({initial:e,animate:t}),[qR(e),qR(t)])}function qR(n){return Array.isArray(n)?n.join(" "):n}const ZR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Th={};for(const n in ZR)Th[n]={isEnabled:e=>ZR[n].some(t=>!!e[t])};function oj(n){for(const e in n)Th[e]={...Th[e],...n[e]}}const M3=I.createContext({}),T3=I.createContext({}),aj=Symbol.for("motionComponentSymbol");function C3({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&oj(n);function s(a,l){let c;const u={...I.useContext(M0),...a,layoutId:lj(a)},{isStatic:d}=u,p=sj(a),m=i(a,d);if(!d&&Jv){p.visualElement=nj(r,m,u,e);const g=I.useContext(T3),x=I.useContext(E3).strict;p.visualElement&&(c=p.visualElement.loadFeatures(u,x,n,g))}return I.createElement(Xv.Provider,{value:p},c&&p.visualElement?I.createElement(c,{visualElement:p.visualElement,...u}):null,t(r,a,ij(m,p.visualElement,l),m,d,p.visualElement))}const o=I.forwardRef(s);return o[aj]=r,o}function lj({layoutId:n}){const e=I.useContext(M3).id;return e&&n!==void 0?e+"-"+n:n}function cj(n){function e(i,r={}){return C3(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const uj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rw(n){return typeof n!="string"||n.includes("-")?!1:!!(uj.indexOf(n)>-1||/[A-Z]/.test(n))}const T0={};function fj(n){Object.assign(T0,n)}const Yh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fc=new Set(Yh);function b3(n,{layout:e,layoutId:t}){return fc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!T0[n]||n==="opacity")}const Gn=n=>!!(n&&n.getVelocity),dj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hj=Yh.length;function pj(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,r){let s="";for(let o=0;o<hj;o++){const a=Yh[o];if(n[a]!==void 0){const l=dj[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(n,i?"":s):t&&i&&(s="none"),s}const R3=n=>e=>typeof e=="string"&&e.startsWith(n),P3=R3("--"),YA=R3("var(--"),mj=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,gj=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ua=(n,e,t)=>Math.min(Math.max(t,n),e),dc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Hd={...dc,transform:n=>Ua(0,1,n)},dg={...dc,default:1},Gd=n=>Math.round(n*1e5)/1e5,Qv=/(-)?([\d]*\.?[\d])+/g,I3=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,vj=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Qh(n){return typeof n=="string"}const qh=n=>({test:e=>Qh(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ua=qh("deg"),Xs=qh("%"),ot=qh("px"),yj=qh("vh"),xj=qh("vw"),eP={...Xs,parse:n=>Xs.parse(n)/100,transform:n=>Xs.transform(n*100)},tP={...dc,transform:Math.round},B3={borderWidth:ot,borderTopWidth:ot,borderRightWidth:ot,borderBottomWidth:ot,borderLeftWidth:ot,borderRadius:ot,radius:ot,borderTopLeftRadius:ot,borderTopRightRadius:ot,borderBottomRightRadius:ot,borderBottomLeftRadius:ot,width:ot,maxWidth:ot,height:ot,maxHeight:ot,size:ot,top:ot,right:ot,bottom:ot,left:ot,padding:ot,paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot,margin:ot,marginTop:ot,marginRight:ot,marginBottom:ot,marginLeft:ot,rotate:ua,rotateX:ua,rotateY:ua,rotateZ:ua,scale:dg,scaleX:dg,scaleY:dg,scaleZ:dg,skew:ua,skewX:ua,skewY:ua,distance:ot,translateX:ot,translateY:ot,translateZ:ot,x:ot,y:ot,z:ot,perspective:ot,transformPerspective:ot,opacity:Hd,originX:eP,originY:eP,originZ:ot,zIndex:tP,fillOpacity:Hd,strokeOpacity:Hd,numOctaves:tP};function Pw(n,e,t,i){const{style:r,vars:s,transform:o,transformOrigin:a}=n;let l=!1,c=!1,u=!0;for(const d in e){const p=e[d];if(P3(d)){s[d]=p;continue}const m=B3[d],g=gj(p,m);if(fc.has(d)){if(l=!0,o[d]=g,!u)continue;p!==(m.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=g):r[d]=g}if(e.transform||(l||i?r.transform=pj(n.transform,t,u,i):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:p="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${p} ${m}`}}const Iw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function D3(n,e,t){for(const i in e)!Gn(e[i])&&!b3(i,t)&&(n[i]=e[i])}function _j({transformTemplate:n},e,t){return I.useMemo(()=>{const i=Iw();return Pw(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function Aj(n,e,t){const i=n.style||{},r={};return D3(r,i,n),Object.assign(r,_j(n,e,t)),n.transformValues?n.transformValues(r):r}function Sj(n,e,t){const i={},r=Aj(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=r,i}const Ej=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function C0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||Ej.has(n)}let L3=n=>!C0(n);function O3(n){n&&(L3=e=>e.startsWith("on")?!C0(e):n(e))}try{O3(require("@emotion/is-prop-valid").default)}catch{}function F3(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(L3(r)||t===!0&&C0(r)||!e&&!C0(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function nP(n,e,t){return typeof n=="string"?n:ot.transform(e+t*n)}function wj(n,e,t){const i=nP(e,n.x,n.width),r=nP(t,n.y,n.height);return`${i} ${r}`}const Mj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Tj={offset:"strokeDashoffset",array:"strokeDasharray"};function Cj(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?Mj:Tj;n[s.offset]=ot.transform(-i);const o=ot.transform(e),a=ot.transform(t);n[s.array]=`${o} ${a}`}function Bw(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d,p){if(Pw(n,c,u,p),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:g,dimensions:x}=n;m.transform&&(x&&(g.transform=m.transform),delete m.transform),x&&(r!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=wj(x,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),o!==void 0&&Cj(m,o,a,l,!1)}const N3=()=>({...Iw(),attrs:{}}),Dw=n=>typeof n=="string"&&n.toLowerCase()==="svg";function bj(n,e,t,i){const r=I.useMemo(()=>{const s=N3();return Bw(s,e,{enableHardwareAcceleration:!1},Dw(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};D3(s,n.style,n),r.style={...s,...r.style}}return r}function Rj(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(Rw(t)?bj:Sj)(i,s,o,t),u={...F3(i,typeof t=="string",n),...l,ref:r},{children:d}=i,p=I.useMemo(()=>Gn(d)?d.get():d,[d]);return I.createElement(t,{...u,children:p})}}const Lw=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function k3(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const U3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function z3(n,e,t,i){k3(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(U3.has(r)?r:Lw(r),e.attrs[r])}function Ow(n,e){const{style:t}=n,i={};for(const r in t)(Gn(t[r])||e.style&&Gn(e.style[r])||b3(r,n))&&(i[r]=t[r]);return i}function H3(n,e){const t=Ow(n,e);for(const i in n)if(Gn(n[i])||Gn(e[i])){const r=Yh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;t[r]=n[i]}return t}function Fw(n,e,t,i={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),e}function G3(n){const e=I.useRef(null);return e.current===null&&(e.current=n()),e.current}const b0=n=>Array.isArray(n),Pj=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Ij=n=>b0(n)?n[n.length-1]||0:n;function Vd(n){const e=Gn(n)?n.get():n;return Pj(e)?e.toValue():e}function Bj({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:Dj(i,r,s,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const Nw=n=>(e,t)=>{const i=I.useContext(Xv),r=I.useContext(Tw),s=()=>Bj(n,e,i,r);return t?s():G3(s)};function Dj(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=Vd(s[p]);let{initial:o,animate:a}=n;const l=Yv(n),c=w3(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const d=u?a:o;return d&&typeof d!="boolean"&&!Kv(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const g=Fw(n,m);if(!g)return;const{transitionEnd:x,transition:_,...v}=g;for(const A in v){let S=v[A];if(Array.isArray(S)){const w=u?S.length-1:0;S=S[w]}S!==null&&(r[A]=S)}for(const A in x)r[A]=x[A]}),r}const Lj={useVisualState:Nw({scrapeMotionValuesFromProps:H3,createRenderState:N3,onMount:(n,e,{renderState:t,latestValues:i})=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}Bw(t,i,{enableHardwareAcceleration:!1},Dw(e.tagName),n.transformTemplate),z3(e,t)}})},Oj={useVisualState:Nw({scrapeMotionValuesFromProps:Ow,createRenderState:Iw})};function Fj(n,{forwardMotionProps:e=!1},t,i){return{...Rw(n)?Lj:Oj,preloadedFeatures:t,useRender:Rj(e),createVisualElement:i,Component:n}}function Mo(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const V3=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function qv(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const W3=n=>e=>V3(e)&&n(e,qv(e));function ys(n,e,t,i){return Mo(n,e,W3(t),i)}const Nj=(n,e)=>t=>e(n(t)),bo=(...n)=>n.reduce(Nj);function $3(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const iP=$3("dragHorizontal"),rP=$3("dragVertical");function j3(n){let e=!1;if(n==="y")e=rP();else if(n==="x")e=iP();else{const t=iP(),i=rP();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function kw(){const n=j3(!0);return n?(n(),!1):!0}class qa{constructor(e){this.isMounted=!1,this.node=e}update(){}}function kj(n){let e=[],t=[],i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&r,p=d?e:t;return c&&o.add(l),p.indexOf(l)===-1&&(p.push(l),d&&r&&(i=e.length)),l},cancel:l=>{const c=t.indexOf(l);c!==-1&&t.splice(c,1),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.length=0,i=e.length,i)for(let c=0;c<i;c++){const u=e[c];u(l),o.has(u)&&(a.schedule(u),n())}r=!1,s&&(s=!1,a.process(l))}};return a}const cn={delta:0,timestamp:0,isProcessing:!1},Uj=40;let QA=!0,Ch=!1;const Zv=["read","update","preRender","render","postRender"],Ou=Zv.reduce((n,e)=>(n[e]=kj(()=>Ch=!0),n),{}),zj=n=>Ou[n].process(cn),X3=n=>{Ch=!1,cn.delta=QA?1e3/60:Math.max(Math.min(n-cn.timestamp,Uj),1),cn.timestamp=n,cn.isProcessing=!0,Zv.forEach(zj),cn.isProcessing=!1,Ch&&(QA=!1,requestAnimationFrame(X3))},Hj=()=>{Ch=!0,QA=!0,cn.isProcessing||requestAnimationFrame(X3)},mn=Zv.reduce((n,e)=>{const t=Ou[e];return n[e]=(i,r=!1,s=!1)=>(Ch||Hj(),t.schedule(i,r,s)),n},{});function No(n){Zv.forEach(e=>Ou[e].cancel(n))}function sP(n,e){const t="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.type==="touch"||kw())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[i]&&mn.update(()=>a[i](s,o))};return ys(n.current,t,r,{passive:!n.getProps()[i]})}class Gj extends qa{mount(){this.unmount=bo(sP(this.node,!0),sP(this.node,!1))}unmount(){}}class Vj extends qa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bo(Mo(this.node.current,"focus",()=>this.onFocus()),Mo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const J3=(n,e)=>e?n===e?!0:J3(n,e.parentElement):!1,Kn=n=>n;function B_(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,qv(t))}class Wj extends qa{constructor(){super(...arguments),this.removeStartListeners=Kn,this.removeEndListeners=Kn,this.removeAccessibleListeners=Kn,this.startPointerPress=(e,t)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),s=ys(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u}=this.node.getProps();mn.update(()=>{J3(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=ys(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=bo(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||B_("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&mn.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Mo(this.node.current,"keyup",o),B_("down",(a,l)=>{this.startPress(a,l)})},t=Mo(this.node.current,"keydown",e),i=()=>{this.isPressing&&B_("cancel",(s,o)=>this.cancelPress(s,o))},r=Mo(this.node.current,"blur",i);this.removeAccessibleListeners=bo(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&mn.update(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!kw()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&mn.update(()=>i(e,t))}mount(){const e=this.node.getProps(),t=ys(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Mo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=bo(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const qA=new WeakMap,D_=new WeakMap,$j=n=>{const e=qA.get(n.target);e&&e(n)},jj=n=>{n.forEach($j)};function Xj({root:n,...e}){const t=n||document;D_.has(t)||D_.set(t,{});const i=D_.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(jj,{root:n,...e})),i[r]}function Jj(n,e,t){const i=Xj(e);return qA.set(n,t),i.observe(n),()=>{qA.delete(n),i.unobserve(n)}}const Kj={some:0,all:1};class Yj extends qa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Kj[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),p=c?u:d;p&&p(l)};return Jj(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Qj(e,t))&&this.startObserver()}unmount(){}}function Qj({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const qj={inView:{Feature:Yj},tap:{Feature:Wj},focus:{Feature:Vj},hover:{Feature:Gj}};function K3(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Zj(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function e7(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function ey(n,e,t){const i=n.getProps();return Fw(i,e,t!==void 0?t:i.custom,Zj(n),e7(n))}const t7="framerAppearId",n7="data-"+Lw(t7);let i7=Kn,Uw=Kn;const La=n=>n*1e3,Ro=n=>n/1e3,r7={current:!1},Y3=n=>Array.isArray(n)&&typeof n[0]=="number";function Q3(n){return!!(!n||typeof n=="string"&&q3[n]||Y3(n)||Array.isArray(n)&&n.every(Q3))}const wd=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,q3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wd([0,.65,.55,1]),circOut:wd([.55,0,1,.45]),backIn:wd([.31,.01,.66,-.59]),backOut:wd([.33,1.53,.69,.99])};function Z3(n){if(n)return Y3(n)?wd(n):Array.isArray(n)?n.map(Z3):q3[n]}function s7(n,e,t,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=Z3(a);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const oP={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},L_={},eF={};for(const n in oP)eF[n]=()=>(L_[n]===void 0&&(L_[n]=oP[n]()),L_[n]);function o7(n,{repeat:e,repeatType:t="loop"}){const i=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[i]}const tF=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,a7=1e-7,l7=12;function c7(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=tF(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>a7&&++a<l7);return o}function Zh(n,e,t,i){if(n===e&&t===i)return Kn;const r=s=>c7(s,0,1,n,t);return s=>s===0||s===1?s:tF(r(s),e,i)}const u7=Zh(.42,0,1,1),f7=Zh(0,0,.58,1),nF=Zh(.42,0,.58,1),d7=n=>Array.isArray(n)&&typeof n[0]!="number",iF=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,rF=n=>e=>1-n(1-e),sF=n=>1-Math.sin(Math.acos(n)),zw=rF(sF),h7=iF(zw),oF=Zh(.33,1.53,.69,.99),Hw=rF(oF),p7=iF(Hw),m7=n=>(n*=2)<1?.5*Hw(n):.5*(2-Math.pow(2,-10*(n-1))),g7={linear:Kn,easeIn:u7,easeInOut:nF,easeOut:f7,circIn:sF,circInOut:h7,circOut:zw,backIn:Hw,backInOut:p7,backOut:oF,anticipate:m7},aP=n=>{if(Array.isArray(n)){Uw(n.length===4);const[e,t,i,r]=n;return Zh(e,t,i,r)}else if(typeof n=="string")return g7[n];return n},Gw=(n,e)=>t=>!!(Qh(t)&&vj.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),aF=(n,e,t)=>i=>{if(!Qh(i))return i;const[r,s,o,a]=i.match(Qv);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},v7=n=>Ua(0,255,n),O_={...dc,transform:n=>Math.round(v7(n))},Dl={test:Gw("rgb","red"),parse:aF("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+O_.transform(n)+", "+O_.transform(e)+", "+O_.transform(t)+", "+Gd(Hd.transform(i))+")"};function y7(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const ZA={test:Gw("#"),parse:y7,transform:Dl.transform},Su={test:Gw("hsl","hue"),parse:aF("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Xs.transform(Gd(e))+", "+Xs.transform(Gd(t))+", "+Gd(Hd.transform(i))+")"},Bi={test:n=>Dl.test(n)||ZA.test(n)||Su.test(n),parse:n=>Dl.test(n)?Dl.parse(n):Su.test(n)?Su.parse(n):ZA.parse(n),transform:n=>Qh(n)?n:n.hasOwnProperty("red")?Dl.transform(n):Su.transform(n)},pn=(n,e,t)=>-t*n+t*e+n;function F_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function x7({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=F_(l,a,n+1/3),s=F_(l,a,n),o=F_(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const N_=(n,e,t)=>{const i=n*n;return Math.sqrt(Math.max(0,t*(e*e-i)+i))},_7=[ZA,Dl,Su],A7=n=>_7.find(e=>e.test(n));function lP(n){const e=A7(n);let t=e.parse(n);return e===Su&&(t=x7(t)),t}const lF=(n,e)=>{const t=lP(n),i=lP(e),r={...t};return s=>(r.red=N_(t.red,i.red,s),r.green=N_(t.green,i.green,s),r.blue=N_(t.blue,i.blue,s),r.alpha=pn(t.alpha,i.alpha,s),Dl.transform(r))};function S7(n){var e,t;return isNaN(n)&&Qh(n)&&(((e=n.match(Qv))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(I3))===null||t===void 0?void 0:t.length)||0)>0}const cF={regex:mj,countKey:"Vars",token:"${v}",parse:Kn},uF={regex:I3,countKey:"Colors",token:"${c}",parse:Bi.parse},fF={regex:Qv,countKey:"Numbers",token:"${n}",parse:dc.parse};function k_(n,{regex:e,countKey:t,token:i,parse:r}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,i),n.values.push(...s.map(r)))}function R0(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&k_(t,cF),k_(t,uF),k_(t,fF),t}function dF(n){return R0(n).values}function hF(n){const{values:e,numColors:t,numVars:i,tokenised:r}=R0(n),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(cF.token,o[l]):l<i+t?a=a.replace(uF.token,Bi.transform(o[l])):a=a.replace(fF.token,Gd(o[l]));return a}}const E7=n=>typeof n=="number"?0:n;function w7(n){const e=dF(n);return hF(n)(e.map(E7))}const za={test:S7,parse:dF,createTransformer:hF,getAnimatableNone:w7},pF=(n,e)=>t=>`${t>0?e:n}`;function mF(n,e){return typeof n=="number"?t=>pn(n,e,t):Bi.test(n)?lF(n,e):n.startsWith("var(")?pF(n,e):vF(n,e)}const gF=(n,e)=>{const t=[...n],i=t.length,r=n.map((s,o)=>mF(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}},M7=(n,e)=>{const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=mF(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}},vF=(n,e)=>{const t=za.createTransformer(e),i=R0(n),r=R0(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?bo(gF(i.values,r.values),t):pF(n,e)},bh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},cP=(n,e)=>t=>pn(n,e,t);function T7(n){return typeof n=="number"?cP:typeof n=="string"?Bi.test(n)?lF:vF:Array.isArray(n)?gF:typeof n=="object"?M7:cP}function C7(n,e,t){const i=[],r=t||T7(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Kn:e;a=bo(l,a)}i.push(a)}return i}function yF(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(Uw(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=C7(e,i,r),a=o.length,l=c=>{let u=0;if(a>1)for(;u<n.length-2&&!(c<n[u+1]);u++);const d=bh(n[u],n[u+1],c);return o[u](d)};return t?c=>l(Ua(n[0],n[s-1],c)):l}function b7(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=bh(0,e,i);n.push(pn(t,1,r))}}function R7(n){const e=[0];return b7(e,n.length-1),e}function P7(n,e){return n.map(t=>t*e)}function I7(n,e){return n.map(()=>e||nF).splice(0,n.length-1)}function P0({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=d7(i)?i.map(aP):aP(i),s={done:!1,value:e[0]},o=P7(t&&t.length===e.length?t:R7(e),n),a=yF(o,e,{ease:Array.isArray(r)?r:I7(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function xF(n,e){return e?n*(1e3/e):0}const B7=5;function _F(n,e,t){const i=Math.max(e-B7,0);return xF(t-n(i),e-i)}const U_=.001,D7=.01,uP=10,L7=.05,O7=1;function F7({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s;i7(n<=La(uP));let o=1-e;o=Ua(L7,O7,o),n=Ua(D7,uP,Ro(n)),o<1?(r=c=>{const u=c*o,d=u*n,p=u-t,m=eS(c,o),g=Math.exp(-d);return U_-p/m*g},s=c=>{const d=c*o*n,p=d*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,g=Math.exp(-d),x=eS(Math.pow(c,2),o);return(-r(c)+U_>0?-1:1)*((p-m)*g)/x}):(r=c=>{const u=Math.exp(-c*n),d=(c-t)*n+1;return-U_+u*d},s=c=>{const u=Math.exp(-c*n),d=(t-c)*(n*n);return u*d});const a=5/n,l=k7(r,s,a);if(n=La(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const N7=12;function k7(n,e,t){let i=t;for(let r=1;r<N7;r++)i=i-n(i)/e(i);return i}function eS(n,e){return n*Math.sqrt(1-e*e)}const U7=["duration","bounce"],z7=["stiffness","damping","mass"];function fP(n,e){return e.some(t=>n[t]!==void 0)}function H7(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!fP(n,z7)&&fP(n,U7)){const t=F7(n);e={...e,...t,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function AF({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,velocity:u,duration:d,isResolvedFromDuration:p}=H7(i),m=u?-Ro(u):0,g=l/(2*Math.sqrt(a*c)),x=s-r,_=Ro(Math.sqrt(a/c)),v=Math.abs(x)<5;t||(t=v?.01:2),e||(e=v?.005:.5);let A;if(g<1){const S=eS(_,g);A=w=>{const T=Math.exp(-g*_*w);return s-T*((m+g*_*x)/S*Math.sin(S*w)+x*Math.cos(S*w))}}else if(g===1)A=S=>s-Math.exp(-_*S)*(x+(m+_*x)*S);else{const S=_*Math.sqrt(g*g-1);A=w=>{const T=Math.exp(-g*_*w),C=Math.min(S*w,300);return s-T*((m+g*_*x)*Math.sinh(C)+S*x*Math.cosh(C))/S}}return{calculatedDuration:p&&d||null,next:S=>{const w=A(S);if(p)o.done=S>=d;else{let T=m;S!==0&&(g<1?T=_F(A,S,w):T=0);const C=Math.abs(T)<=t,R=Math.abs(s-w)<=e;o.done=C&&R}return o.value=o.done?s:w,o}}}function dP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=n[0],p={done:!1,value:d},m=D=>a!==void 0&&D<a||l!==void 0&&D>l,g=D=>a===void 0?l:l===void 0||Math.abs(a-D)<Math.abs(l-D)?a:l;let x=t*e;const _=d+x,v=o===void 0?_:o(_);v!==_&&(x=v-d);const A=D=>-x*Math.exp(-D/i),S=D=>v+A(D),w=D=>{const P=A(D),B=S(D);p.done=Math.abs(P)<=c,p.value=p.done?v:B};let T,C;const R=D=>{m(p.value)&&(T=D,C=AF({keyframes:[p.value,g(p.value)],velocity:_F(S,D,p.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return R(0),{calculatedDuration:null,next:D=>{let P=!1;return!C&&T===void 0&&(P=!0,w(D),R(D)),T!==void 0&&D>T?C.next(D-T):(!P&&w(D),p)}}}const G7=n=>{const e=({timestamp:t})=>n(t);return{start:()=>mn.update(e,!0),stop:()=>No(e),now:()=>cn.isProcessing?cn.timestamp:performance.now()}},hP=2e4;function pP(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<hP;)e+=t,i=n.next(e);return e>=hP?1/0:e}const V7={decay:dP,inertia:dP,tween:P0,keyframes:P0,spring:AF};function I0({autoplay:n=!0,delay:e=0,driver:t=G7,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...p}){let m=1,g=!1,x,_;const v=()=>{x&&x(),_=new Promise(H=>{x=H})};v();let A;const S=V7[r]||P0;let w;S!==P0&&typeof i[0]!="number"&&(w=yF([0,100],i,{clamp:!1}),i=[0,100]);const T=S({...p,keyframes:i});let C;a==="mirror"&&(C=S({...p,keyframes:[...i].reverse(),velocity:-(p.velocity||0)}));let R="idle",D=null,P=null,B=null;T.calculatedDuration===null&&s&&(T.calculatedDuration=pP(T));const{calculatedDuration:N}=T;let j=1/0,z=1/0;N!==null&&(j=N+o,z=j*(s+1)-o);let $=0;const J=H=>{if(P===null)return;m>0&&(P=Math.min(P,H)),D!==null?$=D:$=(H-P)*m;const Y=$-e,me=Y<0;$=Math.max(Y,0),R==="finished"&&D===null&&($=z);let ce=$,Ae=T;if(s){const pt=$/j;let wt=Math.floor(pt),Le=pt%1;!Le&&pt>=1&&(Le=1),Le===1&&wt--,wt=Math.min(wt,s+1);const X=!!(wt%2);X&&(a==="reverse"?(Le=1-Le,o&&(Le-=o/j)):a==="mirror"&&(Ae=C));let xe=Ua(0,1,Le);$>z&&(xe=a==="reverse"&&X?1:0),ce=xe*j}const Se=me?{done:!1,value:i[0]}:Ae.next(ce);w&&(Se.value=w(Se.value));let{done:Re}=Se;!me&&N!==null&&(Re=$>=z);const Ne=D===null&&(R==="finished"||R==="running"&&Re||m<0&&$<=0);return d&&d(Se.value),Ne&&O(),Se},Q=()=>{A&&A.stop(),A=void 0},ee=()=>{R="idle",Q(),v(),P=B=null},O=()=>{R="finished",u&&u(),Q(),v()},W=()=>{if(g)return;A||(A=t(J));const H=A.now();l&&l(),D!==null?P=H-D:(!P||R==="finished")&&(P=H),B=P,D=null,R="running",A.start()};n&&W();const G={then(H,Y){return _.then(H,Y)},get time(){return Ro($)},set time(H){H=La(H),$=H,D!==null||!A||m===0?D=H:P=A.now()-H/m},get duration(){const H=T.calculatedDuration===null?pP(T):T.calculatedDuration;return Ro(H)},get speed(){return m},set speed(H){H===m||!A||(m=H,G.time=Ro($))},get state(){return R},play:W,pause:()=>{R="paused",D=$},stop:()=>{g=!0,R!=="idle"&&(R="idle",c&&c(),ee())},cancel:()=>{B!==null&&J(B),ee()},complete:()=>{R="finished"},sample:H=>(P=0,J(H))};return G}const W7=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),hg=10,$7=2e4,j7=(n,e)=>e.type==="spring"||n==="backgroundColor"||!Q3(e.ease);function X7(n,e,{onUpdate:t,onComplete:i,...r}){if(!(eF.waapi()&&W7.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l;const c=()=>{l=new Promise(v=>{a=v})};c();let{keyframes:u,duration:d=300,ease:p,times:m}=r;if(j7(e,r)){const v=I0({...r,repeat:0,delay:0});let A={done:!1,value:u[0]};const S=[];let w=0;for(;!A.done&&w<$7;)A=v.sample(w),S.push(A.value),w+=hg;m=void 0,u=S,d=w-hg,p="linear"}const g=s7(n.owner.current,e,u,{...r,duration:d,ease:p,times:m}),x=()=>g.cancel(),_=()=>{mn.update(x),a(),c()};return g.onfinish=()=>{n.set(o7(u,r)),i&&i(),_()},{then(v,A){return l.then(v,A)},get time(){return Ro(g.currentTime||0)},set time(v){g.currentTime=La(v)},get speed(){return g.playbackRate},set speed(v){g.playbackRate=v},get duration(){return Ro(d)},play:()=>{o||(g.play(),No(x))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:v}=g;if(v){const A=I0({...r,autoplay:!1});n.setWithVelocity(A.sample(v-hg).value,A.sample(v).value,hg)}_()},complete:()=>g.finish(),cancel:_}}function J7({keyframes:n,delay:e,onUpdate:t,onComplete:i}){const r=()=>(t&&t(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Kn,pause:Kn,stop:Kn,then:s=>(s(),Promise.resolve()),cancel:Kn,complete:Kn});return e?I0({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const K7={type:"spring",stiffness:500,damping:25,restSpeed:10},Y7=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Q7={type:"keyframes",duration:.8},q7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Z7=(n,{keyframes:e})=>e.length>2?Q7:fc.has(n)?n.startsWith("scale")?Y7(e[1]):K7:q7,tS=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(za.test(e)||e==="0")&&!e.startsWith("url(")),eX=new Set(["brightness","contrast","saturate","opacity"]);function tX(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Qv)||[];if(!i)return n;const r=t.replace(i,"");let s=eX.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const nX=/([a-z-]*)\(.*?\)/g,nS={...za,getAnimatableNone:n=>{const e=n.match(nX);return e?e.map(tX).join(" "):n}},iX={...B3,color:Bi,backgroundColor:Bi,outlineColor:Bi,fill:Bi,stroke:Bi,borderColor:Bi,borderTopColor:Bi,borderRightColor:Bi,borderBottomColor:Bi,borderLeftColor:Bi,filter:nS,WebkitFilter:nS},Vw=n=>iX[n];function SF(n,e){let t=Vw(n);return t!==nS&&(t=za),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const EF=n=>/^0[^.\s]+$/.test(n);function rX(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||EF(n)}function sX(n,e,t,i){const r=tS(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=i.from!==void 0?i.from:n.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),rX(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(r&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];s[u]=SF(e,a)}return s}function oX({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function wF(n,e){return n[e]||n.default||n}const Ww=(n,e,t,i={})=>r=>{const s=wF(i,n)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-La(o);const l=sX(e,n,t,s),c=l[0],u=l[l.length-1],d=tS(n,c),p=tS(n,u);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:g=>{e.set(g),s.onUpdate&&s.onUpdate(g)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(oX(s)||(m={...m,...Z7(n,m)}),m.duration&&(m.duration=La(m.duration)),m.repeatDelay&&(m.repeatDelay=La(m.repeatDelay)),!d||!p||r7.current||s.type===!1)return J7(m);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=X7(e,n,m);if(g)return g}return I0(m)};function B0(n){return!!(Gn(n)&&n.add)}const aX=n=>/^\-?\d*\.?\d+$/.test(n);function $w(n,e){n.indexOf(e)===-1&&n.push(e)}function jw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Xw{constructor(){this.subscriptions=[]}add(e){return $w(this.subscriptions,e),()=>jw(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lX=n=>!isNaN(parseFloat(n));class cX{constructor(e,t={}){this.version="10.12.16",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=cn;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,mn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>mn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=lX(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Xw);const i=this.events[e].add(t);return e==="change"?()=>{i(),mn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?xF(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tf(n,e){return new cX(n,e)}const MF=n=>e=>e.test(n),uX={test:n=>n==="auto",parse:n=>n},TF=[dc,ot,Xs,ua,xj,yj,uX],dd=n=>TF.find(MF(n)),fX=[...TF,Bi,za],dX=n=>fX.find(MF(n));function hX(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,tf(t))}function pX(n,e){const t=ey(n,e);let{transitionEnd:i={},transition:r={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...i};for(const o in s){const a=Ij(s[o]);hX(n,o,a)}}function CF(n,e,t){var i,r;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(r=(i=t[l])!==null&&i!==void 0?i:n.readValue(l))!==null&&r!==void 0?r:e[l]),u!=null&&(typeof u=="string"&&(aX(u)||EF(u))?u=parseFloat(u):!dX(u)&&za.test(c)&&(u=SF(l,c)),n.addValue(l,tf(u,{owner:n})),t[l]===void 0&&(t[l]=u),u!==null&&n.setBaseTarget(l,u))}}function mX(n,e){return e?(e[n]||e.default||e).from:void 0}function gX(n,e,t){const i={};for(const r in n){const s=mX(r,e);if(s!==void 0)i[r]=s;else{const o=t.getValue(r);o&&(i[r]=o.get())}}return i}function vX({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function bF(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");i&&(s=i);const c=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const d in a){const p=n.getValue(d),m=a[d];if(!p||m===void 0||u&&vX(u,d))continue;const g={delay:t,elapsed:0,...s};if(window.HandoffAppearAnimations&&!p.hasAnimated){const _=n.getProps()[n7];_&&(g.elapsed=window.HandoffAppearAnimations(_,d,p,mn))}p.start(Ww(d,p,m,n.shouldReduceMotion&&fc.has(d)?{type:!1}:g));const x=p.animation;B0(l)&&(l.add(d),x.then(()=>l.remove(d))),c.push(x)}return o&&Promise.all(c).then(()=>{o&&pX(n,o)}),c}function iS(n,e,t={}){const i=ey(n,e,t.custom);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(bF(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=r;return yX(n,e,c+l,u,d,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(t.delay)])}function yX(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(xX).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(iS(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function xX(n,e){return n.sortNodePosition(e)}function _X(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>iS(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=iS(n,e,t);else{const r=typeof e=="function"?ey(n,e,t.custom):e;i=Promise.all(bF(n,r,t))}return i.then(()=>n.notify("AnimationComplete",e))}const AX=[...Cw].reverse(),SX=Cw.length;function EX(n){return e=>Promise.all(e.map(({animation:t,options:i})=>_X(n,t,i)))}function wX(n){let e=EX(n);const t=TX();let i=!0;const r=(l,c)=>{const u=ey(n,c);if(u){const{transition:d,transitionEnd:p,...m}=u;l={...l,...m,...p}}return l};function s(l){e=l(n)}function o(l,c){const u=n.getProps(),d=n.getVariantContext(!0)||{},p=[],m=new Set;let g={},x=1/0;for(let v=0;v<SX;v++){const A=AX[v],S=t[A],w=u[A]!==void 0?u[A]:d[A],T=Mh(w),C=A===c?S.isActive:null;C===!1&&(x=v);let R=w===d[A]&&w!==u[A]&&T;if(R&&i&&n.manuallyAnimateOnMount&&(R=!1),S.protectedKeys={...g},!S.isActive&&C===null||!w&&!S.prevProp||Kv(w)||typeof w=="boolean")continue;const D=MX(S.prevProp,w);let P=D||A===c&&S.isActive&&!R&&T||v>x&&T;const B=Array.isArray(w)?w:[w];let N=B.reduce(r,{});C===!1&&(N={});const{prevResolvedValues:j={}}=S,z={...j,...N},$=J=>{P=!0,m.delete(J),S.needsAnimating[J]=!0};for(const J in z){const Q=N[J],ee=j[J];g.hasOwnProperty(J)||(Q!==ee?b0(Q)&&b0(ee)?!K3(Q,ee)||D?$(J):S.protectedKeys[J]=!0:Q!==void 0?$(J):m.add(J):Q!==void 0&&m.has(J)?$(J):S.protectedKeys[J]=!0)}S.prevProp=w,S.prevResolvedValues=N,S.isActive&&(g={...g,...N}),i&&n.blockInitialAnimation&&(P=!1),P&&!R&&p.push(...B.map(J=>({animation:J,options:{type:A,...l}})))}if(m.size){const v={};m.forEach(A=>{const S=n.getBaseTarget(A);S!==void 0&&(v[A]=S)}),p.push({animation:v})}let _=!!p.length;return i&&u.initial===!1&&!n.manuallyAnimateOnMount&&(_=!1),i=!1,_?e(p):Promise.resolve()}function a(l,c,u){var d;if(t[l].isActive===c)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),t[l].isActive=c;const p=o(u,l);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function MX(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!K3(e,n):!1}function vl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function TX(){return{animate:vl(!0),whileInView:vl(),whileHover:vl(),whileTap:vl(),whileDrag:vl(),whileFocus:vl(),exit:vl()}}class CX extends qa{constructor(e){super(e),e.animationState||(e.animationState=wX(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Kv(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let bX=0;class RX extends qa{constructor(){super(...arguments),this.id=bX++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const RF={animation:{Feature:CX},exit:{Feature:RX}},mP=(n,e)=>Math.abs(n-e);function PX(n,e){const t=mP(n.x,e.x),i=mP(n.y,e.y);return Math.sqrt(t**2+i**2)}class PF{constructor(e,t,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=H_(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,d=PX(c.offset,{x:0,y:0})>=3;if(!u&&!d)return;const{point:p}=c,{timestamp:m}=cn;this.history.push({...p,timestamp:m});const{onStart:g,onMove:x}=this.handlers;u||(g&&g(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,c)},this.handlePointerMove=(c,u)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=z_(u,this.transformPagePoint),mn.update(this.updatePoint,!0)},this.handlePointerUp=(c,u)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:d,onSessionEnd:p}=this.handlers,m=H_(c.type==="pointercancel"?this.lastMoveEventInfo:z_(u,this.transformPagePoint),this.history);this.startEvent&&d&&d(c,m),p&&p(c,m)},!V3(e))return;this.handlers=t,this.transformPagePoint=i;const r=qv(e),s=z_(r,this.transformPagePoint),{point:o}=s,{timestamp:a}=cn;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,H_(s,this.history)),this.removeListeners=bo(ys(window,"pointermove",this.handlePointerMove),ys(window,"pointerup",this.handlePointerUp),ys(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),No(this.updatePoint)}}function z_(n,e){return e?{point:e(n.point)}:n}function gP(n,e){return{x:n.x-e.x,y:n.y-e.y}}function H_({point:n},e){return{point:n,delta:gP(n,IF(e)),offset:gP(n,IX(e)),velocity:BX(e,.1)}}function IX(n){return n[0]}function IF(n){return n[n.length-1]}function BX(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=IF(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>La(e)));)t--;if(!i)return{x:0,y:0};const s=Ro(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ar(n){return n.max-n.min}function rS(n,e=0,t=.01){return Math.abs(n-e)<=t}function vP(n,e,t,i=.5){n.origin=i,n.originPoint=pn(e.min,e.max,n.origin),n.scale=Ar(t)/Ar(e),(rS(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=pn(t.min,t.max,n.origin)-n.originPoint,(rS(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Wd(n,e,t,i){vP(n.x,e.x,t.x,i?i.originX:void 0),vP(n.y,e.y,t.y,i?i.originY:void 0)}function yP(n,e,t){n.min=t.min+e.min,n.max=n.min+Ar(e)}function DX(n,e,t){yP(n.x,e.x,t.x),yP(n.y,e.y,t.y)}function xP(n,e,t){n.min=e.min-t.min,n.max=n.min+Ar(e)}function $d(n,e,t){xP(n.x,e.x,t.x),xP(n.y,e.y,t.y)}function LX(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?pn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?pn(t,n,i.max):Math.min(n,t)),n}function _P(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function OX(n,{top:e,left:t,bottom:i,right:r}){return{x:_P(n.x,t,r),y:_P(n.y,e,i)}}function AP(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function FX(n,e){return{x:AP(n.x,e.x),y:AP(n.y,e.y)}}function NX(n,e){let t=.5;const i=Ar(n),r=Ar(e);return r>i?t=bh(e.min,e.max-i,n.min):i>r&&(t=bh(n.min,n.max-r,e.min)),Ua(0,1,t)}function kX(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const sS=.35;function UX(n=sS){return n===!1?n=0:n===!0&&(n=sS),{x:SP(n,"left","right"),y:SP(n,"top","bottom")}}function SP(n,e,t){return{min:EP(n,e),max:EP(n,t)}}function EP(n,e){return typeof n=="number"?n:n[e]||0}const wP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Eu=()=>({x:wP(),y:wP()}),MP=()=>({min:0,max:0}),In=()=>({x:MP(),y:MP()});function ks(n){return[n("x"),n("y")]}function BF({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function zX({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function HX(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function G_(n){return n===void 0||n===1}function oS({scale:n,scaleX:e,scaleY:t}){return!G_(n)||!G_(e)||!G_(t)}function Sl(n){return oS(n)||DF(n)||n.z||n.rotate||n.rotateX||n.rotateY}function DF(n){return TP(n.x)||TP(n.y)}function TP(n){return n&&n!=="0%"}function D0(n,e,t){const i=n-t,r=e*i;return t+r}function CP(n,e,t,i,r){return r!==void 0&&(n=D0(n,r,i)),D0(n,t,i)+e}function aS(n,e=0,t=1,i,r){n.min=CP(n.min,e,t,i,r),n.max=CP(n.max,e,t,i,r)}function LF(n,{x:e,y:t}){aS(n.x,e.translate,e.scale,e.originPoint),aS(n.y,t.translate,t.scale,t.originPoint)}function GX(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&wu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,LF(n,o)),i&&Sl(s.latestValues)&&wu(n,s.latestValues))}e.x=bP(e.x),e.y=bP(e.y)}function bP(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function ma(n,e){n.min=n.min+e,n.max=n.max+e}function RP(n,e,[t,i,r]){const s=e[r]!==void 0?e[r]:.5,o=pn(n.min,n.max,s);aS(n,e[t],e[i],o,e.scale)}const VX=["x","scaleX","originX"],WX=["y","scaleY","originY"];function wu(n,e){RP(n.x,e,VX),RP(n.y,e,WX)}function OF(n,e){return BF(HX(n.getBoundingClientRect(),e))}function $X(n,e,t){const i=OF(n,t),{scroll:r}=e;return r&&(ma(i.x,r.offset.x),ma(i.y,r.offset.y)),i}const jX=new WeakMap;class XX{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=In(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=l=>{this.stopAnimation(),t&&this.snapToCursor(qv(l,"page").point)},s=(l,c)=>{const{drag:u,dragPropagation:d,onDragStart:p}=this.getProps();if(u&&!d&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=j3(u),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ks(g=>{let x=this.getAxisMotionValue(g).get()||0;if(Xs.test(x)){const{projection:_}=this.visualElement;if(_&&_.layout){const v=_.layout.layoutBox[g];v&&(x=Ar(v)*(parseFloat(x)/100))}}this.originPoint[g]=x}),p&&mn.update(()=>p(l,c),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(l,c)=>{const{dragPropagation:u,dragDirectionLock:d,onDirectionLock:p,onDrag:m}=this.getProps();if(!u&&!this.openGlobalLock)return;const{offset:g}=c;if(d&&this.currentDirection===null){this.currentDirection=JX(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",c.point,g),this.updateAxis("y",c.point,g),this.visualElement.render(),m&&m(l,c)},a=(l,c)=>this.stop(l,c);this.panSession=new PF(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&mn.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!pg(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=LX(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:i}=this.visualElement.projection||{},r=this.constraints;e&&Au(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=OX(i.layoutBox,e):this.constraints=!1,this.elastic=UX(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ks(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=kX(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Au(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=$X(i,r.root,this.visualElement.getTransformPagePoint());let o=FX(r.layout.layoutBox,s);if(t){const a=t(zX(o));this.hasMutatedConstraints=!!a,a&&(o=BF(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ks(u=>{if(!pg(u,t,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,g={type:"inertia",velocity:i?e[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(Ww(e,i,0,t))}stopAnimation(){ks(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){ks(t=>{const{drag:i}=this.getProps();if(!pg(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-pn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Au(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ks(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=NX({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ks(o=>{if(!pg(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(pn(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;jX.set(this.visualElement,this);const e=this.visualElement.current,t=ys(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Au(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=Mo(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ks(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=sS,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function pg(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function JX(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class KX extends qa{constructor(e){super(e),this.removeGroupControls=Kn,this.removeListeners=Kn,this.controls=new XX(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Kn}unmount(){this.removeGroupControls(),this.removeListeners()}}const PP=n=>(e,t)=>{n&&mn.update(()=>n(e,t))};class YX extends qa{constructor(){super(...arguments),this.removePointerDownListener=Kn}onPointerDown(e){this.session=new PF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:PP(e),onStart:PP(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&mn.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=ys(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function QX(){const n=I.useContext(Tw);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=I.useId();return I.useEffect(()=>i(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const jg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IP(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const hd={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ot.test(n))n=parseFloat(n);else return n;const t=IP(n,e.target.x),i=IP(n,e.target.y);return`${t}% ${i}%`}},qX={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=za.parse(n);if(r.length>5)return i;const s=za.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=pn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class ZX extends K.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;fj(eJ),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),jg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||mn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FF(n){const[e,t]=QX(),i=I.useContext(M3);return K.createElement(ZX,{...n,layoutGroup:i,switchLayoutGroup:I.useContext(T3),isPresent:e,safeToRemove:t})}const eJ={borderRadius:{...hd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hd,borderTopRightRadius:hd,borderBottomLeftRadius:hd,borderBottomRightRadius:hd,boxShadow:qX},NF=["TopLeft","TopRight","BottomLeft","BottomRight"],tJ=NF.length,BP=n=>typeof n=="string"?parseFloat(n):n,DP=n=>typeof n=="number"||ot.test(n);function nJ(n,e,t,i,r,s){r?(n.opacity=pn(0,t.opacity!==void 0?t.opacity:1,iJ(i)),n.opacityExit=pn(e.opacity!==void 0?e.opacity:1,0,rJ(i))):s&&(n.opacity=pn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<tJ;o++){const a=`border${NF[o]}Radius`;let l=LP(e,a),c=LP(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||DP(l)===DP(c)?(n[a]=Math.max(pn(BP(l),BP(c),i),0),(Xs.test(c)||Xs.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=pn(e.rotate||0,t.rotate||0,i))}function LP(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const iJ=kF(0,.5,zw),rJ=kF(.5,.95,Kn);function kF(n,e,t){return i=>i<n?0:i>e?1:t(bh(n,e,i))}function OP(n,e){n.min=e.min,n.max=e.max}function Dr(n,e){OP(n.x,e.x),OP(n.y,e.y)}function FP(n,e,t,i,r){return n-=e,n=D0(n,1/t,i),r!==void 0&&(n=D0(n,1/r,i)),n}function sJ(n,e=0,t=1,i=.5,r,s=n,o=n){if(Xs.test(e)&&(e=parseFloat(e),e=pn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=pn(s.min,s.max,i);n===s&&(a-=e),n.min=FP(n.min,e,t,a,r),n.max=FP(n.max,e,t,a,r)}function NP(n,e,[t,i,r],s,o){sJ(n,e[t],e[i],e[r],e.scale,s,o)}const oJ=["x","scaleX","originX"],aJ=["y","scaleY","originY"];function kP(n,e,t,i){NP(n.x,e,oJ,t?t.x:void 0,i?i.x:void 0),NP(n.y,e,aJ,t?t.y:void 0,i?i.y:void 0)}function UP(n){return n.translate===0&&n.scale===1}function UF(n){return UP(n.x)&&UP(n.y)}function lS(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function zP(n){return Ar(n.x)/Ar(n.y)}class lJ{constructor(){this.members=[]}add(e){$w(this.members,e),e.scheduleRender()}remove(e){if(jw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HP(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:c,rotateY:u}=t;l&&(i+=`rotate(${l}deg) `),c&&(i+=`rotateX(${c}deg) `),u&&(i+=`rotateY(${u}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const cJ=(n,e)=>n.depth-e.depth;class uJ{constructor(){this.children=[],this.isDirty=!1}add(e){$w(this.children,e),this.isDirty=!0}remove(e){jw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cJ),this.isDirty=!1,this.children.forEach(e)}}function fJ(n,e){const t=performance.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(No(i),n(s-e))};return mn.read(i,!0),()=>No(i)}function dJ(n){window.MotionDebug&&window.MotionDebug.record(n)}function hJ(n){return n instanceof SVGElement&&n.tagName!=="svg"}function pJ(n,e,t){const i=Gn(n)?n:tf(n);return i.start(Ww("",i,e,t)),i.animation}const GP=["","X","Y","Z"],VP=1e3;let mJ=0;const El={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function zF({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=mJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{El.totalNodes=El.resolvedTargetDeltas=El.recalculatedProjection=0,this.nodes.forEach(yJ),this.nodes.forEach(EJ),this.nodes.forEach(wJ),this.nodes.forEach(xJ),dJ(El)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new uJ)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Xw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=hJ(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let d;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=fJ(p,250),jg.hasAnimatedSinceResize&&(jg.hasAnimatedSinceResize=!1,this.nodes.forEach($P))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||RJ,{onLayoutAnimationStart:_,onLayoutAnimationComplete:v}=u.getProps(),A=!this.targetLayout||!lS(this.targetLayout,g)||m,S=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const w={...wF(x,"layout"),onPlay:_,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else p||$P(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,No(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(MJ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WP);return}this.isUpdating||this.nodes.forEach(AJ),this.isUpdating=!1,this.nodes.forEach(SJ),this.nodes.forEach(gJ),this.nodes.forEach(vJ),this.clearAllSnapshots();const a=performance.now();cn.delta=Ua(0,1e3/60,a-cn.timestamp),cn.timestamp=a,cn.isProcessing=!0,Ou.update.process(cn),Ou.preRender.process(cn),Ou.render.process(cn),cn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(_J),this.sharedNodes.forEach(TJ)}scheduleUpdateProjection(){mn.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){mn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=In(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!UF(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Sl(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),PJ(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return In();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(ma(a.x,l.offset.x),ma(a.y,l.offset.y)),a}removeElementScroll(o){const a=In();Dr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){Dr(a,o);const{scroll:p}=this.root;p&&(ma(a.x,-p.offset.x),ma(a.y,-p.offset.y))}ma(a.x,u.offset.x),ma(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=In();Dr(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&wu(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Sl(u.latestValues)&&wu(l,u.latestValues)}return Sl(this.latestValues)&&wu(l,this.latestValues),l}removeTransform(o){const a=In();Dr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Sl(c.latestValues))continue;oS(c.latestValues)&&c.updateSnapshot();const u=In(),d=c.measurePageBox();Dr(u,d),kP(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Sl(this.latestValues)&&kP(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=cn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),$d(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=In(),this.targetWithTransforms=In()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DX(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dr(this.target,this.layout.layoutBox),LF(this.target,this.targetDelta)):Dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),$d(this.relativeTargetOrigin,this.target,m.target),Dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}El.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||oS(this.parent.latestValues)||DF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===cn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Dr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;GX(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=Eu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Eu(),this.projectionDeltaWithTransform=Eu());const x=this.projectionTransform;Wd(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=HP(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),El.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Eu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=In(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,x=m!==g,_=this.getStack(),v=!_||_.members.length<=1,A=!!(x&&!v&&this.options.crossfade===!0&&!this.path.some(bJ));this.animationProgress=0;let S;this.mixTargetDelta=w=>{const T=w/1e3;jP(d.x,o.x,T),jP(d.y,o.y,T),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($d(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CJ(this.relativeTarget,this.relativeTargetOrigin,p,T),S&&lS(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=In()),Dr(S,this.relativeTarget)),x&&(this.animationValues=u,nJ(u,c,this.latestValues,T,A,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(No(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=mn.update(()=>{jg.hasAnimatedSinceResize=!0,this.currentAnimation=pJ(0,VP,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(VP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&HF(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||In();const d=Ar(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=Ar(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Dr(a,l),wu(a,u),Wd(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new lJ),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<GP.length;u++){const d="rotate"+GP[u];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const c={};if(!this.instance||this.isSVG)return c;if(this.isVisible)c.visibility="";else return{visibility:"hidden"};const u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Vd(o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Vd(o.pointerEvents)||""),this.hasProjected&&!Sl(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=HP(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y:g}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in T0){if(p[x]===void 0)continue;const{correct:_,applyTo:v}=T0[x],A=c.transform==="none"?p[x]:_(p[x],d);if(v){const S=v.length;for(let w=0;w<S;w++)c[v[w]]=A}else c[x]=A}return this.options.layoutId&&(c.pointerEvents=d===this?Vd(o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(WP),this.root.sharedNodes.clear()}}}function gJ(n){n.updateLayout()}function vJ(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?ks(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=Ar(p);p.min=i[d].min,p.max=p.min+m}):HF(s,t.layoutBox,i)&&ks(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=Ar(i[d]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+m)});const a=Eu();Wd(a,i,t.layoutBox);const l=Eu();o?Wd(l,n.applyTransform(r,!0),t.measuredBox):Wd(l,i,t.layoutBox);const c=!UF(a);let u=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const g=In();$d(g,t.layoutBox,p.layoutBox);const x=In();$d(x,i,m.layoutBox),lS(g,x)||(u=!0),d.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=g,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function yJ(n){El.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function xJ(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function _J(n){n.clearSnapshot()}function WP(n){n.clearMeasurements()}function AJ(n){n.isLayoutDirty=!1}function SJ(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function $P(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function EJ(n){n.resolveTargetDelta()}function wJ(n){n.calcProjection()}function MJ(n){n.resetRotation()}function TJ(n){n.removeLeadSnapshot()}function jP(n,e,t){n.translate=pn(e.translate,0,t),n.scale=pn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function XP(n,e,t,i){n.min=pn(e.min,t.min,i),n.max=pn(e.max,t.max,i)}function CJ(n,e,t,i){XP(n.x,e.x,t.x,i),XP(n.y,e.y,t.y,i)}function bJ(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const RJ={duration:.45,ease:[.4,0,.1,1]};function JP(n){n.min=Math.round(n.min),n.max=Math.round(n.max)}function PJ(n){JP(n.x),JP(n.y)}function HF(n,e,t){return n==="position"||n==="preserve-aspect"&&!rS(zP(e),zP(t),.2)}const IJ=zF({attachResizeListener:(n,e)=>Mo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),V_={current:void 0},GF=zF({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!V_.current){const n=new IJ({});n.mount(window),n.setOptions({layoutScroll:!0}),V_.current=n}return V_.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),BJ={pan:{Feature:YX},drag:{Feature:KX,ProjectionNode:GF,MeasureLayout:FF}},DJ=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function LJ(n){const e=DJ.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]}function cS(n,e,t=1){const[i,r]=LJ(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);return s?s.trim():YA(r)?cS(r,e,t+1):r}function OJ(n,{...e},t){const i=n.current;if(!(i instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(r=>{const s=r.get();if(!YA(s))return;const o=cS(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!YA(s))continue;const o=cS(s,i);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=s))}return{target:e,transitionEnd:t}}const FJ=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),VF=n=>FJ.has(n),NJ=n=>Object.keys(n).some(VF),KP=n=>n===dc||n===ot,YP=(n,e)=>parseFloat(n.split(", ")[e]),QP=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return YP(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?YP(s[1],n):0}},kJ=new Set(["x","y","z"]),UJ=Yh.filter(n=>!kJ.has(n));function zJ(n){const e=[];return UJ.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const qP={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:QP(4,13),y:QP(5,14)},HJ=(n,e,t)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(c=>{a[c]=qP[c](i,s)}),e.render();const l=e.measureViewportBox();return t.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),n[c]=qP[c](l,s)}),n},GJ=(n,e,t={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(VF);let s=[],o=!1;const a=[];if(r.forEach(l=>{const c=n.getValue(l);if(!n.hasValue(l))return;let u=t[l],d=dd(u);const p=e[l];let m;if(b0(p)){const g=p.length,x=p[0]===null?1:0;u=p[x],d=dd(u);for(let _=x;_<g&&p[_]!==null;_++)m?Uw(dd(p[_])===m):m=dd(p[_])}else m=dd(p);if(d!==m)if(KP(d)&&KP(m)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===ot&&(e[l]=p.map(parseFloat))}else d!=null&&d.transform&&(m!=null&&m.transform)&&(u===0||p===0)?u===0?c.set(m.transform(u)):e[l]=d.transform(p):(o||(s=zJ(n),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],c.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=HJ(e,n,a);return s.length&&s.forEach(([u,d])=>{n.getValue(u).set(d)}),n.render(),Jv&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}else return{target:e,transitionEnd:i}};function VJ(n,e,t,i){return NJ(e)?GJ(n,e,t,i):{target:e,transitionEnd:i}}const WJ=(n,e,t,i)=>{const r=OJ(n,e,i);return e=r.target,i=r.transitionEnd,VJ(n,e,t,i)},uS={current:null},WF={current:!1};function $J(){if(WF.current=!0,!!Jv)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>uS.current=n.matches;n.addListener(e),e()}else uS.current=!1}function jJ(n,e,t){const{willChange:i}=e;for(const r in e){const s=e[r],o=t[r];if(Gn(s))n.addValue(r,s),B0(i)&&i.add(r);else if(Gn(o))n.addValue(r,tf(s,{owner:n})),B0(i)&&i.remove(r);else if(o!==s)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(r);n.addValue(r,tf(a!==void 0?a:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const ZP=new WeakMap,$F=Object.keys(Th),XJ=$F.length,e2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],JJ=bw.length;class jF{constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>mn.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=Yv(t),this.isVariantNode=w3(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(t,{});for(const d in u){const p=u[d];a[d]!==void 0&&Gn(p)&&(p.set(a[d],!1),B0(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,ZP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),WF.current||$J(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ZP.delete(this.current),this.projection&&this.projection.unmount(),No(this.notifyUpdate),No(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const i=fc.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&mn.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,r,s){let o,a;for(let l=0;l<XJ;l++){const c=$F[l],{isEnabled:u,Feature:d,ProjectionNode:p,MeasureLayout:m}=Th[c];p&&(o=p),u(t)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),m&&(a=m))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:d,layoutScroll:p,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||d&&Au(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):In()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<e2.length;i++){const r=e2[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=jJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<JJ;i++){const r=bw[i],s=this.props[r];(Mh(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=tf(t,{owner:this}),this.addValue(e,i)),i}readValue(e){return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(t=Fw(this.props,i))===null||t===void 0?void 0:t[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Gn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Xw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class XF extends jF{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...i},{transformValues:r},s){let o=gX(i,e||{},this);if(r&&(t&&(t=r(t)),i&&(i=r(i)),o&&(o=r(o))),s){CF(this,i,o);const a=WJ(this,i,o,t);t=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:t,...i}}}function KJ(n){return window.getComputedStyle(n)}class YJ extends XF{readValueFromInstance(e,t){if(fc.has(t)){const i=Vw(t);return i&&i.default||0}else{const i=KJ(e),r=(P3(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return OF(e,t)}build(e,t,i,r){Pw(e,t,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Ow(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Gn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,r){k3(e,t,i,r)}}class QJ extends XF{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(fc.has(t)){const i=Vw(t);return i&&i.default||0}return t=U3.has(t)?t:Lw(t),e.getAttribute(t)}measureInstanceViewportBox(){return In()}scrapeMotionValuesFromProps(e,t){return H3(e,t)}build(e,t,i,r){Bw(e,t,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,i,r){z3(e,t,i,r)}mount(e){this.isSVGTag=Dw(e.tagName),super.mount(e)}}const qJ=(n,e)=>Rw(n)?new QJ(e,{enableHardwareAcceleration:!1}):new YJ(e,{enableHardwareAcceleration:!0}),ZJ={layout:{ProjectionNode:GF,MeasureLayout:FF}},eK={...RF,...qj,...BJ,...ZJ},jn=cj((n,e)=>Fj(n,e,eK,qJ));function tK({children:n,isValidProp:e,...t}){e&&O3(e),t={...I.useContext(M0),...t},t.isStatic=G3(()=>t.isStatic);const i=I.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return I.createElement(M0.Provider,{value:i},n)}function nK(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function JF(...n){return e=>n.forEach(t=>nK(t,e))}function vf(...n){return I.useCallback(JF(...n),n)}const KF=I.forwardRef((n,e)=>{const{children:t,...i}=n,r=I.Children.toArray(t),s=r.find(iK);if(s){const o=s.props.children,a=r.map(l=>l===s?I.Children.count(o)>1?I.Children.only(null):I.isValidElement(o)?o.props.children:null:l);return I.createElement(fS,Cn({},i,{ref:e}),I.isValidElement(o)?I.cloneElement(o,void 0,a):null)}return I.createElement(fS,Cn({},i,{ref:e}),t)});KF.displayName="Slot";const fS=I.forwardRef((n,e)=>{const{children:t,...i}=n;return I.isValidElement(t)?I.cloneElement(t,{...rK(i,t.props),ref:e?JF(e,t.ref):t.ref}):I.Children.count(t)>1?I.Children.only(null):null});fS.displayName="SlotClone";const YF=({children:n})=>I.createElement(I.Fragment,null,n);function iK(n){return I.isValidElement(n)&&n.type===YF}function rK(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?t[i]=(...a)=>{s(...a),r(...a)}:r&&(t[i]=r):i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}const sK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],hc=sK.reduce((n,e)=>{const t=I.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?KF:e;return I.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),I.createElement(a,Cn({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function oK(n,e){n&&Uh.flushSync(()=>n.dispatchEvent(e))}const aK=I.forwardRef((n,e)=>{var t;const{container:i=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=n;return i?tL.createPortal(I.createElement(hc.div,Cn({},r,{ref:e})),i):null}),lK=aK;var t2=Object.prototype.hasOwnProperty;function Rh(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&Rh(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(t2.call(n,t)&&++i&&!t2.call(e,t)||!(t in e)||!Rh(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function ep(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var ty=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};ty.prototype._test=function(e){var t=this.fn;try{Fu(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Fu(this.modifiers.slice(),t,this)(e)}catch{return!1}};ty.prototype._check=function(e){try{Fu(this.modifiers.slice(),this.fn,this)(e)}catch{if(Fu(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!Fu(this.modifiers.slice(),this.fn,this)(e))throw null};ty.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){qF(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?i(e):r(null)}).catch(function(s){return r(s)})})};function QF(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Fu(n,e,t){if(n.length){var i=n.shift(),r=Fu(n,e,t);return i.perform(r,t)}else return QF(e)}function qF(n,e,t){if(n.length){var i=n.shift(),r=qF(n,e,t);return i.performAsync(r,t)}else return function(s){return Promise.resolve(QF(e,"async")(s))}}var cK=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},Jw=function(n){function e(t,i,r,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),qs=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};qs.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return i.chain.push(new ty(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};qs.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new cK(t,e.simple,e.async)),this};qs.prototype._clone=function(){return new qs(this.chain.slice(),this.nextRuleModifiers.slice())};qs.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};qs.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new Jw(i,e,r))}}),t};qs.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new Jw(t,e,i)}})};qs.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){ZF(e,t.chain.slice(),i,r)})};function ZF(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){ZF(n,e,t,i)},function(s){i(new Jw(r,n,s))})}else t(n)}var n2=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function uK(n,e){return e===void 0&&(e=!1),{simple:function(t){return n2(t,e)||n.check(t)===void 0},async:function(t){return n2(t,e)||n.testAsync(t)}}}function qi(){return typeof Proxy<"u"?eN(new qs):dS(new qs)}var Ph={};qi.extend=function(n){Object.assign(Ph,n)};qi.clearCustomRules=function(){Ph={}};function eN(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=eN(n._clone());if(i in L0)return r._applyModifier(L0[i],i);if(i in Ph)return r._applyRule(Ph[i],i);if(i in hS)return r._applyRule(hS[i],i)}})}function dS(n){var e=function(r,s){return Object.keys(r).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=dS(s._clone()),u=c._applyRule(r[o],o).apply(void 0,a);return u}}),s},t=e(hS,n),i=e(Ph,t);return Object.keys(L0).forEach(function(r){Object.defineProperty(i,r,{get:function(){var s=dS(i._clone());return s._applyModifier(L0[r],r)}})}),i}var L0={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return mg(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(mg(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&mg(e).every(n)}},async:function(n){return function(e){return Promise.all(mg(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return i2(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return i2(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function i2(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function mg(n){return typeof n=="string"?n.split(""):n}var hS={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||fK;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return Zc("string")},boolean:function(){return Zc("boolean")},undefined:function(){return Zc("undefined")},null:function(){return Zc("null")},array:function(){return Zc("array")},object:function(){return Zc("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return dK(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:uK};function Zc(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function fK(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function dK(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(s){s.target=i,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var s=n[r];return s.testAsync((e||{})[r]).catch(function(o){o.target=r,t.push(o)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var Vt="colors",Pi="sizes",Je="space",hK={gap:Je,gridGap:Je,columnGap:Je,gridColumnGap:Je,rowGap:Je,gridRowGap:Je,inset:Je,insetBlock:Je,insetBlockEnd:Je,insetBlockStart:Je,insetInline:Je,insetInlineEnd:Je,insetInlineStart:Je,margin:Je,marginTop:Je,marginRight:Je,marginBottom:Je,marginLeft:Je,marginBlock:Je,marginBlockEnd:Je,marginBlockStart:Je,marginInline:Je,marginInlineEnd:Je,marginInlineStart:Je,padding:Je,paddingTop:Je,paddingRight:Je,paddingBottom:Je,paddingLeft:Je,paddingBlock:Je,paddingBlockEnd:Je,paddingBlockStart:Je,paddingInline:Je,paddingInlineEnd:Je,paddingInlineStart:Je,top:Je,right:Je,bottom:Je,left:Je,scrollMargin:Je,scrollMarginTop:Je,scrollMarginRight:Je,scrollMarginBottom:Je,scrollMarginLeft:Je,scrollMarginX:Je,scrollMarginY:Je,scrollMarginBlock:Je,scrollMarginBlockEnd:Je,scrollMarginBlockStart:Je,scrollMarginInline:Je,scrollMarginInlineEnd:Je,scrollMarginInlineStart:Je,scrollPadding:Je,scrollPaddingTop:Je,scrollPaddingRight:Je,scrollPaddingBottom:Je,scrollPaddingLeft:Je,scrollPaddingX:Je,scrollPaddingY:Je,scrollPaddingBlock:Je,scrollPaddingBlockEnd:Je,scrollPaddingBlockStart:Je,scrollPaddingInline:Je,scrollPaddingInlineEnd:Je,scrollPaddingInlineStart:Je,fontSize:"fontSizes",background:Vt,backgroundColor:Vt,backgroundImage:Vt,borderImage:Vt,border:Vt,borderBlock:Vt,borderBlockEnd:Vt,borderBlockStart:Vt,borderBottom:Vt,borderBottomColor:Vt,borderColor:Vt,borderInline:Vt,borderInlineEnd:Vt,borderInlineStart:Vt,borderLeft:Vt,borderLeftColor:Vt,borderRight:Vt,borderRightColor:Vt,borderTop:Vt,borderTopColor:Vt,caretColor:Vt,color:Vt,columnRuleColor:Vt,fill:Vt,outline:Vt,outlineColor:Vt,stroke:Vt,textDecorationColor:Vt,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Pi,minBlockSize:Pi,maxBlockSize:Pi,inlineSize:Pi,minInlineSize:Pi,maxInlineSize:Pi,width:Pi,minWidth:Pi,maxWidth:Pi,height:Pi,minHeight:Pi,maxHeight:Pi,flexBasis:Pi,gridTemplateColumns:Pi,gridTemplateRows:Pi,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},pK=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,yf=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(s=>JSON.stringify(s,pK))(e);return r in n?n[r]:n[r]=t(e,...i)}},Hl=Symbol.for("sxs.internal"),Kw=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),r2=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:mK}=Object.prototype,pS=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),gK=/\s+(?![^()]*\))/,eu=n=>e=>n(...typeof e=="string"?String(e).split(gK):[e]),s2={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:eu((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:eu((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:eu((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:eu((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:eu((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:eu((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},W_=/([\d.]+)([^]*)/,vK=(n,e)=>n.length?n.reduce((t,i)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r)),t),[]):e,yK=(n,e)=>n in xK&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,i,r,s)=>i+(r==="stretch"?`-moz-available${s};${pS(n)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${pS(n)}:${i}fit-content`)+s):String(e),xK={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},ko=n=>n?n+"-":"",tN=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(i,r,s,o,a)=>o=="$"==!!s?i:(r||o=="--"?"calc(":"")+"var(--"+(o==="$"?ko(e)+(a.includes("$")?"":ko(t))+a.replace(/\$/g,"-"):a)+")"+(r||o=="--"?"*"+(r||"")+(s||"1")+")":"")),_K=/\s*,\s*(?![^()]*\))/,AK=Object.prototype.toString,Mu=(n,e,t,i,r)=>{let s,o,a;const l=(c,u,d)=>{let p,m;const g=x=>{for(p in x){const A=p.charCodeAt(0)===64,S=A&&Array.isArray(x[p])?x[p]:[x[p]];for(m of S){const w=/[A-Z]/.test(v=p)?v:v.replace(/-[^]/g,C=>C[1].toUpperCase()),T=typeof m=="object"&&m&&m.toString===AK&&(!i.utils[w]||!u.length);if(w in i.utils&&!T){const C=i.utils[w];if(C!==o){o=C,g(C(m)),o=null;continue}}else if(w in s2){const C=s2[w];if(C!==a){a=C,g(C(m)),a=null;continue}}if(A&&(_=p.slice(1)in i.media?"@media "+i.media[p.slice(1)]:p,p=_.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(C,R,D,P,B,N)=>{const j=W_.test(R),z=.0625*(j?-1:1),[$,J]=j?[P,R]:[R,P];return"("+(D[0]==="="?"":D[0]===">"===j?"max-":"min-")+$+":"+(D[0]!=="="&&D.length===1?J.replace(W_,(Q,ee,O)=>Number(ee)+z*(D===">"?1:-1)+O):J)+(B?") and ("+(B[0]===">"?"min-":"max-")+$+":"+(B.length===1?N.replace(W_,(Q,ee,O)=>Number(ee)+z*(B===">"?-1:1)+O):N):"")+")"})),T){const C=A?d.concat(p):[...d],R=A?[...u]:vK(u,p.split(_K));s!==void 0&&r(o2(...s)),s=void 0,l(m,R,C)}else s===void 0&&(s=[[],u,d]),p=A||p.charCodeAt(0)!==36?p:`--${ko(i.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=T?m:typeof m=="number"?m&&w in SK?String(m)+"px":String(m):tN(yK(w,m??""),i.prefix,i.themeMap[w]),s[0].push(`${A?`${p} `:`${pS(p)}:`}${m}`)}}var _,v};g(c),s!==void 0&&r(o2(...s)),s=void 0};l(n,e,t)},o2=(n,e,t)=>`${t.map(i=>`${i}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,SK={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},a2=n=>String.fromCharCode(n+(n>25?39:97)),Gl=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=a2(t%52)+i;return a2(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),Md=["themed","global","styled","onevar","resonevar","allvar","inline"],EK=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},wK=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(r[o-1]&&(l=r[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},i=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const r=Object(n).styleSheets||[];for(const a of r)if(EK(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const d=Object(c[l+1]);if(d.type!==4)continue;++l;const{cssText:p}=u;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),g=Md[m[0]];g&&(e||(e={sheet:a,reset:i,rules:{},toString:t}),e.rules[g]={group:d,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,d){this.cssRules.splice(d,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:i,toString:t}}const{sheet:s,rules:o}=e;for(let a=Md.length-1;a>=0;--a){const l=Md[a];if(!o[l]){const c=Md[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}MK(o[l])}};return i(),e},MK=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},pd=Symbol(),TK=yf(),l2=(n,e)=>TK(n,()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[Hl]){i.type==null&&(i.type=r[Hl].type);for(const s of r[Hl].composers)i.composers.add(s)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(CK(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),bK(n,i,e)}),CK=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const s=`${ko(r.prefix)}c-${Gl(i)}`,o=[],a=[],l=Object.create(null),c=[];for(const p in t)l[p]=String(t[p]);if(typeof n=="object"&&n)for(const p in n){u=l,d=p,mK.call(u,d)||(l[p]="undefined");const m=n[p];for(const g in m){const x={[p]:String(g)};String(g)==="undefined"&&c.push(p);const _=m[g],v=[x,_,!r2(_)];o.push(v)}}var u,d;if(typeof e=="object"&&e)for(const p of e){let{css:m,...g}=p;m=typeof m=="object"&&m||{};for(const _ in g)g[_]=String(g[_]);const x=[g,m,!r2(m)];a.push(x)}return[s,i,o,a,l,c]},bK=(n,e,t)=>{const[i,r,s,o]=RK(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(d=>{function p(){for(let m=0;m<p[pd].length;m++){const[g,x]=p[pd][m];d.rules[g].apply(x)}return p[pd]=[],null}return p[pd]=[],p.rules={},Md.forEach(m=>p.rules[m]={apply:g=>p[pd].push([m,g])}),p})(t):null,l=(a||t).rules,c=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,u=d=>{d=typeof d=="object"&&d||PK;const{css:p,...m}=d,g={};for(const v in s)if(delete m[v],v in d){let A=d[v];typeof A=="object"&&A?g[v]={"@initial":s[v],...A}:(A=String(A),g[v]=A!=="undefined"||o.has(v)?A:s[v])}else g[v]=s[v];const x=new Set([...r]);for(const[v,A,S,w]of e.composers){t.rules.styled.cache.has(v)||(t.rules.styled.cache.add(v),Mu(A,[`.${v}`],[],n,R=>{l.styled.apply(R)}));const T=c2(S,g,n.media),C=c2(w,g,n.media,!0);for(const R of T)if(R!==void 0)for(const[D,P,B]of R){const N=`${v}-${Gl(P)}-${D}`;x.add(N);const j=(B?t.rules.resonevar:t.rules.onevar).cache,z=B?l.resonevar:l.onevar;j.has(N)||(j.add(N),Mu(P,[`.${N}`],[],n,$=>{z.apply($)}))}for(const R of C)if(R!==void 0)for(const[D,P]of R){const B=`${v}-${Gl(P)}-${D}`;x.add(B),t.rules.allvar.cache.has(B)||(t.rules.allvar.cache.add(B),Mu(P,[`.${B}`],[],n,N=>{l.allvar.apply(N)}))}}if(typeof p=="object"&&p){const v=`${i}-i${Gl(p)}-css`;x.add(v),t.rules.inline.cache.has(v)||(t.rules.inline.cache.add(v),Mu(p,[`.${v}`],[],n,A=>{l.inline.apply(A)}))}for(const v of String(d.className||"").trim().split(/\s+/))v&&x.add(v);const _=m.className=[...x].join(" ");return{type:e.type,className:_,selector:c,props:m,toString:()=>_,deferredInjector:a}};return Kw(u,{className:i,selector:c,[Hl]:e,toString:()=>(t.rules.styled.cache.has(i)||u(),i)})},RK=n=>{let e="";const t=[],i={},r=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),r.push(...a);for(const l in o){const c=o[l];(i[l]===void 0||c!=="undefined"||a.includes(c))&&(i[l]=c)}}return[e,t,i,new Set(r)]},c2=(n,e,t,i)=>{const r=[];e:for(let[s,o,a]of n){if(a)continue;let l,c=0,u=!1;for(l in s){const d=s[l];let p=e[l];if(p!==d){if(typeof p!="object"||!p)continue e;{let m,g,x=0;for(const _ in p){if(d===String(p[_])){if(_!=="@initial"){const v=_.slice(1);(g=g||[]).push(v in t?t[v]:_.replace(/^@media ?/,"")),u=!0}c+=x,m=!0}++x}if(g&&g.length&&(o={["@media "+g.join(", ")]:o}),!m)continue e}}}(r[c]=r[c]||[]).push([i?"cv":`${l}-${s[l]}`,o,u])}return r},PK={},IK=yf(),BK=(n,e)=>IK(n,()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=Gl(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(r["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete r["@import"]}Mu(r,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return Kw(i,{toString:i})}),DK=yf(),LK=(n,e)=>DK(n,()=>t=>{const i=`${ko(n.prefix)}k-${Gl(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const s=[];Mu(t,[],[],n,a=>s.push(a));const o=`@keyframes ${i}{${s.join("")}}`;e.rules.global.apply(o)}return i};return Kw(r,{get name(){return r()},toString:r})}),OK=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+ko(this.prefix)+ko(this.scale)+this.token}toString(){return this.computedValue}},FK=yf(),NK=(n,e)=>FK(n,()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${ko(n.prefix)}t-${Gl(i)}`}`,s={},o=[];for(const l in i){s[l]={};for(const c in i[l]){const u=`--${ko(n.prefix)}${l}-${c}`,d=tN(String(i[l][c]),n.prefix,l);s[l][c]=new OK(c,d,l,n.prefix),o.push(`${u}:${d}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${i===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:r,toString:a}}),kK=yf(),UK=yf(),zK=n=>{const e=(t=>{let i=!1;const r=kK(t,s=>{i=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...hK},utils:typeof s.utils=="object"&&s.utils||{}},d=wK(l),p={css:l2(u,d),globalCss:BK(u,d),keyframes:LK(u,d),createTheme:NK(u,d),reset(){d.reset(),p.theme.toString()},theme:{},sheet:d,config:u,prefix:o,getCssText:d.toString,toString:d.toString};return String(p.theme=p.createTheme(c)),p});return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>UK(t,()=>{const r=l2(t,i);return(...s)=>{const o=r(...s),a=o[Hl].type,l=K.forwardRef((c,u)=>{const d=c&&c.as||a,{props:p,deferredInjector:m}=o(c);return delete p.as,p.ref=u,m?K.createElement(K.Fragment,null,K.createElement(d,p),K.createElement(m,null)):K.createElement(d,p)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Hl]=o[Hl],l}}))(e),e};function HK(n,e,t){return Math.max(e,Math.min(n,t))}const wi={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function u2(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function f2(n,e,t,i=.15){return i===0?HK(n,e,t):n<e?-u2(e-n,t-e,i)+e:n>t?+u2(n-t,t-e,i)+t:n}function GK(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[f2(e,s,o,i),f2(t,a,l,r)]}function VK(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function WK(n){var e=VK(n,"string");return typeof e=="symbol"?e:String(e)}function ji(n,e,t){return e=WK(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function d2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function gn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?d2(Object(t),!0).forEach(function(i){ji(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const nN={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function h2(n){return n?n[0].toUpperCase()+n.slice(1):""}const $K=["enter","leave"];function jK(n=!1,e){return n&&!$K.includes(e)}function XK(n,e="",t=!1){const i=nN[n],r=i&&i[e]||e;return"on"+h2(n)+h2(r)+(jK(t,r)?"Capture":"")}const JK=["gotpointercapture","lostpointercapture"];function KK(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=JK.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function YK(n,e=""){const t=nN[n],i=t&&t[e]||e;return n+i}function ny(n){return"touches"in n}function iN(n){return ny(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function QK(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function qK(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function rN(n){return ny(n)?qK(n)[0]:n}function ZK(n){return QK(n).map(e=>e.identifier)}function $_(n){const e=rN(n);return ny(n)?e.identifier:e.pointerId}function p2(n){const e=rN(n);return[e.clientX,e.clientY]}function eY(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function O0(n,...e){return typeof n=="function"?n(...e):n}function tY(){}function nY(...n){return n.length===0?tY:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function m2(n,e){return Object.assign({},e,n||{})}const iY=32;class rY{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?O0(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,eY(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const C=t._delta.map(Math.abs);wi.addTo(t._distance,C)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=i.threshold,{_step:u,values:d}=t;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&d[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&d[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[C,R]=d;p[0]=u[0]!==!1?C-u[0]:0,p[1]=u[1]!==!1?R-u[1]:0}else p[0]=u[0]!==!1?o-u[0]:0,p[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const m=t.offset,g=t._active&&!t._blocked||t.active;g&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=O0(i.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[x,_]=t.offset,[[v,A],[S,w]]=t._bounds;t.overflow=[x<v?-1:x>A?1:0,_<S?-1:_>w?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const T=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=GK(t._bounds,t.offset,T),t.delta=wi.sub(t.offset,m),this.computeMovement(),g&&(!t.last||s>iY)){t.delta=wi.sub(t.offset,m);const C=t.delta.map(Math.abs);wi.addTo(t.distance,C),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[C[0]/s,C[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(gn(gn(gn({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function sY([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class oY extends rY{constructor(...e){super(...e),ji(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=wi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=wi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[iN(e)]:i.axisThreshold;t.axis=sY(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const aY=n=>n,g2=.15,sN={enabled(n=!0){return n},eventOptions(n,e,t){return gn(gn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[g2,g2];case!1:return[0,0];default:return wi.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return wi.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||aY},threshold(n){return wi.toVector(n,0)}},lY=0,tp=gn(gn({},sN),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=lY){return n},bounds(n={}){if(typeof n=="function")return s=>tp.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),v2={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class cY extends oY{constructor(...e){super(...e),ji(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=tp.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=$_(e),i._pointerActive=!0,this.computeValues(p2(e)),this.computeInitial(),t.preventScrollAxis&&iN(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=$_(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=p2(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=wi.sub(s,t._values),this.computeValues(s)),wi.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=$_(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[d,p]=i.swipe.velocity,[m,g]=i.swipe.distance,x=i.swipe.duration;if(t.elapsedTime<x){const _=Math.abs(a/t.timeDelta),v=Math.abs(l/t.timeDelta);_>d&&Math.abs(c)>m&&(t.swipe[0]=Math.sign(a)),v>p&&Math.abs(u)>g&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,uY(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=v2[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,wi.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in v2&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function uY(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const np=typeof window<"u"&&window.document&&window.document.createElement;function fY(){return np&&"ontouchstart"in window}function y2(){return fY()||np&&window.navigator.maxTouchPoints>1}function dY(){return np&&"onpointerdown"in window}function hY(){return np&&"exitPointerLock"in window.document}function pY(){try{return"constructor"in GestureEvent}catch{return!1}}const Ur={isBrowser:np,gesture:pY(),touch:y2(),touchscreen:y2(),pointer:dY(),pointerLock:hY()},mY=250,gY=180,vY=.5,yY=50,xY=250,_Y=10,x2={mouse:0,touch:0,pen:8},AY=gn(gn({},tp),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Ur.pointerLock,Ur.touch&&t?"touch":this.pointerLock?"mouse":Ur.pointer&&!r?"pointer":Ur.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?mY:void 0,!(!Ur.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=wi.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=vY,distance:e=yY,duration:t=xY}={}){return{velocity:this.transform(wi.toVector(n)),distance:this.transform(wi.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return gY;case!1:return 0;default:return n}},axisThreshold(n){return n?gn(gn({},x2),n):x2},keyboardDisplacement(n=_Y){return n}});gn(gn({},sN),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!Ur.touch&&Ur.gesture)return"gesture";if(Ur.touch&&i)return"touch";if(Ur.touchscreen){if(Ur.pointer)return"pointer";if(Ur.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=m2(O0(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=m2(O0(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",wi.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});gn(gn({},tp),{},{mouseOnly:(n=!0)=>n});gn(gn({},tp),{},{mouseOnly:(n=!0)=>n});const oN=new Map,mS=new Map;function SY(n){oN.set(n.key,n.engine),mS.set(n.key,n.resolver)}const EY={key:"drag",engine:cY,resolver:AY};function wY(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function MY(n,e){if(n==null)return{};var t=wY(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const TY={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Ur.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},CY=["target","eventOptions","window","enabled","transform"];function Xg(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=Xg(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function bY(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,c=MY(i,CY);if(t.shared=Xg({target:r,eventOptions:s,window:o,enabled:a,transform:l},TY),e){const u=mS.get(e);t[e]=Xg(gn({shared:t.shared},c),u)}else for(const u in c){const d=mS.get(u);d&&(t[u]=Xg(gn({shared:t.shared},c[u]),d))}return t}class aN{constructor(e,t){ji(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=YK(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=gn(gn({},l),s);e.addEventListener(a,r,c);const u=()=>{e.removeEventListener(a,r,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class RY{constructor(){ji(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class PY{constructor(e){ji(this,"gestures",new Set),ji(this,"_targetEventStore",new aN(this)),ji(this,"gestureEventStores",{}),ji(this,"gestureTimeoutStores",{}),ji(this,"handlers",{}),ji(this,"config",{}),ji(this,"pointerIds",new Set),ji(this,"touchIds",new Set),ji(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),IY(this,e)}setEventIds(e){if(ny(e))return this.touchIds=new Set(ZK(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=bY(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=_2(i,a.eventOptions,!!r);if(a.enabled){const c=oN.get(o);new c(this,e,o).bind(l)}}const s=_2(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](gn(gn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=nY(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=KK(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}}function tu(n,e){n.gestures.add(e),n.gestureEventStores[e]=new aN(n,e),n.gestureTimeoutStores[e]=new RY}function IY(n,e){e.drag&&tu(n,"drag"),e.wheel&&tu(n,"wheel"),e.scroll&&tu(n,"scroll"),e.move&&tu(n,"move"),e.pinch&&tu(n,"pinch"),e.hover&&tu(n,"hover")}const _2=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,d=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=a?i:XK(i,r,u);t&&d&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)};function BY(n,e={},t,i){const r=K.useMemo(()=>new PY(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),K.useEffect(r.effect.bind(r)),K.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function DY(n,e){return SY(EY),BY({drag:n},e||{},"drag")}function yo(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function lN(n,e=[]){let t=[];function i(s,o){const a=I.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:p,children:m,...g}=d,x=(p==null?void 0:p[n][l])||a,_=I.useMemo(()=>g,Object.values(g));return I.createElement(x.Provider,{value:_},m)}function u(d,p){const m=(p==null?void 0:p[n][l])||a,g=I.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const r=()=>{const s=t.map(o=>I.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return I.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[i,LY(r,...e)]}function LY(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function xf(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),I.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function OY(n,e=globalThis==null?void 0:globalThis.document){const t=xf(n);I.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[t,e])}const gS="dismissableLayer.update",FY="dismissableLayer.pointerDownOutside",NY="dismissableLayer.focusOutside";let A2;const kY=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),UY=I.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=n,u=I.useContext(kY),[d,p]=I.useState(null),m=(t=d==null?void 0:d.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,g]=I.useState({}),x=vf(e,D=>p(D)),_=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(v),S=d?_.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,T=S>=A,C=zY(D=>{const P=D.target,B=[...u.branches].some(N=>N.contains(P));!T||B||(s==null||s(D),a==null||a(D),D.defaultPrevented||l==null||l())},m),R=HY(D=>{const P=D.target;[...u.branches].some(N=>N.contains(P))||(o==null||o(D),a==null||a(D),D.defaultPrevented||l==null||l())},m);return OY(D=>{S===u.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&l&&(D.preventDefault(),l()))},m),I.useEffect(()=>{if(d)return i&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(A2=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),S2(),()=>{i&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=A2)}},[d,m,i,u]),I.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),S2())},[d,u]),I.useEffect(()=>{const D=()=>g({});return document.addEventListener(gS,D),()=>document.removeEventListener(gS,D)},[]),I.createElement(hc.div,Cn({},c,{ref:x,style:{pointerEvents:w?T?"auto":"none":void 0,...n.style},onFocusCapture:yo(n.onFocusCapture,R.onFocusCapture),onBlurCapture:yo(n.onBlurCapture,R.onBlurCapture),onPointerDownCapture:yo(n.onPointerDownCapture,C.onPointerDownCapture)}))});function zY(n,e=globalThis==null?void 0:globalThis.document){const t=xf(n),i=I.useRef(!1),r=I.useRef(()=>{});return I.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let u=function(){cN(FY,t,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=u,e.addEventListener("click",r.current,{once:!0})):u()}i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function HY(n,e=globalThis==null?void 0:globalThis.document){const t=xf(n),i=I.useRef(!1);return I.useEffect(()=>{const r=s=>{s.target&&!i.current&&cN(NY,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function S2(){const n=new CustomEvent(gS);document.dispatchEvent(n)}function cN(n,e,t,{discrete:i}){const r=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?oK(r,s):r.dispatchEvent(s)}const nf=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},GY=dz["useId".toString()]||(()=>{});let VY=0;function WY(n){const[e,t]=I.useState(GY());return nf(()=>{n||t(i=>i??String(VY++))},[n]),n||(e?`radix-${e}`:"")}const $Y=["top","right","bottom","left"],Ha=Math.min,dr=Math.max,F0=Math.round,gg=Math.floor,Ga=n=>({x:n,y:n}),jY={left:"right",right:"left",bottom:"top",top:"bottom"},XY={start:"end",end:"start"};function vS(n,e,t){return dr(n,Ha(e,t))}function Uo(n,e){return typeof n=="function"?n(e):n}function zo(n){return n.split("-")[0]}function _f(n){return n.split("-")[1]}function Yw(n){return n==="x"?"y":"x"}function Qw(n){return n==="y"?"height":"width"}function Af(n){return["top","bottom"].includes(zo(n))?"y":"x"}function qw(n){return Yw(Af(n))}function JY(n,e,t){t===void 0&&(t=!1);const i=_f(n),r=qw(n),s=Qw(r);let o=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=N0(o)),[o,N0(o)]}function KY(n){const e=N0(n);return[yS(n),e,yS(e)]}function yS(n){return n.replace(/start|end/g,e=>XY[e])}function YY(n,e,t){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function QY(n,e,t,i){const r=_f(n);let s=YY(zo(n),t==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(yS)))),s}function N0(n){return n.replace(/left|right|bottom|top/g,e=>jY[e])}function qY(n){return{top:0,right:0,bottom:0,left:0,...n}}function uN(n){return typeof n!="number"?qY(n):{top:n,right:n,bottom:n,left:n}}function k0(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function E2(n,e,t){let{reference:i,floating:r}=n;const s=Af(e),o=qw(e),a=Qw(o),l=zo(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,p=i[a]/2-r[a]/2;let m;switch(l){case"top":m={x:u,y:i.y-r.height};break;case"bottom":m={x:u,y:i.y+i.height};break;case"right":m={x:i.x+i.width,y:d};break;case"left":m={x:i.x-r.width,y:d};break;default:m={x:i.x,y:i.y}}switch(_f(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const ZY=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:u,y:d}=E2(c,i,l),p=i,m={},g=0;for(let x=0;x<a.length;x++){const{name:_,fn:v}=a[x],{x:A,y:S,data:w,reset:T}=await v({x:u,y:d,initialPlacement:i,placement:p,strategy:r,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});if(u=A??u,d=S??d,m={...m,[_]:{...m[_],...w}},T&&g<=50){g++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):T.rects),{x:u,y:d}=E2(c,p,l)),x=-1;continue}}return{x:u,y:d,placement:p,strategy:r,middlewareData:m}};async function Ih(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=Uo(e,n),g=uN(m),_=a[p?d==="floating"?"reference":"floating":d],v=k0(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(_)))==null||t?_:_.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),A=d==="floating"?{...o.floating,x:i,y:r}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},T=k0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:A,offsetParent:S,strategy:l}):A);return{top:(v.top-T.top+g.top)/w.y,bottom:(T.bottom-v.bottom+g.bottom)/w.y,left:(v.left-T.left+g.left)/w.x,right:(T.right-v.right+g.right)/w.x}}const w2=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:r,rects:s,platform:o,elements:a}=e,{element:l,padding:c=0}=Uo(n,e)||{};if(l==null)return{};const u=uN(c),d={x:t,y:i},p=qw(r),m=Qw(p),g=await o.getDimensions(l),x=p==="y",_=x?"top":"left",v=x?"bottom":"right",A=x?"clientHeight":"clientWidth",S=s.reference[m]+s.reference[p]-d[p]-s.floating[m],w=d[p]-s.reference[p],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let C=T?T[A]:0;(!C||!await(o.isElement==null?void 0:o.isElement(T)))&&(C=a.floating[A]||s.floating[m]);const R=S/2-w/2,D=C/2-g[m]/2-1,P=Ha(u[_],D),B=Ha(u[v],D),N=P,j=C-g[m]-B,z=C/2-g[m]/2+R,$=vS(N,z,j),Q=_f(r)!=null&&z!=$&&s.reference[m]/2-(z<N?P:B)-g[m]/2<0?z<N?N-z:j-z:0;return{[p]:d[p]-Q,data:{[p]:$,centerOffset:z-$+Q}}}}),eQ=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...x}=Uo(n,e),_=zo(i),v=zo(o)===o,A=await(a.isRTL==null?void 0:a.isRTL(l.floating)),S=d||(v||!g?[N0(o)]:KY(o));!d&&m!=="none"&&S.push(...QY(o,g,m,A));const w=[o,...S],T=await Ih(e,x),C=[];let R=((t=r.flip)==null?void 0:t.overflows)||[];if(c&&C.push(T[_]),u){const N=JY(i,s,A);C.push(T[N[0]],T[N[1]])}if(R=[...R,{placement:i,overflows:C}],!C.every(N=>N<=0)){var D,P;const N=(((D=r.flip)==null?void 0:D.index)||0)+1,j=w[N];if(j)return{data:{index:N,overflows:R},reset:{placement:j}};let z=(P=R.filter($=>$.overflows[0]<=0).sort(($,J)=>$.overflows[1]-J.overflows[1])[0])==null?void 0:P.placement;if(!z)switch(p){case"bestFit":{var B;const $=(B=R.map(J=>[J.placement,J.overflows.filter(Q=>Q>0).reduce((Q,ee)=>Q+ee,0)]).sort((J,Q)=>J[1]-Q[1])[0])==null?void 0:B[0];$&&(z=$);break}case"initialPlacement":z=o;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function M2(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function T2(n){return $Y.some(e=>n[e]>=0)}const tQ=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...r}=Uo(n,e);switch(i){case"referenceHidden":{const s=await Ih(e,{...r,elementContext:"reference"}),o=M2(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:T2(o)}}}case"escaped":{const s=await Ih(e,{...r,altBoundary:!0}),o=M2(s,t.floating);return{data:{escapedOffsets:o,escaped:T2(o)}}}default:return{}}}}};async function nQ(n,e){const{placement:t,platform:i,elements:r}=n,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=zo(t),a=_f(t),l=Af(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=Uo(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const iQ=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:i}=e,r=await nQ(e,n);return{x:t+r.x,y:i+r.y,data:r}}}},rQ=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:v,y:A}=_;return{x:v,y:A}}},...l}=Uo(n,e),c={x:t,y:i},u=await Ih(e,l),d=Af(zo(r)),p=Yw(d);let m=c[p],g=c[d];if(s){const _=p==="y"?"top":"left",v=p==="y"?"bottom":"right",A=m+u[_],S=m-u[v];m=vS(A,m,S)}if(o){const _=d==="y"?"top":"left",v=d==="y"?"bottom":"right",A=g+u[_],S=g-u[v];g=vS(A,g,S)}const x=a.fn({...e,[p]:m,[d]:g});return{...x,data:{x:x.x-t,y:x.y-i}}}}},sQ=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Uo(n,e),u={x:t,y:i},d=Af(r),p=Yw(d);let m=u[p],g=u[d];const x=Uo(a,e),_=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const S=p==="y"?"height":"width",w=s.reference[p]-s.floating[S]+_.mainAxis,T=s.reference[p]+s.reference[S]-_.mainAxis;m<w?m=w:m>T&&(m=T)}if(c){var v,A;const S=p==="y"?"width":"height",w=["top","left"].includes(zo(r)),T=s.reference[d]-s.floating[S]+(w&&((v=o.offset)==null?void 0:v[d])||0)+(w?0:_.crossAxis),C=s.reference[d]+s.reference[S]+(w?0:((A=o.offset)==null?void 0:A[d])||0)-(w?_.crossAxis:0);g<T?g=T:g>C&&(g=C)}return{[p]:m,[d]:g}}}},oQ=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:i,platform:r,elements:s}=e,{apply:o=()=>{},...a}=Uo(n,e),l=await Ih(e,a),c=zo(t),u=_f(t),d=Af(t)==="y",{width:p,height:m}=i.floating;let g,x;c==="top"||c==="bottom"?(g=c,x=u===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(x=c,g=u==="end"?"top":"bottom");const _=m-l[g],v=p-l[x],A=!e.middlewareData.shift;let S=_,w=v;if(d){const C=p-l.left-l.right;w=u||A?Ha(v,C):C}else{const C=m-l.top-l.bottom;S=u||A?Ha(_,C):C}if(A&&!u){const C=dr(l.left,0),R=dr(l.right,0),D=dr(l.top,0),P=dr(l.bottom,0);d?w=p-2*(C!==0||R!==0?C+R:dr(l.left,l.right)):S=m-2*(D!==0||P!==0?D+P:dr(l.top,l.bottom))}await o({...e,availableWidth:w,availableHeight:S});const T=await r.getDimensions(s.floating);return p!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function Va(n){return fN(n)?(n.nodeName||"").toLowerCase():"#document"}function yr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Wo(n){var e;return(e=(fN(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function fN(n){return n instanceof Node||n instanceof yr(n).Node}function Ho(n){return n instanceof Element||n instanceof yr(n).Element}function Zs(n){return n instanceof HTMLElement||n instanceof yr(n).HTMLElement}function C2(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof yr(n).ShadowRoot}function ip(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=Jr(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function aQ(n){return["table","td","th"].includes(Va(n))}function Zw(n){const e=eM(),t=Jr(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function lQ(n){let e=rf(n);for(;Zs(e)&&!iy(e);){if(Zw(e))return e;e=rf(e)}return null}function eM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function iy(n){return["html","body","#document"].includes(Va(n))}function Jr(n){return yr(n).getComputedStyle(n)}function ry(n){return Ho(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function rf(n){if(Va(n)==="html")return n;const e=n.assignedSlot||n.parentNode||C2(n)&&n.host||Wo(n);return C2(e)?e.host:e}function dN(n){const e=rf(n);return iy(e)?n.ownerDocument?n.ownerDocument.body:n.body:Zs(e)&&ip(e)?e:dN(e)}function U0(n,e){var t;e===void 0&&(e=[]);const i=dN(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=yr(i);return r?e.concat(s,s.visualViewport||[],ip(i)?i:[]):e.concat(i,U0(i))}function hN(n){const e=Jr(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Zs(n),s=r?n.offsetWidth:t,o=r?n.offsetHeight:i,a=F0(t)!==s||F0(i)!==o;return a&&(t=s,i=o),{width:t,height:i,$:a}}function tM(n){return Ho(n)?n:n.contextElement}function Nu(n){const e=tM(n);if(!Zs(e))return Ga(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=hN(e);let o=(s?F0(t.width):t.width)/i,a=(s?F0(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const cQ=Ga(0);function pN(n){const e=yr(n);return!eM()||!e.visualViewport?cQ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function uQ(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==yr(n)?!1:e}function tc(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=tM(n);let o=Ga(1);e&&(i?Ho(i)&&(o=Nu(i)):o=Nu(n));const a=uQ(s,t,i)?pN(s):Ga(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const p=yr(s),m=i&&Ho(i)?yr(i):i;let g=p.frameElement;for(;g&&i&&m!==p;){const x=Nu(g),_=g.getBoundingClientRect(),v=Jr(g),A=_.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,S=_.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=A,c+=S,g=yr(g).frameElement}}return k0({width:u,height:d,x:l,y:c})}function fQ(n){let{rect:e,offsetParent:t,strategy:i}=n;const r=Zs(t),s=Wo(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},a=Ga(1);const l=Ga(0);if((r||!r&&i!=="fixed")&&((Va(t)!=="body"||ip(s))&&(o=ry(t)),Zs(t))){const c=tc(t);a=Nu(t),l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function dQ(n){return Array.from(n.getClientRects())}function mN(n){return tc(Wo(n)).left+ry(n).scrollLeft}function hQ(n){const e=Wo(n),t=ry(n),i=n.ownerDocument.body,r=dr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=dr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+mN(n);const a=-t.scrollTop;return Jr(i).direction==="rtl"&&(o+=dr(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function pQ(n,e){const t=yr(n),i=Wo(n),r=t.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=eM();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function mQ(n,e){const t=tc(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,s=Zs(n)?Nu(n):Ga(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function b2(n,e,t){let i;if(e==="viewport")i=pQ(n,t);else if(e==="document")i=hQ(Wo(n));else if(Ho(e))i=mQ(e,t);else{const r=pN(n);i={...e,x:e.x-r.x,y:e.y-r.y}}return k0(i)}function gN(n,e){const t=rf(n);return t===e||!Ho(t)||iy(t)?!1:Jr(t).position==="fixed"||gN(t,e)}function gQ(n,e){const t=e.get(n);if(t)return t;let i=U0(n).filter(a=>Ho(a)&&Va(a)!=="body"),r=null;const s=Jr(n).position==="fixed";let o=s?rf(n):n;for(;Ho(o)&&!iy(o);){const a=Jr(o),l=Zw(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ip(o)&&!l&&gN(n,o))?i=i.filter(u=>u!==o):r=a,o=rf(o)}return e.set(n,i),i}function vQ(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const o=[...t==="clippingAncestors"?gQ(e,this._c):[].concat(t),i],a=o[0],l=o.reduce((c,u)=>{const d=b2(e,u,r);return c.top=dr(d.top,c.top),c.right=Ha(d.right,c.right),c.bottom=Ha(d.bottom,c.bottom),c.left=dr(d.left,c.left),c},b2(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function yQ(n){return hN(n)}function xQ(n,e,t){const i=Zs(e),r=Wo(e),s=t==="fixed",o=tc(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ga(0);if(i||!i&&!s)if((Va(e)!=="body"||ip(r))&&(a=ry(e)),i){const c=tc(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else r&&(l.x=mN(r));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function R2(n,e){return!Zs(n)||Jr(n).position==="fixed"?null:e?e(n):n.offsetParent}function vN(n,e){const t=yr(n);if(!Zs(n))return t;let i=R2(n,e);for(;i&&aQ(i)&&Jr(i).position==="static";)i=R2(i,e);return i&&(Va(i)==="html"||Va(i)==="body"&&Jr(i).position==="static"&&!Zw(i))?t:i||lQ(n)||t}const _Q=async function(n){let{reference:e,floating:t,strategy:i}=n;const r=this.getOffsetParent||vN,s=this.getDimensions;return{reference:xQ(e,await r(t),i),floating:{x:0,y:0,...await s(t)}}};function AQ(n){return Jr(n).direction==="rtl"}const SQ={convertOffsetParentRelativeRectToViewportRelativeRect:fQ,getDocumentElement:Wo,getClippingRect:vQ,getOffsetParent:vN,getElementRects:_Q,getClientRects:dQ,getDimensions:yQ,getScale:Nu,isElement:Ho,isRTL:AQ};function EQ(n,e){let t=null,i;const r=Wo(n);function s(){clearTimeout(i),t&&t.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:p}=n.getBoundingClientRect();if(a||e(),!d||!p)return;const m=gg(u),g=gg(r.clientWidth-(c+d)),x=gg(r.clientHeight-(u+p)),_=gg(c),A={rootMargin:-m+"px "+-g+"px "+-x+"px "+-_+"px",threshold:dr(0,Ha(1,l))||1};let S=!0;function w(T){const C=T[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},100)}S=!1}try{t=new IntersectionObserver(w,{...A,root:r.ownerDocument})}catch{t=new IntersectionObserver(w,A)}t.observe(n)}return o(!0),s}function wQ(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=tM(n),u=r||s?[...c?U0(c):[],...U0(e)]:[];u.forEach(v=>{r&&v.addEventListener("scroll",t,{passive:!0}),s&&v.addEventListener("resize",t)});const d=c&&a?EQ(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(v=>{let[A]=v;A&&A.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let g,x=l?tc(n):null;l&&_();function _(){const v=tc(n);x&&(v.x!==x.x||v.y!==x.y||v.width!==x.width||v.height!==x.height)&&t(),x=v,g=requestAnimationFrame(_)}return t(),()=>{u.forEach(v=>{r&&v.removeEventListener("scroll",t),s&&v.removeEventListener("resize",t)}),d&&d(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const MQ=(n,e,t)=>{const i=new Map,r={platform:SQ,...t},s={...r.platform,_c:i};return ZY(n,e,{...r,platform:s})},TQ=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:r}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?w2({element:i.current,padding:r}).fn(t):{}:i?w2({element:i,padding:r}).fn(t):{}}}};var Jg=typeof document<"u"?I.useLayoutEffect:I.useEffect;function z0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!z0(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!z0(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function yN(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function P2(n,e){const t=yN(n);return Math.round(e*t)/t}function I2(n){const e=I.useRef(n);return Jg(()=>{e.current=n}),e}function CQ(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,d]=I.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=I.useState(i);z0(p,i)||m(i);const[g,x]=I.useState(null),[_,v]=I.useState(null),A=I.useCallback(Q=>{Q!=C.current&&(C.current=Q,x(Q))},[x]),S=I.useCallback(Q=>{Q!==R.current&&(R.current=Q,v(Q))},[v]),w=s||g,T=o||_,C=I.useRef(null),R=I.useRef(null),D=I.useRef(u),P=I2(l),B=I2(r),N=I.useCallback(()=>{if(!C.current||!R.current)return;const Q={placement:e,strategy:t,middleware:p};B.current&&(Q.platform=B.current),MQ(C.current,R.current,Q).then(ee=>{const O={...ee,isPositioned:!0};j.current&&!z0(D.current,O)&&(D.current=O,Uh.flushSync(()=>{d(O)}))})},[p,e,t,B]);Jg(()=>{c===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,d(Q=>({...Q,isPositioned:!1})))},[c]);const j=I.useRef(!1);Jg(()=>(j.current=!0,()=>{j.current=!1}),[]),Jg(()=>{if(w&&(C.current=w),T&&(R.current=T),w&&T){if(P.current)return P.current(w,T,N);N()}},[w,T,N,P]);const z=I.useMemo(()=>({reference:C,floating:R,setReference:A,setFloating:S}),[A,S]),$=I.useMemo(()=>({reference:w,floating:T}),[w,T]),J=I.useMemo(()=>{const Q={position:t,left:0,top:0};if(!$.floating)return Q;const ee=P2($.floating,u.x),O=P2($.floating,u.y);return a?{...Q,transform:"translate("+ee+"px, "+O+"px)",...yN($.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:O}},[t,a,$.floating,u.x,u.y]);return I.useMemo(()=>({...u,update:N,refs:z,elements:$,floatingStyles:J}),[u,N,z,$,J])}const bQ=I.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...s}=n;return I.createElement(hc.svg,Cn({},s,{ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:I.createElement("polygon",{points:"0,0 30,0 15,10"}))}),RQ=bQ;function PQ(n){const[e,t]=I.useState(void 0);return nf(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}const xN="Popper",[_N,AN]=lN(xN),[IQ,SN]=_N(xN),BQ=n=>{const{__scopePopper:e,children:t}=n,[i,r]=I.useState(null);return I.createElement(IQ,{scope:e,anchor:i,onAnchorChange:r},t)},DQ="PopperAnchor",LQ=I.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,s=SN(DQ,t),o=I.useRef(null),a=vf(e,o);return I.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:I.createElement(hc.div,Cn({},r,{ref:a}))}),EN="PopperContent",[OQ,FQ]=_N(EN),NQ=I.forwardRef((n,e)=>{var t,i,r,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:p=0,align:m="center",alignOffset:g=0,arrowPadding:x=0,collisionBoundary:_=[],collisionPadding:v=0,sticky:A="partial",hideWhenDetached:S=!1,avoidCollisions:w=!0,onPlaced:T,...C}=n,R=SN(EN,u),[D,P]=I.useState(null),B=vf(e,pe=>P(pe)),[N,j]=I.useState(null),z=PQ(N),$=(t=z==null?void 0:z.width)!==null&&t!==void 0?t:0,J=(i=z==null?void 0:z.height)!==null&&i!==void 0?i:0,Q=d+(m!=="center"?"-"+m:""),ee=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},O=Array.isArray(_)?_:[_],W=O.length>0,G={padding:ee,boundary:O.filter(HQ),altBoundary:W},{refs:H,floatingStyles:Y,placement:me,isPositioned:ce,middlewareData:Ae}=CQ({strategy:"fixed",placement:Q,whileElementsMounted:wQ,elements:{reference:R.anchor},middleware:[iQ({mainAxis:p+J,alignmentAxis:g}),w&&rQ({mainAxis:!0,crossAxis:!1,limiter:A==="partial"?sQ():void 0,...G}),w&&eQ({...G}),oQ({...G,apply:({elements:pe,rects:Ee,availableWidth:ge,availableHeight:Ke})=>{const{width:ke,height:ze}=Ee.reference,Ze=pe.floating.style;Ze.setProperty("--radix-popper-available-width",`${ge}px`),Ze.setProperty("--radix-popper-available-height",`${Ke}px`),Ze.setProperty("--radix-popper-anchor-width",`${ke}px`),Ze.setProperty("--radix-popper-anchor-height",`${ze}px`)}}),N&&TQ({element:N,padding:x}),GQ({arrowWidth:$,arrowHeight:J}),S&&tQ({strategy:"referenceHidden"})]}),[Se,Re]=wN(me),Ne=xf(T);nf(()=>{ce&&(Ne==null||Ne())},[ce,Ne]);const pt=(r=Ae.arrow)===null||r===void 0?void 0:r.x,wt=(s=Ae.arrow)===null||s===void 0?void 0:s.y,Le=((o=Ae.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[X,xe]=I.useState();return nf(()=>{D&&xe(window.getComputedStyle(D).zIndex)},[D]),I.createElement("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:ce?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(a=Ae.transformOrigin)===null||a===void 0?void 0:a.x,(l=Ae.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},I.createElement(OQ,{scope:u,placedSide:Se,onArrowChange:j,arrowX:pt,arrowY:wt,shouldHideArrow:Le},I.createElement(hc.div,Cn({"data-side":Se,"data-align":Re},C,{ref:B,style:{...C.style,animation:ce?void 0:"none",opacity:(c=Ae.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))}),kQ="PopperArrow",UQ={top:"bottom",right:"left",bottom:"top",left:"right"},zQ=I.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,s=FQ(kQ,i),o=UQ[s.placedSide];return I.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},I.createElement(RQ,Cn({},r,{ref:t,style:{...r.style,display:"block"}})))});function HQ(n){return n!==null}const GQ=n=>({name:"transformOrigin",options:n,fn(e){var t,i,r,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,p=d?0:n.arrowWidth,m=d?0:n.arrowHeight,[g,x]=wN(a),_={start:"0%",center:"50%",end:"100%"}[x],v=((i=(r=c.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+p/2,A=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let S="",w="";return g==="bottom"?(S=d?_:`${v}px`,w=`${-m}px`):g==="top"?(S=d?_:`${v}px`,w=`${l.floating.height+m}px`):g==="right"?(S=`${-m}px`,w=d?_:`${A}px`):g==="left"&&(S=`${l.floating.width+m}px`,w=d?_:`${A}px`),{data:{x:S,y:w}}}});function wN(n){const[e,t="center"]=n.split("-");return[e,t]}const VQ=BQ,WQ=LQ,$Q=NQ,jQ=zQ;function XQ(n,e){return I.useReducer((t,i)=>{const r=e[t][i];return r??t},n)}const MN=n=>{const{present:e,children:t}=n,i=JQ(e),r=typeof t=="function"?t({present:i.isPresent}):I.Children.only(t),s=vf(i.ref,r.ref);return typeof t=="function"||i.isPresent?I.cloneElement(r,{ref:s}):null};MN.displayName="Presence";function JQ(n){const[e,t]=I.useState(),i=I.useRef({}),r=I.useRef(n),s=I.useRef("none"),o=n?"mounted":"unmounted",[a,l]=XQ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const c=vg(i.current);s.current=a==="mounted"?c:"none"},[a]),nf(()=>{const c=i.current,u=r.current;if(u!==n){const p=s.current,m=vg(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),nf(()=>{if(e){const c=d=>{const m=vg(i.current).includes(d.animationName);d.target===e&&m&&Uh.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=vg(i.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:I.useCallback(c=>{c&&(i.current=getComputedStyle(c)),t(c)},[])}}function vg(n){return(n==null?void 0:n.animationName)||"none"}function KQ({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,r]=YQ({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:i,a=xf(t),l=I.useCallback(c=>{if(s){const d=typeof c=="function"?c(n):c;d!==n&&a(d)}else r(c)},[s,n,r,a]);return[o,l]}function YQ({defaultProp:n,onChange:e}){const t=I.useState(n),[i]=t,r=I.useRef(i),s=xf(e);return I.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),t}const QQ=I.forwardRef((n,e)=>I.createElement(hc.span,Cn({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),qQ=QQ,[sy,soe]=lN("Tooltip",[AN]),oy=AN(),ZQ="TooltipProvider",xS="tooltip.open",[ooe,nM]=sy(ZQ),iM="Tooltip",[eq,ay]=sy(iM),tq=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=nM(iM,n.__scopeTooltip),c=oy(e),[u,d]=I.useState(null),p=WY(),m=I.useRef(0),g=o??l.disableHoverableContent,x=a??l.delayDuration,_=I.useRef(!1),[v=!1,A]=KQ({prop:i,defaultProp:r,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(xS))):l.onClose(),s==null||s(R)}}),S=I.useMemo(()=>v?_.current?"delayed-open":"instant-open":"closed",[v]),w=I.useCallback(()=>{window.clearTimeout(m.current),_.current=!1,A(!0)},[A]),T=I.useCallback(()=>{window.clearTimeout(m.current),A(!1)},[A]),C=I.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{_.current=!0,A(!0)},x)},[x,A]);return I.useEffect(()=>()=>window.clearTimeout(m.current),[]),I.createElement(VQ,c,I.createElement(eq,{scope:e,contentId:p,open:v,stateAttribute:S,trigger:u,onTriggerChange:d,onTriggerEnter:I.useCallback(()=>{l.isOpenDelayed?C():w()},[l.isOpenDelayed,C,w]),onTriggerLeave:I.useCallback(()=>{g?T():window.clearTimeout(m.current)},[T,g]),onOpen:w,onClose:T,disableHoverableContent:g},t))},B2="TooltipTrigger",nq=I.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=ay(B2,t),s=nM(B2,t),o=oy(t),a=I.useRef(null),l=vf(e,a,r.onTriggerChange),c=I.useRef(!1),u=I.useRef(!1),d=I.useCallback(()=>c.current=!1,[]);return I.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),I.createElement(WQ,Cn({asChild:!0},o),I.createElement(hc.button,Cn({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},i,{ref:l,onPointerMove:yo(n.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:yo(n.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:yo(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:yo(n.onFocus,()=>{c.current||r.onOpen()}),onBlur:yo(n.onBlur,r.onClose),onClick:yo(n.onClick,r.onClose)})))}),iq="TooltipPortal",[aoe,rq]=sy(iq,{forceMount:void 0}),Bh="TooltipContent",sq=I.forwardRef((n,e)=>{const t=rq(Bh,n.__scopeTooltip),{forceMount:i=t.forceMount,side:r="top",...s}=n,o=ay(Bh,n.__scopeTooltip);return I.createElement(MN,{present:i||o.open},o.disableHoverableContent?I.createElement(TN,Cn({side:r},s,{ref:e})):I.createElement(oq,Cn({side:r},s,{ref:e})))}),oq=I.forwardRef((n,e)=>{const t=ay(Bh,n.__scopeTooltip),i=nM(Bh,n.__scopeTooltip),r=I.useRef(null),s=vf(e,r),[o,a]=I.useState(null),{trigger:l,onClose:c}=t,u=r.current,{onPointerInTransitChange:d}=i,p=I.useCallback(()=>{a(null),d(!1)},[d]),m=I.useCallback((g,x)=>{const _=g.currentTarget,v={x:g.clientX,y:g.clientY},A=fq(v,_.getBoundingClientRect()),S=dq(v,A),w=hq(x.getBoundingClientRect()),T=mq([...S,...w]);a(T),d(!0)},[d]);return I.useEffect(()=>()=>p(),[p]),I.useEffect(()=>{if(l&&u){const g=_=>m(_,u),x=_=>m(_,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",x)}}},[l,u,m,p]),I.useEffect(()=>{if(o){const g=x=>{const _=x.target,v={x:x.clientX,y:x.clientY},A=(l==null?void 0:l.contains(_))||(u==null?void 0:u.contains(_)),S=!pq(v,o);A?p():S&&(p(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,o,c,p]),I.createElement(TN,Cn({},n,{ref:s}))}),[aq,lq]=sy(iM,{isInside:!1}),TN=I.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=ay(Bh,t),c=oy(t),{onClose:u}=l;return I.useEffect(()=>(document.addEventListener(xS,u),()=>document.removeEventListener(xS,u)),[u]),I.useEffect(()=>{if(l.trigger){const d=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),I.createElement(UY,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u},I.createElement($Q,Cn({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),I.createElement(YF,null,i),I.createElement(aq,{scope:t,isInside:!0},I.createElement(qQ,{id:l.contentId,role:"tooltip"},r||i))))}),cq="TooltipArrow",uq=I.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=oy(t);return lq(cq,t).isInside?null:I.createElement(jQ,Cn({},r,i,{ref:e}))});function fq(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,i,r,s)){case s:return"left";case r:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function dq(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function hq(n){const{top:e,right:t,bottom:i,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:i},{x:r,y:i}]}function pq(n,e){const{x:t,y:i}=n;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>i!=u>i&&t<(c-a)*(i-l)/(u-l)+a&&(r=!r)}return r}function mq(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),gq(e)}function gq(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const r=n[i];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const r=n[i];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const vq=tq,yq=nq,xq=sq,_q=uq;function Aq(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Wt(n,e){if(n==null)return{};var t=Aq(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}let un;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(un||(un={}));const Sq={[un.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[un.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[un.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[un.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[un.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[un.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[un.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[un.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[un.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[un.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[un.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function CN(n,e,...t){const[i,...r]=Sq[e](...t);console[n]("LEVA: "+i,...r)}const Ao=CN.bind(null,"warn"),Eq=CN.bind(null,"log"),wq=["value"],Mq=["schema"],Tq=["value"],bN=[],nc={};function D2(n){let{value:e}=n,t=Wt(n,wq);for(let i of bN){const r=i(e,t);if(r)return r}}function $o(n,e){let{schema:t}=e,i=Wt(e,Mq);if(n in nc){Ao(un.ALREADY_REGISTERED_TYPE,n);return}bN.push((r,s)=>t(r,s)&&n),nc[n]=i}function j_(n,e,t,i){const{normalize:r}=nc[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Wt(e,Tq);return{value:s,settings:o}}function Cq(n,e,t,i,r,s){const{sanitize:o}=nc[n];return o?o(e,t,i,r,s):e}function L2(n,e,t){const{format:i}=nc[n];return i?i(e,t):e}function bq(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function at(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O2(Object(t),!0).forEach(function(i){bq(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const Wa=(n,e,t)=>n>t?t:n<e?e:n,Rq=n=>{if(n===""||typeof n=="number")return n;try{const e=fa(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},Pq=Math.log(10);function F2(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/Pq)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const H0=(n,e,t)=>t===e?0:(Wa(n,e,t)-e)/(t-e),G0=(n,e,t)=>n*(t-e)+e,Iq=()=>"_"+Math.random().toString(36).substr(2,9),N2=/\(([0-9+\-*/^ .]+)\)/,k2=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,U2=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,z2=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,H2=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,G2=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function fa(n){if(isNaN(Number(n)))if(N2.test(n)){const e=n.replace(N2,(t,i)=>String(fa(i)));return fa(e)}else if(k2.test(n)){const e=n.replace(k2,(t,i,r)=>String(Math.pow(Number(i),Number(r))));return fa(e)}else if(U2.test(n)){const e=n.replace(U2,(t,i,r)=>String(Number(i)*Number(r)));return fa(e)}else if(z2.test(n)){const e=n.replace(z2,(t,i,r)=>{if(r!=0)return String(Number(i)/Number(r));throw new Error("Division by zero")});return fa(e)}else if(H2.test(n)){const e=n.replace(H2,(t,i,r)=>String(Number(i)+Number(r)));return fa(e)}else if(G2.test(n)){const e=n.replace(G2,(t,i,r)=>String(Number(i)-Number(r)));return fa(e)}else return Number(n);return Number(n)}function Bq(n,e){return e.reduce((t,i)=>(n&&n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}function Dq(n,e){const t=at({},n);return e.forEach(i=>i in n&&delete t[i]),t}function Lq(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function RN(n){return Object.prototype.toString.call(n)==="[object Object]"}const Oq=n=>RN(n)&&Object.keys(n).length===0;let xs;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(xs||(xs={}));let Ss;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Ss||(Ss={}));const Fq=["type","__customInput"],Nq=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],kq=["type"];function PN(n,e,t={},i){var r,s;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:at({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:T,__customInput:C}=n,R=Wt(n,Fq);return PN(C,e,R,T)}const{render:o,label:a,optional:l,order:c=0,disabled:u,hint:d,onChange:p,onEditStart:m,onEditEnd:g,transient:x}=n,_=Wt(n,Nq),v=at({render:o,key:e,label:a??e,hint:d,transient:x??!!p,onEditStart:m,onEditEnd:g,disabled:u,optional:l,order:c},t);let{type:A}=_,S=Wt(_,kq);if(A=i??A,A in xs)return{type:A,input:S,options:v};let w;return i&&RN(S)&&"value"in S?w=S.value:w=Oq(S)?void 0:S,{type:A,input:w,options:at(at({},v),{},{onChange:p,optional:(r=v.optional)!==null&&r!==void 0?r:!1,disabled:(s=v.disabled)!==null&&s!==void 0?s:!1})}}function Uq(n,e,t,i){const r=PN(n,e),{type:s,input:o,options:a}=r;if(s)return s in xs?r:{type:s,input:j_(s,o,t,i),options:a};let l=D2(o);return l?{type:l,input:j_(l,o,t,i),options:a}:(l=D2({value:o}),l?{type:l,input:j_(l,{value:o},t,i),options:a}:!1)}function V2(n,e,t,i,r){const{value:s,type:o,settings:a}=n;n.value=IN({type:o,value:s,settings:a},e,t,i),n.fromPanel=r}const zq=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function IN({type:n,value:e,settings:t},i,r,s){const o=n!=="SELECT"&&typeof i=="function"?i(e):i;let a;try{a=Cq(n,o,t,e,r,s)}catch(l){throw new zq(`The value \`${i}\` did not result in a correct value.`,e,l)}return Rh(a,e)?e:a}const BN=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,s=t&&!i,o=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(o,e),s&&o()}},DN=n=>n.shiftKey?5:n.altKey?1/5:1;function Hq(n,e){const t=console.error;console.error=()=>{},tL.render(n,e),console.error=t}const Gq=["value"],Vq=["min","max"],Wq=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},LN=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const s=Wa(r,e,t);return i?s+i:s},$q=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},ON=n=>{let{value:e}=n,t=Wt(n,Gq);const{min:i=-1/0,max:r=1/0}=t,s=Wt(t,Vq);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=Wa(o,i,r);let l=t.step;l||(Number.isFinite(i)?Number.isFinite(r)?l=+(Math.abs(r-i)/100).toPrecision(1):l=+(Math.abs(o-i)/100).toPrecision(1):Number.isFinite(r)&&(l=+(Math.abs(r-o)/100).toPrecision(1)));const c=l?F2(l)*10:F2(o);l=l||c/10;const u=Math.round(Wa(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:at({initialValue:o,step:l,pad:u,min:i,max:r,suffix:a},s)}},FN=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var NN=Object.freeze({__proto__:null,schema:Wq,sanitize:LN,format:$q,normalize:ON,sanitizeStep:FN});function bn(){return bn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bn.apply(this,arguments)}const kN=I.createContext({});function Ti(){return I.useContext(kN)}const rM=I.createContext(null),UN=I.createContext(null),zN=I.createContext(null);function rp(){return I.useContext(UN)}function jq(){return I.useContext(zN)}const HN=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function yg(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const md={$inputStyle:()=>n=>yg(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>yg(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>yg(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>yg(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:rt,css:loe,createTheme:Xq,globalCss:Jq,keyframes:coe}=zK({prefix:"leva",theme:HN(),utils:at(at({},md),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":md.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":md.$focusStyle()(n)}),$hover:n=>({"&:hover":md.$hoverStyle()(n)}),$active:n=>({"&:active":md.$activeStyle()(n)})})}),Kq=Jq({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Yq(n){const e=HN();if(!n)return{theme:e,className:""};Object.keys(n).forEach(i=>{Object.assign(e[i],n[i])});const t=Xq(e);return{theme:e,className:t.className}}function Po(n,e){const{theme:t}=I.useContext(rM);if(!(n in t)||!(e in t[n]))return Ao(un.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const GN=rt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),VN=rt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${GN}`]:{paddingLeft:0}}),Qq=rt(VN,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),qq=rt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),Zq=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],eZ=["onUpdate"];function sM(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=n,u=Wt(n,Zq);const{id:d,emitOnEditStart:p,emitOnEditEnd:m,disabled:g}=Ti(),x=a||d,_=I.useRef(null),v=c>0,A=v?"textarea":"input",S=I.useCallback(C=>R=>{const D=R.currentTarget.value;C(D)},[]);K.useEffect(()=>{const C=_.current,R=S(D=>{i(D),m()});return C==null||C.addEventListener("blur",R),()=>C==null?void 0:C.removeEventListener("blur",R)},[S,i,m]);const w=I.useCallback(C=>{C.key==="Enter"&&S(i)(C)},[S,i]),T=Object.assign({as:A},v?{rows:c}:{},u);return K.createElement(qq,{textArea:v},e&&typeof e=="string"?K.createElement(VN,null,e):e,K.createElement(GN,bn({levaType:o,ref:_,id:x,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:S(r),onFocus:()=>p(),onKeyPress:w,onKeyDown:s,disabled:g},T)))}function tZ(n){let{onUpdate:e}=n,t=Wt(n,eZ);const i=I.useCallback(s=>e(Rq(s)),[e]),r=I.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return K.createElement(sM,bn({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const V0=rt("div",{}),_S=rt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),nZ=rt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${_S}::after`]:{opacity:.6},[`${V0}:hover > & + ${_S}::after`]:{opacity:.6},[`${V0}:hover > & > svg`]:{opacity:1}}),WN=rt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${V0}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),$N=rt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${WN} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),jN=rt($N,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),iZ=rt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),rZ=rt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),AS=rt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),sZ=rt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${AS}`]:{pointerEvents:"auto"}}}}}),XN=rt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),oZ=rt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),aZ=rt(_q,{fill:"$toolTipBackground"});function oM({children:n}){const{className:e}=I.useContext(rM);return K.createElement(lK,{className:e},n)}const lZ=["align"];function cZ(){const{id:n,disable:e,disabled:t}=Ti();return K.createElement(K.Fragment,null,K.createElement(rZ,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),K.createElement("label",{htmlFor:n+"__disable"}))}function uZ(n){const{id:e,optional:t,hint:i}=Ti(),r=n.htmlFor||(e?{htmlFor:e}:null),s=!i&&typeof n.children=="string"?{title:n.children}:null;return K.createElement(K.Fragment,null,t&&K.createElement(cZ,null),i!==void 0?K.createElement(vq,null,K.createElement(yq,{asChild:!0},K.createElement(AS,bn({},r,n))),K.createElement(xq,{side:"top",sideOffset:2},K.createElement(oZ,null,i,K.createElement(aZ,null)))):K.createElement(AS,bn({},r,s,n)))}function Ts(n){let{align:e}=n,t=Wt(n,lZ);const{value:i,label:r,key:s,disabled:o}=Ti(),{hideCopyButton:a}=jq(),l=!a&&s!==void 0,[c,u]=I.useState(!1),d=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:i??""})),u(!0)}catch{Ao(un.CLIPBOARD_ERROR,{[s]:i})}};return K.createElement(iZ,{align:e,onPointerLeave:()=>u(!1)},K.createElement(uZ,t),l&&!o&&K.createElement("div",{title:`Click to copy ${typeof r=="string"?r:s} value`},c?K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},K.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),K.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):K.createElement("svg",{onClick:d,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},K.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),K.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const fZ=["toggled"],dZ=rt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function aM(n){let{toggled:e}=n,t=Wt(n,fZ);return K.createElement(dZ,bn({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),K.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const hZ=["input"];function Qr(n){let{input:e}=n,t=Wt(n,hZ);return e?K.createElement(jN,t):K.createElement($N,t)}function JN({value:n,type:e,settings:t,setValue:i}){const[r,s]=I.useState(L2(e,n,t)),o=I.useRef(n),a=I.useRef(t);a.current=t;const l=I.useCallback(u=>s(L2(e,u,a.current)),[e]),c=I.useCallback(u=>{try{i(u)}catch(d){const{type:p,previousValue:m}=d;if(p!=="LEVA_ERROR")throw d;l(m)}},[l,i]);return I.useEffect(()=>{Rh(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:r,onChange:s,onUpdate:c}}function sp(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=Ti();return DY(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i==null||i()),s},e)}function pZ(n){const e=I.useRef(null),t=I.useRef(null),i=I.useRef(!1);return I.useEffect(()=>{const r=BN(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),I.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function KN(){const n=I.useRef(null),e=I.useRef({x:0,y:0}),t=I.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const mZ=["__refCount"],X_=(n,e)=>{if(!n[e])return null;const t=n[e];return Wt(t,mZ)};function gZ(n){const e=rp(),[t,i]=I.useState(X_(e.getData(),n)),r=I.useCallback(c=>e.setValueAtPath(n,c,!0),[n,e]),s=I.useCallback(c=>e.setSettingsAtPath(n,c),[n,e]),o=I.useCallback(c=>e.disableInputAtPath(n,c),[n,e]),a=I.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=I.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return I.useEffect(()=>{i(X_(e.getData(),n));const c=e.useStore.subscribe(u=>X_(u.data,n),i,{equalityFn:ep});return()=>c()},[e,n]),[t,{set:r,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const vZ=rt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),YN=rt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),SS=rt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),QN=rt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),qN=rt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function yZ({value:n,min:e,max:t,onDrag:i,step:r,initialValue:s}){const o=I.useRef(null),a=I.useRef(null),l=I.useRef(0),c=Po("sizes","scrubberWidth"),u=sp(({event:p,first:m,xy:[g],movement:[x],memo:_})=>{if(m){const{width:A,left:S}=o.current.getBoundingClientRect();l.current=A-parseFloat(c),_=(p==null?void 0:p.target)===a.current?n:G0((g-S)/A,e,t)}const v=_+G0(x/l.current,0,t-e);return i(FN(v,{step:r,initialValue:s})),_}),d=H0(n,e,t);return K.createElement(QN,bn({ref:o},u()),K.createElement(YN,null,K.createElement(qN,{style:{left:0,right:`${(1-d)*100}%`}})),K.createElement(SS,{ref:a,style:{left:`calc(${d} * (100% - ${c}))`}}))}const xZ=K.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,s]=I.useState(!1),o=sp(({active:a,delta:[l],event:c,memo:u=0})=>(s(a),u+=l/2,Math.abs(u)>=1&&(e(d=>parseFloat(d)+Math.floor(u)*t*DN(c)),u=0),u));return K.createElement(Qq,bn({dragging:r,title:n.length>1?n:""},o()),n.slice(0,i))});function ZN({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:s,innerLabelTrim:o=1}){const a=o>0&&K.createElement(xZ,{label:n,step:s.step,onUpdate:i,innerLabelTrim:o});return K.createElement(tZ,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:a})}function _Z(){const n=Ti(),{label:e,value:t,onUpdate:i,settings:r,id:s}=n,{min:o,max:a}=r,l=a!==1/0&&o!==-1/0;return K.createElement(Qr,{input:!0},K.createElement(Ts,null,e),K.createElement(vZ,{hasRange:l},l&&K.createElement(yZ,bn({value:parseFloat(t),onDrag:i},r)),K.createElement(ZN,bn({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:AZ}=NN,SZ=Wt(NN,["sanitizeStep"]);var EZ=at({component:_Z},SZ);const wZ=(n,e)=>qi().schema({options:qi().passesAnyOf(qi().object(),qi().array())}).test(e),MZ=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},TZ=(n,{values:e})=>e.indexOf(n),CZ=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(s=>String(s))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var bZ=Object.freeze({__proto__:null,schema:wZ,sanitize:MZ,format:TZ,normalize:CZ});const RZ=rt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),ES=rt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),PZ=rt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${ES}:focus + &`]:{$focusStyle:""},[`${ES}:hover + &`]:{$hoverStyle:""}});function IZ({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:s}){const{keys:o,values:a}=r,l=I.useRef();return e===a[n]&&(l.current=o[n]),K.createElement(RZ,null,K.createElement(ES,{id:i,value:n,onChange:c=>t(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,u)=>K.createElement("option",{key:c,value:u},c))),K.createElement(PZ,null,l.current),K.createElement(aM,{toggled:!0}))}function BZ(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:s,settings:o}=Ti();return K.createElement(Qr,{input:!0},K.createElement(Ts,null,n),K.createElement(IZ,{id:r,value:e,displayValue:t,onUpdate:i,settings:o,disabled:s}))}var DZ=at({component:BZ},bZ);const LZ=n=>qi().string().test(n),OZ=n=>{if(typeof n!="string")throw Error("Invalid string");return n},FZ=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var NZ=Object.freeze({__proto__:null,schema:LZ,sanitize:OZ,normalize:FZ});const kZ=["displayValue","onUpdate","onChange","editable"],UZ=rt("div",{whiteSpace:"pre-wrap"});function zZ(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,s=Wt(n,kZ);return r?K.createElement(sM,bn({value:e,onUpdate:t,onChange:i},s)):K.createElement(UZ,null,e)}function HZ(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=Ti();return K.createElement(Qr,{input:!0},K.createElement(Ts,null,n),K.createElement(zZ,bn({displayValue:t,onUpdate:i,onChange:r},e)))}var GZ=at({component:HZ},NZ);const VZ=n=>qi().boolean().test(n),WZ=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var $Z=Object.freeze({__proto__:null,schema:VZ,sanitize:WZ});const jZ=rt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function XZ({value:n,onUpdate:e,id:t,disabled:i}){return K.createElement(jZ,null,K.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),K.createElement("label",{htmlFor:t},K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},K.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function JZ(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=Ti();return K.createElement(Qr,{input:!0},K.createElement(Ts,null,n),K.createElement(XZ,{value:e,onUpdate:t,id:r,disabled:i}))}var KZ=at({component:JZ},$Z);const YZ=["locked"];function QZ({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:s}){const o=I.useRef(n[t]);o.current=n[t];const a=I.useCallback(c=>r({[t]:IN({type:"NUMBER",value:o.current,settings:i},c)}),[r,i,t]),l=JN({type:"NUMBER",value:n[t],settings:i,setValue:a});return K.createElement(ZN,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:i,innerLabelTrim:s})}const qZ=rt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function ZZ(n){let{locked:e}=n,t=Wt(n,YZ);return K.createElement("svg",bn({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?K.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):K.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function lM({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:s}=Ti(),{lock:o,locked:a}=t;return K.createElement(qZ,{withLock:o},o&&K.createElement(ZZ,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,c)=>K.createElement(QZ,{id:c===0?r:`${r}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:i})))}const ek=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=ON(at({value:o},e[s])).settings,i=Math.max(i,t[s].step),r=Math.min(r,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=i,t[s].pad=r)}return t},eee=["lock"],tee=["value"];function nee(n){const e=qi().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(s=>isFinite(s))};return i=>e.test(i)||t(i)}function iee(n){return Array.isArray(n)?"array":"object"}function jd(n,e,t){return iee(n)===e?n:e==="array"?Object.values(n):Lq(n,t)}const ree=(n,e,t)=>{const i=jd(n,"object",e.keys);for(let o in i)i[o]=LN(i[o],e[o]);const r=Object.keys(i);let s={};if(r.length===e.keys.length)s=i;else{const o=jd(t,"object",e.keys);if(r.length===1&&e.locked){const a=r[0],l=i[a],c=o[a],u=c!==0?l/c:1;for(let d in o)d===a?s[a]=l:s[d]=o[d]*u}else s=at(at({},o),i)}return jd(s,e.format,e.keys)},see=(n,e)=>jd(n,"object",e.keys),oee=n=>!!n&&("step"in n||"min"in n||"max"in n);function aee(n,e,t=[]){const{lock:i=!1}=e,r=Wt(e,eee),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=jd(n,"object",o),l=oee(r)?o.reduce((u,d)=>Object.assign(u,{[d]:r}),{}):r,c=ek(a,l);return{value:s==="array"?n:a,settings:at(at({},c),{},{format:s,keys:o,lock:i,locked:!1})}}function tk(n){return{schema:nee(n.length),normalize:e=>{let{value:t}=e,i=Wt(e,tee);return aee(t,i,n)},format:(e,t)=>see(e,t),sanitize:(e,t,i)=>ree(e,t,i)}}var lee={grad:.9,turn:360,rad:360/(2*Math.PI)},mo=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ri=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Vr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},nk=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},W2=function(n){return{r:Vr(n.r,0,255),g:Vr(n.g,0,255),b:Vr(n.b,0,255),a:Vr(n.a)}},J_=function(n){return{r:ri(n.r),g:ri(n.g),b:ri(n.b),a:ri(n.a,3)}},cee=/^#([0-9a-f]{3,8})$/i,xg=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},ik=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},rk=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),c=s%6;return{r:255*[i,a,o,o,l,i][c],g:255*[l,i,i,a,o,o][c],b:255*[o,o,l,i,i,a][c],a:r}},$2=function(n){return{h:nk(n.h),s:Vr(n.s,0,100),l:Vr(n.l,0,100),a:Vr(n.a)}},j2=function(n){return{h:ri(n.h),s:ri(n.s),l:ri(n.l),a:ri(n.a,3)}},X2=function(n){return rk((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},Xd=function(n){return{h:(e=ik(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},uee=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fee=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dee=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,hee=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wS={string:[[function(n){var e=cee.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?ri(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?ri(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=dee.exec(n)||hee.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:W2({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=uee.exec(n)||fee.exec(n);if(!e)return null;var t,i,r=$2({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(lee[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return X2(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return mo(e)&&mo(t)&&mo(i)?W2({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!mo(e)||!mo(t)||!mo(i))return null;var o=$2({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return X2(o)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!mo(e)||!mo(t)||!mo(i))return null;var o=function(a){return{h:nk(a.h),s:Vr(a.s,0,100),v:Vr(a.v,0,100),a:Vr(a.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return rk(o)},"hsv"]]},J2=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},sk=function(n){return typeof n=="string"?J2(n.trim(),wS.string):typeof n=="object"&&n!==null?J2(n,wS.object):[null,void 0]},pee=function(n){return sk(n)[1]},K_=function(n,e){var t=Xd(n);return{h:t.h,s:Vr(t.s+100*e,0,100),l:t.l,a:t.a}},Y_=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},K2=function(n,e){var t=Xd(n);return{h:t.h,s:t.s,l:Vr(t.l+100*e,0,100),a:t.a}},MS=function(){function n(e){this.parsed=sk(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return ri(Y_(this.rgba),2)},n.prototype.isDark=function(){return Y_(this.rgba)<.5},n.prototype.isLight=function(){return Y_(this.rgba)>=.5},n.prototype.toHex=function(){return e=J_(this.rgba),t=e.r,i=e.g,r=e.b,o=(s=e.a)<1?xg(ri(255*s)):"","#"+xg(t)+xg(i)+xg(r)+o;var e,t,i,r,s,o},n.prototype.toRgb=function(){return J_(this.rgba)},n.prototype.toRgbString=function(){return e=J_(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return j2(Xd(this.rgba))},n.prototype.toHslString=function(){return e=j2(Xd(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=ik(this.rgba),{h:ri(e.h),s:ri(e.s),v:ri(e.v),a:ri(e.a,3)};var e},n.prototype.invert=function(){return Li({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Li(K_(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Li(K_(this.rgba,-e))},n.prototype.grayscale=function(){return Li(K_(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Li(K2(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Li(K2(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Li({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ri(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Xd(this.rgba);return typeof e=="number"?Li({h:e,s:t.s,l:t.l,a:t.a}):ri(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Li(e).toHex()},n}(),Li=function(n){return n instanceof MS?n:new MS(n)},Y2=[],mee=function(n){n.forEach(function(e){Y2.indexOf(e)<0&&(e(MS,wS),Y2.push(e))})};function gee(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=i[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),d=1/0,p="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var g in t){var x=(a=u,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));x<d&&(d=x,p=g)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function Sf(){return(Sf=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function cM(n,e){if(n==null)return{};var t,i,r={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(r[t]=n[t]);return r}function TS(n){var e=I.useRef(n),t=I.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var sf=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Jd=function(n){return"touches"in n},CS=function(n){return n&&n.ownerDocument.defaultView||self},Q2=function(n,e,t){var i=n.getBoundingClientRect(),r=Jd(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:sf((r.pageX-(i.left+CS(n).pageXOffset))/i.width),top:sf((r.pageY-(i.top+CS(n).pageYOffset))/i.height)}},q2=function(n){!Jd(n)&&n.preventDefault()},uM=K.memo(function(n){var e=n.onMove,t=n.onKey,i=cM(n,["onMove","onKey"]),r=I.useRef(null),s=TS(e),o=TS(t),a=I.useRef(null),l=I.useRef(!1),c=I.useMemo(function(){var m=function(_){q2(_),(Jd(_)?_.touches.length>0:_.buttons>0)&&r.current?s(Q2(r.current,_,a.current)):x(!1)},g=function(){return x(!1)};function x(_){var v=l.current,A=CS(r.current),S=_?A.addEventListener:A.removeEventListener;S(v?"touchmove":"mousemove",m),S(v?"touchend":"mouseup",g)}return[function(_){var v=_.nativeEvent,A=r.current;if(A&&(q2(v),!function(w,T){return T&&!Jd(w)}(v,l.current)&&A)){if(Jd(v)){l.current=!0;var S=v.changedTouches||[];S.length&&(a.current=S[0].identifier)}A.focus(),s(Q2(A,v,a.current)),x(!0)}},function(_){var v=_.which||_.keyCode;v<37||v>40||(_.preventDefault(),o({left:v===39?.05:v===37?-.05:0,top:v===40?.05:v===38?-.05:0}))},x]},[o,s]),u=c[0],d=c[1],p=c[2];return I.useEffect(function(){return p},[p]),K.createElement("div",Sf({},i,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:r,onKeyDown:d,tabIndex:0,role:"slider"}))}),op=function(n){return n.filter(Boolean).join(" ")},fM=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,s=op(["react-colorful__pointer",n.className]);return K.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},K.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Oi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},ok=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:Oi(n.h),s:Oi(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:Oi(r/2),a:Oi(i,2)}},bS=function(n){var e=ok(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},Q_=function(n){var e=ok(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},ak=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),c=s%6;return{r:Oi(255*[i,a,o,o,l,i][c]),g:Oi(255*[l,i,i,a,o,o][c]),b:Oi(255*[o,o,l,i,i,a][c]),a:Oi(r,2)}},lk=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:Oi(60*(a<0?a+6:a)),s:Oi(s?o/s*100:0),v:Oi(s/255*100),a:r}},ck=K.memo(function(n){var e=n.hue,t=n.onChange,i=op(["react-colorful__hue",n.className]);return K.createElement("div",{className:i},K.createElement(uM,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:sf(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":Oi(e),"aria-valuemax":"360","aria-valuemin":"0"},K.createElement(fM,{className:"react-colorful__hue-pointer",left:e/360,color:bS({h:e,s:100,v:100,a:1})})))}),uk=K.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:bS({h:e.h,s:100,v:100,a:1})};return K.createElement("div",{className:"react-colorful__saturation",style:i},K.createElement(uM,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:sf(e.s+100*r.left,0,100),v:sf(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Oi(e.s)+"%, Brightness "+Oi(e.v)+"%"},K.createElement(fM,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:bS(e)})))}),dM=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function fk(n,e,t){var i=TS(t),r=I.useState(function(){return n.toHsva(e)}),s=r[0],o=r[1],a=I.useRef({color:e,hsva:s});I.useEffect(function(){if(!n.equal(e,a.current.color)){var c=n.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,n]),I.useEffect(function(){var c;dM(s,a.current.hsva)||n.equal(c=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},i(c))},[s,n,i]);var l=I.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var vee=typeof window<"u"?I.useLayoutEffect:I.useEffect,yee=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Z2=new Map,dk=function(n){vee(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!Z2.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Z2.set(e,t);var i=yee();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},xee=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=cM(n,["className","colorModel","color","onChange"]),a=I.useRef(null);dk(a);var l=fk(t,r,s),c=l[0],u=l[1],d=op(["react-colorful",e]);return K.createElement("div",Sf({},o,{ref:a,className:d}),K.createElement(uk,{hsva:c,onChange:u}),K.createElement(ck,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},_ee=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+Q_(Object.assign({},t,{a:0}))+", "+Q_(Object.assign({},t,{a:1}))+")"},s=op(["react-colorful__alpha",e]),o=Oi(100*t.a);return K.createElement("div",{className:s},K.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),K.createElement(uM,{onMove:function(a){i({a:a.left})},onKey:function(a){i({a:sf(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},K.createElement(fM,{className:"react-colorful__alpha-pointer",left:t.a,color:Q_(t)})))},Aee=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=cM(n,["className","colorModel","color","onChange"]),a=I.useRef(null);dk(a);var l=fk(t,r,s),c=l[0],u=l[1],d=op(["react-colorful",e]);return K.createElement("div",Sf({},o,{ref:a,className:d}),K.createElement(uk,{hsva:c,onChange:u}),K.createElement(ck,{hue:c.h,onChange:u}),K.createElement(_ee,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},See={defaultColor:{r:0,g:0,b:0,a:1},toHsva:lk,fromHsva:ak,equal:dM},Eee=function(n){return K.createElement(Aee,Sf({},n,{colorModel:See}))},wee={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return lk({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=ak(n)).r,g:e.g,b:e.b};var e},equal:dM},Mee=function(n){return K.createElement(xee,Sf({},n,{colorModel:wee}))},hk={exports:{}},Tee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Cee=Tee,bee=Cee;function pk(){}function mk(){}mk.resetWarningCache=pk;var Ree=function(){function n(i,r,s,o,a,l){if(l!==bee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:mk,resetWarningCache:pk};return t.PropTypes=t,t};hk.exports=Ree();var Pee=hk.exports;const Yt=ic(Pee);function Iee(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function Ef(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function wf(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(i=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],r=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Bee(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s}function Dee(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Bee(arguments[e]));return n}var Lee=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ap(n,e){var t=Oee(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Oee(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=Lee.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var Fee=[".DS_Store","Thumbs.db"];function Nee(n){return Ef(this,void 0,void 0,function(){return wf(this,function(e){return W0(n)&&kee(n)?[2,Gee(n.dataTransfer,n.type)]:Uee(n)?[2,zee(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Hee(n)]:[2,[]]})})}function kee(n){return W0(n.dataTransfer)}function Uee(n){return W0(n)&&W0(n.target)}function W0(n){return typeof n=="object"&&n!==null}function zee(n){return RS(n.target.files).map(function(e){return ap(e)})}function Hee(n){return Ef(this,void 0,void 0,function(){var e;return wf(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return ap(i)})]}})})}function Gee(n,e){return Ef(this,void 0,void 0,function(){var t,i;return wf(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=RS(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(Vee))]):[3,2];case 1:return i=r.sent(),[2,eI(gk(i))];case 2:return[2,eI(RS(n.files).map(function(s){return ap(s)}))]}})})}function eI(n){return n.filter(function(e){return Fee.indexOf(e.name)===-1})}function RS(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function Vee(n){if(typeof n.webkitGetAsEntry!="function")return tI(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?vk(e):tI(n)}function gk(n){return n.reduce(function(e,t){return Dee(e,Array.isArray(t)?gk(t):[t])},[])}function tI(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=ap(e);return Promise.resolve(t)}function Wee(n){return Ef(this,void 0,void 0,function(){return wf(this,function(e){return[2,n.isDirectory?vk(n):$ee(n)]})})}function vk(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function s(){var o=this;e.readEntries(function(a){return Ef(o,void 0,void 0,function(){var l,c,u;return wf(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return l=d.sent(),t(l),[3,4];case 3:return c=d.sent(),i(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(Wee)),r.push(u),s(),d.label=6;case 6:return[2]}})})},function(a){i(a)})}s()})}function $ee(n){return Ef(this,void 0,void 0,function(){return wf(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var s=ap(r,n.fullPath);t(s)},function(r){i(r)})})]})})}var jee=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?i.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):r===a})}return!0};function nI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function iI(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nI(Object(t),!0).forEach(function(i){yk(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nI(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function yk(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rI(n,e){return Yee(n)||Kee(n,e)||Jee(n,e)||Xee()}function Xee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jee(n,e){if(n){if(typeof n=="string")return sI(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sI(n,e)}}function sI(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Kee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function Yee(n){if(Array.isArray(n))return n}var Qee="file-invalid-type",qee="file-too-large",Zee="file-too-small",ete="too-many-files",tte=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Qee,message:"File type must be ".concat(t)}},oI=function(e){return{code:qee,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},aI=function(e){return{code:Zee,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},nte={code:ete,message:"Too many files"};function xk(n,e){var t=n.type==="application/x-moz-file"||jee(n,e);return[t,t?null:tte(e)]}function _k(n,e,t){if(gd(n.size))if(gd(e)&&gd(t)){if(n.size>t)return[!1,oI(t)];if(n.size<e)return[!1,aI(e)]}else{if(gd(e)&&n.size<e)return[!1,aI(e)];if(gd(t)&&n.size>t)return[!1,oI(t)]}return[!0,null]}function gd(n){return n!=null}function ite(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=xk(a,t),c=rI(l,1),u=c[0],d=_k(a,i,r),p=rI(d,1),m=p[0];return u&&m})}function $0(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function _g(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function lI(n){n.preventDefault()}function rte(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function ste(n){return n.indexOf("Edge/")!==-1}function ote(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return rte(n)||ste(n)}function Fs(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return e.some(function(a){return!$0(i)&&a&&a.apply(void 0,[i].concat(s)),$0(i)})}}function ate(){return"showOpenFilePicker"in window}function lte(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return iI(iI({},e),{},yk({},t,[]))},{}):{}}]}function cte(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function ute(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var fte=["children"],dte=["open"],hte=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],pte=["refKey","onChange","onClick"];function mte(n){return yte(n)||vte(n)||Ak(n)||gte()}function gte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vte(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function yte(n){if(Array.isArray(n))return PS(n)}function q_(n,e){return Ate(n)||_te(n,e)||Ak(n,e)||xte()}function xte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ak(n,e){if(n){if(typeof n=="string")return PS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return PS(n,e)}}function PS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function _te(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function Ate(n){if(Array.isArray(n))return n}function cI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ln(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cI(Object(t),!0).forEach(function(i){IS(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cI(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function IS(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function j0(n,e){if(n==null)return{};var t=Ste(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Ste(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var hM=I.forwardRef(function(n,e){var t=n.children,i=j0(n,fte),r=Ek(i),s=r.open,o=j0(r,dte);return I.useImperativeHandle(e,function(){return{open:s}},[s]),K.createElement(I.Fragment,null,t(ln(ln({},o),{},{open:s})))});hM.displayName="Dropzone";var Sk={disabled:!1,getFilesFromEvent:Nee,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};hM.defaultProps=Sk;hM.propTypes={children:Yt.func,accept:Yt.oneOfType([Yt.string,Yt.arrayOf(Yt.string)]),multiple:Yt.bool,preventDropOnDocument:Yt.bool,noClick:Yt.bool,noKeyboard:Yt.bool,noDrag:Yt.bool,noDragEventsBubbling:Yt.bool,minSize:Yt.number,maxSize:Yt.number,maxFiles:Yt.number,disabled:Yt.bool,getFilesFromEvent:Yt.func,onFileDialogCancel:Yt.func,onFileDialogOpen:Yt.func,useFsAccessApi:Yt.bool,onDragEnter:Yt.func,onDragLeave:Yt.func,onDragOver:Yt.func,onDrop:Yt.func,onDropAccepted:Yt.func,onDropRejected:Yt.func,validator:Yt.func};var BS={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function Ek(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ln(ln({},Sk),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,d=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,g=e.onDropRejected,x=e.onFileDialogCancel,_=e.onFileDialogOpen,v=e.useFsAccessApi,A=e.preventDropOnDocument,S=e.noClick,w=e.noKeyboard,T=e.noDrag,C=e.noDragEventsBubbling,R=e.validator,D=I.useMemo(function(){return typeof _=="function"?_:uI},[_]),P=I.useMemo(function(){return typeof x=="function"?x:uI},[x]),B=I.useRef(null),N=I.useRef(null),j=I.useReducer(Ete,BS),z=q_(j,2),$=z[0],J=z[1],Q=$.isFocused,ee=$.isFileDialogActive,O=$.draggedFiles,W=I.useRef(typeof window<"u"&&window.isSecureContext&&v&&ate()),G=function(){!W.current&&ee&&setTimeout(function(){if(N.current){var L=N.current.files;L.length||(J({type:"closeDialog"}),P())}},300)};I.useEffect(function(){return window.addEventListener("focus",G,!1),function(){window.removeEventListener("focus",G,!1)}},[N,ee,P,W]);var H=I.useRef([]),Y=function(L){B.current&&B.current.contains(L.target)||(L.preventDefault(),H.current=[])};I.useEffect(function(){return A&&(document.addEventListener("dragover",lI,!1),document.addEventListener("drop",Y,!1)),function(){A&&(document.removeEventListener("dragover",lI),document.removeEventListener("drop",Y))}},[B,A]);var me=I.useCallback(function(F){F.preventDefault(),F.persist(),ge(F),H.current=[].concat(mte(H.current),[F.target]),_g(F)&&Promise.resolve(r(F)).then(function(L){$0(F)&&!C||(J({draggedFiles:L,isDragActive:!0,type:"setDraggedFiles"}),c&&c(F))})},[r,c,C]),ce=I.useCallback(function(F){F.preventDefault(),F.persist(),ge(F);var L=_g(F);if(L&&F.dataTransfer)try{F.dataTransfer.dropEffect="copy"}catch{}return L&&d&&d(F),!1},[d,C]),Ae=I.useCallback(function(F){F.preventDefault(),F.persist(),ge(F);var L=H.current.filter(function(_e){return B.current&&B.current.contains(_e)}),ne=L.indexOf(F.target);ne!==-1&&L.splice(ne,1),H.current=L,!(L.length>0)&&(J({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),_g(F)&&u&&u(F))},[B,u,C]),Se=I.useCallback(function(F,L){var ne=[],_e=[];F.forEach(function(ye){var we=xk(ye,t),$e=q_(we,2),Te=$e[0],oe=$e[1],et=_k(ye,o,s),Ye=q_(et,2),Qe=Ye[0],Ge=Ye[1],Ve=R?R(ye):null;if(Te&&Qe&&!Ve)ne.push(ye);else{var mt=[oe,Ge];Ve&&(mt=mt.concat(Ve)),_e.push({file:ye,errors:mt.filter(function(Ut){return Ut})})}}),(!a&&ne.length>1||a&&l>=1&&ne.length>l)&&(ne.forEach(function(ye){_e.push({file:ye,errors:[nte]})}),ne.splice(0)),J({acceptedFiles:ne,fileRejections:_e,type:"setFiles"}),p&&p(ne,_e,L),_e.length>0&&g&&g(_e,L),ne.length>0&&m&&m(ne,L)},[J,a,t,o,s,l,p,m,g,R]),Re=I.useCallback(function(F){F.preventDefault(),F.persist(),ge(F),H.current=[],_g(F)&&Promise.resolve(r(F)).then(function(L){$0(F)&&!C||Se(L,F)}),J({type:"reset"})},[r,Se,C]),Ne=I.useCallback(function(){if(W.current){J({type:"openDialog"}),D();var F={multiple:a,types:lte(t)};window.showOpenFilePicker(F).then(function(L){return r(L)}).then(function(L){Se(L,null),J({type:"closeDialog"})}).catch(function(L){cte(L)?(P(L),J({type:"closeDialog"})):ute(L)&&(W.current=!1,N.current&&(N.current.value=null,N.current.click()))});return}N.current&&(J({type:"openDialog"}),D(),N.current.value=null,N.current.click())},[J,D,P,v,Se,t,a]),pt=I.useCallback(function(F){!B.current||!B.current.isEqualNode(F.target)||(F.key===" "||F.key==="Enter"||F.keyCode===32||F.keyCode===13)&&(F.preventDefault(),Ne())},[B,Ne]),wt=I.useCallback(function(){J({type:"focus"})},[]),Le=I.useCallback(function(){J({type:"blur"})},[]),X=I.useCallback(function(){S||(ote()?setTimeout(Ne,0):Ne())},[S,Ne]),xe=function(L){return i?null:L},pe=function(L){return w?null:xe(L)},Ee=function(L){return T?null:xe(L)},ge=function(L){C&&L.stopPropagation()},Ke=I.useMemo(function(){return function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=F.refKey,ne=L===void 0?"ref":L,_e=F.role,ye=F.onKeyDown,we=F.onFocus,$e=F.onBlur,Te=F.onClick,oe=F.onDragEnter,et=F.onDragOver,Ye=F.onDragLeave,Qe=F.onDrop,Ge=j0(F,hte);return ln(ln(IS({onKeyDown:pe(Fs(ye,pt)),onFocus:pe(Fs(we,wt)),onBlur:pe(Fs($e,Le)),onClick:xe(Fs(Te,X)),onDragEnter:Ee(Fs(oe,me)),onDragOver:Ee(Fs(et,ce)),onDragLeave:Ee(Fs(Ye,Ae)),onDrop:Ee(Fs(Qe,Re)),role:typeof _e=="string"&&_e!==""?_e:"button"},ne,B),!i&&!w?{tabIndex:0}:{}),Ge)}},[B,pt,wt,Le,X,me,ce,Ae,Re,w,T,i]),ke=I.useCallback(function(F){F.stopPropagation()},[]),ze=I.useMemo(function(){return function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=F.refKey,ne=L===void 0?"ref":L,_e=F.onChange,ye=F.onClick,we=j0(F,pte),$e=IS({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:xe(Fs(_e,Re)),onClick:xe(Fs(ye,ke)),tabIndex:-1},ne,N);return ln(ln({},$e),we)}},[N,t,a,Re,i]),Ze=O.length,St=Ze>0&&ite({files:O,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),Xt=Ze>0&&!St;return ln(ln({},$),{},{isDragAccept:St,isDragReject:Xt,isFocused:Q&&!i,getRootProps:Ke,getInputProps:ze,rootRef:B,inputRef:N,open:xe(Ne)})}function Ete(n,e){switch(e.type){case"focus":return ln(ln({},n),{},{isFocused:!0});case"blur":return ln(ln({},n),{},{isFocused:!1});case"openDialog":return ln(ln({},BS),{},{isFileDialogActive:!0});case"closeDialog":return ln(ln({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return ln(ln({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return ln(ln({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return ln({},BS);default:return n}}function uI(){}function wte(n){let e;const t=new Set,i=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,u=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const g=u(e);if(!d(p,g)){const x=p;c(p=g,x)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const Mte=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),fI=Mte?I.useEffect:I.useLayoutEffect;function Tte(n){const e=typeof n=="function"?wte(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=I.useReducer(_=>_+1,0),o=e.getState(),a=I.useRef(o),l=I.useRef(i),c=I.useRef(r),u=I.useRef(!1),d=I.useRef();d.current===void 0&&(d.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(p=i(o),m=!r(d.current,p)),fI(()=>{m&&(d.current=p),a.current=o,l.current=i,c.current=r,u.current=!1});const g=I.useRef(o);fI(()=>{const _=()=>{try{const A=e.getState(),S=l.current(A);c.current(d.current,S)||(a.current=A,d.current=S,s())}catch{u.current=!0,s()}},v=e.subscribe(_);return e.getState()!==g.current&&_(),v},[]);const x=m?p:d.current;return I.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const Cte=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=o(i.getState());c=p=>{const m=o(p);if(!u(d,m)){const g=d;a(d=m,g)}},l!=null&&l.fireImmediately&&a(d,d)}return r(c)},n(e,t,i)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var bte=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Rte=bte;function dI(n){return Rte(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var wk=function(e){var t,i;return!(dI(e)===!1||(t=e.constructor,typeof t!="function")||(i=t.prototype,dI(i)===!1)||i.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Pte=wk,pM=function(e){return Pte(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Ite=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break},Bte=pM,Dte=Ite;function Mk(n,e){for(var t=arguments.length,i=0;++i<t;){var r=arguments[i];DS(r)&&Dte(r,Lte,n)}return n}function Lte(n,e){if(Ote(e)){var t=this[e];DS(n)&&DS(t)?Mk(t,n):this[e]=n}}function DS(n){return Bte(n)&&!Array.isArray(n)}function Ote(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var Fte=Mk;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Nte=function(n,e,t,i,r){if(!kte(n)||!e)return n;if(e=Ag(e),t&&(e+="."+Ag(t)),i&&(e+="."+Ag(i)),r&&(e+="."+Ag(r)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function kte(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function Ag(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Ute=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,s=0;++s<r;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];t.call(o,c)&&(i[c]=o[c])}return i},zte=pM,Hte=Ute,Gte=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");hI(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];Wte(t)&&(t=$te(t)),hI(t)&&(Vte(n,t),Hte(n,t))}return n};function Vte(n,e){for(var t in e)jte(e,t)&&(n[t]=e[t])}function Wte(n){return n&&typeof n=="string"}function $te(n){var e={};for(var t in n)e[t]=n[t];return e}function hI(n){return n&&typeof n=="object"||zte(n)}function jte(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Xte=Gte,Jte=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var i=Xte({sep:"."},e),r=i.quotes||['"',"'","`"],s;i.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:i.brackets&&(s=i.brackets);var o=[],a=[],l=[""],c=i.sep,u=n.length,d=-1,p;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++d<u;){var g=n[d],x=n[d+1],_={val:g,idx:d,arr:l,str:n};if(o.push(_),g==="\\"){_.val=Yte(i,n,d)===!0?g+x:x,_.escaped=!0,typeof t=="function"&&t(_),l[l.length-1]+=_.val,d++;continue}if(s&&s[g]){a.push(g);var v=m(),A=d+1;if(n.indexOf(v,A+1)!==-1)for(;a.length&&A<u;){var S=n[++A];if(S==="\\"){S++;continue}if(r.indexOf(S)!==-1){A=LS(n,S,A+1);continue}if(v=m(),a.length&&n.indexOf(v,A+1)===-1)break;if(s[S]){a.push(S);continue}v===S&&a.pop()}if(p=A,p===-1){l[l.length-1]+=g;continue}g=n.slice(d,p+1),_.val=g,_.idx=d=p}if(r.indexOf(g)!==-1){if(p=LS(n,g,d+1),p===-1){l[l.length-1]+=g;continue}Kte(g,i)===!0?g=n.slice(d,p+1):g=n.slice(d+1,p),_.val=g,_.idx=d=p}if(typeof t=="function"&&(t(_,o),g=_.val,d=_.idx),_.val===c&&_.split!==!1){l.push("");continue}l[l.length-1]+=_.val}return l};function LS(n,e,t,i){var r=n.indexOf(e,t);return n.charAt(r-1)==="\\"?LS(n,e,r+1):r}function Kte(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function Yte(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Qte=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},pI=Qte,qte=function(e){pI(e)||(e={});for(var t=arguments.length,i=1;i<t;i++){var r=arguments[i];pI(r)&&Zte(e,r)}return e};function Zte(n,e){for(var t in e)ene(e,t)&&(n[t]=e[t])}function ene(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var tne=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var nne=Jte,ine=qte,mI=wk,gI=tne,rne=function(n,e,t){if(!gI(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var i=nne(e,{sep:".",brackets:!0}).filter(sne),r=i.length,s=-1,o=n;++s<r;){var a=i[s];if(s!==r-1){gI(o[a])||(o[a]={}),o=o[a];continue}mI(o[a])&&mI(t)?o[a]=ine({},o[a],t):o[a]=t}return n};function sne(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var Z_=pM,vI=Fte,one=Nte,yI=rne,ane=function(e,t,i){if(!Z_(e))throw new TypeError("expected an object");if(typeof t!="string"||i==null)return vI.apply(null,arguments);if(typeof i=="string")return yI(e,t,i),e;var r=one(e,t);return Z_(i)&&Z_(r)&&(i=vI({},r,i)),yI(e,t,i),e};const lne=ic(ane),mM=(...n)=>n.filter(Boolean).join(".");function cne(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function une(n,e){return Object.entries(Bq(n,e)).reduce((t,[,{value:i,disabled:r,key:s}])=>(t[s]=r?void 0:i,t),{})}function fne(n,e){const t=I.useRef();return(e?Rh:ep)(n,t.current)||(t.current=n),t.current}function Tk(n,e){return I.useMemo(n,fne(e,!0))}function dne(n){const e=I.useRef(null),t=I.useRef(null),i=I.useRef(!0);return I.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),I.useEffect(()=>{if(i.current){i.current=!1;return}let r;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",r=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const hne=n=>{const[e,t]=I.useState(n.getVisiblePaths());return I.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:ep});return()=>i()},[n]),e};function pne(n,e,t){return n.useStore(r=>{const s=at(at({},t),r.data);return une(s,e)},ep)}function Ck(n=3){const e=I.useRef(null),t=I.useRef(null),[i,r]=I.useState(!1),s=I.useCallback(()=>r(!0),[]),o=I.useCallback(()=>r(!1),[]);return I.useLayoutEffect(()=>{if(i){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),d=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",d==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:s,hide:o}}mee([gee]);const mne={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};qi.extend({color:()=>n=>Li(n).isValid()});const gne=n=>qi().color().test(n);function bk(n,{format:e,hasAlpha:t,isString:i}){const r=mne[e]+(i&&e!=="hex"?"String":""),s=n[r]();return typeof s=="object"&&!t?Dq(s,["a"]):s}const Rk=(n,e)=>{const t=Li(n);if(!t.isValid())throw Error("Invalid color");return bk(t,e)},vne=(n,e)=>bk(Li(n),at(at({},e),{},{isString:!0,format:"hex"})),yne=({value:n})=>{const e=pee(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:Rk(n,r),settings:r}};var xne=Object.freeze({__proto__:null,schema:gne,sanitize:Rk,format:vne,normalize:yne});const _ne=rt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Ane=rt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Sne=rt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function xI(n,e){return e!=="rgb"?Li(n).toRgb():n}function Ene({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:s}=Ti(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:c,shown:u,show:d,hide:p}=Ck(),m=I.useRef(0),[g,x]=I.useState(()=>xI(n,o)),_=a?Eee:Mee,v=()=>{x(xI(n,o)),d(),r()},A=()=>{p(),s(),window.clearTimeout(m.current)},S=()=>{m.current=window.setTimeout(A,500)};return I.useEffect(()=>()=>window.clearTimeout(m.current),[]),K.createElement(K.Fragment,null,K.createElement(_ne,{ref:l,active:u,onClick:()=>v(),style:{color:e}}),u&&K.createElement(oM,null,K.createElement(XN,{onPointerUp:A}),K.createElement(Sne,{ref:c,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:w=>w.buttons===0&&S()},K.createElement(_,{color:g,onChange:i}))))}function wne(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:s}=Ti();return K.createElement(Qr,{input:!0},K.createElement(Ts,null,t),K.createElement(Ane,null,K.createElement(Ene,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:s}),K.createElement(sM,{value:e,onChange:i,onUpdate:r})))}var Mne=at({component:wne},xne);function Tne(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Ti();return K.createElement(Qr,{input:!0},K.createElement(Ts,null,n),K.createElement(lM,{value:e,settings:i,onUpdate:t}))}var Cne=at({component:Tne},tk(["x","y","z"]));const bne=rt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Rne=rt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Pne({value:n,settings:e,onUpdate:t}){const i=I.useRef(),r=I.useRef(0),s=I.useRef(0),o=I.useRef(1),[a,l]=I.useState(!1),[c,u]=I.useState(!1),[d,p]=KN(),m=I.useRef(null),g=I.useRef(null);I.useLayoutEffect(()=>{if(a){const{top:j,left:z,width:$,height:J}=m.current.getBoundingClientRect();g.current.style.left=z+$/2+"px",g.current.style.top=j+J/2+"px"}},[a]);const{keys:[x,_],joystick:v}=e,A=v==="invertY"?1:-1,{[x]:{step:S},[_]:{step:w}}=e,T=Po("sizes","joystickWidth"),C=Po("sizes","joystickHeight"),R=parseFloat(T)*.8/2,D=parseFloat(C)*.8/2,P=I.useCallback(()=>{i.current||(u(!0),r.current&&p({x:r.current*R}),s.current&&p({y:s.current*-D}),i.current=window.setInterval(()=>{t(j=>{const z=S*r.current*o.current,$=A*w*s.current*o.current;return Array.isArray(j)?{[x]:j[0]+z,[_]:j[1]+$}:{[x]:j[x]+z,[_]:j[_]+$}})},16))},[R,D,t,p,S,w,x,_,A]),B=I.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,u(!1)},[]);I.useEffect(()=>{function j(z){o.current=DN(z)}return window.addEventListener("keydown",j),window.addEventListener("keyup",j),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",j),window.removeEventListener("keyup",j)}},[]);const N=sp(({first:j,active:z,delta:[$,J],movement:[Q,ee]})=>{j&&l(!0);const O=Wa(Q,-R,R),W=Wa(ee,-D,D);r.current=Math.abs(Q)>Math.abs(O)?Math.sign(Q-O):0,s.current=Math.abs(ee)>Math.abs(W)?Math.sign(W-ee):0;let G=n[x],H=n[_];z?(r.current||(G+=$*S*o.current,p({x:O})),s.current||(H-=A*J*w*o.current,p({y:W})),r.current||s.current?P():B(),t({[x]:G,[_]:H})):(l(!1),r.current=0,s.current=0,p({x:0,y:0}),B())});return K.createElement(bne,bn({ref:m},N()),a&&K.createElement(oM,null,K.createElement(Rne,{ref:g,isOutOfBounds:c},K.createElement("div",null),K.createElement("span",{ref:d}))))}const Ine=rt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Bne(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Ti();return K.createElement(Qr,{input:!0},K.createElement(Ts,null,n),K.createElement(Ine,{withJoystick:!!i.joystick},i.joystick&&K.createElement(Pne,{value:e,settings:i,onUpdate:t}),K.createElement(lM,{value:e,settings:i,onUpdate:t})))}const Dne=["joystick"],Pk=tk(["x","y"]),Lne=n=>{let{joystick:e=!0}=n,t=Wt(n,Dne);const{value:i,settings:r}=Pk.normalize(t);return{value:i,settings:at(at({},r),{},{joystick:e})}};var One=at(at({component:Bne},Pk),{},{normalize:Lne});const Fne=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},Nne=(n,e)=>typeof e=="object"&&"image"in e,kne=({image:n})=>({value:n});var Une=Object.freeze({__proto__:null,sanitize:Fne,schema:Nne,normalize:kne});const zne=rt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Hne=rt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Gne=rt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Vne=rt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Wne=rt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),$ne=rt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function jne(){const{label:n,value:e,onUpdate:t,disabled:i}=Ti(),{popinRef:r,wrapperRef:s,shown:o,show:a,hide:l}=Ck(),c=I.useCallback(g=>{g.length&&t(g[0])},[t]),u=I.useCallback(g=>{g.stopPropagation(),t(void 0)},[t]),{getRootProps:d,getInputProps:p,isDragAccept:m}=Ek({maxFiles:1,accept:"image/*",onDrop:c,disabled:i});return K.createElement(Qr,{input:!0},K.createElement(Ts,null,n),K.createElement(zne,null,K.createElement(Gne,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&K.createElement(oM,null,K.createElement(XN,{onPointerUp:l,style:{cursor:"pointer"}}),K.createElement(Vne,{ref:s,style:{backgroundImage:`url(${e})`}})),K.createElement(Hne,d({isDragAccept:m}),K.createElement("input",p()),K.createElement(Wne,null,m?"drop image":"click or drop")),K.createElement($ne,{onClick:u,disabled:!e})))}var Xne=at({component:jne},Une);const _I=qi().number(),Jne=(n,e)=>qi().array().length(2).every.number().test(n)&&qi().schema({min:_I,max:_I}).test(e),X0=n=>({min:n[0],max:n[1]}),Ik=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?X0(n):n,s={min:i[0],max:i[1]},{min:o,max:a}=at(at({},s),r);return[Wa(Number(o),e,Math.max(e,a)),Wa(Number(a),Math.min(t,o),t)]},Kne=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=ek(X0(n),{min:i,max:i}),s=[e,t],o=at(at({},r),{},{bounds:s});return{value:Ik(X0(n),o,n),settings:o}};var Yne=Object.freeze({__proto__:null,schema:Jne,format:X0,sanitize:Ik,normalize:Kne});const Qne=["value","bounds","onDrag"],qne=["bounds"],Zne=rt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function eie(n){let{value:e,bounds:[t,i],onDrag:r}=n,s=Wt(n,Qne);const o=I.useRef(null),a=I.useRef(null),l=I.useRef(null),c=I.useRef(0),u=Po("sizes","scrubberWidth"),d=sp(({event:g,first:x,xy:[_],movement:[v],memo:A={}})=>{if(x){const{width:w,left:T}=o.current.getBoundingClientRect();c.current=w-parseFloat(u);const C=(g==null?void 0:g.target)===a.current||(g==null?void 0:g.target)===l.current;A.pos=G0((_-T)/w,t,i);const R=Math.abs(A.pos-e.min)-Math.abs(A.pos-e.max);A.key=R<0||R===0&&A.pos<=e.min?"min":"max",C&&(A.pos=e[A.key])}const S=A.pos+G0(v/c.current,0,i-t);return r({[A.key]:AZ(S,s[A.key])}),A}),p=`calc(${H0(e.min,t,i)} * (100% - ${u} - 8px) + 4px)`,m=`calc(${1-H0(e.max,t,i)} * (100% - ${u} - 8px) + 4px)`;return K.createElement(QN,bn({ref:o},d()),K.createElement(YN,null,K.createElement(qN,{style:{left:p,right:m}})),K.createElement(SS,{position:"left",ref:a,style:{left:p}}),K.createElement(SS,{position:"right",ref:l,style:{right:m}}))}function tie(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Ti(),r=Wt(i,qne);return K.createElement(K.Fragment,null,K.createElement(Qr,{input:!0},K.createElement(Ts,null,n),K.createElement(Zne,null,K.createElement(eie,bn({value:e},i,{onDrag:t})),K.createElement(lM,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var nie=at({component:tie},Yne);const iie=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},rie=["type","value"],sie=["onChange","transient","onEditStart","onEditEnd"],oie=function(){const e=Tte(Cte(()=>({data:{}}))),t=iie();this.storeId=Iq(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(i).forEach(([u,d])=>{d.render&&a.some(p=>p.indexOf(u)===0)&&!d.render(this.get)&&l.push(u+".")});const c=[];return r.forEach(u=>{u in o&&o[u].__refCount>0&&l.every(d=>u.indexOf(d)===-1)&&(!o[u].render||o[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=o=>{o.forEach(a=>r.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in xs&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>i[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,d])=>{let p=c[u];if(p){const{type:m,value:g}=d,x=Wt(d,rie);m!==p.type?Ao(un.INPUT_TYPE_OVERRIDE,m):((p.__refCount===0||a)&&Object.assign(p,x),p.__refCount++)}else c[u]=at(at({},d),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const u=c.data;return V2(u[o],a,o,this,l),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=at(at({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,d])=>{try{V2(c[u],d,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{Ao(un.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,at(at({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,at(at({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([u,d])=>{if(u==="")return Ao(un.EMPTY_KEY);let p=mM(a,u);if(d.type===xs.FOLDER){const m=s(d.schema,p,l);Object.assign(c,m),p in i||(i[p]=d.settings)}else if(u in l)Ao(un.DUPLICATE_KEYS,u,p,l[u].path);else{const m=Uq(d,u,p,c);if(m){const{type:g,options:x,input:_}=m,{onChange:v,transient:A,onEditStart:S,onEditEnd:w}=x,T=Wt(x,sie);c[p]=at(at(at({type:g},T),_),{},{fromPanel:!0}),l[u]={path:p,onChange:v,transient:A,onEditStart:S,onEditEnd:w}}else Ao(un.UNKNOWN_INPUT,p,d)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},Bk=new oie,aie={collapsed:!1};function lie(n,e){return{type:xs.FOLDER,schema:n,settings:at(at({},aie),e)}}const AI=n=>"__levaInput"in n,cie=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[s,o]=cne(r);(!i||s.toLowerCase().indexOf(i)>-1)&&lne(t,o,{[s]:{__levaInput:!0,path:r}})}),t},uie=["type","label","path","valueKey","value","settings","setValue","disabled"];function fie(n){let{type:e,label:t,path:i,valueKey:r,value:s,settings:o,setValue:a,disabled:l}=n,c=Wt(n,uie);const{displayValue:u,onChange:d,onUpdate:p}=JN({type:e,value:s,settings:o,setValue:a}),m=nc[e].component;return m?K.createElement(kN.Provider,{value:at({key:r,path:i,id:""+i,label:t,displayValue:u,value:s,onChange:d,onUpdate:p,settings:o,setValue:a,disabled:l},c)},K.createElement(sZ,{disabled:l},K.createElement(m,null))):(Ao(un.NO_COMPONENT_FOR_TYPE,e,i),null)}const die=rt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function hie({onClick:n,settings:e,label:t}){const i=rp();return K.createElement(Qr,null,K.createElement(die,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const pie=rt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),mie=rt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),gie=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function vie(n){const{label:e,opts:t}=gie(n),i=rp();return K.createElement(Qr,{input:!!e},e&&K.createElement(Ts,null,e),K.createElement(pie,null,Object.entries(t).map(([r,s])=>K.createElement(mie,{key:r,onClick:()=>s(i.get)},r))))}const yie=rt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),Dk=100;function xie(n,e){n.push(e),n.length>Dk&&n.shift()}const _ie=I.forwardRef(function({initialValue:n},e){const t=Po("colors","highlight3"),i=Po("colors","elevation2"),r=Po("colors","highlight1"),[s,o]=I.useMemo(()=>[Li(r).alpha(.4).toRgbString(),Li(r).alpha(.1).toRgbString()],[r]),a=I.useRef([n]),l=I.useRef(n),c=I.useRef(n),u=I.useRef(),d=I.useCallback((g,x)=>{if(!g)return;const{width:_,height:v}=g,A=new Path2D,S=_/Dk,w=v*.05;for(let R=0;R<a.current.length;R++){const D=H0(a.current[R],l.current,c.current),P=S*R,B=v-D*(v-w*2)-w;A.lineTo(P,B)}x.clearRect(0,0,_,v);const T=new Path2D(A);T.lineTo(S*(a.current.length+1),v),T.lineTo(0,v),T.lineTo(0,0);const C=x.createLinearGradient(0,0,0,v);C.addColorStop(0,s),C.addColorStop(1,o),x.fillStyle=C,x.fill(T),x.strokeStyle=i,x.lineJoin="round",x.lineWidth=14,x.stroke(A),x.strokeStyle=t,x.lineWidth=2,x.stroke(A)},[t,i,s,o]),[p,m]=pZ(d);return I.useImperativeHandle(e,()=>({frame:g=>{(l.current===void 0||g<l.current)&&(l.current=g),(c.current===void 0||g>c.current)&&(c.current=g),xie(a.current,g),u.current=requestAnimationFrame(()=>d(p.current,m.current))}}),[p,m,d]),I.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),K.createElement(yie,{ref:p})}),SI=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),Aie=I.forwardRef(function({initialValue:n},e){const[t,i]=I.useState(SI(n));return I.useImperativeHandle(e,()=>({frame:r=>i(SI(r))}),[]),K.createElement("div",null,t)});function EI(n){return typeof n=="function"?n():n.current}function Sie({label:n,objectOrFn:e,settings:t}){const i=I.useRef(),r=I.useRef(EI(e));return I.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=i.current)===null||o===void 0||o.frame(EI(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),K.createElement(Qr,{input:!0},K.createElement(Ts,{align:"top"},n),t.graph?K.createElement(_ie,{ref:i,initialValue:r.current}):K.createElement(Aie,{ref:i,initialValue:r.current}))}const Eie=["type","label","key"],wie={[xs.BUTTON]:hie,[xs.BUTTON_GROUP]:vie,[xs.MONITOR]:Sie},Mie=K.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=gZ(n);if(!e)return null;const{type:l,label:c,key:u}=e,d=Wt(e,Eie);if(l in xs){const p=wie[l];return K.createElement(p,bn({label:c,path:n},d))}return l in nc?K.createElement(fie,bn({key:s+n,type:l,label:c,storeId:s,path:n,valueKey:u,setValue:t,setSettings:i,disable:r,emitOnEditStart:o,emitOnEditEnd:a},d)):(Eq(un.UNSUPPORTED_INPUT,l,n),null)});function Tie({toggle:n,toggled:e,name:t}){return K.createElement(nZ,{onClick:()=>n()},K.createElement(aM,{toggled:e}),K.createElement("div",null,t))}const Cie=({name:n,path:e,tree:t})=>{const i=rp(),r=mM(e,n),{collapsed:s,color:o}=i.getFolderSettings(r),[a,l]=I.useState(!s),c=I.useRef(null),u=Po("colors","folderWidgetColor"),d=Po("colors","folderTextColor");return I.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),c.current.style.setProperty("--leva-colors-folderTextColor",o||d)},[o,u,d]),K.createElement(V0,{ref:c},K.createElement(Tie,{name:n,toggled:a,toggle:()=>l(p=>!p)}),K.createElement(Lk,{parent:r,tree:t,toggled:a}))},Lk=K.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:s})=>{const{wrapperRef:o,contentRef:a}=dne(s),l=rp(),c=([d,p])=>{var m;return(AI(p)?(m=l.getInput(p.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(mM(i,d)).order)||0},u=Object.entries(r).sort((d,p)=>c(d)-c(p));return K.createElement(_S,{ref:o,isRoot:n,fill:e,flat:t},K.createElement(WN,{ref:a,isRoot:n,toggled:s},u.map(([d,p])=>AI(p)?K.createElement(Mie,{key:p.path,valueKey:p.valueKey,path:p.path}):K.createElement(Cie,{key:d,name:d,path:i,tree:p}))))}),bie=rt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${jN}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),Ok=40,J0=rt("i",{$flexCenter:"",width:Ok,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),Rie=rt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Pie=rt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${J0}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),Iie=rt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Bie=rt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:Ok}}}}),Die=K.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=I.useState(""),s=I.useMemo(()=>BN(n,250),[n]),o=()=>{n(""),r("")},a=l=>{const c=l.currentTarget.value;e(!0),r(c)};return I.useEffect(()=>{s(i)},[i,s]),K.createElement(K.Fragment,null,K.createElement(Iie,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),K.createElement(J0,{onClick:()=>o(),style:{visibility:i?"visible":"hidden"}},K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function Lie({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[u,d]=I.useState(!1),p=I.useRef(null);I.useEffect(()=>{var g,x;u?(g=p.current)===null||g===void 0||g.focus():(x=p.current)===null||x===void 0||x.blur()},[u]);const m=sp(({offset:[g,x],first:_,last:v})=>{e({x:g,y:x}),_&&t({x:g,y:x}),v&&i({x:g,y:x})},{filterTaps:!0,from:({offset:[g,x]})=>[(c==null?void 0:c.x)||g,(c==null?void 0:c.y)||x]});return I.useEffect(()=>{const g=x=>{x.key==="L"&&x.shiftKey&&x.metaKey&&d(_=>!_)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),K.createElement(K.Fragment,null,K.createElement(Rie,{mode:a?"drag":void 0},K.createElement(J0,{active:!s,onClick:()=>r()},K.createElement(aM,{toggled:s,width:12,height:8})),K.createElement(Bie,bn({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?K.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},K.createElement("circle",{cx:"2",cy:"2",r:"2"}),K.createElement("circle",{cx:"14",cy:"2",r:"2"}),K.createElement("circle",{cx:"26",cy:"2",r:"2"}),K.createElement("circle",{cx:"2",cy:"12",r:"2"}),K.createElement("circle",{cx:"14",cy:"12",r:"2"}),K.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&K.createElement(J0,{active:u,onClick:()=>d(g=>!g)},K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},K.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),K.createElement(Pie,{toggled:u},K.createElement(Die,{ref:p,setFilter:n,toggle:r})))}const Oie=["store","hidden","theme","collapsed"];function Fie(n){let{store:e,hidden:t=!1,theme:i,collapsed:r=!1}=n,s=Wt(n,Oie);const o=Tk(()=>Yq(i),[i]),[a,l]=I.useState(!r),c=typeof r=="object"?!r.collapsed:a,u=I.useMemo(()=>typeof r=="object"?d=>{typeof d=="function"?r.onChange(!d(!r.collapsed)):r.onChange(!d)}:l,[r]);return!e||t?null:K.createElement(rM.Provider,{value:o},K.createElement(Nie,bn({store:e},s,{toggled:c,setToggle:u,rootClass:o.className})))}const Nie=K.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,d;const p=hne(n),[m,g]=I.useState(""),x=I.useMemo(()=>cie(p,m),[p,m]),[_,v]=KN(),A=r||p.length>0,S=typeof o=="object"&&o.title||void 0,w=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,T=typeof o=="object"&&(d=o.filter)!==null&&d!==void 0?d:!0,C=typeof o=="object"&&o.position||void 0,R=typeof o=="object"&&o.onDrag||void 0,D=typeof o=="object"&&o.onDragStart||void 0,P=typeof o=="object"&&o.onDragEnd||void 0;return K.useEffect(()=>{v({x:C==null?void 0:C.x,y:C==null?void 0:C.y})},[C,v]),Kq(),K.createElement(zN.Provider,{value:{hideCopyButton:a}},K.createElement(bie,{ref:_,className:e,fill:t,flat:i,oneLineLabels:s,hideTitleBar:!o,style:{display:A?"block":"none"}},o&&K.createElement(Lie,{onDrag:B=>{v(B),R==null||R(B)},onDragStart:B=>D==null?void 0:D(B),onDragEnd:B=>P==null?void 0:P(B),setFilter:g,toggle:B=>c(N=>B??!N),toggled:l,title:S,drag:w,filterEnabled:T,from:C}),A&&K.createElement(UN.Provider,{value:n},K.createElement(Lk,{isRoot:!0,fill:t,flat:i,tree:x,toggled:l}))))}),kie=["isRoot"];let K0=!1,Ll=null;function Fk(n){let{isRoot:e=!1}=n,t=Wt(n,kie);return I.useEffect(()=>(K0=!0,!e&&Ll&&(Ll.remove(),Ll=null),()=>{e||(K0=!1)}),[e]),K.createElement(Fie,bn({store:Bk},t))}function Uie(n){I.useEffect(()=>{n&&!K0&&(Ll||(Ll=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Ll),Hq(K.createElement(Fk,{isRoot:!0}),Ll))),K0=!0)},[n])}function zie(n,e,t,i,r){let s,o,a,l,c;return typeof n=="string"?(o=n,s=e,Array.isArray(t)?c=t:t&&("store"in t?(l=t,c=i):(a=t,Array.isArray(i)?c=i:(l=i,c=r)))):(s=n,Array.isArray(e)?c=e:(l=e,c=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:c||[]}}function Nk(n,e,t,i,r){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:c}=zie(n,e,t,i,r),u=typeof o=="function",d=I.useRef(!1),p=I.useRef(!0),m=Tk(()=>{d.current=!0;const N=typeof o=="function"?o():o;return s?{[s]:lie(N,a)}:N},c),g=!(l!=null&&l.store);Uie(g);const[x]=I.useState(()=>(l==null?void 0:l.store)||Bk),[_,v]=I.useMemo(()=>x.getDataFromSchema(m),[x,m]),[A,S,w,T,C]=I.useMemo(()=>{const N=[],j=[],z={},$={},J={};return Object.values(v).forEach(({path:Q,onChange:ee,onEditStart:O,onEditEnd:W,transient:G})=>{N.push(Q),ee?(z[Q]=ee,G||j.push(Q)):j.push(Q),O&&($[Q]=O),W&&(J[Q]=W)}),[N,j,z,$,J]},[v]),R=I.useMemo(()=>x.orderPaths(A),[A,x]),D=pne(x,S,_),P=I.useCallback(N=>{const j=Object.entries(N).reduce((z,[$,J])=>Object.assign(z,{[v[$].path]:J}),{});x.set(j,!1)},[x,v]),B=I.useCallback(N=>x.get(v[N].path),[x,v]);return I.useEffect(()=>{const N=!p.current&&d.current;return x.addData(_,N),p.current=!1,d.current=!1,()=>x.disposePaths(R)},[x,R,_]),I.useEffect(()=>{const N=[];return Object.entries(w).forEach(([j,z])=>{z(x.get(j),j,at({initial:!0,get:x.get},x.getInput(j)));const $=x.useStore.subscribe(J=>{const Q=J.data[j];return[Q.disabled?void 0:Q.value,Q]},([J,Q])=>z(J,j,at({initial:!1,get:x.get},Q)),{equalityFn:ep});N.push($)}),()=>N.forEach(j=>j())},[x,w]),I.useEffect(()=>{const N=[];return Object.entries(T).forEach(([j,z])=>N.push(x.subscribeToEditStart(j,z))),Object.entries(C).forEach(([j,z])=>N.push(x.subscribeToEditEnd(j,z))),()=>N.forEach(j=>j())},[T,C,x]),u?[D,P,B]:D}$o(Ss.SELECT,DZ);$o(Ss.IMAGE,Xne);$o(Ss.NUMBER,EZ);$o(Ss.COLOR,Mne);$o(Ss.STRING,GZ);$o(Ss.BOOLEAN,KZ);$o(Ss.INTERVAL,nie);$o(Ss.VECTOR3D,Cne);$o(Ss.VECTOR2D,One);function wI(n,e){if(e===GL)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===_0||e===VE){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===_0)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Hr=Uint8Array,Aa=Uint16Array,OS=Uint32Array,kk=new Hr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Uk=new Hr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Hie=new Hr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zk=function(n,e){for(var t=new Aa(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new OS(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},Hk=zk(kk,2),Gk=Hk[0],Gie=Hk[1];Gk[28]=258,Gie[258]=28;var Vie=zk(Uk,0),Wie=Vie[0],FS=new Aa(32768);for(var nn=0;nn<32768;++nn){var la=(nn&43690)>>>1|(nn&21845)<<1;la=(la&52428)>>>2|(la&13107)<<2,la=(la&61680)>>>4|(la&3855)<<4,FS[nn]=((la&65280)>>>8|(la&255)<<8)>>>1}var Kd=function(n,e,t){for(var i=n.length,r=0,s=new Aa(e);r<i;++r)++s[n[r]-1];var o=new Aa(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new Aa(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],d=o[n[r]-1]++<<u,p=d|(1<<u)-1;d<=p;++d)a[FS[d]>>>l]=c}else for(a=new Aa(i),r=0;r<i;++r)n[r]&&(a[r]=FS[o[n[r]-1]++]>>>15-n[r]);return a},lp=new Hr(288);for(var nn=0;nn<144;++nn)lp[nn]=8;for(var nn=144;nn<256;++nn)lp[nn]=9;for(var nn=256;nn<280;++nn)lp[nn]=7;for(var nn=280;nn<288;++nn)lp[nn]=8;var Vk=new Hr(32);for(var nn=0;nn<32;++nn)Vk[nn]=5;var $ie=Kd(lp,9,1),jie=Kd(Vk,5,1),e1=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},as=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},t1=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Xie=function(n){return(n/8|0)+(n&7&&1)},Jie=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Aa?Aa:n instanceof OS?OS:Hr)(t-e);return i.set(n.subarray(e,t)),i},Kie=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Hr(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Hr(i*3));var o=function(Se){var Re=e.length;if(Se>Re){var Ne=new Hr(Math.max(Re*2,Se));Ne.set(e),e=Ne}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,p=t.m,m=t.n,g=i*8;do{if(!u){t.f=a=as(n,l,1);var x=as(n,l+1,3);if(l+=3,x)if(x==1)u=$ie,d=jie,p=9,m=5;else if(x==2){var S=as(n,l,31)+257,w=as(n,l+10,15)+4,T=S+as(n,l+5,31)+1;l+=14;for(var C=new Hr(T),R=new Hr(19),D=0;D<w;++D)R[Hie[D]]=as(n,l+D*3,7);l+=w*3;for(var P=e1(R),B=(1<<P)-1,N=Kd(R,P,1),D=0;D<T;){var j=N[as(n,l,B)];l+=j&15;var _=j>>>4;if(_<16)C[D++]=_;else{var z=0,$=0;for(_==16?($=3+as(n,l,3),l+=2,z=C[D-1]):_==17?($=3+as(n,l,7),l+=3):_==18&&($=11+as(n,l,127),l+=7);$--;)C[D++]=z}}var J=C.subarray(0,S),Q=C.subarray(S);p=e1(J),m=e1(Q),u=Kd(J,p,1),d=Kd(Q,m,1)}else throw"invalid block type";else{var _=Xie(l)+4,v=n[_-4]|n[_-3]<<8,A=_+v;if(A>i){if(s)throw"unexpected EOF";break}r&&o(c+v),e.set(n.subarray(_,A),c),t.b=c+=v,t.p=l=A*8;continue}if(l>g){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var ee=(1<<p)-1,O=(1<<m)-1,W=l;;W=l){var z=u[t1(n,l)&ee],G=z>>>4;if(l+=z&15,l>g){if(s)throw"unexpected EOF";break}if(!z)throw"invalid length/literal";if(G<256)e[c++]=G;else if(G==256){W=l,u=null;break}else{var H=G-254;if(G>264){var D=G-257,Y=kk[D];H=as(n,l,(1<<Y)-1)+Gk[D],l+=Y}var me=d[t1(n,l)&O],ce=me>>>4;if(!me)throw"invalid distance";l+=me&15;var Q=Wie[ce];if(ce>3){var Y=Uk[ce];Q+=t1(n,l)&(1<<Y)-1,l+=Y}if(l>g){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var Ae=c+H;c<Ae;c+=4)e[c]=e[c-Q],e[c+1]=e[c+1-Q],e[c+2]=e[c+2-Q],e[c+3]=e[c+3-Q];c=Ae}}t.l=u,t.p=W,t.b=c,u&&(a=1,t.m=p,t.d=d,t.n=m)}while(!a);return c==e.length?e:Jie(e,0,c)},Yie=new Hr(0),Qie=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function qie(n,e){return Kie((Qie(n),n.subarray(2,-4)),e)}var Zie=typeof TextDecoder<"u"&&new TextDecoder,ere=0;try{Zie.decode(Yie,{stream:!0}),ere=1}catch{}class gM extends di{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new sre(t)}),this.register(function(t){return new hre(t)}),this.register(function(t){return new pre(t)}),this.register(function(t){return new mre(t)}),this.register(function(t){return new are(t)}),this.register(function(t){return new lre(t)}),this.register(function(t){return new cre(t)}),this.register(function(t){return new ure(t)}),this.register(function(t){return new rre(t)}),this.register(function(t){return new fre(t)}),this.register(function(t){return new ore(t)}),this.register(function(t){return new dre(t)}),this.register(function(t){return new nre(t)}),this.register(function(t){return new gre(t)}),this.register(function(t){return new vre(t)})}load(e,t,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=vr.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new nr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(vr.decodeText(new Uint8Array(e.slice(0,4)))===Wk){try{o[Bt.KHR_BINARY_GLTF]=new yre(e)}catch(u){r&&r(u);return}s=JSON.parse(o[Bt.KHR_BINARY_GLTF].content)}else s=JSON.parse(vr.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Ire(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],d=s.extensionsRequired||[];switch(u){case Bt.KHR_MATERIALS_UNLIT:o[u]=new ire;break;case Bt.KHR_DRACO_MESH_COMPRESSION:o[u]=new xre(s,this.dracoLoader);break;case Bt.KHR_TEXTURE_TRANSFORM:o[u]=new _re;break;case Bt.KHR_MESH_QUANTIZATION:o[u]=new Are;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function tre(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Bt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class nre{constructor(e){this.parser=e,this.name=Bt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new be(16777215);l.color!==void 0&&u.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Wv(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new wh(u),c.distance=d;break;case"spot":c=new Vv(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,ga(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class ire{constructor(){this.name=Bt.KHR_MATERIALS_UNLIT}getMaterialType(){return pr}extendParams(e,t,i){const r=[];e.color=new be(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(r)}}class rre{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class sre{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:eo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ve(a,a)}return Promise.all(s)}}class ore{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:eo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class are{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:eo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new be(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class lre{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:eo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class cre{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:eo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new be(a[0],a[1],a[2]),Promise.all(s)}}class ure{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:eo}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class fre{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:eo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new be(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class dre{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:eo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class hre{constructor(e){this.parser=e,this.name=Bt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class pre{constructor(e){this.parser=e,this.name=Bt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class mre{constructor(e){this.parser=e,this.name=Bt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class gre{constructor(e){this.name=Bt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,d=r.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(m),u,d,p,r.mode,r.filter),m})})}else return null}}class vre{constructor(e){this.name=Bt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Or.TRIANGLES&&c.mode!==Or.TRIANGLE_STRIP&&c.mode!==Or.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const g of d){const x=new Ue,_=new k,v=new zn,A=new k(1,1,1),S=new ew(g.geometry,g.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,w),l.SCALE&&A.fromBufferAttribute(l.SCALE,w),S.setMatrixAt(w,x.compose(_,v,A));for(const w in l)w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&g.geometry.setAttribute(w,l[w]);bt.prototype.copy.call(S,g),this.parser.assignFinalMaterial(S),m.push(S)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const Wk="glTF",vd=12,MI={JSON:1313821514,BIN:5130562};class yre{constructor(e){this.name=Bt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,vd);if(this.header={magic:vr.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Wk)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-vd,r=new DataView(e,vd);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===MI.JSON){const l=new Uint8Array(e,vd+s,o);this.content=vr.decodeText(l)}else if(a===MI.BIN){const l=vd+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class xre{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Bt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=NS[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=NS[u]||u.toLowerCase();if(o[u]!==void 0){const p=i.accessors[e.attributes[u]],m=ku[p.componentType];c[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(p){for(const m in p.attributes){const g=p.attributes[m],x=l[m];x!==void 0&&(g.normalized=x)}d(p)},a,c)})})}}class _re{constructor(){this.name=Bt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Are{constructor(){this.name=Bt.KHR_MESH_QUANTIZATION}}class $k extends gf{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-t,d=(i-t)/u,p=d*d,m=p*d,g=e*c,x=g-c,_=-2*m+3*p,v=m-p,A=1-_,S=v-p+d;for(let w=0;w!==a;w++){const T=o[x+w+a],C=o[x+w+l]*u,R=o[g+w+a],D=o[g+w]*u;s[w]=A*T+S*C+_*R+v*D}return s}}const Sre=new zn;class Ere extends $k{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return Sre.fromArray(s).normalize().toArray(s),s}}const Or={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ku={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},TI={9728:Mn,9729:dn,9984:ph,9985:mv,9986:Bu,9987:Ys},CI={33071:Jn,33648:Xu,10497:Ks},n1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},NS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...zh.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ca={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},wre={CUBICSPLINE:void 0,LINEAR:Kl,STEP:Ku},i1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Mre(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Jh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Js})),n.DefaultMaterial}function yl(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function ga(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Tre(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(r){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],p=c[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function Cre(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function bre(n){let e;const t=n.extensions&&n.extensions[Bt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+r1(t.attributes):e=n.indices+":"+r1(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+r1(n.targets[i]);return e}function r1(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function kS(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Rre(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Pre=new Ue;class Ire{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new tre,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new mw(this.options.manager):this.textureLoader=new XO(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new nr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};yl(s,a,r),ga(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Bt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(vr.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=n1[r.type],a=ku[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new kt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=n1[r.type],c=ku[r.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let x,_;if(m&&m!==d){const v=Math.floor(p/m),A="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let S=t.cache.get(A);S||(x=new c(a,v*m,r.count*m/u),S=new Wh(x,m/u),t.cache.add(A,S)),_=new ka(S,l,p%m/u,g)}else a===null?x=new c(r.count*l):x=new c(a,p,r.count*l),_=new kt(x,l,g);if(r.sparse!==void 0){const v=n1.SCALAR,A=ku[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,T=new A(o[1],S,r.sparse.count*v),C=new c(o[2],w,r.sparse.count*l);a!==null&&(_=new kt(_.array.slice(),_.itemSize,_.normalized));for(let R=0,D=T.length;R<D;R++){const P=T[R];if(_.setX(P,C[R*l]),l>=2&&_.setY(P,C[R*l+1]),l>=3&&_.setZ(P,C[R*l+2]),l>=4&&_.setW(P,C[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=TI[p.magFilter]||dn,u.minFilter=TI[p.minFilter]||Ys,u.wrapS=CI[p.wrapS]||Ks,u.wrapT=CI[p.wrapT]||Ks,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let g=p;t.isImageBitmapLoader===!0&&(g=function(x){const _=new qt(x);_.needsUpdate=!0,p(_)}),t.load(vr.resolveURL(d,s.path),g,void 0,m)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||Rre(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Bt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Bt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Bt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&("colorSpace"in o?o.colorSpace=r===3001?"srgb":"srgb-linear":o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Tv,Vn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new fi,Vn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Jh}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Bt.KHR_MATERIALS_UNLIT]){const d=r[Bt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new be(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,3001)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=hs);const u=s.alphaMode||i1.OPAQUE;if(u===i1.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===i1.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==pr&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ve(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&o!==pr&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==pr&&(a.emissive=new be().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==pr&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),ga(d,s),t.associations.set(d,{materials:e}),s.extensions&&yl(r,d,s),d})}createUniqueName(e){const t=Ct.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Bt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return bI(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=bre(c),d=r[u];if(d)o.push(d.promise);else{let p;c.extensions&&c.extensions[Bt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=bI(new dt,c,t),r[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?Mre(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let m=0,g=u.length;m<g;m++){const x=u[m],_=o[m];let v;const A=c[m];if(_.mode===Or.TRIANGLES||_.mode===Or.TRIANGLE_STRIP||_.mode===Or.TRIANGLE_FAN||_.mode===void 0)v=s.isSkinnedMesh===!0?new Mv(x,A):new Hn(x,A),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),_.mode===Or.TRIANGLE_STRIP?v.geometry=wI(v.geometry,VE):_.mode===Or.TRIANGLE_FAN&&(v.geometry=wI(v.geometry,_0));else if(_.mode===Or.LINES)v=new ws(x,A);else if(_.mode===Or.LINE_STRIP)v=new Qs(x,A);else if(_.mode===Or.LINE_LOOP)v=new tw(x,A);else if(_.mode===Or.POINTS)v=new nw(x,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(v.geometry.morphAttributes).length>0&&Cre(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),ga(v,s),_.extensions&&yl(r,v,_),t.assignFinalMaterial(v),d.push(v)}for(let m=0,g=d.length;m<g;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return s.extensions&&yl(r,d[0],s),d[0];const p=new ms;s.extensions&&yl(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,g=d.length;m<g;m++)p.add(d[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new kn(zr.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new ac(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),ga(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const p=new Ue;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new pf(a,l)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let u=0,d=i.channels.length;u<d;u++){const p=i.channels[u],m=i.samplers[p.sampler],g=p.target,x=g.node,_=i.parameters!==void 0?i.parameters[m.input]:m.input,v=i.parameters!==void 0?i.parameters[m.output]:m.output;g.node!==void 0&&(s.push(this.getDependency("node",x)),o.push(this.getDependency("accessor",_)),a.push(this.getDependency("accessor",v)),l.push(m),c.push(g))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(u){const d=u[0],p=u[1],m=u[2],g=u[3],x=u[4],_=[];for(let v=0,A=d.length;v<A;v++){const S=d[v],w=p[v],T=m[v],C=g[v],R=x[v];if(S===void 0)continue;S.updateMatrix();let D;switch(ca[R.path]){case ca.weights:D=Ql;break;case ca.rotation:D=Fo;break;case ca.position:case ca.scale:default:D=ql;break}const P=S.name?S.name:S.uuid,B=C.interpolation!==void 0?wre[C.interpolation]:Kl,N=[];ca[R.path]===ca.weights?S.traverse(function(z){z.morphTargetInfluences&&N.push(z.name?z.name:z.uuid)}):N.push(P);let j=T.array;if(T.normalized){const z=kS(j.constructor),$=new Float32Array(j.length);for(let J=0,Q=j.length;J<Q;J++)$[J]=j[J]*z;j=$}for(let z=0,$=N.length;z<$;z++){const J=new D(N[z]+"."+ca[R.path],w.array,j,B);C.interpolation==="CUBICSPLINE"&&(J.createInterpolant=function(ee){const O=this instanceof Fo?Ere:$k;return new O(this.times,this.values,this.getValueSize()/3,ee)},J.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(J)}}return new Zl(r,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],p=c[2];p!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,Pre)});for(let m=0,g=d.length;m<g;m++)u.add(d[m]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new qu:c.length>1?u=new ms:c.length===1?u=c[0]:u=new bt,u!==c[0])for(let d=0,p=c.length;d<p;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),ga(u,s),s.extensions&&yl(i,u,s),s.matrix!==void 0){const d=new Ue;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new ms;i.name&&(s.name=r.createUniqueName(i.name)),ga(s,i),i.extensions&&yl(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);const c=u=>{const d=new Map;for(const[p,m]of r.associations)(p instanceof Vn||p instanceof qt)&&d.set(p,m);return u.traverse(p=>{const m=r.associations.get(p);m!=null&&d.set(p,m)}),d};return r.associations=c(s),s})}}function Bre(n,e,t){const i=e.attributes,r=new Es;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new k(l[0],l[1],l[2]),new k(c[0],c[1],c[2])),a.normalized){const u=kS(ku[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new k,l=new k;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,g=p.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),p.normalized){const x=kS(ku[p.componentType]);l.multiplyScalar(x)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Kr;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function bI(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=NS[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return ga(n,e),Bre(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Tre(n,e.targets,t):n})}const Dre={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},Lre={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};function jk(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,o=Math.floor((r+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function Ore(n,e,t,i){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=t;++a){s[a]=e-i[n+1-a],o[a]=i[n+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],d=s[a-c],p=r[c]/(u+d);r[c]=l+u*p,l=d*p}r[a]=l}return r}function Fre(n,e,t,i){const r=jk(n,i,e),s=Ore(r,i,n,e),o=new Dt(0,0,0,0);for(let a=0;a<=n;++a){const l=t[r-n+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function Nre(n,e,t,i,r){const s=[];for(let d=0;d<=t;++d)s[d]=0;const o=[];for(let d=0;d<=i;++d)o[d]=s.slice(0);const a=[];for(let d=0;d<=t;++d)a[d]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let d=1;d<=t;++d){l[d]=e-r[n+1-d],c[d]=r[n+d]-e;let p=0;for(let m=0;m<d;++m){const g=c[m+1],x=l[d-m];a[d][m]=g+x;const _=a[m][d-1]/a[d][m];a[m][d]=p+g*_,p=x*_}a[d][d]=p}for(let d=0;d<=t;++d)o[0][d]=a[d][t];for(let d=0;d<=t;++d){let p=0,m=1;const g=[];for(let x=0;x<=t;++x)g[x]=s.slice(0);g[0][0]=1;for(let x=1;x<=i;++x){let _=0;const v=d-x,A=t-x;d>=x&&(g[m][0]=g[p][0]/a[A+1][v],_=g[m][0]*a[v][A]);const S=v>=-1?1:-v,w=d-1<=A?x-1:t-d;for(let C=S;C<=w;++C)g[m][C]=(g[p][C]-g[p][C-1])/a[A+1][v+C],_+=g[m][C]*a[v+C][A];d<=A&&(g[m][x]=-g[p][x-1]/a[A+1][d],_+=g[m][x]*a[d][A]),o[x][d]=_;const T=p;p=m,m=T}}let u=t;for(let d=1;d<=i;++d){for(let p=0;p<=t;++p)o[d][p]*=u;u*=t-d}return o}function kre(n,e,t,i,r){const s=r<n?r:n,o=[],a=jk(n,i,e),l=Nre(a,i,n,s,e),c=[];for(let u=0;u<t.length;++u){const d=t[u].clone(),p=d.w;d.x*=p,d.y*=p,d.z*=p,c[u]=d}for(let u=0;u<=s;++u){const d=c[a-n].clone().multiplyScalar(l[u][0]);for(let p=1;p<=n;++p)d.add(c[a-n+p].clone().multiplyScalar(l[u][p]));o[u]=d}for(let u=s+1;u<=r+1;++u)o[u]=new Dt(0,0,0);return o}function Ure(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function zre(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new k(o.x,o.y,o.z),i[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(Ure(s,a)*i[a]));r[s]=o.divideScalar(i[0])}return r}function Hre(n,e,t,i,r){const s=kre(n,e,t,i,r);return zre(s)}class RI extends Yr{constructor(e,t,i,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<i.length;++o){const a=i[o];this.controlPoints[o]=new Dt(a.x,a.y,a.z,a.w)}}getPoint(e,t){const i=t||new k,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Fre(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t){const i=t||new k,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=Hre(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let Rt,Bn,$i;class vM extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=s.path===""?vr.extractUrlBase(e):s.path,a=new nr(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,t){if(Xre(e))Rt=new jre().parse(e);else{const r=Yk(e);if(!Jre(r))throw new Error("THREE.FBXLoader: Unknown format.");if(II(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+II(r));Rt=new $re().parse(r)}const i=new mw(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Gre(i,this.manager).parse(Rt)}}class Gre{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Bn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=new Vre().parse(r);return this.parseScene(r,s,i),$i}parseConnections(){const e=new Map;return"Connections"in Rt&&Rt.Connections.connections.forEach(function(i){const r=i[0],s=i[1],o=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in Rt.Objects){const i=Rt.Objects.Video;for(const r in i){const s=i[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in Rt.Objects){const i=Rt.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(i.wrapS=o===0?Ks:Jn,i.wrapT=a===0?Ks:Jn,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}return i}loadTexture(e,t){let i;const r=this.textureLoader.path,s=Bn.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(i=t[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new qt):(l.setPath(this.textureLoader.path),o=l.load(i))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new qt):o=this.textureLoader.load(i);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in Rt.Objects){const i=Rt.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Bn.has(i))return null;const o=this.parseParameters(e,t,i);let a;switch(s.toLowerCase()){case"phong":a=new zd;break;case"lambert":a=new cw;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new zd;break}return a.setValues(o),a.name=r,a}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new be().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new be().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new be().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new be().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new be().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new be().fromArray(e.SpecularColor.value));const s=this;return Bn.get(i).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,o.ID),r.map!==void 0&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,o.ID),r.emissiveMap!==void 0&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,o.ID),r.envMap!==void 0&&(r.envMap.mapping=ju,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=s.getTexture(t,o.ID),r.specularMap!==void 0&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in Rt.Objects&&t in Rt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Bn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Rt.Objects){const i=Rt.Objects.Deformer;for(const r in i){const s=i[r],o=Bn.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,i);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,i),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new Ue().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Bn.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,t,i){$i=new ms;const r=this.parseModels(e.skeletons,t,i),s=Rt.Objects.Model,o=this;r.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),Bn.get(l.ID).parents.forEach(function(d){const p=r.get(d.ID);p!==void 0&&p.add(l)}),l.parent===null&&$i.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),$i.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=Jk(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new Wre().parse();$i.children.length===1&&$i.children[0].isGroup&&($i.children[0].animations=a,$i=$i.children[0]),$i.animations=a}parseModels(e,t,i){const r=new Map,s=Rt.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=Bn.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,i);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new qu;break;case"Null":default:u=new ms;break}u.name=l.attrName?Ct.sanitizeNodeName(l.attrName):"",u.ID=a}this.getTransformData(u,l),r.set(a,u)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const d=s;s=new qu,s.matrixWorld.copy(c.transformLink),s.name=r?Ct.sanitizeNodeName(r):"",s.ID=i,l.bones[u]=s,d!==null&&s.add(d)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=Rt.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new bt;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let o=1e3;i.FarPlane!==void 0&&(o=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);const c=a/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const d=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new kn(u,c,s,o),d!==null&&t.setFocalLength(d);break;case 1:t=new ac(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new bt;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=Rt.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new bt;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new be().fromArray(i.Color.value));let o=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(o=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new wh(s,o,a,l);break;case 1:t=new Wv(s,o);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=zr.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=zr.degToRad(i.OuterAngle.value),u=Math.max(u,1)),t=new Vv(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new wh(s,o);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new zd({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new Mv(s,o),r.normalizeSkinWeights()):r=new Hn(s,o),r}createCurve(e,t){const i=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),r=new fi({color:3342591,linewidth:1});return new Qs(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=Kk(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&Bn.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=Rt.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),$i.add(e.target)):e.lookAt(new k().fromArray(o))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const o=e[s];Bn.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;Bn.get(c).parents.forEach(function(d){i.has(d.ID)&&i.get(d.ID).bind(new pf(o.bones),r[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Rt.Objects){const t=Rt.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new Ue().fromArray(s.Matrix.a)}):e[r.Node]=new Ue().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Rt&&"AmbientColor"in Rt.GlobalSettings){const e=Rt.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const s=new be(t,i,r);$i.add(new vw(s,1))}}}}class Vre{parse(e){const t=new Map;if("Geometry"in Rt.Objects){const i=Rt.Objects.Geometry;for(const r in i){const s=Bn.get(parseInt(r)),o=this.parseGeometry(s,i[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],o=e.parents.map(function(d){return Rt.Objects.Model[d.ID]});if(o.length===0)return;const a=e.children.reduce(function(d,p){return r[p.ID]!==void 0&&(d=r[p.ID]),d},null);e.children.forEach(function(d){i.morphTargets[d.ID]!==void 0&&s.push(i.morphTargets[d.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=Kk(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=Jk(c);return this.genGeometry(t,a,s,u)}genGeometry(e,t,i,r){const s=new dt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new He(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new He(a.colors,3)),t&&(s.setAttribute("skinIndex",new xv(a.weightsIndices,4)),s.setAttribute("skinWeight",new He(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new _t().getNormalMatrix(r),u=new He(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){let d="uv"+(u+1).toString();u===0&&(d="uv"),s.setAttribute(d,new He(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(d,p){d!==c&&(s.addGroup(u,p-u,c),c=d,u=p)}),s.groups.length>0){const d=s.groups[s.groups.length-1],p=d.start+d.count;p!==a.materialIndex.length&&s.addGroup(p,a.materialIndex.length-p,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){i.weightTable[o]===void 0&&(i.weightTable[o]=[]),i.weightTable[o].push({id:s,weight:r.weights[a]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,o=[],a=[],l=[],c=[],u=[],d=[];const p=this;return e.vertexIndices.forEach(function(m,g){let x,_=!1;m<0&&(m=m^-1,_=!0);let v=[],A=[];if(o.push(m*3,m*3+1,m*3+2),e.color){const S=Sg(g,i,m,e.color);l.push(S[0],S[1],S[2])}if(e.skeleton){if(e.weightTable[m]!==void 0&&e.weightTable[m].forEach(function(S){A.push(S.weight),v.push(S.id)}),A.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const S=[0,0,0,0],w=[0,0,0,0];A.forEach(function(T,C){let R=T,D=v[C];w.forEach(function(P,B,N){if(R>P){N[B]=R,R=P;const j=S[B];S[B]=D,D=j}})}),v=S,A=w}for(;A.length<4;)A.push(0),v.push(0);for(let S=0;S<4;++S)u.push(A[S]),d.push(v[S])}if(e.normal){const S=Sg(g,i,m,e.normal);a.push(S[0],S[1],S[2])}e.material&&e.material.mappingType!=="AllSame"&&(x=Sg(g,i,m,e.material)[0]),e.uv&&e.uv.forEach(function(S,w){const T=Sg(g,i,m,S);c[w]===void 0&&(c[w]=[]),c[w].push(T[0]),c[w].push(T[1])}),r++,_&&(p.genFace(t,e,o,x,a,l,c,u,d,r),i++,r=0,o=[],a=[],l=[],c=[],u=[],d=[])}),t}genFace(e,t,i,r,s,o,a,l,c,u){for(let d=2;d<u;d++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(d-1)*3]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+2]]),e.vertex.push(t.vertexPositions[i[d*3]]),e.vertex.push(t.vertexPositions[i[d*3+1]]),e.vertex.push(t.vertexPositions[i[d*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(d-1)*4]),e.vertexWeights.push(l[(d-1)*4+1]),e.vertexWeights.push(l[(d-1)*4+2]),e.vertexWeights.push(l[(d-1)*4+3]),e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(d-1)*4]),e.weightsIndices.push(c[(d-1)*4+1]),e.weightsIndices.push(c[(d-1)*4+2]),e.weightsIndices.push(c[(d-1)*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(d-1)*3]),e.colors.push(o[(d-1)*3+1]),e.colors.push(o[(d-1)*3+2]),e.colors.push(o[d*3]),e.colors.push(o[d*3+1]),e.colors.push(o[d*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(d-1)*3]),e.normal.push(s[(d-1)*3+1]),e.normal.push(s[(d-1)*3+2]),e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2])),t.uv&&t.uv.forEach(function(p,m){e.uvs[m]===void 0&&(e.uvs[m]=[]),e.uvs[m].push(a[m][0]),e.uvs[m].push(a[m][1]),e.uvs[m].push(a[m][(d-1)*2]),e.uvs[m].push(a[m][(d-1)*2+1]),e.uvs[m].push(a[m][d*2]),e.uvs[m].push(a[m][d*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(o){o.rawTargets.forEach(function(a){const l=Rt.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,i,r,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let g=0;g<l.length;g++){const x=l[g]*3;u[x]=a[g*3],u[x+1]=a[g*3+1],u[x+2]=a[g*3+2]}const d={vertexIndices:o,vertexPositions:u},p=this.genBuffers(d),m=new He(p.vertex,3);m.name=s||i.attrName,m.applyMatrix4(r),e.morphAttributes.position.push(m)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(RI===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new dt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new dt;const i=t-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let d=0,p=o.length;d<p;d+=4)s.push(new Dt().fromArray(o,d));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let d=0;d<i;++d)s.push(s[d])}const u=new RI(i,r,s,a,l).getPoints(s.length*12);return new dt().setFromPoints(u)}}class Wre{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(Rt.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Rt.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=Rt.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(Kre),values:t[i].KeyValueFloat.a},s=Bn.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const t=Rt.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],o=Bn.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const d=Bn.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(d!==void 0){const p=Rt.Objects.Model[d.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const m={modelName:p.attrName?Ct.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};$i.traverse(function(g){g.ID===p.id&&(m.transform=g.matrix,g.userData.transformData&&(m.eulerOrder=g.userData.transformData.eulerOrder))}),m.transform||(m.transform=new Ue),"PreRotation"in p&&(m.preRotation=p.PreRotation.value),"PostRotation"in p&&(m.postRotation=p.PostRotation.value),s[c]=m}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const d=Bn.get(l.ID).parents.filter(function(v){return v.relationship!==void 0})[0].ID,p=Bn.get(d).parents[0].ID,m=Bn.get(p).parents[0].ID,g=Bn.get(m).parents[0].ID,x=Rt.Objects.Model[g],_={modelName:x.attrName?Ct.sanitizeNodeName(x.attrName):"",morphName:Rt.Objects.Deformer[d].attrName};s[c]=_}s[c][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=Rt.Objects.AnimationStack,i={};for(const r in t){const s=Bn.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:o}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new Zl(e.name,-1,t)}generateTracks(e){const t=[];let i=new k,r=new zn,s=new k;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new ps().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,i);return new ql(e+"."+r,s,o)}generateRotationTrack(e,t,i,r,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(zr.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(zr.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(zr.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,i);r!==void 0&&(r=r.map(zr.degToRad),r.push(o),r=new ps().fromArray(r),r=new zn().setFromEuler(r)),s!==void 0&&(s=s.map(zr.degToRad),s.push(o),s=new ps().fromArray(s),s=new zn().setFromEuler(s).invert());const c=new zn,u=new ps,d=[];for(let p=0;p<l.length;p+=3)u.set(l[p],l[p+1],l[p+2],o),c.setFromEuler(u),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(d,p/3*4);return new Fo(e+".quaternion",a,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=$i.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Ql(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==r&&(t[i]=o,r=o,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const u=t.x.values[o];s.push(u),r[0]=u}else s.push(r[0]);if(a!==-1){const u=t.y.values[a];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=t.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],r=e.values[t]-i,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=i+a;const c=e.times[t-1],d=(e.times[t]-c)/o;let p=c+d;const m=[],g=[];for(;p<e.times[t];)m.push(p),p+=d,g.push(l),l+=a;e.times=BI(e.times,t,m),e.values=BI(e.values,t,g)}}}}class $re{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Xk,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):c?t.parseNodeProperty(r,c,i[++s]):u?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in a?(i==="PoseNode"?a.PoseNode.push(s):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),o.id!==""&&(a[i][o.id]=s)):typeof o.id=="number"?(a[i]={},a[i][o.id]=s):i!=="Properties70"&&(i==="PoseNode"?a[i]=[s]:a[i]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let d=s.split(",").slice(3);d=d.map(function(p){return p.trim().replace(/^"/,"")}),r="connections",s=[c,u],Qre(s,d),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=o1(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=o1(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=o1(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class jre{parse(e){const t=new PI(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new Xk;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const l=[];for(let p=0;p<s;p++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const p=this.parseNode(e,t);p!==null&&this.parseSubNode(a,i,p)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),d!==""&&(i.attrType=d),a!==""&&(i.name=a),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){t[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const o=i.propertyList[2],a=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:s,type2:o,flag:a,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=qie(new Uint8Array(e.getArrayBuffer(o))),l=new PI(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class PI{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),vr.decodeText(new Uint8Array(t))}}class Xk{add(e,t){this[e]=t}}function Xre(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===Yk(n,0,e.length)}function Jre(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function II(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Kre(n){return n/46186158e3}const Yre=[];function Sg(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,o=s+i.dataSize;return qre(Yre,i.buffer,s,o)}const s1=new ps,nu=new k;function Jk(n){const e=new Ue,t=new Ue,i=new Ue,r=new Ue,s=new Ue,o=new Ue,a=new Ue,l=new Ue,c=new Ue,u=new Ue,d=new Ue,p=new Ue,m=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(nu.fromArray(n.translation)),n.preRotation){const B=n.preRotation.map(zr.degToRad);B.push(n.eulerOrder),t.makeRotationFromEuler(s1.fromArray(B))}if(n.rotation){const B=n.rotation.map(zr.degToRad);B.push(n.eulerOrder),i.makeRotationFromEuler(s1.fromArray(B))}if(n.postRotation){const B=n.postRotation.map(zr.degToRad);B.push(n.eulerOrder),r.makeRotationFromEuler(s1.fromArray(B)),r.invert()}n.scale&&s.scale(nu.fromArray(n.scale)),n.scalingOffset&&a.setPosition(nu.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(nu.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(nu.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(nu.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(d.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const g=t.clone().multiply(i).multiply(r),x=new Ue;x.extractRotation(u);const _=new Ue;_.copyPosition(u);const v=_.clone().invert().multiply(u),A=x.clone().invert().multiply(v),S=s,w=new Ue;if(m===0)w.copy(x).multiply(g).multiply(A).multiply(S);else if(m===1)w.copy(x).multiply(A).multiply(g).multiply(S);else{const N=new Ue().scale(new k().setFromMatrixScale(d)).clone().invert(),j=A.clone().multiply(N);w.copy(x).multiply(g).multiply(j).multiply(S)}const T=c.clone().invert(),C=o.clone().invert();let R=e.clone().multiply(l).multiply(c).multiply(t).multiply(i).multiply(r).multiply(T).multiply(a).multiply(o).multiply(s).multiply(C);const D=new Ue().copyPosition(R),P=u.clone().multiply(D);return p.copyPosition(P),R=p.clone().multiply(w),R.premultiply(u.invert()),R}function Kk(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function o1(n){return n.split(",").map(function(t){return parseFloat(t)})}function Yk(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),vr.decodeText(new Uint8Array(n,e,t))}function Qre(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function qre(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}function BI(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}const a1=new WeakMap;class Zre extends di{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new nr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(a1.has(e)){const l=a1.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),a1.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new dt;e.index&&t.setIndex(new kt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new kt(o,a))}return t}_loadLibrary(e,t){const i=new nr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=ese.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function ese(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const d=u.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=t(d,p,m,c),x=g.attributes.map(_=>_.array.buffer);g.index&&x.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},x)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,c){const u=c.attributeIDs,d=c.attributeTypes;let p,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(g===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const x={index:null,attributes:[]};for(const _ in u){const v=self[d[_]];let A,S;if(c.useUniqueIDs)S=u[_],A=a.GetAttributeByUniqueId(p,S);else{if(S=a.GetAttributeId(p,o[u[_]]),S===-1)continue;A=a.GetAttribute(p,S)}x.attributes.push(r(o,a,p,_,v,A))}return g===o.TRIANGULAR_MESH&&(x.index=i(o,a,p)),o.destroy(p),x}function i(o,a,l){const u=l.num_faces()*3,d=u*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,u).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,c,u,d){const p=d.num_components(),g=l.num_points()*p,x=g*u.BYTES_PER_ELEMENT,_=s(o,u),v=o._malloc(x);a.GetAttributeDataArrayForAllPoints(l,d,_,x,v);const A=new u(o.HEAPF32.buffer,v,g).slice();return o._free(v),{name:c,array:A,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Eg;const l1=()=>{if(Eg)return Eg;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let g=0;g<d.length;++g){const x=d.charCodeAt(g);p[g]=x>96?x-71:x>64?x-65:x>47?x+4:x>46?63:62}let m=0;for(let g=0;g<d.length;++g)p[m++]=p[g]<60?i[p[g]]:(p[g]-60)*64+p[++g];return p.buffer.slice(0,m)}function l(d,p,m,g,x,_){const v=s.exports.sbrk,A=m+3&-4,S=v(A*g),w=v(x.length),T=new Uint8Array(s.exports.memory.buffer);T.set(x,w);const C=d(S,m,g,w,x.length);if(C===0&&_&&_(S,A,g),p.set(T.subarray(S,S+m*g)),v(S-v(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Eg={ready:o,supported:!0,decodeVertexBuffer(d,p,m,g,x){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,g,s.exports[c[x]])},decodeIndexBuffer(d,p,m,g){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,g)},decodeIndexSequence(d,p,m,g){l(s.exports.meshopt_decodeIndexSequence,d,p,m,g)},decodeGltfBuffer(d,p,m,g,x,_){l(s.exports[u[x]],d,p,m,g,s.exports[c[_]])}},Eg};let wg=null;function Qk(n,e,t){return i=>{t&&t(i),n&&(wg||(wg=new Zre),wg.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),i.setDRACOLoader(wg)),e&&i.setMeshoptDecoder(typeof l1=="function"?l1():l1)}}function ly(n,e=!0,t=!0,i){return Qa(gM,n,Qk(e,t,i))}ly.preload=(n,e=!0,t=!0,i)=>Qa.preload(gM,n,Qk(e,t,i));ly.clear=n=>Qa.clear(gM,n);function Y0(n){return Qa(vM,n)}Y0.preload=n=>Qa.preload(vM,n);Y0.clear=n=>Qa.clear(vM,n);function tse(n,e){const t=I.useRef(),[i]=I.useState(()=>e?e instanceof bt?{current:e}:e:t),[r]=I.useState(()=>new QO(void 0));I.useLayoutEffect(()=>void(r._root=i.current),[r,e]);const s=I.useRef({}),[o]=I.useState(()=>{const a={};return n.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))},configurable:!0})),{ref:i,clips:n,actions:a,names:n.map(l=>l.name),mixer:r}});return ww((a,l)=>r.update(l)),I.useEffect(()=>{const a=i.current;return()=>{s.current={},Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[n]),I.useEffect(()=>()=>{r.stopAllAction()},[r]),o}const nse=I.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:i=1,height:r=1,blur:s=1,far:o=10,resolution:a=512,smooth:l=!0,color:c="#000000",depthWrite:u=!1,renderOrder:d,...p},m)=>{const g=I.useRef(null),x=GR(z=>z.scene),_=GR(z=>z.gl),v=I.useRef(null);i=i*(Array.isArray(n)?n[0]:n||1),r=r*(Array.isArray(n)?n[1]:n||1);const[A,S,w,T,C,R,D]=I.useMemo(()=>{const z=new _r(a,a),$=new _r(a,a);$.texture.generateMipmaps=z.texture.generateMipmaps=!1;const J=new df(i,r).rotateX(Math.PI/2),Q=new Hn(J),ee=new Sv;ee.depthTest=ee.depthWrite=!1,ee.onBeforeCompile=G=>{G.uniforms={...G.uniforms,ucolor:{value:new be(c)}},G.fragmentShader=G.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),G.fragmentShader=G.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const O=new Xr(Dre),W=new Xr(Lre);return W.depthTest=O.depthTest=!1,[z,J,ee,Q,O,W,$]},[a,i,r,n,c]),P=z=>{T.visible=!0,T.material=C,C.uniforms.tDiffuse.value=A.texture,C.uniforms.h.value=z*1/256,_.setRenderTarget(D),_.render(T,v.current),T.material=R,R.uniforms.tDiffuse.value=D.texture,R.uniforms.v.value=z*1/256,_.setRenderTarget(A),_.render(T,v.current),T.visible=!1};let B=0,N,j;return ww(()=>{v.current&&(e===1/0||B<e)&&(B++,N=x.background,j=x.overrideMaterial,g.current.visible=!1,x.background=null,x.overrideMaterial=w,_.setRenderTarget(A),_.render(x,v.current),P(s),l&&P(s*.4),_.setRenderTarget(null),g.current.visible=!0,x.overrideMaterial=j,x.background=N)}),I.useImperativeHandle(m,()=>g.current,[]),I.createElement("group",Cn({"rotation-x":Math.PI/2},p,{ref:g}),I.createElement("mesh",{renderOrder:d,geometry:S,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},I.createElement("meshBasicMaterial",{transparent:!0,map:A.texture,opacity:t,depthWrite:u})),I.createElement("orthographicCamera",{ref:v,args:[-i/2,i/2,r/2,-r/2,0,o]}))});function ise(n){const{animation:e}=n,{nodes:t,materials:i}=ly("models/Avatar.glb"),r=I.useRef(null),{headFollow:s,cursorFollow:o}=Nk({headFollow:!1,cursorFollow:!1}),{animations:a}=Y0("animations/Dance.fbx"),{animations:l}=Y0("animations/Idle.fbx");a[0].name="Dance",l[0].name="Idle";const{actions:c}=tse([l[0],a[0]],r);return I.useEffect(()=>{var u;return(u=c[e])==null||u.reset().play(),()=>{var d;(d=c[e])==null||d.reset().fadeOut(.5)}},[e]),ww(u=>{var d,p;if(s&&((d=r==null?void 0:r.current)==null||d.getObjectByName("Head").lookAt(u.camera.position)),o){const m=new k(u.mouse.x,u.mouse.y,1);(p=r==null?void 0:r.current)==null||p.getObjectByName("Head").lookAt(m)}}),I.useEffect(()=>{console.log(r.current)},[]),he.jsxs("group",{...n,dispose:null,ref:r,scale:2.5,children:[he.jsx("primitive",{object:t.Hips}),he.jsx("skinnedMesh",{geometry:t.Wolf3D_Body.geometry,material:i.Wolf3D_Body,skeleton:t.Wolf3D_Body.skeleton}),he.jsx("skinnedMesh",{geometry:t.Wolf3D_Outfit_Bottom.geometry,material:i.Wolf3D_Outfit_Bottom,skeleton:t.Wolf3D_Outfit_Bottom.skeleton}),he.jsx("skinnedMesh",{geometry:t.Wolf3D_Outfit_Footwear.geometry,material:i.Wolf3D_Outfit_Footwear,skeleton:t.Wolf3D_Outfit_Footwear.skeleton}),he.jsx("skinnedMesh",{geometry:t.Wolf3D_Outfit_Top.geometry,material:i.Wolf3D_Outfit_Top,skeleton:t.Wolf3D_Outfit_Top.skeleton}),he.jsx("skinnedMesh",{geometry:t.Wolf3D_Hair.geometry,material:i.Wolf3D_Hair,skeleton:t.Wolf3D_Hair.skeleton}),he.jsx("skinnedMesh",{geometry:t.Wolf3D_Glasses.geometry,material:i.Wolf3D_Glasses,skeleton:t.Wolf3D_Glasses.skeleton}),he.jsx("skinnedMesh",{geometry:t.EyeLeft.geometry,material:i.Wolf3D_Eye,skeleton:t.EyeLeft.skeleton}),he.jsx("skinnedMesh",{geometry:t.EyeRight.geometry,material:i.Wolf3D_Eye,skeleton:t.EyeRight.skeleton}),he.jsx("skinnedMesh",{geometry:t.Wolf3D_Head.geometry,material:i.Wolf3D_Skin,skeleton:t.Wolf3D_Head.skeleton}),he.jsx("skinnedMesh",{geometry:t.Wolf3D_Teeth.geometry,material:i.Wolf3D_Teeth,skeleton:t.Wolf3D_Teeth.skeleton})]})}ly.preload("models/Avatar.glb");function rse(n,{whileHover:e,onHoverStart:t,onHoverEnd:i,onPointerOver:r,onPointerOut:s},o){return n||!o||!(e||t||i)?{}:{onPointerOver:l=>{var c;(c=o.animationState)===null||c===void 0||c.setActive("whileHover",!0),r&&r(l)},onPointerOut:l=>{var c;(c=o.animationState)===null||c===void 0||c.setActive("whileHover",!1),s&&s(l)}}}function sse(n,{whileTap:e,onTapStart:t,onTap:i,onTapCancel:r,onPointerDown:s},o){const a=i||t||r||e,l=I.useRef(!1),c=I.useRef(null);if(n||!o||!a)return{};function u(){var g;(g=c.current)===null||g===void 0||g.call(c),c.current=null}function d(){var g;return u(),l.current=!1,(g=o.animationState)===null||g===void 0||g.setActive("whileTap",!1),!kw()}function p(g,x){d()&&(i==null||i(g,x))}function m(g,x){d()&&(r==null||r(g,x))}return{onPointerDown:W3((g,x)=>{var _;if(u(),l.current)return;l.current=!0;const v={passive:!(t||i||r||s)};c.current=bo(ys(window,"pointerup",p,v),ys(window,"pointercancel",m,v)),(_=o.animationState)===null||_===void 0||_.setActive("whileTap",!0),s==null||s(g),t==null||t(g,x)})}}const ose=(n,e,t,i,r,s)=>{const o=ase(e);return I.createElement(n,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ref:t},F3(e,!1,!1)),o),{onUpdate:e.onInstanceUpdate}),rse(r,e,s)),sse(r,e,s)))};function ase(n){return I.useMemo(()=>{const e={};for(const t in n){const i=n[t];Gn(i)?e[t]=i.get():Array.isArray(i)&&i.includes(Gn)&&(e[t]=i.map(Vd))}return e},[])}const qk=(n,e)=>t=>(i,r)=>{i[n]===void 0&&(i[n]=new k(e)),i[n].setComponent(t,r)},lse=(n,e)=>t=>(i,r)=>{i[n]===void 0&&(i[n]=new ps(e));const s=i[n];s[t]=r},DI=n=>(e,t)=>{e[n]===void 0&&(e[n]=new be(t)),e[n].set(t)},c1=qk("scale",1),u1=qk("position",0),f1=lse("rotation",0),LI={x:u1(0),y:u1(1),z:u1(2),scale:(n,e)=>{n.scale===void 0&&(n.scale=new k(1)),n.scale.set(e,e,e)},scaleX:c1(0),scaleY:c1(1),scaleZ:c1(2),rotateX:f1("x"),rotateY:f1("y"),rotateZ:f1("z"),color:DI("color"),specular:DI("specular")};function cse(n,e,t){LI[e]?LI[e](n,t[e]):(e==="opacity"&&!n.transparent&&(n.transparent=!0),n[e]=t[e])}const yM=(n,e)=>t=>i=>{const r=i[n];return r?r[t]:e},d1=yM("position",0),Mg=yM("scale",1),h1=yM("rotation",0),OI={x:d1("x"),y:d1("y"),z:d1("z"),scale:Mg("x"),scaleX:Mg("x"),scaleY:Mg("y"),scaleZ:Mg("z"),rotateX:h1("x"),rotateY:h1("y"),rotateZ:h1("z")};function use(n){if(n!==void 0)return n instanceof be?n.getStyle():n}function fse(n,e){return OI[e]?OI[e](n):use(n[e])||0}const dse=["x","y","z"],FI={"position-x":"x","position-y":"y","position-z":"z","rotation-x":"rotateX","rotation-y":"rotateY","rotation-z":"rotateZ","scale-x":"scaleX","scale-y":"scaleY","scale-z":"scaleZ"},Zk=(n,e)=>{const t={};for(const i in n){const r=n[i];if(Gn(r)||Gn(e[i]))t[FI[i]||i]=r;else if(Array.isArray(r))for(let s=0;s<r.length;s++){const o=r[s];if(Gn(o)||Array.isArray(e[i])&&Gn(e[i][s])){const a=FI[i+"-"+dse[s]];t[a]=o}}}return t},hse=()=>({});class pse extends jF{constructor(){super(...arguments),this.type="three"}readValueFromInstance(e,t){return fse(e,t)}getBaseTargetFromProps(){}sortInstanceNodePosition(e,t){return e.id-t.id}makeTargetAnimatableFromInstance(e){var{transition:t,transitionEnd:i}=e,r=Iee(e,["transition","transitionEnd"]);return CF(this,r,{}),Object.assign(Object.assign({},r),{transition:t,transitionEnd:i})}removeValueFromRenderState(){}measureInstanceViewportBox(){return In()}scrapeMotionValuesFromProps(e,t){return Zk(e,t)}build(e,t){for(const i in t)e[i]=t[i]}renderInstance(e,t){for(const i in t)cse(e,i,t)}}const mse=(n,e)=>new pse(e,{}),gse=Nw({scrapeMotionValuesFromProps:Zk,createRenderState:hse}),vse=Object.assign({},RF);function NI(n){return C3({Component:n,preloadedFeatures:vse,useRender:ose,useVisualState:gse,createVisualElement:mse})}const p1=new Map,yse=new Proxy(NI,{get:(n,e)=>(!p1.has(e)&&p1.set(e,NI(e)),p1.get(e))}),kI=n=>{let e;const t=new Set,i=(l,c)=>{const u=typeof l=="function"?l(e):l;if(!Object.is(u,e)){const d=e;e=c??typeof u!="object"?u:Object.assign({},e,u),t.forEach(p=>p(e,d))}},r=()=>e,a={setState:i,getState:r,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{t.clear()}};return e=n(i,r,a),a},xse=n=>n?kI(n):kI;var eU={exports:{}},tU={},nU={exports:{}},iU={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var of=I;function _se(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ase=typeof Object.is=="function"?Object.is:_se,Sse=of.useState,Ese=of.useEffect,wse=of.useLayoutEffect,Mse=of.useDebugValue;function Tse(n,e){var t=e(),i=Sse({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return wse(function(){r.value=t,r.getSnapshot=e,m1(r)&&s({inst:r})},[n,t,e]),Ese(function(){return m1(r)&&s({inst:r}),n(function(){m1(r)&&s({inst:r})})},[n]),Mse(t),t}function m1(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ase(n,t)}catch{return!0}}function Cse(n,e){return e()}var bse=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cse:Tse;iU.useSyncExternalStore=of.useSyncExternalStore!==void 0?of.useSyncExternalStore:bse;nU.exports=iU;var Rse=nU.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy=I,Pse=Rse;function Ise(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Bse=typeof Object.is=="function"?Object.is:Ise,Dse=Pse.useSyncExternalStore,Lse=cy.useRef,Ose=cy.useEffect,Fse=cy.useMemo,Nse=cy.useDebugValue;tU.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=Lse(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Fse(function(){function l(m){if(!c){if(c=!0,u=m,m=i(m),r!==void 0&&o.hasValue){var g=o.value;if(r(g,m))return d=g}return d=m}if(g=d,Bse(u,m))return g;var x=i(m);return r!==void 0&&r(g,x)?g:(u=m,d=x)}var c=!1,u,d,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,i,r]);var a=Dse(n,s[0],s[1]);return Ose(function(){o.hasValue=!0,o.value=a},[a]),Nse(a),a};eU.exports=tU;var kse=eU.exports;const Use=ic(kse),{useSyncExternalStoreWithSelector:zse}=Use;function Hse(n,e=n.getState,t){const i=zse(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return I.useDebugValue(i),i}const UI=n=>{const e=typeof n=="function"?xse(n):n,t=(i,r)=>Hse(e,i,r);return Object.assign(t,e),t},Gse=n=>n?UI(n):UI;function rU(n,e){let t;try{t=n()}catch{return}return{getItem:r=>{var s;const o=l=>l===null?null:JSON.parse(l,e==null?void 0:e.reviver),a=(s=t.getItem(r))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(r,s)=>t.setItem(r,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:r=>t.removeItem(r)}}const Dh=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(i){return Dh(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return Dh(i)(t)}}}},Vse=(n,e)=>(t,i,r)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,v)=>({...v,..._}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return n((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(..._)},i,r);const u=Dh(s.serialize),d=()=>{const _=s.partialize({...i()});let v;const A=u({state:_,version:s.version}).then(S=>c.setItem(s.name,S)).catch(S=>{v=S});if(v)throw v;return A},p=r.setState;r.setState=(_,v)=>{p(_,v),d()};const m=n((..._)=>{t(..._),d()},i,r);let g;const x=()=>{var _;if(!c)return;o=!1,a.forEach(A=>A(i()));const v=((_=s.onRehydrateStorage)==null?void 0:_.call(s,i()))||void 0;return Dh(c.getItem.bind(c))(s.name).then(A=>{if(A)return s.deserialize(A)}).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate)return s.migrate(A.state,A.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return A.state}).then(A=>{var S;return g=s.merge(A,(S=i())!=null?S:m),t(g,!0),d()}).then(()=>{v==null||v(g,void 0),o=!0,l.forEach(A=>A(g))}).catch(A=>{v==null||v(void 0,A)})};return r.persist={setOptions:_=>{s={...s,..._},_.getStorage&&(c=_.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},x(),g||m},Wse=(n,e)=>(t,i,r)=>{let s={storage:rU(()=>localStorage),partialize:x=>x,version:0,merge:(x,_)=>({..._,...x}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...x)},i,r);const u=()=>{const x=s.partialize({...i()});return c.setItem(s.name,{state:x,version:s.version})},d=r.setState;r.setState=(x,_)=>{d(x,_),u()};const p=n((...x)=>{t(...x),u()},i,r);let m;const g=()=>{var x,_;if(!c)return;o=!1,a.forEach(A=>{var S;return A((S=i())!=null?S:p)});const v=((_=s.onRehydrateStorage)==null?void 0:_.call(s,(x=i())!=null?x:p))||void 0;return Dh(c.getItem.bind(c))(s.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate)return s.migrate(A.state,A.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return A.state}).then(A=>{var S;return m=s.merge(A,(S=i())!=null?S:p),t(m,!0),u()}).then(()=>{v==null||v(m,void 0),m=i(),o=!0,l.forEach(A=>A(m))}).catch(A=>{v==null||v(void 0,A)})};return r.persist={setOptions:x=>{s={...s,...x},x.storage&&(c=x.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:x=>(a.add(x),()=>{a.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},s.skipHydration||g(),m||p},$se=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?Vse(n,e):Wse(n,e),jse=$se,Mf=Gse(jse(n=>({color:"#B922E2",page:"HOME",setColor:e=>n({color:e}),setPage:e=>n({page:e})}),{name:"app-storage",storage:rU(()=>localStorage)})),Xse=()=>{const{page:n}=Mf(),[e,t]=I.useState("");return Nk({animation:{value:"Idle",options:["Idle","Dance"]}}),I.useEffect(()=>{n==="HOME"&&t("Dance"),n==="SKILLS"&&t("Idle")},[n]),he.jsx(he.Fragment,{children:he.jsxs("group",{position:[0,-2.5,0],children:[he.jsx("ambientLight",{intensity:1}),he.jsx(nse,{opacity:1,scale:20,blur:1,far:10,resolution:256,color:"#000000"}),he.jsx(yse.group,{animate:{},"rotation-x":-Math.PI/2,children:he.jsx(ise,{animation:e})})]})})},zI=[{title:"Threejs / React Three Fiber",level:75},{title:"React",level:80},{title:"Typescript",level:60},{title:"Nodejs",level:40}],HI=[{title:"Portugus",level:95},{title:"Ingls",level:35},{title:"Mineirs",level:100}],Jse=[{url:"images/projeto1.png",desc:"Este projeto se trata de um jogo criado com o ecosistema ThreeJS, o objetivo  coletar as moedas e acumular pontos enquanto se desvia dos obstculos que te jogam pra fora da plataforma!",linkGithub:"https://github.com/Ryanzitto/THREE-IDK",linkDeploy:"https://ryanzitto.github.io/THREE-IDK/",techs:"THREEJS - R3F - REACT - TAILWIND - ZUSTAND - TYPESCRIPT",id:0},{url:"images/projeto1.png",desc:"Este projeto se trata de um jogo criado com o ecosistema ThreeJS, o objetivo  coletar as moedas e acumular pontos enquanto se desvia dos obstculos que te jogam pra fora da plataforma!",linkGithub:"https://github.com/Ryanzitto/THREE-IDK",linkDeploy:"https://ryanzitto.github.io/THREE-IDK/",techs:"THREEJS - R3F - REACT - TAILWIND - ZUSTAND - TYPESCRIPT",id:1},{url:"images/projeto1.png",desc:"Este projeto se trata de um jogo criado com o ecosistema ThreeJS, o objetivo  coletar as moedas e acumular pontos enquanto se desvia dos obstculos que te jogam pra fora da plataforma!",linkGithub:"https://github.com/Ryanzitto/THREE-IDK",linkDeploy:"https://ryanzitto.github.io/THREE-IDK/",techs:"THREEJS - R3F - REACT - TAILWIND - ZUSTAND - TYPESCRIPT",id:2}],Kse=n=>{const{url:e,desc:t,linkGithub:i,linkDeploy:r,techs:s}=n,o=I.useRef(null),{color:a}=Mf();return I.useEffect(()=>{o.current&&(o.current.style.backgroundColor=a,o.current.style.border=a)},[a]),he.jsx(jn.div,{whileHover:{scale:1.05,transition:{duration:.2}},className:"w-full h-full flex justify-center items-center",children:he.jsxs("div",{className:"bg-white w-[90%] h-full max-h-[170px] lg:max-h-[650px] rounded-md flex lg:flex-col justify-start gap-4",children:[he.jsx("div",{className:"w-full hidden lg:flex",children:he.jsx(jn.img,{initial:{opacity:.9},whileHover:{opacity:1},className:"rounded-t-md w-fit",src:e})}),he.jsx("div",{className:"w-full h-full lg:h-[30%] text-zinc-800 flex justify-center items-center font-medium text-xs lg:text-sm",children:he.jsx("p",{className:"w-[80%] text-center",children:t})}),he.jsxs("div",{className:"w-full h-[30%] flex flex-col gap-4 items-center",children:[he.jsxs("div",{className:"flex gap-4 w-full justify-center items-center mt-4 lg:mt-0",children:[he.jsx("button",{className:"border-2 border-zinc-800/80 p-1 lg:p-2 rounded-md",children:he.jsx("a",{href:i,target:"_blank",className:"text-zinc-800/90 font-black text-sm lg:text-md tracking-wider",children:"GITHUB"})}),he.jsx("button",{className:" border-2 border-zinc-800 bg-zinc-800  p-1 lg:p-2 rounded-md",ref:o,children:he.jsx("a",{href:r,target:"_blank",className:"text-white font-black text-sm lg:text-md tracking-wider",children:"DEPLOY"})})]}),he.jsx("div",{className:"w-[80%] flex flex-col justify-center items-center text-zinc-800 gap text-center",children:he.jsx("p",{className:"text-zinc-800/80 font-extrabold text-sm lg:text-md",children:s})})]})]})})},xM=n=>{const{children:e}=n;return he.jsx("section",{className:"h-screen w-screen max-w-screen-2xl mx-auto flex flex-col items-center justify-center",children:e})},Yse=()=>{const{color:n,setColor:e}=Mf(),[t,i]=I.useState(!1),r=I.useRef(null);I.useEffect(()=>{r.current&&(r.current.style.backgroundImage=`linear-gradient(120deg, ${n}, #1b1b1b)`,r.current.style.webkitBackgroundClip="text",r.current.style.color="transparent")},[n]);const s=()=>{i(!t)};return he.jsx(xM,{children:he.jsxs("div",{className:"flex flex-col w-screen h-screen justify-center items-center",children:[he.jsx(_M,{}),he.jsxs("div",{className:"flex lg:flex-row flex-col w-full h-full justify-center items-center",children:[he.jsx("div",{className:"lg:w-1/2 w-full  lg:h-full h-1/2 flex justify-center items-center lg:pl-10 text-white",children:he.jsxs(jn.div,{"data-testid":"div",whileInView:"visible",initial:{opacity:0},variants:{visible:{opacity:1,transition:{duration:1,delay:0}}},className:"w-full h-full flex justify-center items-center lg:items-start flex-col gap-2 lg:mb-32",children:[he.jsx(jn.header,{initial:{y:-100},whileInView:{y:0},transition:{duration:1,delay:0},className:"",children:he.jsxs("div",{className:"flex flex-col justify-center text-sm font-black md:text-xl",children:[he.jsx("span",{className:"lg:text-xl min-[1350px]:text-2xl",children:" OL, EU SOU"}),he.jsx("span",{className:"lg:text-xl min-[1350px]:text-2xl",children:"RYAN HENRIQUE"})]})}),he.jsxs("div",{className:"w-full flex flex-col justify-center items-center lg:items-start text-center",children:[he.jsxs(jn.div,{initial:{y:-100},whileInView:{y:0},transition:{duration:1,delay:0},className:"w-full flex flex-col justify-center items-center lg:items-start text-4xl md:text-5xl font-black lg:mt-4 min-[1350px]:text-6xl",children:[he.jsx("div",{className:"italic",children:he.jsx("h1",{className:"",children:"DESENVOLVEDOR"})}),he.jsxs("div",{className:"flex gap-2 md:gap-3 2xl:gap-6",children:[he.jsx("div",{className:"italic",children:he.jsx("h1",{className:"",children:"WEB"})}),he.jsx("div",{children:he.jsx("h1",{ref:r,className:"",children:"FRONT-END"})})]})]}),he.jsxs(jn.div,{"data-testid":"about1",initial:{y:-100},whileInView:{y:0},transition:{duration:1,delay:0},className:"w-[80%] min-[1350px]:w-[90%] text-sm min-[400px]:text-md min-[450px]:pt-4 md:text-lg lg:text-left lg:mt-4 font-medium min-[1350px]:text-xl",children:[he.jsxs("p",{children:["Sou um jovem desenvolvedor muito criativo, interessado em criar experincias de usuario incrveis, agradveis, escalveis ",he.jsx("br",{}),"e performticas. Busco o crescimento profissional e pessoal."]}),he.jsxs("p",{children:["possuo habilidade de adaptabilidade, comunicao clara,",he.jsx("br",{})," e uma intensa vontade de aprender."]}),he.jsx("p",{className:"lg:text-left",children:"Que tal trabalharmos juntos? "})]})]})]})}),he.jsx("div",{className:"lg:w-1/2 w-full lg:h-full h-1/2 flex justify-center items-center lg:pr-10",children:he.jsx(jn.div,{whileInView:"visible",initial:{opacity:0},variants:{visible:{opacity:1,transition:{duration:1,delay:0}}},className:"w-full h-full flex flex-col items-center justify-center lg:mb-32",children:he.jsxs(jn.div,{initial:{opacity:0,y:-100},whileInView:{opacity:1,y:0},transition:{duration:1,delay:0},className:"text-white font-medium text-center md:text-center text-md flex flex-col items-center lg:items-end",children:[he.jsx("p",{"data-testid":"about2",className:"w-[80%] min-[1350px]:w-[90%] text-sm min-[400px]:text-md  md:text-lg lg:text-right min-[1350px]:text-xl",children:"H cerca de 10 meses eu venho me dedicando aos estudos de programao , sempre aplicando em projetos pessoais os conceitos aprendidos. possuo habilidades no Frontend e conhecimentos bsicos de Backend."}),he.jsxs(jn.div,{className:"pt-4 lg:pt-12 flex flex-col items-center lg:items-end justify-center gap-4 lg:gap-6 font-extrabold",children:[he.jsxs(jn.button,{whileHover:{x:5,transition:{duration:.5}},className:"text-xs xl:text-xl md:text-lg bg-white p-3 text-zinc-700 rounded-md flex gap-2 tracking-wide justify-center items-center",children:[he.jsx("a",{href:"https://www.linkedin.com/in/ryan-henrique-1b4075233/",target:"blank",children:"VER MEU LINKEDIN"}),he.jsx("img",{className:"w-6 opacity-80",src:"images/linkedin.png"})]}),he.jsxs(jn.button,{whileHover:{x:5,transition:{duration:.5}},className:"text-xs xl:text-xl md:text-lg bg-white p-3 text-zinc-700 rounded-md flex gap-2 tracking-wide justify-center items-center",children:[he.jsx("a",{href:"https://github.com/Ryanzitto/",target:"blank",children:"VER MEU GITHUB"}),he.jsx("img",{className:"w-6 opacity-80",src:"images/github.png"})]}),he.jsxs("div",{className:"flex flex-col md:text-2xl xl:text-2xl items-center justify-center gap-2  text-lg lg:text-xl",children:[he.jsxs("div",{className:"flex items-center gap-2 ",children:[he.jsx("img",{onClick:s,className:"w-6 h-6 cursor-pointer",src:t===!1?"images/heart.png":"images/heart-filled.png"}),he.jsx("span",{children:"432 LIKES"})]}),he.jsxs("div",{className:"flex gap-2 w-full justify-end items-center",children:[he.jsx("span",{className:"md:text-lg tracking-wider",children:"COR:"}),he.jsx("input",{"data-testid":"input-color",className:"w-6 h-6  border-0 bg-transparent cursor-pointer",type:"color",value:n,onChange:o=>e(o.target.value)})]})]})]})]})})})]})]})})},Qse=()=>{const{color:n}=Mf(),e=zI.map(()=>I.useRef(null)),t=HI.map(()=>I.useRef(null));return I.useEffect(()=>{e.forEach(i=>{i.current&&(i.current.style.backgroundColor=n)}),t.forEach(i=>{i.current&&(i.current.style.backgroundColor=n)})},[n,e,t]),he.jsxs(xM,{children:[he.jsx(_M,{}),he.jsx("div",{className:"h-full flex w-full gap-20 lg:gap-0 flex-col justify-center items-center text-white",children:he.jsx("div",{className:"flex w-full h-full flex-col justify-center items-center",children:he.jsxs("div",{className:"flex flex-col lg:flex-row w-full h-full justify-start items-center gap-10 lg:gap-0 mt-6 lg:mt-0 lg:mb-20",children:[he.jsxs(jn.div,{whileInView:"visible",initial:{opacity:0},variants:{visible:{opacity:1,transition:{duration:1,delay:0}}},className:"w-1/2 flex flex-col justify-center items-center",children:[he.jsx("h2",{className:"font-bold text-2xl md:text-4xl",children:"HABILIDADES"}),he.jsx("div",{className:"mt-8 space-y-4",children:zI.map((i,r)=>he.jsxs("div",{className:"w-64",children:[he.jsx(jn.h3,{className:"text-xl font-bold",initial:{opacity:0},variants:{visible:{opacity:1,transition:{duration:1,delay:.2}}},children:i.title}),he.jsx("div",{className:"h-2 w-full bg-gray-200 rounded-full mt-2 flex justify-start",children:he.jsx(jn.div,{className:"h-full rounded-full",ref:e[r],style:{width:`${i.level}%`},initial:{scaleX:0,originX:0},variants:{visible:{scaleX:1,transition:{duration:1,delay:.2}}}})})]},r))})]}),he.jsxs(jn.div,{whileInView:"visible",initial:{opacity:0},variants:{visible:{opacity:1,transition:{duration:1,delay:0}}},className:"w-1/2 flex flex-col justify-center items-center",children:[he.jsx("h2",{className:"text-2xl font-bold md:text-4xl",children:"LNGUAS"}),he.jsx("div",{className:" mt-8 space-y-4",children:HI.map((i,r)=>he.jsxs("div",{className:"w-64",children:[he.jsx(jn.h3,{className:"text-xl font-bold",initial:{opacity:0},variants:{visible:{opacity:1,transition:{duration:1,delay:.2}}},children:i.title}),he.jsx("div",{className:"h-2 w-full bg-gray-200 rounded-full mt-2",children:he.jsx(jn.div,{ref:t[r],className:"h-full rounded-full ",style:{width:`${i.level}%`},initial:{scaleX:0,originX:0},variants:{visible:{scaleX:1,transition:{duration:1,delay:.2}}}})})]},r))})]})]})})})]})},qse=()=>he.jsxs(xM,{children:[he.jsx(_M,{}),he.jsx(jn.div,{whileInView:"visible",initial:{opacity:0},variants:{visible:{opacity:1,transition:{duration:1,delay:0}}},className:"flex lg:flex-row flex-col w-full h-full justify-center items-center",children:he.jsx("div",{className:"w-[95%] h-[90%] flex lg:flex-row flex-col",children:Jse.map((n,e)=>he.jsx(jn.div,{initial:{y:-100},variants:{visible:{y:0,transition:{duration:1,delay:.3*e}}},className:" w-full h-1/3 lg:w-1/3 lg:h-full",children:he.jsx(Kse,{url:n.url,desc:n.desc,linkGithub:n.linkGithub,linkDeploy:n.linkDeploy,techs:n.techs})},n.id))})})]}),_M=()=>{const{setPage:n,page:e,color:t}=Mf(),i=I.useRef(null),r=I.useRef(null),s=I.useRef(null);return I.useEffect(()=>{i.current&&e==="HOME"&&(i.current.style.backgroundColor=t),r.current&&e==="SKILLS"&&(r.current.style.backgroundColor=t),s.current&&e==="PROJECTS"&&(s.current.style.backgroundColor=t)},[e,t]),he.jsx("header",{className:"w-full h-20 text-white font-black flex justify-center items-center z-10",children:he.jsxs("ul",{className:"flex gap-6",children:[he.jsxs("li",{className:"flex justify-center items-center flex-col",children:[he.jsx("div",{ref:i,className:`bg-red-500 w-2 h-2 rounded-full animate-pulse ${e==="HOME"?"":"bg-transparent"}`}),he.jsx("span",{className:"cursor-pointer",onClick:()=>n("HOME"),children:"INICIO"})]}),he.jsxs("li",{className:"flex justify-center items-center flex-col",children:[he.jsx("div",{ref:r,className:`bg-red-500 w-2 h-2 rounded-full animate-pulse ${e==="SKILLS"?"":"bg-transparent"}`}),he.jsx("span",{className:"cursor-pointer",onClick:()=>n("SKILLS"),children:"HABILIDADES"})]}),he.jsxs("li",{className:"flex justify-center items-center flex-col",children:[he.jsx("div",{ref:s,className:`bg-red-500 w-2 h-2 rounded-full animate-pulse ${e==="PROJECTS"?"":"bg-transparent"}`}),he.jsx("span",{className:"cursor-pointer",onClick:()=>n("PROJECTS"),children:"PROJETOS"})]})]})})},Zse=()=>{const{page:n}=Mf();return he.jsxs("div",{className:"flex flex-col items-center justify-center w-screen",children:[n==="HOME"?he.jsx(Yse,{}):null,n==="SKILLS"&&he.jsx(Qse,{}),n==="PROJECTS"&&he.jsx(qse,{})]})},eoe={type:"spring",mass:5,stiffness:500,damping:50,restDelta:1e-4};function toe(){return he.jsx("div",{className:"w-screen h-screen class relative",children:he.jsxs("div",{className:"bg-zinc-800/80 absolute w-screen h-screen",children:[he.jsxs(tK,{transition:{...eoe},children:[he.jsx(tj,{shadows:!0,camera:{position:[0,3,10],fov:42},children:he.jsx(Xse,{})}),he.jsx("div",{className:"absolute class2",children:he.jsx(Zse,{})})]}),he.jsx(Fk,{hidden:!0})]})})}g1.createRoot(document.getElementById("root")).render(he.jsx(K.StrictMode,{children:he.jsx(toe,{})}));
